{"version":3,"sources":["src/js/utilities.js","src/js/alert.js","src/js/helpers/inputMask.js","src/js/select.js","src/js/button.js","src/js/overflow.js","src/js/carousel.js","src/js/collapse.js","src/js/contact-drawer.js","src/js/dropdown.js","src/js/modal.js","src/js/filter.js","src/js/form.js","src/js/linkpicker.js","src/js/masthead.js","src/js/helpers/resizeElement.js","src/js/nav.js","src/js/pagination.js","src/js/popover.js","src/js/product-stack.js","src/js/progress.js","src/js/slider.js","src/js/tab.js","src/js/helpers/columns.js","src/js/helpers/rows.js","src/js/table.js","src/js/tooltip.js","src/js/dds-all.js"],"names":["global","factory","exports","module","define","amd","self","UIC","this","DOC","document","HTML","documentElement","globalObject","window","prefix","ddsSpace","supportTransitions","transitionEndEvent","transitionDuration","tipPositions","isIPhone","test","navigator","platform","isIOS","userAgent","maxTouchPoints","MSStream","isIE","isSafari","isEdge","isFirefox","direction","chrome","webstore","runtime","UP","RIGHT","DOWN","LEFT","NONE","getFullScreenOverlay","overlay","getElementById","console","warn","getElementsByClassName","element","classNAME","slice","call","getSibling","selector","firstChar","charAt","selectorSubstring","substr","nextElementSibling","classList","contains","id","tagName","toLowerCase","getFocusableElements","Array","prototype","querySelectorAll","filter","filterCollapsedParents","parentElement","getAttribute","getNextFocusableElement","getComputedStyle","getPropertyValue","indexOf","tabIndex","focusable","length","ariaAnnounce","theMessage","msgEl","randomNum","Math","floor","random","body","appendChild","createElement","style","aria-live","setTimeout","textContent","removeChild","getClosest","parentsOnly","parentNode","querySelector","previousElementSibling","one","event","handler","addEventListener","handlerWrapper","e","removeEventListener","getTransitionDurationFromElement","duration","parseFloat","isNaN","emulateTransitionEnd","called","uicoreCustomEvent","componentName","eventName","related","details","evt","createEvent","initCustomEvent","CustomEvent","bubbles","detail","relatedTarget","dispatchEvent","setFocus","focus","setActive","styleTip","link","position","parent","useArrow","maxWidth","windowWidth","windowHeight","rect","scroll","y","pageYOffset","x","pageXOffset","linkDimensions","offsetWidth","offsetHeight","topPosition","leftPosition","arrowTop","arrowLeft","arrowWidth","arrowHeight","posChanged","elMargin","elementDimensions","w","h","isPopover","arrow","halfTopExceed","halfLeftExceed","halfRightExceed","halfBottomExceed","topExceed","leftExceed","bottomExceed","rightExceed","className","replace","Number","margin","match","rectLeft","rectTop","handleFirstTab","keyCode","add","handleMouseDownOnce","remove","isObject","val","Object","toString","isArray","isJson","str","t","JSON","parse","each","arr","fn","scope","n","hasOwnProperty","sortItems","a","b","c","d","f","value","g","i","innerHTML","attr","setAttribute","classAdd","elem","classes","clazz","newClasses","classRemove","debounce","func","wait","immediate","timeout","context","args","arguments","callNow","clearTimeout","apply","altFind","callback","ret","validateNum","num","defaultVal","parseInt","jsonOptionsInit","options","jsonParams","dataset","renderSvg","svg","attributes","svgWrapper","createElementNS","key","elm","svgElem","setAttributeNS","name","show","flush","el","ie","NodeList","hasChildNodes","firstChild","getText","text","div","findText","childNodes","cNode","nodeType","data","Alert","HTMLElement","closeButton","dismissMessage","clickHandler","target","toggle","InputMask","wrap","mNum","spacing","hasValue","charSet","charset","cursorMin","handleValueChange","cursor","mask","italic","selectionEnd","handleCurrentValue","setValueOfMask","max","setSelectionRange","j","isInt","isLetter","strippedValue","isCharsetPresent","placeholder","l","newValue","matchesNumber","matchesLetter","undefined","validateProgress","validExample","pattern","RegExp","testValue","toUpperCase","Error","class","aria_hidden","emphasis","tClass","pTxt","createTextNode","errorDiv","removeAttribute","insertBefore","createShell","s","char","initKeyboardEvent","KeyboardEvent","cancelable","shiftKey","Spinbox","spinmin","spindefault","spinmax","spinstep","msg","input","plusCtrl","minusCtrl","handleKeypressEvent","charCode","which","blur","preventDefault","newInput","abs","handleCtrlClickEvent","control","temp","handleDisabling","hasAttribute","click","controls","DatePicker","datesFilter","pastDates","availableWeekDays","day","notBeforeDate","Date","notAfterDate","button_prev","button_next","focusableEls","currentSelected","calendarWrapper","calendarBtn","dateInput","calendar","pickerBtn","form","monthEl","smallMedia","matchMedia","tempSelected","todaysDate","monthLabel","datePtr","monthsTexts","freeze","TAB","ENTER","ESC","SPACE","PAGEUP","PAGEDOWN","END","HOME","setFocusableElements","toggleCalendar","matches","createOverlay","repositionIfNeeded","dateText","validity","valid","checkDateValidity","getFullYear","setFullYear","getMonth","setMonth","createMonth","newDateElem","nextBtn","getTime","resetToDefaultDate","blurHandler","removeActiveClass","removeOverlay","right","top","getBoundingClientRect","bottom","innerHeight","dist","activeElement","getWeekDay","createDay","date","isAvailable","newDayElem","dateElem","getDate","dateKeydownHandler","available_week_day","getDay","stringify","overflow","visibility","removeTempClass","firstElementChild","defaultDate","getNearestAvailableDay","clearCalendar","currentMonth","monthCheckBefore","setDate","daysPrev","prevDate","monthCheckAfter","daysAfter","futureDate","datas","calendarDate","setNewDate","monthPrev","monthNext","initEvent","setNewTempDate","currentDate","getNextAvailableDay","oldSelected","children","nextDate","nearestRight","nearestLeft","daysRight","daysLeft","od1","od2","prevSelected","buttonKeydownHandler","inputHandler","errorMsg","display","setCustomValidity","init","wrapper","bottomMenu","createCalendar","prevMonthDate","nextMonthDate","destroy","reset","setHours","checkValidity","stopPropagation","defaultDay","defaultMonth","BarSelect","selects","select","mouseOverHandler","focusHandler","currentTarget","isInViewport","scrollIntoView","bounding","left","clientHeight","innerWidth","clientWidth","Button","pxToMove","btnWidth","onEl","offEl","circleEl","btnToggle","toggled","checked","label","labels","type","otherLabel","otherInput","toggleOff","transform","toggleOn","widthOff","width","widthOn","ButtonFilter","inactiveFilterItem","activeFilterItem","lastActiveItem","focusInEventHandler","filterItem","parentFieldset","filterItems","Overflow","lazyload","responsive","overflowElement","overflowContainer","overflowChildren","overflowChildRight","overflowChildLeft","leftCtrl","rightCtrl","ctrlWidth","containerLeft","containerRight","centered","atLeftEnd","atRightEnd","centeredOffset","containerHeight","containerWidth","handleResize","getChildrenWidth","setLeftAndRightIndex","addHeightStyle","offsetLeft","currentOffset","pageRight","handleClickEvent","isRight","controlClick","rightChild","rightElementEdge","leftChild","tabLeft","contSpace","remainder","child","getMargin","push","currentStyle","convertRemToPixels","marginLeft","marginRight","els","height","overflowChildLeftSet","offSet","useCentered","toggleCentered","setContainerLeftRight","idx","childLeft","setMinimumWidth","minWidth","totalItems","hasRightControl","hasLeftControl","rem","computed","split","fontSize","ceil","setCtrlWidth","frameListener","requestAnimationFrame","leftSvg","aria-hidden","rightSvg","createArrowHtml","lazyLoad","getCurrentDetails","clickRight","clickLeft","clickEnd","clickHome","Carousel","interval","pause","keyboard","mosaic","visibilityState","smallMediaSize","mouseHover","stopAutoRotate","index","timer","isSliding","slides","total","slideDirection","leftArrow","rightArrow","svgIndicator","svgIndicators","btnIndicator","btnIndicators","indicator","indicators","pauseHandler","clearTimer","resumeHandler","cycle","indicatorHandler","eventTarget","slideTo","controlsHandler","srcElement","setActivePage","pageIndex","clearInterval","setInterval","viewportHeight","next","activeItem","getActiveIndex","slide-to","imgTag","backgroundImage","src","ieMosaicPolyfill","addListener","swipe","start","end","params","min","getTouch","screenX","screenY","touches","downListener","touch","moveListener","upListener","swipeInit","childIndicator","FilmstripCarousel","itemsView","handleOverflowChange","updateItemsView","clickEventHandler","rightNumber","leftNumber","success","Collapse","href","activeCollapse","showAllBtn","hideAllBtn","accordion","collapse","isClickable","closeAction","collapseElement","isAnimating","scrollHeight","hide","showHideAll","ContactDrawer","openTime","closedTime","transitionTime","tab","content","visible","cancelAutomation","toggleAction","openAction","hidden","timerAction","toggleOptionsStr","contactDrawer","toggleOptions","OpenTimeInSeconds","CloseTimeInSeconds","TransitionTimeInMilliseconds","setDrawerToggleOptions","transition","Dropdown","persist","menuItems","itemsChecked","currentText","filters","isMultiSelect","menu","preventEmptyAnchor","anchor","toggleDismiss","open","dismissHandler","preventScroll","windowClickHandler","hasData","filterInput","splice","recountChecked","keyHandler","isMenuOpen","isSameElement","isInsideMenu","isMenuItem","displayTxt","checkedCounter","html","formatDisplayCount","dropdownEls","dropdownEl","menuItem","Modal","static","backdrop","header","origRightPadding","scrollbarWidth","modalElement","firstFocusableEl","lastFocusableEl","handleBackwardTab","focusVisibilityHandler","handleForwardTab","keydownHandlerToggle","triggerShow","loading","triggerHide","isInDropdown","isInSplitBtn","minDistance","activeElementIdx","prevFocusableEl","nextFocusableEl","scrollToElement","scrollTop","paddingRight","dissmissEl","potentialHeader","FilterKeyword","addButton","filterCntr","handleKeyEvent","clickOutHandler","trim","FilterCollection","filterResults","filterOffCanvasResults","clearAllItem","clearAllOffCanvas","resultsLabelDesktop","filterOffCanvas","keywordFilter","visibileIdx","mediaIncrementforDropdowns","showMoreDiv","mobileModal","collectionInputsContainer","dropdowns","collectionInputs","targetCollection","filterCollection","smallWindow","horizontal","filtersTemp","dropdownObjects","accordionObjects","isOffCanvasState","isApplyingState","mediumMediaSize","handleAddEvent","createOffCanvasFilterItem","createDesktopFilterItem","checkbox","innerText","behavior","handleClearAllEvent","toggleClearAllButtons","clearFilter","clearMultiSelects","updateFiltersCount","filtersAsStrings","handleDesktopCheckboxClick","deselected","handleFilterItemClickEvent","removedFilter","handleOffCanvasCheckboxClick","checkboxId","desktopCheckbox","checkboxFilter","currentFilter","result","numOfFilters","updateOffCanvasAccordionCount","handleOffCanvasClearAllEvent","handleOffCanvasFilterItemClickEvent","offCanvasOrigin","handleShowMore","toggleDropdown","arrayOfObjectsContains","obj","ul","option","targetValue","results","deselectTarget","origin","updateVerticalDesktopAccordionCount","offCanvasFilterObj","filterDesktop","dropdown","createShowMoreButton","showMore","filterAlreadyExists","filterOffCanvasItem","isDigit","cloneNode","concat","createFilter","filterValue","offCanvasOriginId","addedFilter","useX","filterText","filterId","filterLabel","filterIcon","isOffCanvasFilter","whichFilters","whichParent","htmlFilter","accordionParent","accordionBtn","forEach","filteringMobileBtn","stringArray","onState","OffCanvas","updateResultsLabel","resultCount","error","modalBtn","filterTemp","newFilter","filterToRemove","typeofInput","multiSelect","numOfDropdowns","Forms","validate","togglePassword","passwordState","checkboxValidator","LinkPicker","interest","touse","interestData","touseData","find","onChangeHandler","selectedIndex","disabled","removeAllOptions","appendDataToSelect","sel","removeGrp","groups","getElementsByTagName","group","opts","createDocumentFragment","addOptions","o","len","prop","Masthead","activeContainerId","offCanvasMenuBtn","fullScreenOverlay","signInText","mediaSize","handleMenuItemEvent","updateMenuHeights","handleMenuCntrEvent","currentMenu","handleMenuCtnrBlurEvent","closeMenu","closeOverLay","handleMenuHoverInEvent","openOverLay","handleMenuItemKeyEvent","nextItem","item","isTop","previousItem","lastElementChild","openMenu","handleIconClickEvent","origContainerId","button","container","activeContainer","activeButton","closeContainer","openContainer","handleWindowClickEvent","handleFocusOutEvent","handleKeyDownEvent","previousMenu","previousLink","items","nextMenu","prePreviousMenu","heights","cBottom","cHeight","nBottom","nHeight","toggleFullScreen","logIn","displayname","signInCtnr","signInBadge","logOut","cartCount","count","cartBadge","topMenuItem","menuCtnr","ResizeElement","cancel","raf","attachEvent","stylesCreated","requestFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","resetTriggers","triggers","__resizeTriggers__","expand","contract","expandChild","scrollLeft","scrollWidth","scrollListener","__resizeRAF__","__resizeLast__","checkTriggers","__resizeListeners__","animation","keyframeprefix","animationstartevent","domPrefixes","startEvents","animationName","animationKeyframes","animationStyle","addResizeListener","css","head","styleSheet","cssText","createStyles","removeResizeListener","detachEvent","NavAnchored","tabs","backButton","sticky","targetItems","targetNav","exitFocus","activeTab","isSticky","tabbing","modalSize","showModal","activateTab","deactivateTab","handleScrollEvent","last_known_scroll_position","stickNav","updateItems","itemTop","spacer","targetBottom","setElementWidth","zIndex","removeElementWidth","hideModal","handleModalKeydown","createModal","isIconElement","tabContent","toggleElementWidth","determineSection","scrollOffset","handleEnterEvent","currentSection","toggleTab","handleKeydownEvent","focusEl","iter","section","oldItem","newItem","activateItems","panel","field","NavSkip","tabindex","borderStyle","dataInset","focusOutHandler","toggleZindex","opacity","focusElement","border","NavAnchoredVertical","opt","keys","activeCSSClassName","scrollViewType","shouldShowModal","isClickOnIconElement","lastKnownScrollPosition","navOnTopScreen","elemClassList","navItem","lastNavItem","positionOflastNavItemBottom","negativeTop","isNavAfterLastContentBottom","toogleContent","NavLeft","main","suffix","arrows","selected","altmenu","masthead","desktopLeftNav","siteBody","offCanvas","footer","buttonToggle","footerHeight","mastheadHeight","visibleFooter","focusableElms","parentAccordions","defaultMain","adjustHeightForFooter","calcHeight","maxHeight","adjustHeightForMasthead","isFooterVisible","alignChevrons","accordionButtons","accordionButton","after","handleAdjustmentEvent","handleBackClick","handleOffCanvasKeyDown","handleOffCanvasItemEsc","pageReadyCount","fElement","leftMenu","aItem","oneLi","thisLi","headerHorizontalMenu","pageReady","mastheadMend","storedId","createOffCanvasMenu","li","lnAccordion","lnCardHeader","lnCollapse","lnAnchor","Promise","all","from","images","img","complete","map","resolve","onload","onerror","then","tag","ps","parentAccordion","reverse","stepAccord","aButton","aChevron","aCollapse","thisChevron","list","selectedLink","waitForLeftNav","Pagination","page","pageText","itemsPerPageText","perPageSelect","perPage","hidePages","external","buttonLabelLeft","buttonLabelRight","disablePaginationInput","showTotal","pagination","currentPage","previousPerPage","newPage","totalPages","newTotalPages","lastPage","onFirstPage","onLastPage","links","template","prevText","nextText","origPerPage","handlePaginationEvent","buttons","pages","queryStr","handleFocusoutEvent","handleChangeEvent","renderPage","update","origCurrentPage","firstItemOnPage","renderPageInput","pageInputWrapper","pageInputTextBefore","pageInputField","aria-label","pageInputTextAfter","p","bEl","data-page","span","totalItemsWrapper","origTotalPages","frag","prev","hasInput","renderPager","Option","renderSelect","newPerPage","addItems","removeItems","remItems","setItems","newItems","spanItems","outerHTML","paginator","role","render","Popover","delay","title","data_title","data_content","placement","data_placement","inOffCanvas","inFixedTop","inFixedBottom","popoverArrow","popoverCloseBtn","positionCalc","popover","popoverModal","triggerHandler","updatePopover","showTrigger","hideTrigger","popoverParent","positionCalculation","popoverTitle","popoverParagraph","popoverDialog","popoverTitleDiv","popoverContent","aria_label","data_dismiss","ProductStack","childrenWidth","productStacks","rightCtrls","leftCtrls","productStackID","increment","updateSectionHeights","sections","sectionName","sectionMatches","sectionMatch","styleTag","view","viewDiv","productStack","Progress","showText","showtext","timeToComplete","round","Slider","optionsInput","slider","animate","animationDuration","ort","orientation","dir","singleStep","step","percision","behaviour","limit","padding","tooltips","showRange","format","ariaFormat","spectrum","connects","handles","handleNumbers","sliderBase","actions","minLabel","maxLabel","minValue","maxValue","optEvents","events","supportsPassive","locations","values","activeHandlesCount","minContainers","maxContainers","dirOffset","msPrefix","msTransform","transformRule","defaultFormatter","to","toFixed","endEventHandler","get","asArray","containers","focusEventHandler","blurEventHandler","getNextStepsForHandle","handleNumber","location","nearbySteps","getNearbySteps","thisStep","decrement","snap","stepBefore","startValue","stepAfter","highestStep","stepDecimals","countStepDecimals","bindEvent","namespacedEvent","fireEvent","addNodeTo","addTarget","documentLeave","nodeName","eventEnd","eventMove","movement","calcPoint","startCalcPoint","proposal","baseSize","moveHandles","handle","listeners","setZindex","eventStart","some","isHandleDisabled","moveEvent","move","pageOffset","buttonsProperty","endEvent","doNotReject","outEvent","eventTap","calcPointToPercentage","getClosestHandle","addClassFor","setHandle","addTooltip","isSliderDisabled","addOrigin","horizontalKeys","verticalKeys","largeStepKeys","edgeKeys","isLargeDown","isLargeUp","isDown","isUp","isMax","Spectrum","getDefaultStep","xVal","toStepping","eventKeydown","addConnect","base","countDecimals","numStr","pieces","String","upward","proposals","checkHandlePosition","state","transformDirection","lookBackward","lookForward","fromStepping","rule","inRuleOrder","updateConnect","updateHandlePosition","connectWidth","translateRule","scaleRule","tap","targetEvent","eventType","reference","getValue","unconstrained","getStep","v","resolveToValue","subRangeRatio","pa","pb","fromPercentage","range","toPercentage","xPct","xSteps","getJ","closest","handleEntryPoint","that","percentage","isNumeric","xHighestCompleteStep","handleStepPoint","totalSteps","xNumSteps","isFinite","isPercentage","alt","method","fixEvent","hover","points","methods","passive","mouse","pointer","isTouchOnTarget","checkTouch","targetTouches","pageX","pageY","targetTouch","changedTouches","getPageOffset","clientX","clientY","doc","docElem","ownerDocument","clientTop","clientLeft","pos","removeTooltips","namespace","substring","bind","tEvent","tNamespace","tooltip","removeElement","supportPageOffset","isCSS1Compat","compatMode","entry","ordered","sort","va","vb","size","convert","RangeError","drag","fixed","parsed","validateMargin","formatter","inputs","testJs","validateOptions","addContent","addContainer","pointerEnabled","msPointerEnabled","addSlider","optConnects","connectBase","addElements","connect","handleBefore","handleAfter","eventHolders","eventHolder","fireSetEvent","isInit","valueSet","unencoded","formattedValue","setTooltips","positions","now","Tab","tablist","withinModal","panels","thresholdMediaSize","tabContainer","accordionWrapper","nested","37","38","39","40","handleOverflowEvent","determineOrientation","proceed","switchTabOnArrowPress","pressed","targetTab","focusLastTab","focusFirstTab","needsFocus","deactivateTabs","getTablistPanels","determineDeletable","deleteTab","checkTabFocus","resizeHandler","handleResizeSmall","sisterCollapseStr","activateCollapse","showBlock","prevActivated","sisterTabStr","tabToActivate","tabContentContainer","modalBody","removeListener","getParentTablist","delayValue","determineDelay","siblingTabs","getSiblingTabs","card","cardHeader","h5","data_toggle","data_target","data_parent","aria_controls","aria_expanded","chevron","accordionSpan","cardBodyWrapper","aria_labelledby","cardBody","Columns","dt","swap","columns","cols","headings","order","cell","column","originalCellIndex","sortable","hiddenColumns","row","dataIndex","expandable","searchIndex","cells","activeHeadings","lastTh","activeRows","rebuild","th","td","insert","heading","rows","renderHeader","hasHeadings","sorting","btm","alpha","numeric","tr","updateSortDirection","selectedRows","indexes","searchData","cellIndex","Rows","build","tdx","hasRows","TableComplex","validateRow","hasErrors","rowCount","rowLength","localFunctions","subElements","layoutOptions","tableData","expandIcon","condensed","fixedColumns","rearrangeableColumns","fixedHeight","defaultBatchActions","exportCsv","exportJson","deleteRow","delete","noEntries","import","print","batchActions","chooseActions","chooseAction","showData","search","settings","exportDetails","allowedExtensions","action","allowedImportExtensions","ext","actionsSelectFilters","additionalActions","additionalAction","js","layout","row1","row2","join","table","noRows","columnBox","paginationElement","columnRenderers","selectedColumns","dragSrcEl","sortedColumnIdx","batchId","searchId","initialY","begOffsetTop","currentY","searching","metHeight","columnsFixed","moveableCols","colMoved","handleTouchEvent","pointerType","finOffsetTop","yOffset","dataTransfer","offsetTop","before","handlePointerLeave","col","startedBelow","startedAbove","endedBelow","endedAbove","handleTouchEnd","orderChanged","applyButton","dropElem","dropHTML","insertAdjacentHTML","previousSibling","nextSibling","setupDragEvents","handleDragEvent","overEl","leaveEl","dropTarget","handleImportActionEvent","reader","FileReader","output","files","inputOptions","readAsText","handleExportActionEvent","exportFileOptions","skipColumn","export","handleDeleteActionEvent","handleSelectAllChange","handleTableHeaderEvent","deleteAll","handleAccordionEvent","htmlRow","detailsRow","use","rowId","extend","props","baseCellIdx","baseIdx","setRenderColumns","renderers","renderer","renderDetails","stripeClass","detailsCell","colspan","accordionBody","renderExpand","showButton","aria-expanded","inputCheckbox","renderCustomRow","clean","renderActions","renderSearch","renderSettings","renderPlaceholder","topCtnr","createActionButton","dataToggle","dataTarget","onclick","flexGrow","justifyContent","cmplxAction","cmplxActionLabel","for","cmplxActionDropdown","data-toggle","data-target","aria-controls","svgClass","unordered","actionLabel","actionLI","inputGroup","searchCtnr","searchIcon","searchInput","searchLabel","optGear","XMLSerializer","serializeToString","selectHeader","selectCellIdx","indeterminate","stripeColor","clear","fixHeight","sortLabel","fixColumns","getHeaderCellIndex","cellIdx","bindEvents","actionSelect","actionButton","createSpecialCharModal","origInput","settingsCtnr","renderSettingsDropDown","unOderedList","liCheckbox","handleButtonEvent","fileImport","check","dataInput","pop","newRows","less","more","selectAll","handleCheckBoxEvent","setColumns","nCIdx","columnContainer","listItem","dragSvg","draggable","columnLabel","boxLabel","columnInput","emptySpan","buttonContainer","cancelButton","hd","reducePx","tHead","expandDone","selectDone","r","tBodies","widths","newrows","rowIdx","headerCount","padR","selectData","z","query","modal","modalEl","csvBtn","isUrl","isEmail","modifyText","expandRow","theRowIdx","expandCell","paginate","inArray","reduce","bool","word","includes","setMessage","newPages","refresh","exportOptions","headers","defaults","download","filename","exportFileName","lineDelimiter","columnDelimiter","tableName","replacer","space","blob","unshift","isLink","encodeURI","Blob","decodeURIComponent","url","msSaveBlob","newData","importHeader","shift","json","pTable","thead","tbody","newTh","newCell","message","insertDetails","searchResults","rowIds","newNum","crypto","msCrypto","getRandomValues","Uint32Array","dataToTable","replaceChild","dataIdx","itemCount","rowsNeeded","drop","Tooltip","textAlignments","textAlign","text_align","tooltipArrow","tooltipIdText","tooltipId","counter","aria_describedby","tooltipInner","createToolTip","supports","initCallback","lookUp","support","constructor","Form","SkipNav","Table","loadURLSVGs","paths","execute","defs","xhr","XMLHttpRequest","readyState","status","response","createRange","createContextualFragment","fragSymbol","fragStyle","handleSVGResponse","responseText","send","defineProperty"],"mappings":"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","sourcesContent":["// parse the package.json file to get needed variables\r\nimport { ddsSpace, ddsToken } from \"../../package.json\";\r\n\r\nexport const DOC = document;\r\nexport const HTML = DOC.documentElement;\r\nexport const globalObject = typeof global !== \"undefined\" ? global : window;\r\nexport const prefix = ddsSpace + ddsToken;\r\nexport const supportTransitions =\r\n    \"Webkit\" + \"Transition\" in HTML[\"style\"] ||\r\n    \"Transition\"[\"toLowerCase\"]() in HTML[\"style\"];\r\nexport const transitionEndEvent =\r\n    \"Webkit\" + \"Transition\" in HTML[\"style\"] ?\r\n        \"Webkit\"[\"toLowerCase\"]() + \"Transition\" + \"End\" :\r\n        \"Transition\"[\"toLowerCase\"]() + \"end\";\r\nexport const transitionDuration =\r\n    \"Webkit\" + \"Duration\" in HTML[\"style\"] ?\r\n        \"Webkit\"[\"toLowerCase\"]() + \"Transition\" + \"Duration\" :\r\n        \"Transition\"[\"toLowerCase\"]() + \"Duration\";\r\nexport const tipPositions = /\\b(top|bottom|left|right)+/;\r\nexport const isIPhone = (/(IPhone)/i.test(navigator.platform));\r\nexport const isIOS = (/iPad|iPhone|iPod|Macintosh/i.test(navigator.userAgent) || (navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1)) && !window.MSStream; // /(/(IPad)/i.test(navigator.platform)) || (/(IPhone)/i.test(navigator.platform));\r\nexport const isIE = (/msie|trident|Windows Phone/i.test(navigator.userAgent));\r\nexport const isSafari = (/Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent));\r\nexport const isEdge = (/Edge\\/\\d./i.test(navigator.userAgent));\r\nexport const isFirefox = (/firefox/i.test(navigator.userAgent));\r\nexport const isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);\r\nexport const direction = {\r\n    UP: 1,\r\n    RIGHT: 2,\r\n    DOWN: 3,\r\n    LEFT: 4,\r\n    NONE: 5\r\n};\r\n\r\n// selection methods\r\nexport function getFullScreenOverlay() {\r\n    var overlay = DOC.getElementById(prefix + \"full-screen-overlay\");\r\n    if (!overlay) {\r\n        console.warn(\"OFF-CANVAS: Overlay requested. Corresponding HTML missing. Please apply id 'dds__full-screen-overlay' and class 'dds__overlay' to an empty div\");\r\n        return false;\r\n    }\r\n    return overlay;\r\n}\r\n\r\n\r\nexport function getElementsByClassName(element, classNAME) {\r\n    // returns Array\r\n    return [].slice.call(element[\"getElementsByClassName\"](classNAME));\r\n}\r\n\r\nexport function getSibling(element, selector) {\r\n\r\n    var firstChar = selector.charAt(0);\r\n    var selectorSubstring = selector.substr(1);\r\n\r\n    if (firstChar === \".\") {\r\n        if (element.nextElementSibling && element.nextElementSibling.classList) {\r\n            if(element.nextElementSibling.classList.contains(selectorSubstring)) {\r\n                return element.nextElementSibling;\r\n            } else {\r\n                return getSibling(element.nextElementSibling, selector);\r\n            }\r\n        }\r\n    }  else if (firstChar === \"#\") {\r\n        \r\n        if (element.nextElementSibling && element.nextElementSibling.id) {\r\n            if(element.nextElementSibling.id === selectorSubstring) {\r\n                return element.nextElementSibling;\r\n            } else {\r\n                return getSibling(element.nextElementSibling, selector);\r\n            }\r\n        }\r\n    } else {\r\n        if (element.nextElementSibling && element.nextElementSibling.tagName) {\r\n            if(element.nextElementSibling.tagName.toLowerCase() === selector.toLowerCase()) {\r\n                return element.nextElementSibling;\r\n            } else {\r\n                return getSibling(element.nextElementSibling, selector);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getFocusableElements(element) {\r\n    var arr = Array.prototype.slice.call(element.querySelectorAll(\"*:not([aria-expanded='false']) a[href],*:not([aria-expanded='false']) area[href],*:not([aria-expanded='false']) input:not([disabled]),*:not([aria-expanded='false']) select:not([disabled]),*:not([aria-expanded='false']) textarea:not([disabled]),*:not([aria-expanded='false']) button:not([disabled]):not(.dds__d-none), *:not([aria-expanded='false']) > .dds__accordion-card-body > ul > [tabindex='0']\"));\r\n    return arr.filter(filterCollapsedParents);\r\n}\r\n\r\nfunction filterCollapsedParents(element) {\r\n    for(;element && element !== DOC; element = element.parentElement) {\r\n        if (element.parentElement) {\r\n            if ((element.parentElement.classList.contains(\"dds__collapse\") && element.parentElement.getAttribute(\"aria-expanded\") == \"false\") || element.parentElement.classList.contains(prefix + \"d-none\")) {\r\n                return false;\r\n            } \r\n        } else {\r\n            return element; //if scaled entire DOM tree and no parents are collapsed, element is focusable\r\n        }\r\n    }\r\n}\r\n\r\nexport function getNextFocusableElement(element) {\r\n    for(;element && element !== DOC; element = element.nextElementSibling) {\r\n        if (element.nextElementSibling) {\r\n            if (window.getComputedStyle(element.nextElementSibling).getPropertyValue(\"display\") != \"none\") {\r\n                if ([\"A\",\"AREA\",\"INPUT\",\"SELECT\",\"TEXTAREA\",\"BUTTON\"].indexOf(element.nextElementSibling.tagName) != -1\r\n                && element.nextElementSibling.tabIndex >= 0) {\r\n                    return element.nextElementSibling;\r\n                } else {\r\n                    var focusable = getFocusableElements(element.nextElementSibling);\r\n                    if (focusable && focusable.length > 0) {\r\n                        return focusable[0];\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            return getNextFocusableElement(element.parentElement);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a temporary, assertive element to announce a message for text reader clients, then removes that element.\r\n * @param  {String}   theMessage The short text to announce. Consider translation requirements.\r\n * @return void\r\n */\r\nexport function ariaAnnounce (theMessage) {\r\n    var msgEl,\r\n        randomNum = Math.floor(Math.random() * 999999999) + 1;\r\n    document.body.appendChild(createElement(\"div\", {\r\n        style: \"position:absolute; left:-1000px; width: 0px; height: 0px;\",\r\n        id: \"ariaAnnouncement\" + randomNum,\r\n        \"aria-live\": \"assertive\"\r\n    }));\r\n    msgEl = document.getElementById(\"ariaAnnouncement\" + randomNum);\r\n    window.setTimeout(function() {\r\n        msgEl.textContent = theMessage;\r\n    }, 15);\r\n    window.setTimeout(function () {\r\n        msgEl.parentElement.removeChild(msgEl);\r\n    }, 5000);\r\n}\r\n\r\n\r\n/**\r\n * @method getClosest   Crawls the DOM to find the closest targeted element\r\n * @param element       {DOM element}   the DOM element from which to start searching\r\n * @param selector      {string}        the class, ID, or tag name for which to search\r\n * @param parentsOnly   {boolean}       if false or not set, modifies TAG search to include children elements of the currently-inspected target\r\n * @return {element} or false\r\n */\r\nexport function getClosest(element, selector, parentsOnly) {\r\n    // source http://gomakethings.com/climbing-up-and-down-the-dom-tree-with-vanilla-javascript/\r\n    var firstChar = selector.charAt(0);\r\n\r\n    var selectorSubstring = selector.substr(1);\r\n    if (firstChar === \".\") {\r\n        // If selector is a class\r\n        for (; element && element !== DOC; element = element.parentNode) {\r\n            // Get closest match\r\n            if (\r\n                element[\"parentNode\"].querySelector(selector) !== null &&\r\n                // hasClass(element, selectorSubstring)) {\r\n                element.classList[\"contains\"](selectorSubstring)\r\n            ) {\r\n                return element;\r\n            } else if (parentsOnly === false) {\r\n                if (element.querySelector(selector)) {\r\n                    return element.querySelector(selector);\r\n                }\r\n            }\r\n        }\r\n    } else if (firstChar === \"#\") {\r\n        // If selector is an ID\r\n        for (; element && element !== DOC; element = element.parentNode) {\r\n            // Get closest match\r\n            if (element.id === selectorSubstring) {\r\n                return element;\r\n            } else if (parentsOnly === false) {\r\n                if (element.querySelector(selector)) {\r\n                    return element.querySelector(selector);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        // If selector is a tagName\r\n        for (; element && element !== DOC; element = element.parentNode) {\r\n            // Get closest match\r\n            if (element.tagName && element.tagName.toLowerCase() === selector.toLowerCase() ) {\r\n                return element;\r\n            } else if (element.previousElementSibling && element.previousElementSibling.tagName.toLowerCase() === selector.toLowerCase()) {\r\n                return element.previousElementSibling;\r\n            } else if (parentsOnly === false) {\r\n                if (element.querySelector(selector)) {\r\n                    return element.querySelector(selector);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n\r\n}\r\n\r\nexport function one(element, event, handler) {\r\n    element.addEventListener(\r\n        event,\r\n        function handlerWrapper(e) {\r\n            handler(e);\r\n            element.removeEventListener(event, handlerWrapper, false);\r\n        },\r\n        false\r\n    );\r\n}\r\n\r\nexport function getTransitionDurationFromElement(element) {\r\n    var duration = supportTransitions ?\r\n        globalObject[\"getComputedStyle\"](element)[transitionDuration] :\r\n        0;\r\n    duration = parseFloat(duration);\r\n    duration =\r\n        typeof duration === \"number\" && !isNaN(duration) ? duration * 1000 : 0;\r\n    return duration + 50; // we take a short offset to make sure we fire on the next frame after animation\r\n}\r\n\r\nexport function getAnimationDurationFromElement(element) {\r\n    var duration = supportTransitions ?\r\n        globalObject[\"getComputedStyle\"](element)[\"animationDuration\"] :\r\n        0;\r\n    duration = parseFloat(duration);\r\n    duration =\r\n        typeof duration === \"number\" && !isNaN(duration) ? duration * 1000 : 0;\r\n    return duration + 50; // we take a short offset to make sure we fire on the next frame after animation\r\n}\r\n\r\nexport function emulateTransitionEnd(element, handler) {\r\n    // emulateTransitionEnd since 2.0.4\r\n    var called = 0;\r\n\r\n    var duration = getTransitionDurationFromElement(element);\r\n    supportTransitions &&\r\n        one(element, transitionEndEvent, function (e) {\r\n            handler(e);\r\n            called = 1;\r\n        });\r\n    setTimeout(function () {\r\n        !called && handler();\r\n    }, duration);\r\n}\r\n\r\nexport function emulateAnimationnEnd(element, handler) {\r\n    // emulateTransitionEnd since 2.0.4\r\n    var called = 0;\r\n\r\n    var duration = getAnimationDurationFromElement(element);\r\n    supportTransitions &&\r\n        one(element, transitionEndEvent, function (e) {\r\n            handler(e);\r\n            called = 1;\r\n        });\r\n    setTimeout(function () {\r\n        !called && handler();\r\n    }, duration);\r\n}\r\n\r\nexport function uicoreCustomEvent(componentName, eventName, related, details) {\r\n    var evt;\r\n    if (isIE){\r\n        evt = document.createEvent(\"CustomEvent\");\r\n        evt.initCustomEvent( \"uic\" + componentName + eventName, true, true, details );\r\n    }\r\n    else{\r\n        evt = new CustomEvent(\"uic\" + componentName + eventName, {\r\n            bubbles: true,\r\n            detail: details\r\n        });\r\n    }\r\n    evt.relatedTarget = related;\r\n    related.dispatchEvent(evt);\r\n}\r\n\r\n\r\n// tooltip / popover stuff\r\nexport function getScroll() {\r\n    // also Affix and ScrollSpy uses it\r\n    return {\r\n        y: globalObject.pageYOffset || HTML[\"scrollTop\"],\r\n        x: globalObject.pageXOffset || HTML[\"scrollLeft\"]\r\n    };\r\n}\r\n\r\n// set new focus element since 2.0.3\r\nexport function setFocus(element) {\r\n    element.focus ? element.focus() : element.setActive();\r\n}\r\n\r\nexport function offWindowLeft(element, link) {\r\n    var elementDimensions = {\r\n        w: element[\"offsetWidth\"],\r\n        h: element[\"offsetHeight\"]\r\n    };\r\n    var rect = link[\"getBoundingClientRect\"]();\r\n    if (elementDimensions.w < 50) {\r\n        elementDimensions.w = 50;\r\n    }\r\n    return rect[\"left\"] - elementDimensions.w < 0;\r\n}\r\n\r\nexport function styleTip(link, element, position, parent, useArrow) {\r\n    // both popovers and tooltips (target,tooltip,placement,elementToAppendTo)\r\n\r\n    // element.style.height = elementDimensions.h + 'px';\r\n    // element.style.width = elementDimensions.w + 'px';\r\n    element.style.maxWidth = \"125px\";\r\n\r\n    useArrow = typeof useArrow === \"boolean\" ? useArrow : true;\r\n\r\n    var windowWidth = HTML[\"clientWidth\"] || DOC[\"body\"][\"clientWidth\"];\r\n\r\n    var windowHeight = HTML[\"clientHeight\"] || DOC[\"body\"][\"clientHeight\"];\r\n\r\n    var rect = link[\"getBoundingClientRect\"]();\r\n\r\n    var scroll =\r\n        parent === DOC[\"body\"] ?\r\n            getScroll() :\r\n            {\r\n                y: parent[\"offsetTop\"] + parent[\"scrollTop\"],\r\n                x: parent[\"offsetLeft\"] + parent[\"scrollLeft\"]\r\n            };\r\n\r\n    var linkDimensions = {\r\n        w: link.offsetWidth,\r\n        h: link.offsetHeight\r\n    };\r\n\r\n    var maxWidth = 125;\r\n    while(element[\"offsetHeight\"] >= maxWidth) {\r\n        maxWidth = maxWidth * 1.5;\r\n        element.style.maxWidth = maxWidth + \"px\";\r\n    }\r\n\r\n    var elementDimensions = {\r\n        w: element[\"offsetWidth\"],\r\n        h: element[\"offsetHeight\"]\r\n    };\r\n\r\n    var isPopover = element.classList[\"contains\"](\"dds__popover\");\r\n\r\n    var topPosition;\r\n\r\n    var leftPosition;\r\n\r\n    var arrow = element.querySelector(\".dds__arrow\");\r\n\r\n    var arrowTop;\r\n\r\n    var arrowLeft;\r\n\r\n    var arrowWidth;\r\n\r\n    var arrowHeight;\r\n\r\n    var halfTopExceed =\r\n        rect[\"top\"] + linkDimensions.h / 2 - elementDimensions.h / 2 < 0;\r\n\r\n    var halfLeftExceed =\r\n        rect[\"left\"] + linkDimensions.w / 2 - elementDimensions.w / 2 < 0;\r\n\r\n    var halfRightExceed =\r\n        rect[\"left\"] + elementDimensions.w / 2 + linkDimensions.w / 2 >= windowWidth;\r\n\r\n    var halfBottomExceed =\r\n        rect[\"top\"] + elementDimensions.h / 2 + linkDimensions.h / 2 >= windowHeight;\r\n\r\n    var topExceed = rect[\"top\"] - elementDimensions.h < 0;\r\n\r\n    var leftExceed = rect[\"left\"] - elementDimensions.w < 0;\r\n\r\n    var bottomExceed =\r\n        rect[\"top\"] + elementDimensions.h + linkDimensions.h >= windowHeight;\r\n\r\n    var rightExceed =\r\n        rect[\"left\"] + elementDimensions.w + linkDimensions.w >= windowWidth;\r\n\r\n    // recompute position\r\n    var posChanged;\r\n    if (position === \"right\"){\r\n        if (!rightExceed && !halfTopExceed && !halfBottomExceed) {\r\n            position === \"right\";\r\n        } else if (rightExceed && !leftExceed && !halfTopExceed && !halfBottomExceed) { //If exceeds right, but fits on the left\r\n            posChanged = true;\r\n            position = \"left\";\r\n        } else if ((!halfTopExceed || !halfBottomExceed) && (!halfRightExceed || !halfLeftExceed)) { //If half of top or bottom doesnt fit, try to fit top or bottom\r\n            if (!topExceed) {\r\n                posChanged = true;\r\n                position = \"top\";\r\n            } else if (!bottomExceed) {\r\n                posChanged = true;\r\n                position = \"bottom\"; \r\n            }\r\n        }\r\n    }\r\n    else if (position === \"left\") {\r\n        if (!leftExceed && !halfTopExceed && !halfBottomExceed) {\r\n            position === \"left\";\r\n        } else if (leftExceed && !rightExceed && !halfTopExceed && !halfBottomExceed) {\r\n            posChanged = true;\r\n            position = \"right\";\r\n        } else if ((!halfTopExceed || !halfBottomExceed) && (!halfRightExceed || !halfLeftExceed)) {\r\n            if (!topExceed) {\r\n                posChanged = true;\r\n                position = \"top\";\r\n            } else if (!bottomExceed) {\r\n                posChanged = true;\r\n                position = \"bottom\"; \r\n            }\r\n        }\r\n    } else if (position === \"top\") {\r\n        if (!topExceed && !halfRightExceed && !halfLeftExceed) {\r\n            position === \"top\";\r\n        }else if (topExceed && !bottomExceed && !halfRightExceed && !halfLeftExceed) {\r\n            posChanged = true;\r\n            position = \"bottom\";\r\n        } else if ((!halfRightExceed || !halfLeftExceed) && (!halfTopExceed || !halfBottomExceed)) {  //If half of right or left doesnt fit, try to fit right or left\r\n            if (!rightExceed) {\r\n                posChanged = true;\r\n                position = \"right\";\r\n            } else if (!leftExceed) {\r\n                posChanged = true;\r\n                position = \"left\"; \r\n            }\r\n        }\r\n    }  else if (position === \"bottom\") {\r\n        if (!bottomExceed && !halfRightExceed && !halfLeftExceed) {\r\n            position === \"bottom\";\r\n        } else if (bottomExceed && !topExceed && !halfRightExceed && !halfLeftExceed) {\r\n            posChanged = true;\r\n            position = \"top\";\r\n        } else if ((!halfRightExceed || !halfLeftExceed) && (!halfTopExceed || !halfBottomExceed)) { //Can't be top\r\n            if (!rightExceed) {\r\n                posChanged = true;\r\n                position = \"right\";\r\n            } else if (!leftExceed) {\r\n                posChanged = true;\r\n                position = \"left\"; \r\n            }\r\n        }\r\n    }\r\n\r\n    // update tooltip/popover class\r\n    element.className[\"indexOf\"](position) === -1 &&\r\n        (element.className = element.className.replace(tipPositions, position));\r\n\r\n    // update tooltip/popover dimensions\r\n    if (posChanged) {\r\n        elementDimensions = {\r\n            w: element[\"offsetWidth\"],\r\n            h: element[\"offsetHeight\"]\r\n        };\r\n    }\r\n    // we check the computed width & height and update here\r\n    var elMargin;\r\n    try {\r\n        elMargin = Number(window.getComputedStyle(element).margin.match(/\\d+/)[0]); // get the margin value from style as a number\r\n    } catch (e) {\r\n        elMargin = 0;\r\n    }\r\n    arrowWidth = arrow[\"offsetWidth\"] + (elMargin * 2);\r\n    arrowHeight = arrow[\"offsetHeight\"] + (elMargin * 2);\r\n\r\n    var rectLeft = rect[\"left\"], rectTop = rect[\"top\"];\r\n    if (!useArrow) {\r\n        if (position === \"left\") {\r\n            rectLeft = rect[\"left\"] + arrowWidth;\r\n        } else if( position === \"right\") {\r\n            rectLeft = rect[\"left\"] - arrowWidth;\r\n        } else if (position === \"top\") {\r\n            rectTop = rect[\"top\"] + arrowHeight;\r\n        } else if (position === \"bottom\") {\r\n            rectTop = rect[\"top\"] - arrowHeight;\r\n        }\r\n    }\r\n\r\n    // apply styling to tooltip or popover\r\n    if (position === \"left\" || position === \"right\") {\r\n        // secondary|side positions\r\n        if (position === \"left\") {\r\n            // LEFT\r\n            leftPosition =\r\n                rectLeft +\r\n                scroll.x -\r\n                elementDimensions.w -\r\n                (isPopover ? arrowWidth : 3); // subtract to move more left\r\n            window.addEventListener(\"resize\", function () {\r\n                arrow[\"style\"][\"left\"] = \"initial\";\r\n            });\r\n        } else {\r\n            // RIGHT\r\n            leftPosition = rectLeft + linkDimensions.w + (isPopover ? 0 : 3); // add to move more right\r\n        }\r\n\r\n        topPosition =\r\n            rect[\"top\"] - elementDimensions.h / 2 + linkDimensions.h / 2 + scroll.y;\r\n        arrowTop =\r\n            elementDimensions.h / 2 - \r\n            (isPopover ? arrowHeight * 0.9 : arrowHeight / 2);\r\n    } else if (position === \"top\" || position === \"bottom\") {\r\n        // primary|vertical positions\r\n        if (position === \"top\") {\r\n            // TOP\r\n            topPosition =\r\n                rectTop +\r\n                scroll.y -\r\n                elementDimensions.h - \r\n                (isPopover ? arrowHeight : 3); // subtract to move more up\r\n        } else {\r\n            // BOTTOM\r\n            topPosition = rectTop + linkDimensions.h + scroll.y + (isPopover ? 0 : 3);\r\n        }\r\n        leftPosition =\r\n            rect[\"left\"] - elementDimensions.w / 2 + linkDimensions.w / 2 + scroll.x;\r\n        arrowLeft = elementDimensions.w / 2 - arrowWidth / 2;\r\n    }\r\n\r\n    // apply style to tooltip/popover and its arrow\r\n    element[\"style\"][\"top\"] = topPosition + \"px\";\r\n    element[\"style\"][\"left\"] = leftPosition + \"px\";\r\n\r\n    arrowTop && (arrow[\"style\"][\"top\"] = arrowTop + \"px\");\r\n    arrowLeft && (arrow[\"style\"][\"left\"] = arrowLeft + \"px\");\r\n\r\n}\r\n\r\nexport function handleFirstTab(e) {\r\n    if (e.keyCode === 9) {\r\n        document.body.classList.add(\"user-is-tabbing\");\r\n\r\n        window.removeEventListener(\"keydown\", handleFirstTab);\r\n        window.addEventListener(\"mousedown\", handleMouseDownOnce);\r\n    }\r\n}\r\n\r\nexport function handleMouseDownOnce(e) {\r\n    //NVDA in browse mode swallows the enter key as mouse click: https://github.com/nvaccess/nvda/issues/4903\r\n    //This breaks our visual focus toggle. Enter key event has x,y values of 0,0 whereas click has positive x,y values.\r\n    //Capture enter key when treated as mousedown by NVDA browse mode.\r\n    if (e.x === 0 && e.y === 0) {\r\n        return;\r\n    }\r\n    document.body.classList.remove(\"user-is-tabbing\");\r\n\r\n    window.removeEventListener(\"mousedown\", handleMouseDownOnce);\r\n    window.addEventListener(\"keydown\", handleFirstTab);\r\n}\r\n\r\n// Form--passwords validation\r\n//================================================================\r\nexport function passwordVerification() {\r\n    var myInput = document.getElementById(\"psw\");\r\n    var letter = document.getElementById(\"letter\");\r\n    var capital = document.getElementById(\"capital\");\r\n    var number = document.getElementById(\"number\");\r\n    var length = document.getElementById(\"length\");\r\n\r\n    // When the user clicks on the password field, show the message box\r\n    myInput.onfocus = function () {\r\n        document.getElementById(\"message\").style.display = \"block\";\r\n    };\r\n\r\n    // When the user clicks outside of the password field, hide the message box\r\n    myInput.onblur = function () {\r\n        document.getElementById(\"message\").style.display = \"none\";\r\n    };\r\n\r\n    // When the user starts to type something inside the password field\r\n    myInput.onkeyup = function () {\r\n        // Validate lowercase letters\r\n        var lowerCaseLetters = /[a-z]/g;\r\n        if (myInput.value.match(lowerCaseLetters)) {\r\n            letter.classList.add(\"valid\");\r\n            letter.classList.remove(\"invalid\");\r\n        } else {\r\n            letter.classList.remove(\"valid\");\r\n            letter.classList.add(\"invalid\");\r\n        }\r\n\r\n        // Validate capital letters\r\n        var upperCaseLetters = /[A-Z]/g;\r\n        if (myInput.value.match(upperCaseLetters)) {\r\n            capital.classList.remove(\"invalid\");\r\n            capital.classList.add(\"valid\");\r\n        } else {\r\n            capital.classList.remove(\"valid\");\r\n            capital.classList.add(\"invalid\");\r\n        }\r\n\r\n        // Validate numbers\r\n        var numbers = /[0-9]/g;\r\n        if (myInput.value.match(numbers)) {\r\n            number.classList.remove(\"invalid\");\r\n            number.classList.add(\"valid\");\r\n        } else {\r\n            number.classList.remove(\"valid\");\r\n            number.classList.add(\"invalid\");\r\n        }\r\n\r\n        // Validate length\r\n        if (myInput.value.length >= 8) {\r\n            length.classList.remove(\"invalid\");\r\n            length.classList.add(\"valid\");\r\n        } else {\r\n            length.classList.remove(\"valid\");\r\n            length.classList.add(\"invalid\");\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Check is item is object\r\n * @return {Boolean}\r\n */\r\nexport function isObject(val) {\r\n    return Object.prototype.toString.call(val) === \"[object Object]\";\r\n}\r\n\r\n/**\r\n * Check is item is array\r\n * @return {Boolean}\r\n */\r\nexport function isArray(val) {\r\n    return Array.isArray(val);\r\n}\r\n\r\n/**\r\n * Check for valid JSON string\r\n * @param  {String}   str\r\n * @return {Boolean|Array|Object}\r\n */\r\nexport function isJson(str) {\r\n    var t = !1;\r\n    try {\r\n        t = JSON.parse(str);\r\n    } catch (e) {\r\n        return !1;\r\n    }\r\n    return !(null === t || (!isArray(t) && !isObject(t))) && t;\r\n}\r\n\r\n/**\r\n * Iterator helper\r\n * @param  {(Array|Object)}   arr     Any object, array or array-like collection.\r\n * @param  {Function}         fn      Callback\r\n * @param  {Object}           scope   Change the value of this\r\n * @return {Void}\r\n */\r\nexport function each(arr, fn, scope) {\r\n    var n;\r\n    if (arr) {\r\n        if (isObject(arr)) {\r\n            for (n in arr) {\r\n                if (Object.prototype.hasOwnProperty.call(arr, n)) {\r\n                    fn.call(scope, arr[n], n);\r\n                }\r\n            }\r\n        } else if (arr.length > 0) {\r\n            for (n = 0; n < arr.length; n++) {\r\n                fn.call(scope, arr[n], n);\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Bubble sort algorithm\r\n */\r\nexport function sortItems(a, b) {\r\n    var c, d;\r\n    if (1 === b) {\r\n        c = 0;\r\n        d = a.length;\r\n    } else {\r\n        if (b === -1) {\r\n            c = a.length - 1;\r\n            d = -1;\r\n        }\r\n    }\r\n    for (var e = !0; e;) {\r\n        e = !1;\r\n        for (var f = c; f != d; f += b) {\r\n            if (a[f + b] && a[f].value > a[f + b].value) {\r\n                var g = a[f],\r\n                    h = a[f + b],\r\n                    i = g;\r\n                a[f] = h;\r\n                a[f + b] = i;\r\n                e = !0;\r\n            }\r\n        }\r\n    }\r\n    return a;\r\n}\r\n\r\n/**\r\n * Create DOM element node\r\n * @param  {String}   a nodeName\r\n * @param  {Object}   b properties and attributes\r\n * @return {Object}\r\n */\r\nexport function createElement(a, b) {\r\n    var d = DOC.createElement(a);\r\n    if (b && \"object\" == typeof b) {\r\n        var e;\r\n        for (e in b) {\r\n            if (\"html\" === e) {\r\n                d.innerHTML = b[e];\r\n            } else {\r\n                if (e.slice(0,5) === \"aria_\" || e.slice(0,5) === \"data_\") {\r\n                    var attr = e.slice(0,4) + \"-\" + e.slice(5);\r\n                    d.setAttribute(attr, b[e]); \r\n                } else {\r\n                    d.setAttribute(e, b[e]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return d;\r\n}\r\n\r\nexport function loadURLSVGs(paths, lazyload) {\r\n    var lazyloading = typeof(lazyload) === \"boolean\" ? lazyload : true,\r\n        execute = function(paths) {\r\n            if (paths.length > 0 && !Array.isArray(paths)) {\r\n                paths = new Array(paths);\r\n            }\r\n            if (!paths || paths.length < 1) {\r\n                console.error(\"The File path(s) supplied were either empty or null.\");\r\n                return false;\r\n            }\r\n            var defs,\r\n                style,\r\n                svg,\r\n                handleSVGResponse = function(response) {\r\n                    if (response.match(/<script|javascript:/g)) {\r\n                        throw Error(\"Possible malicous scripting code found!\\n\"+response);\r\n                    } else {\r\n                        var frag = DOC.createRange().createContextualFragment(response);\r\n                        if (DOC[\"body\"].firstChild.tagName != \"svg\") {\r\n                            DOC[\"body\"].insertBefore(frag, DOC[\"body\"].firstChild);\r\n                        } else {\r\n                            svg = DOC[\"body\"].firstChild;\r\n                            defs = defs ? defs : svg.querySelector(\"defs\");\r\n                            style = style ? style : svg.querySelector(\"style\");\r\n                            var fragSymbol = frag.querySelector(\"symbol\");\r\n                            if (!defs.querySelector(\"#\"+fragSymbol.id)) {\r\n                                defs.appendChild(fragSymbol);\r\n                                var fragStyle = frag.querySelector(\"style\");\r\n                                if (style && fragStyle) {\r\n                                    style.innerHTML += fragStyle.innerHTML;\r\n                                } else if (fragStyle) {\r\n                                    svg.insertBefore(fragStyle, defs);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            Array.prototype.forEach.call(paths, function(url) {\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.addEventListener(\"error\", function() {\r\n                    console.error(\"The File path supplied [ \"+paths+\" ] was invalid.\");\r\n                });\r\n                xhr.addEventListener(\"load\", function() {\r\n                    if (xhr.readyState == 4 && xhr.status == 200) {\r\n                        handleSVGResponse(xhr.responseText);\r\n                    }\r\n                });\r\n                xhr.open(\"GET\", url, true);\r\n                xhr.send();\r\n            });\r\n        };\r\n    if (lazyloading) {\r\n        DOC.addEventListener(\"DOMContentLoaded\", function () {\r\n            execute(paths);\r\n        });\r\n    } else {\r\n        execute(paths);\r\n    }\r\n}\r\n\r\n/**\r\n * Function created to support the ability to add classes\r\n * to an SVG Element / Node. The classList for Elements and\r\n * Nodes in IE using createElementNS does not support classList  \r\n * so the class attribute needs to be used\r\n * @param {Element/Node} elem \r\n */\r\nexport function classAdd(elem, classes) {\r\n    var classList;\r\n    if (!isArray(classes)) {\r\n        classList = [classes];\r\n    } else {\r\n        classList = classes;\r\n    }\r\n \r\n    each(classList, function(clazz) {\r\n        if (!elem.classList) { // Element does not support classList\r\n            var newClasses = elem.getAttribute(\"class\");\r\n            if (!newClasses) {\r\n                elem.setAttribute(\"class\", clazz);\r\n            } else {\r\n                if (newClasses.indexOf(clazz) == -1)\r\n                    elem.setAttribute(\"class\", newClasses + \" \" + clazz);\r\n            }\r\n        } else {\r\n            elem.classList.add(clazz);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Function created to support the ability to remove classes\r\n * to an SVG Element / Node. The classList for Elements and\r\n * Nodes in IE using createElementNS does not support classList \r\n * so the class attribute needs to be used\r\n * @param {*} elem \r\n */\r\nexport function classRemove(elem, classes) {\r\n    var classList;\r\n    if (!isArray(classes)) {\r\n        classList = [classes];\r\n    } else {\r\n        classList = classes;\r\n    }\r\n    each(classList, function(clazz) {\r\n        if (!elem.classList) { // Element does not support classList\r\n            var newClasses = elem.getAttribute(\"class\").replace(clazz, \"\");\r\n            elem.setAttribute(\"class\", newClasses);\r\n        } else {\r\n            elem.classList.remove(clazz);\r\n        }\r\n    }); \r\n}\r\n\r\nexport function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n}\r\n\r\nexport function ieMosaicPolyfill(slides) {\r\n    var divTag;\r\n    for (var i = 0; i < slides.length; i++) {\r\n        var imgTag = slides[i].querySelector(\"img.dds__card-img-top\");\r\n        if (imgTag) {\r\n            divTag = slides[i].querySelector(\"div.dds__card-img-top\");\r\n            divTag.style.backgroundImage = \"url('\" + imgTag.src + \"')\";\r\n            imgTag.style.display = \"none\";\r\n            slides[i].parentNode.classList.add(\"dds__background-img\");\r\n        }\r\n    }\r\n}\r\n\r\nexport function altFind(arr, callback) {\r\n    var ret;\r\n    each(arr, function(val) {\r\n        var match = callback(val);\r\n        if (match) {\r\n            ret = val;\r\n        }\r\n    });\r\n    return ret;\r\n}\r\n  \r\nexport function validateNum(num, defaultVal) {\r\n    if (num) {\r\n        // check to see if page is a not a number but can be a string\r\n        if ( isNaN(num) && typeof num != \"string\") {\r\n            return defaultVal ? defaultVal : false;\r\n        // if it is a string can it be converted to a number\r\n        } else if (typeof num === \"string\") {\r\n            if(isNaN(parseInt(num, 10))) {\r\n                return defaultVal ? defaultVal : false;\r\n            }\r\n            num = parseInt(num, 10);\r\n        }\r\n        \r\n        return num;\r\n    }\r\n    else{\r\n        return defaultVal;\r\n    }\r\n}\r\n\r\nexport function jsonOptionsInit(element, options) {\r\n    var jsonParams = element.dataset.options;\r\n    if (jsonParams) {\r\n        var jsonOptions = JSON.parse(jsonParams);\r\n        return jsonOptions;\r\n    }\r\n    else{\r\n        return options;\r\n    }\r\n    \r\n}\r\n\r\nexport function swipeInit(el, callback) {\r\n    var swipe = new Object();\r\n    swipe.start = {\r\n        x: 0,\r\n        y: 0\r\n    };\r\n    swipe.end = {\r\n        x: 0,\r\n        y: 0\r\n    };\r\n    swipe.params = {\r\n        min: {\r\n            x: 50,\r\n            y: 90\r\n        },\r\n        max: {\r\n            x: 95,\r\n            y: 100\r\n        }\r\n    };\r\n    var getTouch = function (e) {\r\n            if (isEdge || isIE) {\r\n                return {\r\n                    screenX: e.screenX,\r\n                    screenY: e.screenY\r\n                };\r\n            } else {\r\n                return e.touches[0];\r\n            }\r\n        },\r\n        downListener = function (e) {\r\n            var touch = getTouch(e);\r\n            swipe.start.x = swipe.end.x = touch.screenX;\r\n            swipe.start.y = swipe.end.y = touch.screenY;\r\n        },\r\n        moveListener = function (e) {\r\n            // preventDefault if you want to completely stop default touch behavior\r\n            // e.preventDefault();\r\n            var touch = getTouch(e);\r\n            swipe.end.x = touch.screenX;\r\n            swipe.end.y = touch.screenY;\r\n        },\r\n        upListener = function () {\r\n            if (\r\n                ((swipe.end.x - swipe.params.min.x > swipe.start.x) || (swipe.end.x + swipe.params.min.x < swipe.start.x)) &&\r\n                ((swipe.end.y < swipe.start.y + swipe.params.max.y) && (swipe.start.y > swipe.end.y - swipe.params.max.y))\r\n            ) {\r\n                if (swipe.end.x > swipe.start.x) {\r\n                    swipe.direction = direction.RIGHT;\r\n                } else {\r\n                    swipe.direction = direction.LEFT;\r\n                }\r\n            }\r\n            if (\r\n                ((swipe.end.y - swipe.params.min.y > swipe.start.y) || (swipe.end.y + swipe.params.min.y < swipe.start.y)) &&\r\n                ((swipe.end.x < swipe.start.x + swipe.params.max.x) && (swipe.start.x > swipe.end.x - swipe.params.max.x))\r\n            ) {\r\n                if (swipe.end.y > swipe.start.y) {\r\n                    swipe.direction = direction.DOWN;\r\n                } else {\r\n                    swipe.direction = direction.UP;\r\n                }\r\n            }\r\n            if (swipe.direction !== direction.NONE) {\r\n                if (typeof callback === \"function\") {\r\n                    callback(el, swipe.direction);\r\n                }\r\n            }\r\n            swipe.direction = direction.NONE;\r\n        };\r\n    if (isEdge) {\r\n        el.addEventListener(\"mousedown\", downListener);\r\n        el.addEventListener(\"mousemove\", moveListener);\r\n        el.addEventListener(\"mouseup\", upListener);\r\n    } else if (isIE) {\r\n        el.addEventListener(\"pointerdown\", downListener);\r\n        el.addEventListener(\"pointermove\", moveListener);\r\n        el.addEventListener(\"pointerup\", upListener);\r\n    } else {\r\n        el.addEventListener(\"touchstart\", downListener);\r\n        el.addEventListener(\"touchmove\", moveListener);\r\n        el.addEventListener(\"touchend\", upListener);\r\n    }\r\n}\r\nexport function renderSvg(svg, attributes) {\r\n    var svgWrapper = DOC.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    svgWrapper.setAttribute(\"focusable\", false);\r\n    classAdd(svgWrapper, prefix + \"svg-icons\");\r\n    classAdd(svgWrapper, prefix + \"icon-svg\");\r\n    if (!isArray(svg)) {\r\n        svg = [svg];\r\n    }\r\n    each(svg, function(elm) {\r\n        var svgElem = DOC.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\r\n\r\n        svgElem.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", \"#\" + prefix + elm.name);\r\n        classAdd(svgElem, [prefix + \"svg-icons-item\"]); //are these two classes the same\r\n        classAdd(svgElem, prefix + \"icon-svg-item\");\r\n        svgElem.setAttribute(\"tabindex\", \"-1\"); //does this do anything\r\n        if (elm.show) {\r\n            classAdd(svgElem, [ prefix + \"show\"]);\r\n        }\r\n\r\n        svgWrapper.appendChild(svgElem);\r\n    });\r\n\r\n    for (var key in attributes) {\r\n        if (Object.prototype.hasOwnProperty.call(attributes, key)) {\r\n            svgWrapper.setAttribute(key, attributes[key]);\r\n        }\r\n    }\r\n    return svgWrapper;\r\n}\r\n\r\nexport function flush(el, ie) {\r\n    if (el instanceof NodeList) {\r\n        each(el, function (e) {\r\n            flush(e, ie);\r\n        });\r\n    } else {\r\n        if (ie) {\r\n            while (el.hasChildNodes()) {\r\n                el.removeChild(el.firstChild);\r\n            }\r\n        } else {\r\n            el.innerHTML = \"\";\r\n        }\r\n    }\r\n}\r\n\r\nexport function getText(value) {\r\n    var text, div = DOC.createElement(\"div\");\r\n    div.innerHTML = value;\r\n\r\n    function findText(div) {\r\n        each(div.childNodes, function(cNode) {\r\n            if (cNode.nodeType === 3) {\r\n                text = cNode.data;\r\n            }\r\n            findText(cNode);\r\n        }, this);\r\n    }\r\n    findText(div);\r\n    return text;\r\n}\r\n","import {prefix, uicoreCustomEvent} from \"./utilities.js\";\r\n\r\nexport default function Alert(element) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // bind, target alert, duration and stuff\r\n    var self = this,\r\n        stringAlert = \"Alert\",\r\n        closeButton = element.querySelector(\".\"+prefix+\"close-x\"),\r\n        dismissMessage = element.querySelector(\".\"+prefix+\"dismiss\"),\r\n   \r\n        // handlers\r\n        clickHandler = function(e) {\r\n            if ((closeButton === e.target || closeButton.contains(e.target)) || \r\n            (dismissMessage === e.target || dismissMessage.contains(e.target))){\r\n                self.toggle();\r\n            }\r\n        };\r\n\r\n    // public method\r\n    this.toggle = function() {\r\n        if (element) {\r\n            if (element.getAttribute(\"aria-expanded\") === \"true\") {\r\n                element.setAttribute(\"aria-expanded\", \"false\");\r\n                dismissMessage.focus();\r\n                uicoreCustomEvent(\"Alert\", \"DismissEvent\", element);\r\n            } else {\r\n                element.setAttribute(\"aria-expanded\", \"true\");\r\n                closeButton.focus();\r\n                uicoreCustomEvent(\"Alert\", \"OpenEvent\", element);\r\n            }\r\n           \r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringAlert in element)) {\r\n        // prevent adding event handlers twice\r\n        closeButton.addEventListener(\"click\", clickHandler, false);\r\n        dismissMessage.addEventListener(\"click\", clickHandler, false);\r\n    }\r\n\r\n    element[stringAlert] = self;\r\n}","import { prefix, getSibling, isIE, createElement } from \"../utilities\";\r\n\r\nexport default function InputMask( element ) { //, opts ) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var wrap,\r\n        stringInputMask = \"InputMask\",\r\n        mNum = \"XdDmMyY9\",\r\n        mChar = \"_\",\r\n        spacing = 0,\r\n        hasValue = false,\r\n        charSet = element.dataset.charset,\r\n        cursorMin = 0,\r\n        createShell = function(t) {\r\n            wrap = createElement(\"span\", {\r\n                class: prefix + \"input-shell\",\r\n            });\r\n            spacing = !t.getAttribute(\"set-cursor\") ? spacing : isNaN(parseInt(t.getAttribute(\"set-cursor\"))) ? spacing : parseInt(t.getAttribute(\"set-cursor\")) !=1 ? spacing : 1;\r\n            var mask = createElement(\"span\", {\r\n                    aria_hidden: \"true\",\r\n                    id: t.getAttribute(\"id\") + \"Mask\" }),\r\n\r\n                emphasis = createElement(\"i\"),\r\n                tClass = t.getAttribute(\"class\"),\r\n                pTxt = hasValue ? t.value: t.getAttribute(\"placeholder\"),\r\n                placeholder = document.createTextNode(pTxt),\r\n                errorDiv = getSibling(t, \"#\"+t.getAttribute(\"id\")+\"Feedback\");\r\n        \r\n            t.setAttribute(\"maxlength\", placeholder.length);\r\n            t.setAttribute(\"data-placeholder\", pTxt);\r\n            t.removeAttribute(\"placeholder\");\r\n        \r\n        \r\n            if ( !tClass || ( tClass && tClass.indexOf(\"masked\") === -1 ) ) {\r\n                t.setAttribute( \"class\", tClass + \" masked\");\r\n            }\r\n        \r\n            mask.appendChild(emphasis);\r\n            mask.appendChild(placeholder);\r\n        \r\n            wrap.appendChild(mask);\r\n            t.parentNode.insertBefore( wrap, t );\r\n            wrap.appendChild(t);\r\n            if(errorDiv) {\r\n                wrap.appendChild(errorDiv);\r\n            }\r\n        },\r\n        setValueOfMask = function(e) {\r\n            var value = e.target.value,\r\n                placeholder = e.target.getAttribute(\"data-placeholder\");\r\n  \r\n            return \"<i>\" + value + \"</i>\" + placeholder.substr(value.length);\r\n        },\r\n        handleFocusEvent = function(e) {\r\n            for (var s=0; s<spacing; s++) {\r\n                var char = e.target.getAttribute(\"data-placeholder\").charAt(s);\r\n                element.value += char;\r\n                var evt;\r\n                if (!isIE) {\r\n                    evt = new KeyboardEvent(\"keyup\", {\r\n                        bubbles : true,\r\n                        cancelable : true,\r\n                        char : char,\r\n                        key : \"[\",\r\n                        shiftKey : true\r\n                    });\r\n                } else {\r\n                    evt = document.createEvent(\"KeyboardEvent\");\r\n                    evt.initKeyboardEvent(\"keyup\", true, true, null, char, null, \"\", false, \"\" );\r\n                }\r\n                element.dispatchEvent(evt);\r\n            }\r\n        },\r\n        handleValueChange = function(e) {\r\n            var id = e.target.getAttribute(\"id\"),\r\n                mask = wrap.querySelector(\"#\" + id + \"Mask\"),\r\n                italic = wrap.querySelector(\"#\" + id + \"Mask i\"),\r\n                cursor;\r\n                \r\n            if(e.target.value == italic.innerHTML) {\r\n                return; // Continue only if value hasn't changed\r\n            }\r\n\r\n            setTimeout(function(){\r\n                cursor = element.selectionEnd; \r\n                e.target.value = handleCurrentValue(e);\r\n                mask.innerHTML = setValueOfMask(e);\r\n                \r\n                if (e.keyCode != 8) {\r\n                    //if the user is backspacing and then switches back to typing forward\r\n                    if(!(charSet.charAt(cursor-1).match(\".*[\"+ mNum + mChar + \"].*\"))){\r\n                        while(!(charSet.charAt(cursor-1).match(\".*[\"+ mNum + mChar + \"].*\")) && cursor < charSet.length){\r\n                            cursor++;\r\n                        }\r\n                    }\r\n                    else{\r\n                        //if the user is typing forward\r\n                        while(!(charSet.charAt(cursor).match(\".*[\"+ mNum + mChar + \"].*\")) && cursor < charSet.length){\r\n                            cursor++;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    //if the user is backspacing\r\n                    while(!(charSet.charAt(cursor-1).match(\".*[\"+ mNum + mChar + \"].*\")) && cursor > cursorMin){\r\n                        cursor--;\r\n                    }\r\n                    cursor = Math.max(cursor, cursorMin);\r\n                }\r\n                element.setSelectionRange(cursor, cursor);\r\n            }, 50);\r\n        },\r\n  \r\n        handleCurrentValue = function(e) {\r\n            var isCharsetPresent = e.target.getAttribute(\"data-charset\"),\r\n                placeholder = isCharsetPresent || e.target.getAttribute(\"data-placeholder\"),\r\n                value = e.target.value, l = placeholder.length, newValue = \"\",\r\n                i, j, isInt, isLetter, strippedValue;\r\n  \r\n            // strip special characters\r\n            strippedValue = isCharsetPresent ? value.replace(/\\W/g, \"\") : value.replace(/\\D/g, \"\");\r\n  \r\n            for (i = 0, j = 0; i < l; i++) {\r\n                isInt = !isNaN(parseInt(strippedValue[j]));\r\n                isLetter = strippedValue[j] ? strippedValue[j].match(/[A-Z]/i) : false;\r\n                var matchesNumber = mNum.indexOf(placeholder[i]) >= 0;\r\n                var matchesLetter = mChar.indexOf(placeholder[i]) >= 0;\r\n                if ((matchesNumber && isInt) || (isCharsetPresent && matchesLetter && isLetter)) {\r\n                    newValue += strippedValue[j++];\r\n                } else if ((!isCharsetPresent && !isInt && matchesNumber) || (isCharsetPresent && ((matchesLetter && !isLetter) || (matchesNumber && !isInt)))) {\r\n                    return newValue;\r\n                } else {\r\n                    newValue += placeholder[i];\r\n                }\r\n                // break if no characters left and the pattern is non-special character\r\n                if (strippedValue[j] == undefined) {\r\n                    if(i+1 >= l || charSet.charAt(i+1).match(\".*[\"+ mNum + mChar + \"].*\") || e.keyCode == 8){\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (e.target.getAttribute(\"data-valid-example\")) {\r\n                return validateProgress(e, newValue);\r\n            }\r\n            return newValue;\r\n        },\r\n  \r\n        validateProgress = function(e, value) {\r\n            var validExample = e.target.getAttribute(\"data-valid-example\"),\r\n                pattern = new RegExp(e.target.getAttribute(\"pattern\")),\r\n                placeholder = e.target.getAttribute(\"data-placeholder\"),\r\n                l = value.length, testValue = \"\";\r\n  \r\n            //convert to months\r\n            if (l == 1 && placeholder.toUpperCase().substr(0,2) == \"MM\") {\r\n                if(value > 1 && value < 10) {\r\n                    value = \"0\" + value;\r\n                }\r\n                return value;\r\n            }\r\n            // test the value, removing the last character, until what you have is a submatch\r\n            for (var i = l; i >= 0; i--) {\r\n                testValue = value + validExample.substr(value.length);\r\n                if (pattern.test(testValue)) {\r\n                    return value;\r\n                } else {\r\n                    value = value.substr(0, value.length-1);\r\n                }\r\n            }\r\n  \r\n            return value;\r\n        };\r\n\r\n    // add event listeners\r\n    // init\r\n    if (!(stringInputMask in element)) {\r\n        var parentNode = element.parentNode;\r\n        element.value ? hasValue = true: hasValue = false;\r\n        if (!charSet){\r\n            throw new Error(\"Data charset is missing or invalid\");\r\n        }\r\n        if(!charSet.charAt(0).match(\".*[\"+ mNum + mChar + \"].*\")){\r\n            while(!charSet.charAt(cursorMin).match(\".*[\"+ mNum + mChar + \"].*\")){\r\n                cursorMin++;\r\n            }\r\n        }\r\n        if ( !parentNode || !parentNode.classList.contains(prefix + \"input-shell\") ) {\r\n            createShell(element);\r\n            element.addEventListener(\"change\", handleValueChange, false);\r\n            element.addEventListener(\"keyup\", handleValueChange, false);\r\n            if (spacing > 0) {\r\n                element.addEventListener(\"focus\", handleFocusEvent, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    element[stringInputMask] = self;\r\n}","import { prefix, debounce, jsonOptionsInit, getFullScreenOverlay, validateNum, uicoreCustomEvent, each, getFocusableElements, getClosest, isIE, isEdge, isFirefox, DOC, createElement, globalObject} from \"./utilities.js\";\r\nimport InputMask from \"./helpers/inputMask.js\";\r\n\r\nexport function Spinbox(element, options) {\r\n\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.spinmin = element.dataset.spinmin ? validateNum(element.dataset.spinmin, 0) : validateNum(options.spinmin, 0);\r\n    options.spindefault = element.dataset.spindefault ? validateNum(element.dataset.spindefault, 0) : validateNum(options.spindefault, 0);\r\n    options.spinmax = element.dataset.spinmax ? validateNum(element.dataset.spinmax, 100) : validateNum(options.spinmax, 100);\r\n    options.spinstep = element.dataset.spinstep ? validateNum(element.dataset.spinstep, 1) : validateNum(options.spinstep, 1);\r\n\r\n    var msg= \"\";\r\n    if (isNaN(options.spinmin)) {\r\n        msg += \"Min value is not a number.\\n\";\r\n    }\r\n    if (isNaN(options.spinmax)) {\r\n        msg += \"Max value is not a number.\\n\";\r\n    }\r\n    if (isNaN(options.spindefault)) {\r\n        msg += \"Default value is not a number.\\n\";\r\n    } else if (options.spindefault < options.spinmin || options.spindefault > options.spinmax) {\r\n        msg += \"Default value falls outside of the min max values.\\n\";\r\n    }\r\n    if (isNaN(options.spinstep)) {\r\n        msg += \"Step value is not a number.\\n\";\r\n    }\r\n    if (msg.length) {\r\n        throw new Error(msg);\r\n    }\r\n    \r\n    var self = this,\r\n        stringSpinbox = \"Spinbox\",\r\n        input,\r\n        plusCtrl,\r\n        minusCtrl,\r\n        // horizontal,\r\n        // handlers\r\n        handleKeypressEvent = debounce(function(e) {\r\n            var charCode = (e.which) ? e.which : e.keyCode;\r\n            // if not a number\r\n            if ( input.value.length > options.spinmax.length || (charCode > 31 && (charCode < 48 || charCode > 57))) {\r\n                if (charCode == 13){\r\n                    input.blur();\r\n                }\r\n                else if (input.value.length == 0 && (options.spinmin < 0 && charCode == 45)) { // allow minus when input empty and spinmin less than zero\r\n                    return;\r\n                } else {\r\n                    e.preventDefault();\r\n                }\r\n            } else {\r\n                var newInput = input.value;\r\n                if (parseInt(newInput) > options.spinmax) {\r\n                    input.value = options.spinmax;\r\n                    input.setAttribute(\"aria-valuenow\", options.spinmax);\r\n                    e.preventDefault();\r\n                } else if (parseInt(newInput) < options.spinmin) {\r\n                    input.value = options.spinmin;\r\n                    input.setAttribute(\"aria-valuenow\", options.spinmin);\r\n                    e.preventDefault();\r\n                } else {\r\n                    if (input.value == \"-\" && e.charCode == 48) { // dont allow -0\r\n                        e.preventDefault();\r\n                    } else {\r\n                        if (charCode == 13) { // Enter key\r\n                            if (Math.abs(parseInt(input.value)) % options.spinstep > 0) {\r\n                                input.value = parseInt(input.value) - (Math.abs(parseInt(input.value)) % options.spinstep);\r\n                            }\r\n                            input.blur();\r\n                        } else {\r\n                            input.setAttribute(\"aria-valuenow\", input.value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, 500),\r\n        handleCtrlClickEvent = function(e, control) {\r\n            var temp;\r\n            if (control === minusCtrl) {\r\n                temp = parseInt(input.value) - options.spinstep;\r\n            } else {\r\n                temp = parseInt(input.value) + options.spinstep;\r\n            }\r\n            if (!(temp < options.spinmin) && !(temp > options.spinmax)) {\r\n                input.value = temp;\r\n                input.setAttribute(\"aria-valuenow\", temp);\r\n                handleDisabling();\r\n                uicoreCustomEvent(\"Spinbox\", \"ValueChangeEvent\", element, {\"value\": input.value});\r\n            }\r\n        },\r\n        handleDisabling = function() {\r\n            if (input.value == options.spinmin || (parseInt(input.value) - options.spinstep) < options.spinmin) {\r\n                minusCtrl.setAttribute(\"disabled\", \"\");\r\n            } else if (minusCtrl.hasAttribute(\"disabled\")) {\r\n                minusCtrl.removeAttribute(\"disabled\");\r\n            }\r\n            if (input.value == options.spinmax || (parseInt(input.value) + options.spinstep) > options.spinmax) {\r\n                plusCtrl.setAttribute(\"disabled\", \"\");\r\n            } else if (plusCtrl.hasAttribute(\"disabled\")) {\r\n                plusCtrl.removeAttribute(\"disabled\");\r\n            }\r\n        },\r\n        handleFocusOut = function() {\r\n            // if input is empty, negative, or NaN\r\n            if (input.value.length == 0 || input.value == \"-\" || !(/^\\d+$/.test(input.value))) {\r\n                input.value = options.spindefault;\r\n            } else if (parseInt(input.value) < options.spinmin) {\r\n                input.value = options.spinmin;\r\n            } else if (parseInt(input.value) > options.spinmax) {\r\n                input.value = options.spinmax;\r\n            } else if (Math.abs(parseInt(input.value)) % options.spinstep > 0) {\r\n                input.value = parseInt(input.value) - (Math.abs(parseInt(input.value)) % options.spinstep);\r\n            } else if(input.value.match(/^0+/g)) {\r\n                var match = input.value.match(/^0+/g);\r\n                var temp = input.value.replace(match,\"\");\r\n                if (temp.length == 0) {\r\n                    input.value = \"0\";\r\n                } else {\r\n                    input.value = temp;\r\n                }\r\n            }\r\n            handleDisabling();\r\n            uicoreCustomEvent(\"Spinbox\", \"ValueChangeEvent\", element, {\"value\": input.value});\r\n\r\n        },\r\n        handleArrowEvent = function(e) {\r\n            switch (e.keyCode) {\r\n            case 35: // end\r\n                e.preventDefault();\r\n                input.value = options.spinmax;\r\n                uicoreCustomEvent(\"Spinbox\", \"ValueChangeEvent\", element, {\"value\": input.value});\r\n                break;\r\n            case 36: // home\r\n                e.preventDefault();\r\n                input.value = options.spinmin;\r\n                uicoreCustomEvent(\"Spinbox\", \"ValueChangeEvent\", element, {\"value\": input.value});\r\n                break;\r\n            case 38: // up\r\n                e.preventDefault();\r\n                if (input.value.length) {\r\n                    plusCtrl.click();\r\n                } else {\r\n                    input.value = options.spinmin + options.spinstep;\r\n                    input.setAttribute(\"aria-valuenow\", input.value);\r\n                    uicoreCustomEvent(\"Spinbox\", \"ValueChangeEvent\", element, {\"value\": input.value});\r\n                }\r\n                break;\r\n            case 40: // down\r\n                e.preventDefault();\r\n                minusCtrl.click();\r\n                break;\r\n            case 37: // left\r\n            case 39: // right \r\n                e.preventDefault(); \r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        };\r\n\r\n    // init\r\n    if (!(stringSpinbox in element)) {\r\n        input = element.querySelector(\".\" + prefix + \"spinbox-input\");\r\n        input.addEventListener(\"keypress\", handleKeypressEvent);\r\n        input.addEventListener(\"keyup\", handleDisabling);\r\n        input.addEventListener(\"focusout\", handleFocusOut);\r\n        element.addEventListener(\"keydown\", handleArrowEvent);\r\n\r\n        input.value = options.spindefault;\r\n        input.setAttribute(\"aria-valuenow\", options.spindefault);\r\n        input.setAttribute(\"aria-valuemin\", options.spinmin);\r\n        input.setAttribute(\"aria-valuemax\", options.spinmax);\r\n\r\n        var controls = element.querySelectorAll(\"button.\" + prefix + \"spinbox-btn\");\r\n        if (element.classList.contains(prefix + \"spinbox-horizontal\")) {// horizontal spinbox\r\n            // horizontal = true;\r\n            minusCtrl = controls[0];\r\n            plusCtrl = controls[1];\r\n        } else {\r\n            // horizontal = false;\r\n            minusCtrl = controls[1];\r\n            plusCtrl = controls[0];\r\n        }\r\n\r\n        minusCtrl.addEventListener(\"click\", function(e) {\r\n            handleCtrlClickEvent(e, minusCtrl);\r\n        });\r\n        plusCtrl.addEventListener(\"click\", function(e) {\r\n            handleCtrlClickEvent(e, plusCtrl);\r\n        });\r\n        handleDisabling();\r\n    }\r\n\r\n\r\n    element[stringSpinbox] = self;\r\n}\r\n\r\nexport function DatePicker(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n    \r\n    // set option\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.datesFilter = options.datesFilter ? options.datesFilter : false;\r\n    options.pastDates = options.pastDates ? options.pastDates : false;\r\n    options.availableWeekDays = options.availableWeekDays ? options.availableWeekDays : [{day: \"monday\"},{day: \"tuesday\"},{day: \"wednesday\"},{day: \"thursday\"},{day: \"friday\"},{day: \"saturday\"},{day: \"sunday\"}];\r\n    options.notBeforeDate = options.notBeforeDate ? new Date(options.notBeforeDate) : null;\r\n    options.notAfterDate = options.notAfterDate ? new Date(options.notAfterDate) : null;\r\n    options.button_prev = options.button_prev ? options.button_prev : null; \r\n    options.button_next = options.button_next ? options.button_next : null; \r\n\r\n    var self = this,\r\n        stringDatePicker = \"DatePicker\",\r\n        calendarBtn = element.querySelector(\".\" + prefix + \"datepicker-btn\"),\r\n        target = element[\"getAttribute\"](\"data-target\"),\r\n        dateInput = element.querySelector(\".\" + prefix + \"form-control\"),\r\n        calendar = element.querySelector(target),\r\n        pickerBtn = element.querySelector(\".\" + prefix + \"datepicker-btn\"),\r\n        form = null,\r\n        monthEl = null,\r\n        focusableEls,\r\n        currentSelected,\r\n        overlay = getFullScreenOverlay(),\r\n        smallMedia = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        calendarWrapper,\r\n        tempSelected = new Date(),\r\n        todaysDate = new Date(),\r\n        monthLabel = null,\r\n        datePtr = new Date(),\r\n        monthsTexts = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n        keyCode = Object.freeze({\r\n            \"TAB\": 9,\r\n            \"ENTER\": 13,\r\n            \"ESC\": 27,\r\n            \"SPACE\": 32,\r\n            \"PAGEUP\": 33,\r\n            \"PAGEDOWN\": 34,\r\n            \"END\": 35,\r\n            \"HOME\": 36,\r\n            \"LEFT\": 37,\r\n            \"UP\": 38,\r\n            \"RIGHT\": 39,\r\n            \"DOWN\": 40\r\n        }),\r\n        setFocusableElements = function() {\r\n            focusableEls = getFocusableElements(calendar);\r\n        },\r\n        toggleCalendar = function() {\r\n            if (calendar.classList.contains(prefix + \"d-none\")) {\r\n                calendar.classList.remove(prefix + \"d-none\");\r\n                calendarWrapper.classList.remove(prefix+\"hide\");\r\n                if (smallMedia.matches) createOverlay();\r\n                repositionIfNeeded();\r\n                globalObject.addEventListener(\"resize\", toggleCalendar);\r\n                //check if calendar is within confines of page\r\n                var dateText = dateInput.value;\r\n                if (dateText && dateInput.validity.valid && checkDateValidity(new Date(dateText))) {\r\n                    currentSelected = new Date(dateText);\r\n                    tempSelected = new Date(dateText);\r\n                    if (datePtr.getFullYear() != currentSelected.getFullYear()) {\r\n                        datePtr.setFullYear(currentSelected.getFullYear());\r\n                    }\r\n                    if (datePtr.getMonth() != currentSelected.getMonth()) {\r\n                        datePtr.setMonth(currentSelected.getMonth());\r\n                    }\r\n                    createMonth();\r\n                    var newDateElem = element.querySelector(\"[data-calendar-date=\\\"\" + currentSelected + \"\\\"]\");\r\n                    if(!newDateElem.classList.contains(prefix + \"datepicker-date-disabled\")) {\r\n                        newDateElem.classList.add(prefix + \"datepicker-date-selected\");\r\n                        var nextBtn = newDateElem.querySelector(\".\" + prefix + \"datepicker-calendar-day\");\r\n                        nextBtn.removeAttribute(\"tabindex\");\r\n                        nextBtn.focus();\r\n                    }\r\n                    tempSelected = new Date(currentSelected.getTime());\r\n                }\r\n                else {\r\n                    resetToDefaultDate();\r\n                }\r\n                calendar.addEventListener(\"focusout\", blurHandler, false);\r\n            } else {\r\n                calendar.classList.add(prefix + \"d-none\");\r\n                calendarWrapper.classList.add(prefix+\"hide\");\r\n                globalObject.removeEventListener(\"resize\", toggleCalendar);\r\n                removeActiveClass();\r\n                pickerBtn.focus();\r\n                calendar.removeEventListener(\"focusout\", blurHandler, false);\r\n                removeOverlay();\r\n            }\r\n        },\r\n        createWrapper = function() {\r\n            var wrapper = createElement(\"div\", {\r\n                class: prefix + \"calendar-wrapper \" + prefix + \"hide\"\r\n            });\r\n            calendar.parentNode.appendChild(wrapper);\r\n            wrapper.appendChild(calendar);\r\n            return wrapper;\r\n        },\r\n        repositionIfNeeded = function() {\r\n            //right+left checking\r\n            calendar.style.right = \"\";\r\n            calendar.style.top = \"\";\r\n            if (calendar.getBoundingClientRect().right > document.body.offsetWidth) {\r\n                calendar.style.right = (document.body.offsetWidth - calendarBtn.getBoundingClientRect().right) +\"px\";\r\n            }\r\n\r\n            //vertical+horizontal checking\r\n            if (calendar.getBoundingClientRect().bottom > window.innerHeight) {\r\n                var dist = calendar.getBoundingClientRect().bottom - window.innerHeight - window.pageYOffset;\r\n                calendar.style.top = calendar.getBoundingClientRect().top - dist - 4 + \"px\"; //4px buffer as to not directly hug browser frame\r\n            }\r\n        },\r\n        blurHandler = function() {\r\n            setTimeout( function() {\r\n                if(calendar && !calendar.contains(document.activeElement) && !calendarBtn.contains(document.activeElement)) {\r\n                    toggleCalendar();\r\n                    calendarBtn.focus();\r\n                }\r\n            }, 10);\r\n        },\r\n        getWeekDay = function (day) {\r\n            return [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"][day];\r\n        },  \r\n        createDay = function (date) {\r\n            var isAvailable = true;\r\n            var newDayElem = document.createElement(\"div\");\r\n            var dateElem = document.createElement(\"button\");\r\n            dateElem.setAttribute(\"tabindex\", \"-1\");\r\n            dateElem.setAttribute(\"type\", \"button\");\r\n            dateElem.innerHTML = date.getDate();\r\n            dateElem.addEventListener(\"keydown\", dateKeydownHandler, false);\r\n            dateElem.className = prefix + \"datepicker-calendar-day\";\r\n            newDayElem.className = prefix + \"datepicker-date\";\r\n            newDayElem.setAttribute(\"data-calendar-date\", date);\r\n            \r\n            var available_week_day = options.availableWeekDays.filter(function(f) {\r\n                return (f.day === date.getDay() || f.day === getWeekDay(date.getDay()));\r\n            });\r\n            if (date.getMonth() != datePtr.getMonth()) {\r\n                newDayElem.classList.add(prefix + \"datepicker-date-outdated\");\r\n            }\r\n            if (datePtr.getTime() <= todaysDate.getTime() - 1 && !options.pastDates) {\r\n                newDayElem.classList.add(prefix + \"datepicker-date-disabled\");\r\n                dateElem.setAttribute(\"disabled\", \"\");\r\n            } else {\r\n                if (options.datesFilter) {\r\n                    if (options.notBeforeDate && date <= options.notBeforeDate) {\r\n                        isAvailable = false;\r\n                    }\r\n                    if (options.notAfterDate && date > options.notAfterDate) {\r\n                        isAvailable = false;\r\n                    }\r\n                    if (available_week_day.length && isAvailable) {\r\n                        newDayElem.classList.add(prefix + \"datepicker-date-active\");\r\n                        newDayElem.setAttribute(\"data-calendar-data\", JSON.stringify(available_week_day[0]));\r\n                        newDayElem.setAttribute(\"data-calendar-status\", \"active\");\r\n                    } else {\r\n                        newDayElem.classList.add(prefix + \"datepicker-date-disabled\");\r\n                        dateElem.setAttribute(\"disabled\", \"\");\r\n                    }\r\n                } else {\r\n                    newDayElem.classList.add(prefix + \"datepicker-date-active\");\r\n                    newDayElem.setAttribute(\"data-calendar-status\", \"active\");\r\n                }\r\n            }\r\n            //set current selected date\r\n            if (currentSelected && date.toString() == currentSelected.toString() && !newDayElem.classList.contains(prefix + \"datepicker-date-disabled\")) {\r\n                newDayElem.classList.add(prefix + \"datepicker-date-selected\");\r\n        \r\n            }\r\n            //if textbox is empty \r\n            if (date.toString() == tempSelected.toString() && !newDayElem.classList.contains(prefix + \"datepicker-date-disabled\")) {\r\n                newDayElem.classList.add(prefix + \"datepicker-date-temp-selected\");\r\n                dateElem.removeAttribute(\"tabindex\");\r\n            }\r\n            //add date to the calendar\r\n            newDayElem.appendChild(dateElem);\r\n            monthEl.appendChild(newDayElem);\r\n        },\r\n        createOverlay = function () {\r\n            DOC.body.style.overflow = \"hidden\";\r\n            if (overlay && !(overlay.classList.contains(prefix + \"show\"))) {\r\n                overlay.classList.add(prefix + \"show\");\r\n                overlay.removeAttribute(\"hidden\");\r\n                if( overlay.style.visibility == \"hidden\"){\r\n                    overlay.style.visibility = \"\";\r\n                }\r\n            } else {\r\n                console.warn(\"MODAL: Overlay requested. Corresponding HTML missing. Please apply id 'dds__full-screen-overlay' and class 'dds__overlay' to an empty div\");\r\n            }\r\n\r\n        },\r\n        removeOverlay = function () {\r\n            DOC.body.style.overflow = \"\";\r\n            if (overlay) {\r\n                overlay.classList.remove(prefix + \"show\");\r\n            }\r\n        },\r\n        removeActiveClass = function () {\r\n            each(element.querySelectorAll(\".\" + prefix + \"datepicker-date-selected\"), function(day) {\r\n                day.classList.remove(prefix + \"datepicker-date-selected\");\r\n            });\r\n        },\r\n        removeTempClass = function() {\r\n            each(element.querySelectorAll(\".\" + prefix + \"datepicker-date-temp-selected\"), function(day) {\r\n                day.classList.remove(prefix + \"datepicker-date-temp-selected\");\r\n                day.firstElementChild.setAttribute(\"tabindex\", \"-1\");\r\n            });\r\n        },\r\n        resetToDefaultDate = function() {\r\n            currentSelected = null;\r\n            var defaultDate = getNearestAvailableDay(new Date(options.defaultDate));\r\n            todaysDate = getNearestAvailableDay(todaysDate);\r\n            tempSelected = new Date(defaultDate.getTime());\r\n            if (datePtr.getFullYear() != tempSelected.getFullYear()) {\r\n                datePtr.setFullYear(tempSelected.getFullYear());\r\n            }\r\n            if (datePtr.getMonth() != tempSelected.getMonth()) {\r\n                datePtr.setMonth(tempSelected.getMonth());\r\n            }\r\n            createMonth();\r\n            var newDateElem = element.querySelector(\"[data-calendar-date=\\\"\" + tempSelected + \"\\\"]\");\r\n            newDateElem.classList.add(prefix + \"datepicker-date-temp-selected\");\r\n            var nextBtn = newDateElem.querySelector(\".\" + prefix + \"datepicker-calendar-day\");\r\n            nextBtn.removeAttribute(\"tabindex\");\r\n            nextBtn.focus();\r\n        },\r\n        selectDate = function () {\r\n            var activeDates = element.querySelectorAll(\"[data-calendar-status=active]\");\r\n            each(activeDates, function(date) {\r\n                date.addEventListener(\"click\", function () {\r\n                    removeActiveClass();\r\n                    removeTempClass();\r\n                    var datas = this.dataset;\r\n                    this.classList.add(prefix + \"datepicker-date-selected\");\r\n                    currentSelected = new Date(datas.calendarDate);\r\n                    setNewDate();\r\n                });\r\n            });\r\n        },\r\n        createMonth = function () {\r\n            clearCalendar();\r\n            var currentMonth = datePtr.getMonth();\r\n            monthLabel.innerHTML = monthsTexts[datePtr.getMonth()] + \" \" + datePtr.getFullYear();\r\n            //check to see if previous month is out of range\r\n            var monthCheckBefore = new Date(datePtr.getTime());\r\n            monthCheckBefore.setDate(monthCheckBefore.getDate() - 1); \r\n            if ((options.notBeforeDate && monthCheckBefore <= options.notBeforeDate) || (!options.pastDates && monthCheckBefore.getTime() <= todaysDate.getTime() - 1)) {\r\n                options.button_prev.classList.add(prefix + \"disabled\");\r\n                options.button_prev.setAttribute(\"disabled\", \"\");\r\n            } else {\r\n                options.button_prev.classList.remove(prefix + \"disabled\");\r\n                options.button_prev.removeAttribute(\"disabled\");\r\n            }\r\n            //add previous month days on calendar\r\n            var daysPrev = datePtr.getDay();\r\n            if(daysPrev > 0) {\r\n                for(var i=daysPrev; i>0; i--) {\r\n                    var prevDate = new Date(datePtr.getTime());\r\n                    prevDate.setDate(datePtr.getDate() - i);\r\n                    createDay(prevDate);\r\n                }\r\n            }\r\n            //add current month days onto calendar\r\n            while (datePtr.getMonth() === currentMonth) {\r\n                createDay(datePtr);\r\n                datePtr.setDate(datePtr.getDate() + 1);\r\n            }\r\n            //check to see if next month is out of range\r\n            var monthCheckAfter = new Date(datePtr.getTime());\r\n            if(options.notAfterDate && monthCheckAfter > options.notAfterDate) {\r\n                options.button_next.classList.add(prefix + \"disabled\");\r\n                options.button_next.setAttribute(\"disabled\", \"\");\r\n            } else {\r\n                options.button_next.classList.remove(prefix + \"disabled\");\r\n                options.button_next.removeAttribute(\"disabled\");\r\n            }\r\n            //add next month days onto calendar\r\n            datePtr.setDate(datePtr.getDate() - 1);\r\n            var daysAfter = 6 - datePtr.getDay();\r\n            if (daysAfter > 0) {\r\n                for(var j=1; j<=daysAfter; j++) {\r\n                    var futureDate = new Date(datePtr.getTime());\r\n                    futureDate.setDate(datePtr.getDate() + j);\r\n                    createDay(futureDate);\r\n                }\r\n            }\r\n            datePtr.setDate(1);\r\n            selectDate();\r\n            setFocusableElements();\r\n        },\r\n        monthPrev = function (e) {\r\n            if (e) {\r\n                e.preventDefault();\r\n            }\r\n            datePtr.setMonth(datePtr.getMonth() - 1);\r\n            createMonth();\r\n        },\r\n        monthNext = function (e) {\r\n            if (e) {\r\n                e.preventDefault();\r\n            }\r\n            datePtr.setMonth(datePtr.getMonth() + 1);\r\n            createMonth();\r\n        },\r\n        checkDateValidity = function(date) {\r\n            var available_week_day = options.availableWeekDays.filter(function(f) {\r\n                return (f.day === date.getDay() || f.day === getWeekDay(date.getDay()));\r\n            });\r\n            //check if valid weekday\r\n            if(available_week_day.length == 0) {\r\n                return false;\r\n            }\r\n            //check if not before\r\n            if (options.notBeforeDate && date <= options.notBeforeDate) {\r\n                return false;\r\n            }\r\n            //check if not after\r\n            if (options.notAfterDate && date > options.notAfterDate) {\r\n                return false;\r\n            }\r\n            // check if before today\r\n            if (!options.pastDates && date.getTime() <= todaysDate.getTime() - 1) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        clearCalendar = function () {\r\n            monthEl.innerHTML = \"\";\r\n        },\r\n        createCalendar = function () {\r\n            element.querySelector(target).innerHTML = \"<div class=\\\"dds__datepicker-header\\\"><button type=\\\"button\\\" class=\\\"dds__datepicker-nav-btn\\\" aria-label=\\\"previous month\\\" data-calendar-toggle=\\\"previous\\\"><svg focusable=\\\"false\\\" class=\\\"dds__svg-icons\\\"><use xlink:href=\\\"#dds__chevron-left\\\"></use></svg></button><div class=\\\"dds__datepicker-header__label\\\" data-calendar-label=\\\"month\\\"></div><button type=\\\"button\\\" class=\\\"dds__datepicker-nav-btn\\\" aria-label=\\\"next month\\\"data-calendar-toggle=\\\"next\\\"><svg focusable=\\\"false\\\" class=\\\"dds__svg-icons\\\"><use xlink:href=\\\"#dds__chevron-right\\\"></use></svg></button></div><div class=\\\"dds__datepicker-week\\\"></div><div class=\\\"dds__datepicker-body\\\" data-calendar-area=\\\"month\\\"></div><div class=\\\"dds__calendar-buttons\\\"></div>\";\r\n            element.querySelector(\".\" + prefix + \"datepicker-week\").innerHTML = \"<span>SUN</span><span>MON</span><span>TUE</span><span>WED</span><span>THU</span><span>FRI</span><span>SAT</span>\";\r\n            var bottomMenu = element.querySelector(\".\" + prefix + \"calendar-buttons\");\r\n            bottomMenu.innerHTML = \"<button type=\\\"button\\\" class=\\\"dds__btn dds__btn-secondary\\\" aria-label=\\\"cancel\\\">Cancel</button>\";\r\n            bottomMenu.querySelector(\".\" + prefix + \"btn-secondary\").addEventListener(\"click\", toggleCalendar, false);\r\n            bottomMenu.querySelector(\".\" + prefix + \"btn-secondary\").addEventListener(\"keydown\", buttonKeydownHandler, false);\r\n        },\r\n        setNewDate = function() {\r\n            var deliminator = \"/\";\r\n            dateInput.value = (\"0\" + (currentSelected.getMonth() + 1)).slice(-2) + deliminator + (\"0\" + currentSelected.getDate()).slice(-2) + deliminator + currentSelected.getFullYear();\r\n            var e = document.createEvent(\"Event\");\r\n            e.initEvent(\"change\", false, false);\r\n            dateInput.dispatchEvent(e);\r\n            dateInput.focus();\r\n            uicoreCustomEvent(\"DatePicker\", \"SelectedDate\", element, { \"date\": currentSelected});\r\n            toggleCalendar();\r\n        },\r\n        setNewTempDate = function(prevDate, currentDate) {\r\n            //look for the new date\r\n            tempSelected = getNextAvailableDay(prevDate, currentDate);\r\n            //remove current selected\r\n            var oldSelected = element.querySelector(\"[data-calendar-date=\\\"\" + prevDate + \"\\\"]\");\r\n            if (oldSelected) {\r\n                oldSelected.children[0].setAttribute(\"tabindex\", \"-1\");\r\n                oldSelected.classList.remove(prefix + \"datepicker-date-temp-selected\");\r\n            }\r\n            var newDateElem = element.querySelector(\"[data-calendar-date=\\\"\" + tempSelected + \"\\\"]\");\r\n            var nextBtn = newDateElem.querySelector(\".\" + prefix + \"datepicker-calendar-day\");\r\n            nextBtn.removeAttribute(\"tabindex\");\r\n            nextBtn.parentElement.classList.add(prefix + \"datepicker-date-temp-selected\");\r\n            nextBtn.focus();\r\n        },\r\n        getNextAvailableDay = function(prevDate, currentDate) {\r\n            var newDate = element.querySelector(\":not(.dds__datepicker-date-disabled):not(.dds__datepicker-date-outdated)[data-calendar-date='\" + currentDate + \"']\");\r\n            var direction = prevDate < currentDate ? 1 : -1;\r\n            //check day\r\n            if (newDate) {\r\n                return currentDate;\r\n            }\r\n            else {\r\n                //check if not before\r\n                if (options.notBeforeDate && currentDate <= options.notBeforeDate) {\r\n                    return prevDate;\r\n                }\r\n                //check if not after\r\n                if (options.notAfterDate && currentDate >= options.notAfterDate) {\r\n                    return prevDate;\r\n                }\r\n                // check if before today\r\n                if (currentDate.getTime() <= todaysDate.getTime() - 1 && !options.pastDates) {\r\n                    return prevDate;\r\n                }\r\n                if (currentDate.getMonth() != prevDate.getMonth()) {\r\n                    if (direction == 1) {\r\n                        monthNext();\r\n                    }\r\n                    if (direction == -1) {\r\n                        monthPrev(); \r\n                    }\r\n                    if (element.querySelector(\":not(.dds__datepicker-date-disabled)[data-calendar-date='\" + currentDate + \"']\")) {\r\n                        return currentDate;\r\n                    }\r\n                    else {\r\n                        prevDate = new Date (currentDate.getTime());\r\n                        currentDate.setDate(currentDate.getDate() + direction);\r\n                        return getNextAvailableDay(prevDate, currentDate);\r\n                    }\r\n                } else {\r\n                    prevDate = new Date (currentDate.getTime());\r\n                    currentDate.setDate(currentDate.getDate() + direction);\r\n                    return getNextAvailableDay(prevDate, currentDate);\r\n                }\r\n            }\r\n        },\r\n        getNearestAvailableDay = function(currentDate) {\r\n            if (checkDateValidity(currentDate)) {\r\n                return currentDate;\r\n            } else {\r\n                var nextDate = new Date(currentDate.getTime());\r\n                nextDate.setDate(nextDate.getDate() + 1);\r\n                var prevDate = new Date(currentDate.getTime());\r\n                prevDate.setDate(prevDate.getDate() - 1); \r\n                var nearestRight = getNextAvailableDay(currentDate, nextDate);\r\n                if (nearestRight.getMonth() > currentDate.getMonth()) {\r\n                    monthPrev();\r\n                    removeTempClass();\r\n                } \r\n                var nearestLeft = getNextAvailableDay(currentDate, prevDate);\r\n                if (nearestRight.getMonth() > currentDate.getMonth()) {\r\n                    return nearestLeft;\r\n                } \r\n                if (nearestLeft.getMonth() < currentDate.getMonth()) {\r\n                    monthNext();\r\n                    removeTempClass();\r\n                    return nearestRight;\r\n                }\r\n                var daysRight = Math.abs(currentDate.getDate() - nearestRight.getDate());\r\n                var daysLeft = Math.abs(currentDate.getDate() - nearestLeft.getDate());\r\n                //if getnextavailableday is not in available range\r\n                if(daysLeft == 0 && daysRight == 0) {\r\n                    var od1 = new Date(currentDate.getTime());\r\n                    var od2 = new Date(currentDate.getTime());\r\n                    while (!checkDateValidity(od1) && !checkDateValidity(od2)) {\r\n                        if(od1.getMonth() == currentDate.getMonth()) {\r\n                            od1.setDate((od1.getDate()-1));\r\n                        }\r\n                        if (od2.getMonth() == currentDate.getMonth()) {\r\n                            od2.setDate((od2.getDate()+1));\r\n                        }\r\n                    }\r\n                    if (checkDateValidity(od1)) {\r\n                        return od1;\r\n                    } else{\r\n                        return od2;\r\n                    }\r\n                } else if (daysLeft == 0) {\r\n                    return nearestRight;\r\n                } else if (daysRight == 0) {\r\n                    return nearestLeft;\r\n                } else if(daysRight < daysLeft) {\r\n                    return nearestRight;\r\n                } else {\r\n                    return nearestLeft;\r\n                }\r\n            }\r\n        },\r\n        dateKeydownHandler = function(e) {\r\n            var prevSelected = new Date (tempSelected.getTime());\r\n            switch (e.keyCode) {\r\n            case keyCode.UP: // up key\r\n                e.preventDefault();\r\n                tempSelected.setDate(tempSelected.getDate() - 7);\r\n                setNewTempDate(prevSelected, tempSelected);\r\n                break;\r\n            case keyCode.DOWN: // down key\r\n                e.preventDefault();\r\n                tempSelected.setDate(tempSelected.getDate() + 7);\r\n                setNewTempDate(prevSelected, tempSelected);\r\n                break;\r\n            case keyCode.LEFT: // left key\r\n                e.preventDefault();\r\n                tempSelected.setDate(tempSelected.getDate() - 1);\r\n                setNewTempDate(prevSelected, tempSelected);\r\n                break;\r\n            case keyCode.RIGHT: // right key\r\n                e.preventDefault();\r\n                tempSelected.setDate(tempSelected.getDate() + 1);\r\n                setNewTempDate(prevSelected, tempSelected);\r\n                break;\r\n            case keyCode.ESC: // esc key\r\n                var oldSelected = element.querySelector(\".\" + prefix + \"datepicker-date-selected\");\r\n                if (oldSelected) {\r\n                    oldSelected.classList.remove(prefix + \"datepicker-date-selected\");\r\n                    oldSelected.children[0].setAttribute(\"tabindex\", \"-1\");\r\n                }\r\n                toggleCalendar();\r\n                break;\r\n            case keyCode.TAB: // tab key\r\n                if ( focusableEls.length === 1 ) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if ( e.shiftKey ) {\r\n                    if ( document.activeElement === focusableEls[0] ) {\r\n                        e.preventDefault();\r\n                        focusableEls[ focusableEls.length - 1 ].focus();\r\n                    }\r\n                } else {\r\n                    if ( document.activeElement === focusableEls[ focusableEls.length - 1 ] ) {\r\n                        e.preventDefault();\r\n                        focusableEls[0].focus();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        },\r\n        buttonKeydownHandler = function(e) {\r\n            switch (e.keyCode) {\r\n            case keyCode.ESC: // esc key\r\n                toggleCalendar();\r\n                break;\r\n            case keyCode.TAB: // tab key\r\n                if ( focusableEls.length === 1 ) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if ( e.shiftKey ) {\r\n                    if ( document.activeElement === focusableEls[0] ) {\r\n                        e.preventDefault();\r\n                        focusableEls[ focusableEls.length - 1 ].focus();\r\n                    }\r\n                } else {\r\n                    if ( document.activeElement === focusableEls[ focusableEls.length - 1 ] ) {\r\n                        e.preventDefault();\r\n                        focusableEls[0].focus();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        },\r\n        inputHandler = function() {\r\n            if(checkDateValidity(new Date(dateInput.value)) && getComputedStyle(errorMsg).display == \"block\") {\r\n                errorMsg.style.display = \"none\";\r\n                dateInput.setCustomValidity(\"\");\r\n            } else if ((!checkDateValidity(new Date(dateInput.value)))) {\r\n                if (!isEdge || (isEdge && calendar.classList.contains(prefix + \"d-none\") && document.activeElement !== calendarBtn)) {\r\n                    toggleCalendar();\r\n                }\r\n                if (getComputedStyle(errorMsg).display == \"none\") {\r\n                    errorMsg.style.display = \"block\";\r\n                    dateInput.setCustomValidity(\"Invalid Date\");\r\n                }\r\n            }\r\n        },\r\n        submitHandler = function(event) {\r\n            var formValidationErrorSuffix = \"Feedback\";\r\n            if (form.checkValidity() === false) {\r\n                each(form, function(el) {\r\n                    if(el.tagName == \"INPUT\") {\r\n                        var errorMsg = form.querySelector(\"#\"+ el.getAttribute(\"id\")+formValidationErrorSuffix);\r\n                        setTimeout(function() {\r\n                            if (el.classList.contains(\"dds__datepicker-input\")) {\r\n                                if (checkDateValidity(new Date(el.value))) {\r\n                                    el.setCustomValidity(\"\");\r\n                                } else {\r\n                                    el.setCustomValidity(\"Invalid Date\");\r\n                                }\r\n                            }\r\n                            if (!el.validity.valid) {\r\n                                //if error message has not been turned on yet\r\n                                if(errorMsg && !(getComputedStyle(errorMsg)[\"display\"] == \"block\")){\r\n                                    errorMsg.style.display = \"block\";\r\n                                }\r\n                                el.setAttribute(\"aria-invalid\", \"true\");\r\n                                el.setAttribute(\r\n                                    \"aria-describedby\",\r\n                                    el.getAttribute(\"id\") + formValidationErrorSuffix\r\n                                );\r\n                            } else {\r\n                                //if error message has not been turned off yet\r\n                                if(errorMsg && (getComputedStyle(errorMsg)[\"display\"] == \"block\")){\r\n                                    errorMsg.style.display = \"none\";\r\n                                } \r\n                                el.setAttribute(\"aria-invalid\", \"false\");\r\n                                el.setAttribute(\"aria-describedby\", \"\");\r\n                            }\r\n                        }, 10);\r\n                    }\r\n                });\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n\r\n            form.classList.add(\"dds__was-validated\");\r\n        };\r\n    //public functions\r\n    this.init = function () {\r\n        createCalendar();\r\n        options.button_prev = document.querySelector(target + \" [data-calendar-toggle=previous]\");\r\n        options.button_next = document.querySelector(target + \" [data-calendar-toggle=next]\");\r\n        monthEl = document.querySelector(target + \" [data-calendar-area=month]\");\r\n        monthLabel = document.querySelector(target + \" [data-calendar-label=month]\");\r\n        datePtr.setDate(1);\r\n        createMonth();\r\n        calendarWrapper = element.querySelector(\".\"+prefix+\"calendar-wrapper\") ? element.querySelector(\".\"+prefix+\"calendar-wrapper\") : createWrapper();\r\n        options.button_prev.addEventListener(\"click\", function() {\r\n            monthPrev();\r\n            removeTempClass();\r\n            var prevMonthDate = new Date(tempSelected.getTime());\r\n            prevMonthDate.setMonth(prevMonthDate.getMonth()-1);\r\n            if (tempSelected.getMonth() === prevMonthDate.getMonth()) {\r\n                prevMonthDate.setDate(0);\r\n            }\r\n            setNewTempDate(prevMonthDate, getNearestAvailableDay(prevMonthDate));\r\n            if(!options.button_prev.classList.contains(prefix + \"disabled\")) {\r\n                options.button_prev.focus();\r\n            }\r\n        }, false);\r\n        options.button_next.addEventListener(\"click\", function() {\r\n            monthNext();\r\n            removeTempClass();\r\n            var nextMonthDate = new Date(tempSelected.getTime());\r\n            nextMonthDate.setMonth(nextMonthDate.getMonth() + 1);\r\n            if (nextMonthDate.getMonth() - tempSelected.getMonth() >= 2) {\r\n                nextMonthDate.setDate(0);\r\n            }\r\n            setNewTempDate(nextMonthDate, getNearestAvailableDay(nextMonthDate));\r\n            if(!options.button_next.classList.contains(prefix + \"disabled\")) {\r\n                options.button_next.focus();\r\n            }\r\n        }, false);\r\n        options.button_prev.addEventListener(\"keydown\", buttonKeydownHandler, false);\r\n        options.button_next.addEventListener(\"keydown\", buttonKeydownHandler, false);\r\n    };\r\n    \r\n    this.destroy = function () {\r\n        options.button_prev.removeEventListener(\"click\", monthPrev, false);\r\n        options.button_next.removeEventListener(\"click\", monthNext, false);\r\n        options.button_prev.removeEventListener(\"keydown\", buttonKeydownHandler, false);\r\n        options.button_next.removeEventListener(\"keydown\", buttonKeydownHandler, false);\r\n        clearCalendar();\r\n        document.querySelector(target).innerHTML = \"\";\r\n    };\r\n    this.reset = function () {\r\n        this.destroy();\r\n        this.init();\r\n    };\r\n    // this.set = function (options) {\r\n    //     for (var k in options) {\r\n    //         if (opts.hasOwnProperty(k)) {\r\n    //             opts[k] = options[k];\r\n    //         } \r\n    //     }\r\n    //     createMonth();\r\n    // }\r\n    if (!(stringDatePicker in element)) {\r\n        // validate options\r\n        if (calendarBtn == null) {\r\n            throw new Error(\"There was a problem found with date picker button, please correct and try again\");\r\n        }\r\n        if (target == null) {\r\n            throw new Error(\"There was a problem found with date picker target, please correct and try again\");\r\n        }\r\n        if (calendar == null) {\r\n            throw new Error(\"There was a problem found with calendar, please correct and try again\");\r\n        }\r\n        //remove time from date\r\n        datePtr.setHours(0, 0, 0, 0);\r\n        todaysDate.setHours(0, 0, 0, 0);\r\n        calendarBtn.addEventListener(\"click\", toggleCalendar, false);\r\n        if (isEdge) {\r\n            calendarBtn.addEventListener(\"click\", inputHandler, false);\r\n            dateInput.addEventListener(\"focusout\", inputHandler, false);\r\n        }\r\n        if(!dateInput.hasAttribute(\"placeholder\")){\r\n            console.warn(\"Placeholder was not set. Please set a placeholder value if you plan to use form validation. Setting to default placeholder value.\");\r\n            dateInput.setAttribute(\"placeholder\", \"__/__/____\");\r\n        }\r\n        if (dateInput) {\r\n            new InputMask(dateInput);\r\n            var errorMsg = element.querySelector(\".\" + prefix + \"invalid-feedback\");\r\n            dateInput.addEventListener(\"change\", inputHandler, false);\r\n        }\r\n        form = getClosest(element, \"FORM\", false);\r\n        form.addEventListener(\"submit\", submitHandler);\r\n        this.init();\r\n        setFocusableElements();\r\n        // //set input mask\r\n        options.defaultDate = options.defaultDate ? (checkDateValidity(new Date (options.defaultDate)) ? options.defaultDate : \"\" ) : \"\"; \r\n        if (!options.defaultDate) {\r\n            options.defaultDate = new Date();\r\n            options.defaultDate.setHours(0, 0, 0, 0);\r\n        } else {\r\n            var defaultDate = new Date (options.defaultDate);\r\n            var defaultDay = defaultDate.getDate() < 10 ? \"0\" + defaultDate.getDate() : defaultDate.getDate();\r\n            var defaultMonth = (defaultDate.getMonth() + 1) < 10 ? \"0\" + (defaultDate.getMonth() + 1) : (defaultDate.getMonth() + 1);\r\n\r\n            dateInput.setAttribute(\"value\", defaultMonth + \"/\" + defaultDay + \"/\" + defaultDate.getFullYear());\r\n            var e = document.createEvent(\"Event\");\r\n            e.initEvent(\"change\", false, false);\r\n            dateInput.dispatchEvent(e);\r\n            if (isIE || isEdge) {\r\n                element.style.display = \"none\"; //IE needs a small timeout or cursor will appear in input box\r\n                setTimeout(function() {\r\n                    dateInput.blur();\r\n                    element.style.display = \"block\";\r\n                }, 300);\r\n            }   \r\n        }\r\n    }\r\n    element[stringDatePicker] = self;\r\n}\r\n\r\nexport function BarSelect(element) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var self = this,\r\n        stringBarSelect = \"BarSelect\",\r\n        selects = null,\r\n        value = 0,\r\n        clickHandler = function (e) {\r\n            var input = e.target.classList.contains(prefix + \"bar-select\") ? e.target.querySelector(\"input\") : e.target.tagName == \"LABEL\" ? e.target.previousElementSibling : e.target;\r\n            value = parseInt(input.getAttribute(\"value\"));\r\n            each(selects, function(select) {\r\n                if (parseInt(select.querySelector(\"input\").getAttribute(\"value\")) <= value) {\r\n                    select.classList.remove(prefix + \"bar-select-hover\");\r\n                    select.classList.add(prefix + \"bar-select-selected\");\r\n                } else {\r\n                    select.classList.remove(prefix + \"bar-select-hover\");\r\n                    select.classList.remove(prefix + \"bar-select-selected\");\r\n                }\r\n            });\r\n            uicoreCustomEvent(\"BarSelect\", \"SelectedValue\", element, { \"value\": value});\r\n        },\r\n        mouseOverHandler = function(e) {\r\n            var input = e.target.classList.contains(prefix + \"bar-select\") ? e.target.querySelector(\"input\") : e.target.tagName == \"LABEL\" ? e.target.previousElementSibling : e.target;\r\n            value = parseInt(input.getAttribute(\"value\"));\r\n            each(selects, function(select) {\r\n                if (parseInt(select.querySelector(\"input\").getAttribute(\"value\")) <= value) {\r\n                    select.classList.add(prefix + \"bar-select-hover\");\r\n                } else {\r\n                    select.classList.remove(prefix + \"bar-select-hover\");\r\n                }\r\n            });\r\n        },\r\n        mouseOutHandler = function() {\r\n            each(selects, function(select) {\r\n                select.classList.remove(prefix + \"bar-select-hover\");\r\n            });\r\n        },\r\n        focusHandler = function(e) {\r\n            var input = e.currentTarget.nextElementSibling;\r\n            if (!isInViewport(input)) {\r\n                input.scrollIntoView(false);\r\n            }\r\n        },\r\n        isInViewport = function(element) {\r\n            var bounding = element.getBoundingClientRect();\r\n            return (\r\n                bounding.top >= 0 &&\r\n            bounding.left >= 0 &&\r\n            bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n            bounding.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n            );\r\n        };\r\n\r\n    if (!(stringBarSelect in element)) {\r\n        selects = element.querySelectorAll(\".\" + prefix + \"bar-select\");\r\n        element.addEventListener(\"mouseout\", mouseOutHandler, false);\r\n        each(selects, function(select) {\r\n            select.addEventListener(\"click\", clickHandler, false);\r\n            select.addEventListener(\"mouseover\", mouseOverHandler, false);\r\n            if (isIE || isFirefox) {\r\n                select.querySelector(\"input\").addEventListener(\"focusin\", focusHandler, false);\r\n            }\r\n        });\r\n    }\r\n\r\n    element[stringBarSelect] = self;\r\n}","import { DOC, getElementsByClassName, prefix, uicoreCustomEvent, getTransitionDurationFromElement, each, getClosest } from \"./utilities.js\";\r\n\r\nexport function Button(element) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // constant\r\n    var self = this,\r\n        stringButton = \"Button\",\r\n        toggled = false, // toggled makes sure to prevent triggering twice the change.bs.button events\r\n        pxToMove,\r\n        btnWidth,\r\n        checked = \"checked\",\r\n        LABEL = \"LABEL\",\r\n        onEl,\r\n        offEl,\r\n        circleEl,\r\n        btnToggle,\r\n        // private methods\r\n        keyHandler = function(e) {\r\n            var key = e.which || e.keyCode;\r\n            key === 32 && e[\"target\"] === DOC.activeElement && toggle(e);\r\n        },\r\n        preventScroll = function(e) {\r\n            var key = e.which || e.keyCode;\r\n            key === 32 && e[\"preventDefault\"]();\r\n        },\r\n        toggle = function(e) {\r\n            var label =\r\n                e[\"target\"].tagName === LABEL \r\n                    ? e[\"target\"] \r\n                    : e[\"target\"][\"parentNode\"].tagName === LABEL \r\n                        ? e[\"target\"][\"parentNode\"] \r\n                        : null; // the .btn label\r\n\r\n            if (!label) return; //react if a label or its immediate child is clicked\r\n\r\n            var eventTarget = e[\"target\"], // the button itself, the target of the handler function\r\n                labels = getElementsByClassName(eventTarget[\"parentNode\"], \"btn\"), // all the button group buttons\r\n                input = label[\"getElementsByTagName\"](\"INPUT\")[0];\r\n            \r\n            if (!input) return; //return if no input found\r\n\r\n            // manage the dom manipulation\r\n            if (input.type === \"checkbox\") {\r\n                //checkboxes\r\n                if (!input[checked]) {\r\n                    label.classList.add(prefix+\"active\");\r\n                    input[\"getAttribute\"](checked);\r\n                    input[\"setAttribute\"](checked, checked);\r\n                    input[checked] = true;\r\n                } else {\r\n                    label.classList.remove(prefix+\"active\");\r\n                    input[\"getAttribute\"](checked);\r\n                    input.removeAttribute(checked);\r\n                    input[checked] = false;\r\n                }\r\n\r\n                if (!toggled) {\r\n                    // prevent triggering the event twice\r\n                    toggled = true;\r\n                    // bootstrapCustomEvent.call(input, \"change\", component); //trigger the change for the input\r\n                    // bootstrapCustomEvent.call(element, \"change\", component); //trigger the change for the btn-group\r\n                }\r\n            }\r\n\r\n            if (input.type === \"radio\" && !toggled) {\r\n                // radio buttons\r\n                if (!input[checked]) {\r\n                // don't trigger if already active\r\n                    label.classList.add(prefix+\"active\");\r\n                    input[\"setAttribute\"](checked, checked);\r\n                    input[checked] = true;\r\n                    // bootstrapCustomEvent.call(input, \"change\", component); //trigger the change for the input\r\n                    // bootstrapCustomEvent.call(element, \"change\", component); //trigger the change for the btn-group\r\n\r\n                    toggled = true;\r\n                    each(labels, function(otherLabel) {\r\n                        var otherInput = otherLabel[\"getElementsByTagName\"](\"INPUT\")[0];\r\n                        if (otherLabel !== label && otherLabel.classList[\"contains\"](prefix+\"active\")) {\r\n                            label.classList.remove(prefix+\"active\");\r\n                            otherInput.removeAttribute(checked);\r\n                            otherInput[checked] = false;\r\n                            // bootstrapCustomEvent.call(otherInput, \"change\", component); // trigger the change\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            setTimeout(function() {\r\n                toggled = false;\r\n            }, 50);\r\n        },\r\n        clickHandler = function() {\r\n            // going from on to off\r\n            if (btnToggle.getAttribute(\"aria-checked\") === \"true\") {\r\n                self.toggleOff();\r\n            // going from off to on\r\n            } else {\r\n                self.toggleOn();\r\n            }   \r\n        };\r\n    \r\n    // public methods\r\n    this.toggleOff = function() {\r\n        circleEl.style.transform = \"translateX(0px)\";\r\n        setTimeout(function(){\r\n            btnToggle.setAttribute(\"aria-checked\", \"false\");\r\n        }, (getTransitionDurationFromElement(circleEl)/2)-25);\r\n        offEl.setAttribute(\"aria-hidden\", \"false\");\r\n        onEl.setAttribute(\"aria-hidden\", \"true\");\r\n        uicoreCustomEvent(\"ButtonToggle\", \"Off\", element);\r\n    };\r\n    this.toggleOn = function() {\r\n        circleEl.style.transform = \"translateX(\" + pxToMove + \"px)\";\r\n        setTimeout(function(){\r\n            btnToggle.setAttribute(\"aria-checked\", \"true\");\r\n        }, (getTransitionDurationFromElement(circleEl)/2)-25);\r\n        offEl.setAttribute(\"aria-hidden\", \"true\");\r\n        onEl.setAttribute(\"aria-hidden\", \"false\") ;\r\n        uicoreCustomEvent(\"ButtonToggle\", \"On\", element);\r\n    };\r\n\r\n    // init\r\n    if (!(stringButton in element)) {\r\n        // prevent adding event handlers twice\r\n        if (element.classList.contains(prefix + \"btn-toggle-container\")) {\r\n            btnToggle = element.firstElementChild.tagName === \"LABEL\" ? element.querySelector(\".\" + prefix + \"btn-toggle\") : element;\r\n            \r\n            offEl = btnToggle.querySelector(\".\" + prefix + \"toggle-txt-off\");\r\n            onEl = btnToggle.querySelector(\".\" + prefix + \"toggle-txt-on\");\r\n            circleEl = btnToggle.querySelector(\".\" + prefix + \"toggle-circle\");\r\n            \r\n            if (element.firstElementChild.tagName === \"SPAN\") {\r\n                offEl.style.display=\"block\";\r\n                onEl.style.display=\"block\";\r\n                var widthOff = offEl.getBoundingClientRect().width;\r\n                var widthOn = onEl.getBoundingClientRect().width;\r\n                offEl.removeAttribute(\"style\");\r\n                onEl.removeAttribute(\"style\");\r\n                btnWidth = Math.max(widthOff, widthOn);\r\n                btnToggle.style.width = (btnWidth + 24) + \"px\";\r\n            }\r\n\r\n            pxToMove = btnToggle.getBoundingClientRect().width - 28;\r\n            \r\n            if(btnToggle.getAttribute(\"aria-checked\") === \"true\"){\r\n                circleEl.style.transform = \"translateX(\" + pxToMove + \"px)\";\r\n            }\r\n            btnToggle.style.visibility = \"visible\";\r\n            element.addEventListener(\"click\", clickHandler);\r\n        // bootstrap button js that needs to be checked on \r\n        } else {\r\n            element.addEventListener(\"click\", toggle, false);\r\n            element[\"hasAttribute\"](\"tabindex\") && \r\n            element.addEventListener(\"keyup\", keyHandler, false),\r\n            element.addEventListener(\"keydown\", preventScroll, false);\r\n    \r\n            // activate items on load\r\n            each(getElementsByClassName(element, prefix+\"btn\"), function(label) {\r\n                !label.classList[\"contains\"](prefix+\"active\") &&\r\n                label(\"hasAttribute\")(\"checked\") &&\r\n                label.classList.add(prefix+\"active\");\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    element[stringButton] = self;\r\n}\r\n\r\nexport function ButtonFilter(element) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var stringButtonFilter = \"ButtonFilter\",\r\n        lastActiveItem = null,\r\n        inactiveFilterItem,\r\n        activeFilterItem,\r\n        // Event Handlers\r\n        focusInEventHandler = function(e) {\r\n            var filterItem = e[\"currentTarget\"];\r\n            e.preventDefault();\r\n            // Clicking or Tabbing on the active filter item\r\n            var parentFieldset = getClosest(filterItem, \"fieldset\", false);\r\n            if(filterItem == lastActiveItem || filterItem.classList.contains(prefix+\"disabled\") || parentFieldset && parentFieldset.hasAttribute(\"disabled\")){\r\n                return;\r\n            }\r\n\r\n            activeFilterItem = filterItem;\r\n            inactiveFilterItem = lastActiveItem;\r\n\r\n            if (inactiveFilterItem.label) {\r\n                inactiveFilterItem.label.classList.remove(prefix + \"active\");\r\n                activeFilterItem.label.classList.add(prefix + \"active\");\r\n            }\r\n            if (inactiveFilterItem.input) {\r\n                inactiveFilterItem.input.removeAttribute(\"checked\");\r\n                activeFilterItem.input.setAttribute(\"checked\",\"\");\r\n            }\r\n\r\n            inactiveFilterItem.classList.remove(prefix + \"active\");\r\n            activeFilterItem.classList.add(prefix + \"active\");\r\n            lastActiveItem = activeFilterItem;\r\n\r\n            // TODO\r\n            // Emit filter event typeArg: string, canBubbleArg: boolean, cancelableArg: boolean, detailArg: T\r\n            uicoreCustomEvent(\"ButtonFilter\", \"Click\", activeFilterItem.label, {\"target\": activeFilterItem.label.dataset[\"filterValue\"]});\r\n        };\r\n\r\n    if (!(stringButtonFilter in element)) {\r\n        var filterItems = element.querySelectorAll(\".\"+ prefix + \"filter-item\");\r\n        lastActiveItem = element.querySelector(\".\" + prefix + \"active\");\r\n        for (var f = 0; f < filterItems.length; f++) {\r\n            filterItems[f].addEventListener(\"focusin\", focusInEventHandler, false);\r\n            filterItems[f].label = filterItems[f].querySelector(\".\"+ prefix + \"btn-filter\");\r\n            filterItems[f].input = filterItems[f].querySelector(\".\"+ prefix + \"btn-input\");\r\n        }\r\n    }\r\n\r\n    element[stringButtonFilter] = self;\r\n}","import {each, prefix, debounce, createElement, classAdd, isArray, isIE, uicoreCustomEvent, emulateTransitionEnd, isEdge, renderSvg } from \"./utilities\";\r\n\r\nexport default function Overflow(element, options) {\r\n\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    if (element.dataset[\"type\"]) {\r\n        options.type = element.dataset[\"type\"];\r\n    }\r\n    if (element.dataset[\"position\"]) {\r\n        options.position = element.dataset[\"position\"];\r\n    }\r\n    if (element.dataset[\"top\"]) {\r\n        options.top = parseInt(element.dataset[\"top\"]);\r\n    }\r\n    if (element.dataset[\"style\"]) {\r\n        options.style = element.dataset[\"style\"];\r\n    }\r\n\r\n    options.type = options.type ? options.type : \"single\";\r\n    options.style = options.style ? options.style === \"svg\" ? options.style = \"svg\" : \"button\" : \"button\";\r\n    options.position = options.position && options.position === \"outset\" ? \"outset\" : \"inset\";\r\n    options.top = options.top && typeof(options.top) === \"number\" ? options.top : null;\r\n    options.lazyload = options.lazyload ? options.lazyload : false;\r\n    options.responsive = options.responsive ?  options.responsive : false;\r\n\r\n    var self = this,\r\n        stringOverflow = \"Overflow\",\r\n        overflowElement, // The UL container div\r\n        overflowContainer, // The UL element\r\n        overflowChildren,\r\n        overflowChildRight,\r\n        overflowChildLeft,\r\n        centered = false,\r\n        leftCtrl,\r\n        rightCtrl,\r\n        atLeftEnd = true,\r\n        atRightEnd = true,\r\n        ctrlWidth,\r\n        containerLeft,\r\n        containerRight,\r\n        centeredOffset = 0,\r\n        containerHeight = 0,\r\n        containerWidth = 0,\r\n        // handlers\r\n        handleSizeChange = function() {\r\n            if (containerWidth == overflowElement.offsetWidth) return;\r\n            if (containerHeight !== overflowChildren.children[0].offsetHeight) {\r\n                handleResize();\r\n            }\r\n            setLeftAndRightIndex();\r\n            containerWidth = overflowElement.offsetWidth;\r\n\r\n        },\r\n        handleResize = debounce(function() {\r\n            getChildrenWidth();\r\n            setLeftAndRightIndex();\r\n            addHeightStyle([leftCtrl,rightCtrl]);\r\n            if ( (Math.abs(overflowContainer.offsetLeft) + overflowContainer.offsetWidth) > overflowChildren.width) {\r\n                if(leftCtrl.hasAttribute(\"active\")){\r\n                    var currentOffset = pageRight();\r\n                    overflowContainer.style.left = currentOffset + \"px\";\r\n                }\r\n            }\r\n        }, 10),\r\n        handleClickEvent = function(e) {\r\n            var isRight = e.target.classList.contains(prefix+\"overflow-control-right\") ? true : false;\r\n            controlClick(isRight);\r\n        },\r\n        controlClick = function(isRight) {\r\n            var currentOffset = null;\r\n            if (options.type == \"single\") {\r\n                if (isRight) {\r\n                    atLeftEnd = false;\r\n                    var rightChild = overflowChildren.children[overflowChildRight+1];\r\n                    var rightElementEdge = (rightChild.offsetLeft + rightChild.offsetWidth) - (Math.abs(overflowContainer.offsetLeft) + overflowContainer.offsetWidth);\r\n                    if (overflowChildRight+1 >= (overflowChildren.children.length - 1) ) {\r\n                        atRightEnd = true;\r\n                    }\r\n                    currentOffset = (Math.abs(overflowContainer.offsetLeft) + rightElementEdge + (options.position === \"inset\" && !atRightEnd ? ctrlWidth : 0))*-1;\r\n                } else {\r\n                    atRightEnd = false;\r\n                    var leftChild = overflowChildren.children[overflowChildLeft-1];\r\n                    if (overflowChildLeft-1 === 0) {\r\n                        atLeftEnd = true;\r\n                        currentOffset = 0;\r\n                    } else {\r\n                        currentOffset = (leftChild.offsetLeft - (options.position === \"inset\" && !atLeftEnd ? ctrlWidth : 0))*-1;\r\n                    }\r\n                }\r\n            } else {\r\n                if (isRight) {\r\n                    currentOffset = pageRight();\r\n                } else {\r\n                    atRightEnd = false;\r\n                    if (overflowChildren.children[overflowChildLeft].offsetLeft < overflowContainer.offsetWidth) {\r\n                        atLeftEnd = true;\r\n                        currentOffset = 0;\r\n                    } else {\r\n                        var tabLeft = Math.abs(overflowContainer.offsetLeft) - overflowChildren.children[overflowChildLeft-1].offsetLeft;\r\n                        var contSpace = overflowContainer.offsetWidth - (options.position === \"inset\" ? ctrlWidth : 0) - overflowChildren.children[overflowChildLeft-1].offsetWidth;\r\n                        currentOffset = ( Math.abs(overflowContainer.offsetLeft) - (tabLeft + contSpace))*-1;\r\n                    }\r\n                }\r\n            }\r\n            overflowContainer.style.left = currentOffset + \"px\";\r\n            emulateTransitionEnd(overflowContainer, setLeftAndRightIndex);\r\n        },\r\n        pageRight = function() {\r\n            var rightChild;\r\n            atLeftEnd = overflowChildren.width < overflowContainer.offsetWidth ? true : false;\r\n            var currentOffset = null;\r\n            var remainder = overflowChildren.width - (Math.abs(overflowContainer.offsetLeft) + overflowContainer.offsetWidth);\r\n            if (overflowContainer.offsetWidth >= remainder) {\r\n                atRightEnd = true;\r\n                rightChild = overflowChildren.children[overflowChildren.children.length-1];\r\n                var rightElementEdge = (rightChild.offsetLeft + rightChild.offsetWidth) - (Math.abs(overflowContainer.offsetLeft) + overflowContainer.offsetWidth);\r\n                currentOffset = (Math.abs(overflowContainer.offsetLeft) + rightElementEdge)*-1;\r\n            } else {\r\n                atRightEnd = false;\r\n                rightChild = overflowChildren.children[overflowChildRight+1];\r\n                currentOffset = (rightChild.offsetLeft - (options.position === \"inset\" && !atRightEnd ? ctrlWidth : 0))*-1;\r\n            }\r\n            return currentOffset;\r\n        },\r\n        setLeftAndRightCtrl = function() {\r\n            if (atRightEnd) {\r\n                rightCtrl.removeAttribute(\"active\");\r\n                if(isIE && centered && atLeftEnd) {\r\n                    setMinimumWidth();\r\n                }\r\n            } else if (!rightCtrl.hasAttribute(\"active\") )  {\r\n                rightCtrl.setAttribute(\"active\",\"\");\r\n                if(isIE && centered) {\r\n                    overflowContainer.style.minWidth = \"\";\r\n                }\r\n            }\r\n            if (atLeftEnd) {\r\n                leftCtrl.removeAttribute(\"active\");\r\n            } else if (!leftCtrl.hasAttribute(\"active\") )  {\r\n                leftCtrl.setAttribute(\"active\",\"\");\r\n            }\r\n        },\r\n        createArrowHtml = function() {\r\n            leftCtrl = createElement(\"button\", {\r\n                class: prefix+\"overflow-control \"+prefix+\"overflow-control-left \"+(options.style === \"button\" ? prefix+\"overflow-control-btn\" : prefix+\"overflow-control-svg\"),\r\n                tabIndex: \"-1\"\r\n            });\r\n            leftCtrl.style.left = options.position === \"outset\" ? \"-8px\" : \"0px\";\r\n            leftCtrl.addEventListener(\"click\", handleClickEvent, false);\r\n            rightCtrl = createElement(\"button\", {\r\n                class: prefix+\"overflow-control \"+prefix+\"overflow-control-right \"+(options.style === \"button\" ? prefix+\"overflow-control-btn\" : prefix+\"overflow-control-svg\"),\r\n                tabIndex: \"-1\"\r\n            });\r\n            rightCtrl.style.right = options.position === \"outset\" ? \"-8px\" : \"0px\";\r\n            rightCtrl.addEventListener(\"click\", handleClickEvent, false);\r\n            if (options.top) {\r\n                rightCtrl.style.top = options.top+\"px\";\r\n                leftCtrl.style.top = options.top+\"px\";\r\n            }\r\n            var controls = [leftCtrl,rightCtrl];\r\n            if (!options.responsive) {\r\n                each(controls, function(control) {\r\n                    control.classList.add(prefix + \"overflow-unresponsive\");\r\n                });\r\n            }\r\n            addHeightStyle(controls);\r\n            \r\n            var leftSvg = renderSvg([{name:\"chevron-left\", show: true}], {\"aria-hidden\": true});\r\n            classAdd(leftSvg, prefix+\"overflow-control-left\");\r\n            var rightSvg = renderSvg([{name:\"chevron-right\", show: true}], {\"aria-hidden\": true});\r\n            classAdd(rightSvg, prefix+\"overflow-control-right\");\r\n            leftCtrl.appendChild(leftSvg);\r\n            rightCtrl.appendChild(rightSvg);\r\n            \r\n            element.insertBefore(leftCtrl, element.children[0]);\r\n            element.insertBefore(rightCtrl, element.children[1]);\r\n            setCtrlWidth();\r\n        },\r\n        getChildrenWidth = function() {\r\n            overflowChildren.width = 0;\r\n            overflowChildren.children = [];\r\n            each(overflowContainer.children, function(child) {\r\n                overflowChildren.width += child.offsetWidth+getMargin(child);\r\n                overflowChildren.children.push(child);\r\n            });\r\n            overflowChildren.width -= (isEdge ? overflowChildren.children.length - 1 : 0);\r\n        },\r\n        getMargin = function(child) {\r\n            var style = child.currentStyle || window.getComputedStyle(child),\r\n                margin;\r\n            if (isIE) {\r\n                margin = convertRemToPixels(style.getPropertyValue(\"margin-left\")) + convertRemToPixels(style.getPropertyValue(\"margin-right\"));\r\n            } else {\r\n                margin = parseInt(style.marginLeft) + parseInt(style.marginRight);\r\n            }\r\n            return margin;\r\n        },\r\n        addHeightStyle = function(els) {\r\n            if (!isArray(els)) {\r\n                els = [els];\r\n            }\r\n            each(els, function(el) {\r\n                if (options.style === \"button\") {\r\n                    el.style.height = overflowChildren.children[0].offsetHeight +\"px\";\r\n                    containerHeight = overflowChildren.children[0].offsetHeight;\r\n                }\r\n            });\r\n        },\r\n        toggleCentered = function(offSet) {\r\n            if (offSet < 0) {\r\n                if (overflowContainer.parentElement.classList.contains(prefix+\"tabs-centered-container\")) {\r\n                    overflowContainer.parentElement.classList.remove(prefix+\"tabs-centered-container\");\r\n                }\r\n                if (overflowContainer.classList.contains(prefix+\"tab-centered\")) {\r\n                    overflowContainer.classList.remove(prefix+\"tab-centered\");\r\n                }\r\n                return false;\r\n            } else {\r\n                if (!overflowContainer.parentElement.classList.contains(prefix+\"tabs-centered-container\")) {\r\n                    overflowContainer.parentElement.classList.add(prefix+\"tabs-centered-container\");\r\n                }\r\n                if (!overflowContainer.classList.contains(prefix+\"tab-centered\")) {\r\n                    overflowContainer.classList.add(prefix+\"tab-centered\");\r\n                }\r\n                overflowContainer.style.left = \"0px\"; \r\n                return true;    \r\n            }\r\n        },\r\n        setContainerLeftRight = function(useCentered, offSet) {\r\n            if (useCentered) {\r\n                containerLeft = offSet > 0 ? 0 : offSet;\r\n                containerRight = overflowElement.offsetWidth;\r\n                centeredOffset = Math.floor(offSet);\r\n            } else {\r\n                containerLeft = Math.abs(overflowContainer.offsetLeft);\r\n                containerLeft += options.position === \"inset\" && !atLeftEnd ? ctrlWidth : 0;\r\n                containerRight = containerLeft + overflowContainer.offsetWidth;\r\n            }\r\n        },\r\n        setLeftAndRightIndex = function() {\r\n            overflowChildLeft = null;\r\n            overflowChildRight = null;\r\n            var overflowChildLeftSet = false,\r\n                offSet = (overflowElement.offsetWidth - overflowChildren.width)/2,\r\n                useCentered = false;\r\n            if (centered) {\r\n                useCentered = toggleCentered(offSet);\r\n            }\r\n            setContainerLeftRight(useCentered, offSet);\r\n            each(overflowChildren.children, function(child, idx) {\r\n                var childLeft;\r\n                if (useCentered) {\r\n                    childLeft = centeredOffset + (Math.floor(overflowChildren.width/overflowChildren.children.length)*idx);\r\n                } else {\r\n                    childLeft = child.offsetLeft;\r\n                }\r\n                if (!overflowChildLeftSet && childLeft >= containerLeft) {\r\n                    overflowChildLeft = idx;\r\n                    overflowChildLeftSet = true;\r\n                }\r\n                if (childLeft+child.offsetWidth <= containerRight) {\r\n                    overflowChildRight = idx;\r\n                }\r\n            });\r\n            if (overflowChildLeft > 0 ) {\r\n                atLeftEnd = false;\r\n            } else {\r\n                atLeftEnd = true;\r\n            }\r\n            if (overflowChildRight < (overflowChildren.children.length-1)) {\r\n                atRightEnd = false;\r\n            } else {\r\n                atRightEnd = true;\r\n            }\r\n            setLeftAndRightCtrl();\r\n            uicoreCustomEvent(\"Overflow\", \"ChangeEvent\", element, {\r\n                \"left\": overflowChildLeft, \r\n                \"right\": overflowChildRight, \r\n                \"totalItems\": overflowChildren.children.length,\r\n                \"hasRightControl\": rightCtrl.hasAttribute(\"active\"),\r\n                \"hasLeftControl\": leftCtrl.hasAttribute(\"active\")\r\n            });\r\n        },\r\n        convertRemToPixels = function(rem) {  \r\n            if (rem.indexOf(\"rem\") > 0) { \r\n                rem = rem.split(\"rem\")[0];\r\n                var computed = rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\r\n                if (computed < 0) {\r\n                    return Math.floor(computed);\r\n                } else {\r\n                    return Math.ceil(computed);\r\n                }\r\n            } else {\r\n                return 0;\r\n            }\r\n        },\r\n        setCtrlWidth = function() {\r\n            var style = rightCtrl.currentStyle || window.getComputedStyle(rightCtrl, null);\r\n            if (isIE) {\r\n                ctrlWidth = convertRemToPixels(style.getPropertyValue(\"width\"));\r\n            } else {\r\n                ctrlWidth = parseInt(style.getPropertyValue(\"width\").match(/^\\d.?/g)[0]);\r\n            }\r\n        },\r\n        setMinimumWidth = function() {\r\n            var width = 0;\r\n            each(overflowContainer.querySelectorAll(\"LI\"), function(child) {\r\n                width += 120+getMargin(child);\r\n            });\r\n            overflowContainer.style.minWidth = (width-5) + \"px\";\r\n        },\r\n        frameListener = function() {\r\n            handleSizeChange();\r\n            window.requestAnimationFrame(frameListener);\r\n        },\r\n        init = function(){\r\n            getChildrenWidth();\r\n            createArrowHtml();\r\n            setLeftAndRightIndex();\r\n            if (overflowChildRight < overflowChildren.children.length-1) {\r\n                rightCtrl.setAttribute(\"active\",\"\");\r\n            }\r\n            if (isIE && centered && atLeftEnd && atRightEnd) {\r\n                setMinimumWidth();\r\n            }\r\n            window.addEventListener(\"resize\", handleResize, false);\r\n            containerWidth = overflowElement.offsetWidth;\r\n            window.requestAnimationFrame(frameListener);\r\n        };\r\n    \r\n    this.lazyLoad = function() {\r\n        if (stringOverflow in element) {\r\n            init();\r\n        }\r\n    };\r\n\r\n    this.getCurrentDetails = function() {\r\n        return {\"left\": overflowChildLeft, \r\n            \"right\": overflowChildRight,\r\n            \"totalItems\": overflowChildren.children.length,\r\n            \"hasRightControl\": rightCtrl.hasAttribute(\"active\"),\r\n            \"hasLeftControl\": leftCtrl.hasAttribute(\"active\")\r\n        };\r\n    };\r\n    this.clickRight = function() {\r\n        controlClick(true);\r\n    };\r\n\r\n    this.clickLeft = function() {\r\n        controlClick(false);\r\n    };\r\n\r\n    this.clickEnd = function() {\r\n        atLeftEnd = overflowChildren.width < overflowContainer.offsetWidth ? true : false;\r\n        atRightEnd = true;\r\n        if(rightCtrl.hasAttribute(\"active\")){\r\n            overflowContainer.style.left = ((overflowChildren.width - overflowContainer.offsetWidth + (options.position === \"inset\" && !atRightEnd ? ctrlWidth : 0))*-1)+\"px\";\r\n        }\r\n        rightCtrl.removeAttribute(\"active\");\r\n        emulateTransitionEnd(overflowContainer, setLeftAndRightIndex);\r\n    };\r\n\r\n    this.clickHome = function() {\r\n        atLeftEnd = true;\r\n        atRightEnd = false;\r\n        if(leftCtrl.hasAttribute(\"active\")){\r\n            overflowContainer.style.left = \"0px\";\r\n        }\r\n        leftCtrl.removeAttribute(\"active\");\r\n        emulateTransitionEnd(overflowContainer, setLeftAndRightIndex);\r\n    };\r\n\r\n    //init\r\n    if (!(stringOverflow in element)) {\r\n        overflowElement = element;\r\n        if (element.children[0].classList.contains(prefix + \"tabs-centered-container\")) {\r\n            centered = true;\r\n        }\r\n\r\n        overflowElement.style.overflow = \"hidden\";\r\n        overflowContainer = overflowElement.querySelector(\"UL\");\r\n        overflowContainer.classList.add(prefix + \"overflow-transition\");\r\n        overflowContainer.setAttribute(\"style\",\"position: relative; flex-wrap: nowrap; white-space: nowrap; left: 0px\");\r\n        overflowChildren = {};\r\n        // Some child elements contain images so wait for page load to initialize.\r\n        if (!options.lazyload) {\r\n            init();\r\n        }\r\n        \r\n    }\r\n\r\n    element[stringOverflow] = self;\r\n}\r\n","import {getElementsByClassName,globalObject,supportTransitions,HTML,DOC,getTransitionDurationFromElement,prefix,uicoreCustomEvent, isIE, ieMosaicPolyfill, each, validateNum, getClosest, jsonOptionsInit, swipeInit, direction} from \"./utilities.js\";\r\nimport Overflow from \"./overflow.js\";\r\n\r\nexport function Carousel(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.interval = element.dataset.interval ? validateNum(element.dataset.interval, 5000) : validateNum(options.interval, 5000);\r\n    options.pause = element.dataset.pause ? element.dataset.pause === \"hover\" ? element.dataset.pause : false : options.pause === \"hover\" ? options.pause : false;\r\n    options.keyboard = element.dataset.keyboard ? element.dataset.keyboard === \"true\" ? true: false : options.keyboard === \"true\" ? true : false;\r\n    options.mosaic = false;\r\n    \r\n    // DATA API\r\n    var stringCarousel = \"Carousel\",\r\n        visibilityState = \"visible\",\r\n        smallMediaSize = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        // strings\r\n        paused = \"paused\",\r\n        dataSlideTo = \"data-slide-to\",\r\n        mouseHover = \"onmouseleave\" in DOC ? [\"mouseenter\", \"mouseleave\"] : [\"mouseover\", \"mouseout\"];\r\n\r\n    // bind, event targets\r\n    var self = this,\r\n        stopAutoRotate = false,\r\n        index = (element.index = 0),\r\n        timer = (element.timer = 0),\r\n        isSliding = false, // isSliding prevents click event handlers when animation is running\r\n        slides = getElementsByClassName(element, prefix+\"carousel-item\"),\r\n        total = slides[\"length\"],\r\n        slideDirection = (this[\"direction\"] = \"left\"),\r\n        // Arrow capability\r\n        leftArrow = getElementsByClassName(\r\n            element,\r\n            prefix+\"carousel-control-prev\"\r\n        )[0],\r\n        rightArrow = getElementsByClassName(\r\n            element,\r\n            prefix+\"carousel-control-next\"\r\n        )[0],\r\n        // SVG indicators\r\n        svgIndicator = element.querySelector(\".\" + prefix+\"carousel-indicators\"),\r\n        svgIndicators = (svgIndicator && svgIndicator[\"getElementsByTagName\"](\"LI\")) || [],\r\n        // Button indicatos\r\n        btnIndicator = element.querySelector(\".\" + prefix+\"carousel-indicators-btn\"),\r\n        btnIndicators = (btnIndicator && btnIndicator[\"getElementsByTagName\"](\"LI\")) || [],\r\n        indicator = svgIndicator ? svgIndicator : btnIndicator,\r\n        indicators = svgIndicators[\"length\"] > 0 ? svgIndicators : btnIndicators;\r\n\r\n    // invalidate when not enough items\r\n    if (total < 2) {\r\n        return;\r\n    }\r\n\r\n    // handlers\r\n    var pauseHandler = function() {\r\n            if (options.interval !== false && !element.classList[\"contains\"](paused)) {\r\n                element.classList.add(paused);\r\n                !isSliding && clearTimer(timer);\r\n            }\r\n        },\r\n        resumeHandler = function() {\r\n            if (options.interval !== false && element.classList[\"contains\"](paused)) {\r\n                element.classList.remove(paused);\r\n                !isSliding && clearTimer(timer);\r\n                !isSliding && self.cycle();\r\n            }\r\n        },\r\n        indicatorHandler = function(e) {\r\n            e[\"preventDefault\"]();\r\n            if (isSliding) return;\r\n\r\n            var eventTarget = e[\"target\"]; // event target | the current active item\r\n\r\n            if (eventTarget && !eventTarget.classList[\"contains\"](prefix+\"active\") && eventTarget[\"getAttribute\"](dataSlideTo)) {\r\n                index = parseInt(eventTarget[\"getAttribute\"](dataSlideTo), 10);\r\n                stopAutoRotate = true;\r\n            } else {\r\n                return false;\r\n            }\r\n\r\n            self.slideTo(index); //Do the slide\r\n        },\r\n        controlsHandler = function(e) {\r\n            e[\"preventDefault\"]();\r\n            if (isSliding) return;\r\n\r\n            var eventTarget = e.currentTarget || e.srcElement;\r\n\r\n            if (eventTarget === rightArrow) {\r\n                index++;\r\n            } else if (eventTarget === leftArrow) {\r\n                index--;\r\n            }\r\n\r\n            self.slideTo(index); //Do the slide\r\n        },\r\n        keyHandler = function(e) {\r\n            if (isSliding) return;\r\n            switch (e.which) {\r\n            case 39: index++; break; \r\n            case 37: index--; break;\r\n            default: return;\r\n            }\r\n            self.slideTo(index); //Do the slide\r\n        },\r\n        swipeHandler =  function (el, d) {\r\n            switch (d) {\r\n            case direction.LEFT:\r\n                self.slideTo(index+1);\r\n                break;\r\n            case direction.RIGHT:\r\n                self.slideTo(index-1);\r\n                break;                    \r\n            }\r\n        },\r\n        // private methods\r\n        isElementInScrollRange = function() {\r\n            var rect = element[\"getBoundingClientRect\"](),\r\n                viewportHeight = globalObject[innerHeight] || HTML[\"clientHeight\"];\r\n            return rect[\"top\"] <= viewportHeight && rect[\"bottom\"] >= 0; // bottom && top\r\n        },\r\n        setActivePage = function(pageIndex) {\r\n            //indicators\r\n            each (indicators, function(indicator) {\r\n                indicator.classList.remove(prefix+\"active\");\r\n            });\r\n            if (indicators[pageIndex]) indicators[pageIndex].classList.add(prefix+\"active\");\r\n        },\r\n        clearTimer = function(timer) {\r\n            clearInterval(timer);\r\n            timer = null;\r\n        },\r\n        toggleMosaic = function(e) {\r\n            pauseHandler();\r\n            if (e.matches) {\r\n                stopAutoRotate = false;\r\n                element.addEventListener(mouseHover[0], pauseHandler, false);\r\n                element.addEventListener(mouseHover[1], resumeHandler, false);\r\n                element.addEventListener(\"touchstart\", pauseHandler, false);\r\n                element.addEventListener(\"touchend\", resumeHandler, false);\r\n                resumeHandler();\r\n            } else {\r\n                stopAutoRotate = true;\r\n                element.removeEventListener(mouseHover[0], pauseHandler, false);\r\n                element.removeEventListener(mouseHover[1], resumeHandler, false);\r\n                element.removeEventListener(\"touchstart\", pauseHandler, false);\r\n                element.removeEventListener(\"touchend\", resumeHandler, false);\r\n            }\r\n        };\r\n\r\n    // public methods\r\n    this.cycle = function() {\r\n        if(!stopAutoRotate) {\r\n            if (timer) {\r\n                clearTimer(timer);\r\n            }\r\n            timer = setInterval(function() {\r\n                isElementInScrollRange() && (index++, self.slideTo(index));\r\n            }, options.interval);\r\n        } else {\r\n            if (timer) {\r\n                clearTimer(timer);\r\n            }\r\n        }\r\n    };\r\n    this.slideTo = function(next) {\r\n        if (isSliding) return; // when controled via methods, make sure to check again\r\n\r\n        var activeItem = this.getActiveIndex(); // the current active\r\n        // orientation;\r\n        // chaeck to see if we need to reset carousel\r\n        \r\n        // first return if we're on the same item #227\r\n        if (activeItem === next) {\r\n            return;\r\n        }\r\n\r\n        // determine slide direction\r\n        if (activeItem < next) {\r\n            slideDirection = \"right\";\r\n        } else {\r\n            slideDirection = \"left\";\r\n        }\r\n\r\n        // find the right next index\r\n        if (next < 0) {\r\n            next = total - 1;\r\n        } else if (next >= total) {\r\n            next = 0;\r\n        }\r\n\r\n        // update index\r\n        index = next;\r\n\r\n        uicoreCustomEvent(\"Carousel\", \"SlideEvent\", element, { \"direction\": slideDirection, \"slide-to\" : next });\r\n\r\n        isSliding = true;\r\n        clearTimer(timer);\r\n        setActivePage(next);\r\n\r\n        if (supportTransitions && element.classList[\"contains\"](\"slide\")) {\r\n            // apply appropriate animation\r\n            if (slideDirection === \"right\") {\r\n                slides[next].classList.add(prefix+\"carousel-item-next\");\r\n                slides[next][\"offsetWidth\"];\r\n                slides[next].classList.add(prefix+\"carousel-item-left\");\r\n                slides[activeItem].classList.add(prefix+\"carousel-item-left\");\r\n            } else {\r\n                slides[next].classList.add(prefix+\"carousel-item-prev\");\r\n                slides[next][\"offsetWidth\"];\r\n                slides[next].classList.add(prefix+\"carousel-item-right\");\r\n                slides[activeItem].classList.add(prefix+\"carousel-item-right\");\r\n            }\r\n            var timeout = getTransitionDurationFromElement(slides[next]);\r\n\r\n            isSliding &&\r\n            setTimeout(function() {\r\n                isSliding = false;\r\n\r\n                slides[next].classList.add(prefix+\"active\");\r\n                slides[activeItem].classList.remove(prefix+\"active\");\r\n\r\n                slides[next].classList.remove(prefix+\"carousel-item-next\");\r\n                slides[next].classList.remove(prefix+\"carousel-item-prev\");\r\n                slides[next].classList.remove(prefix+\"carousel-item-left\");\r\n                slides[next].classList.remove(prefix+\"carousel-item-right\");\r\n                slides[activeItem].classList.remove(prefix+\"carousel-item-left\");\r\n                uicoreCustomEvent(\"Carousel\", \"SlideEvent\", element, { \"direction\": slideDirection, \"slide-to\" : next });\r\n                \r\n                if (!(visibilityState === \"hidden\") && options.interval && !element.classList[\"contains\"](paused)) {\r\n                    self.cycle();\r\n                } else {\r\n                    if(visibilityState === \"hidden\") {\r\n                        pauseHandler();\r\n                    }\r\n                }\r\n            }, timeout);\r\n\r\n        } else {\r\n            slides[next].classList.add(prefix+\"active\");\r\n            slides[next][\"offsetWidth\"];\r\n            slides[activeItem].classList.remove(prefix+\"active\");\r\n            setTimeout(function() {\r\n                isSliding = false;\r\n                if (options.interval && !element.classList[\"contains\"](paused)) {\r\n                    self.cycle();\r\n                }\r\n                uicoreCustomEvent(\"Carousel\", \"SlideEvent\", element, { \"direction\": slideDirection, \"slide-to\" : next });\r\n            }, 100);\r\n        }\r\n    };\r\n    this.getActiveIndex = function() {\r\n        return (\r\n            slides[\"indexOf\"](\r\n                getElementsByClassName(element, prefix+\"carousel-item\" + \" \" + prefix + \"active\")[0]\r\n            ) || 0\r\n        );\r\n    };\r\n\r\n    // init\r\n    if (!(stringCarousel in element)) {\r\n        \r\n        if (element.classList.contains(prefix + \"mosaic\")){\r\n            options.mosaic = true;\r\n        }\r\n      \r\n        DOC.addEventListener(\"visibilitychange\", function(){\r\n            if (visibilityState === \"hidden\" && document.visibilityState === \"visible\") {\r\n                resumeHandler();\r\n            }\r\n            visibilityState = document.visibilityState;\r\n        });\r\n\r\n        if (options.pause && options.interval) {\r\n            if (!options.mosaic || (options.mosaic && smallMediaSize.matches)) {\r\n                element.addEventListener(mouseHover[0], pauseHandler, false);\r\n                element.addEventListener(mouseHover[1], resumeHandler, false);\r\n                element.addEventListener(\"touchstart\", pauseHandler, false);\r\n                element.addEventListener(\"touchend\", resumeHandler, false);\r\n            } \r\n            if (options.mosaic) {\r\n                if (isIE) {\r\n                    ieMosaicPolyfill(slides);\r\n                }\r\n                if (!smallMediaSize.matches) {\r\n                    stopAutoRotate = true;\r\n                }\r\n                smallMediaSize.addListener(toggleMosaic);\r\n            }\r\n        }\r\n\r\n        swipeInit(element, swipeHandler);\r\n\r\n        rightArrow && rightArrow.addEventListener(\"click\", controlsHandler, false);\r\n        leftArrow && leftArrow.addEventListener(\"click\", controlsHandler, false);\r\n\r\n        indicator && indicator.addEventListener(\"click\", indicatorHandler, false);\r\n\r\n        if (!svgIndicator) {\r\n            each (indicators, function(indicator) {\r\n                each (indicator.children, function(childIndicator) {\r\n                    childIndicator.addEventListener(\"click\", indicatorHandler);\r\n                });\r\n                indicator.addEventListener(\"click\", indicatorHandler);\r\n            });\r\n        }\r\n\r\n        options.keyboard === true && globalObject.addEventListener(\"keydown\", keyHandler, false);\r\n        if (self.getActiveIndex() < 0) {\r\n            slides[length] && slides[0].classList.add(prefix+\"active\");\r\n            indicators[length] && setActivePage(0);\r\n        }\r\n    \r\n        if (options.interval) {\r\n            self.cycle();\r\n        }\r\n    }\r\n    element[stringCarousel] = self;\r\n}\r\n\r\nexport function FilmstripCarousel(element, options) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.lazyload = typeof options.lazyload === \"boolean\" ? options.lazyload : false;\r\n\r\n    var stringFilmstrip = \"Filmstrip\",\r\n        activeElement,\r\n        itemsView,\r\n        overflow = {},\r\n        overflowContainer,\r\n        // handlers\r\n        handleOverflowChange = function(e) {\r\n            overflow.detail = e.detail;\r\n            updateItemsView();\r\n        },\r\n        clickEventHandler = function(e) {\r\n            e.preventDefault();\r\n            var target = e.target;\r\n            if (target && target.parentElement.tagName === \"BUTTON\") {\r\n                target = target.parentElement;\r\n            }\r\n            if (activeElement) {\r\n                activeElement.classList.remove(prefix + \"active\");\r\n                activeElement.setAttribute(\"aria-pressed\",\"false\");\r\n            }\r\n            target.classList.add(prefix + \"active\");\r\n            target.setAttribute(\"aria-pressed\",\"true\");\r\n            activeElement = target;\r\n            // Emit filter event\r\n            uicoreCustomEvent(\"FilmstripCarousel\", \"ItemClick\", element, {\"target\": target.dataset[\"filterValue\"]});\r\n        },\r\n        updateItemsView = function() {\r\n            if(itemsView){\r\n                var rightNumber = overflow.detail.hasRightControl ? overflow.detail.right+1 : overflow.detail.totalItems,\r\n                    leftNumber = overflow.detail.hasLeftControl ? overflow.detail.left+1 : 1;\r\n                itemsView.innerHTML = \"<span>Viewing \" + (leftNumber) + (leftNumber < rightNumber ? \" - \" + (rightNumber) : \"\") + \" of \"+ overflow.detail.totalItems +\" items </span>\";\r\n            }\r\n        };\r\n\r\n    this.lazyLoad = function() {\r\n        if (options.lazyload && overflow) {\r\n            overflow.lazyLoad();\r\n            overflow.detail = overflow.getCurrentDetails();\r\n            updateItemsView();\r\n            overflowContainer.addEventListener(\"uicOverflowChangeEvent\", handleOverflowChange, false);\r\n            uicoreCustomEvent(\"FilmstripCarousel\", \"LazyLoadEvent\", element, {\"success\": true});\r\n        }\r\n        else {\r\n            uicoreCustomEvent(\"FilmstripCarousel\", \"LazyLoadEvent\", element, {\"success\": false, \"msg\": \"Carousel cannot be lazy loaded. Check usage or avoid mulitple lazy loads.\"});\r\n        }\r\n    };\r\n\r\n    // prevent adding event handlers twice\r\n    if (!(stringFilmstrip in element)) {\r\n        itemsView = element.parentElement.querySelector(\"DIV.dds__items-view\");\r\n        each(element.querySelector(\"UL\").querySelectorAll(\"LI BUTTON\"), function(el) {\r\n            if (el.classList.contains(prefix + \"active\")) {\r\n                activeElement = el;\r\n            }\r\n            el.addEventListener(\"click\", clickEventHandler, false);\r\n        });\r\n\r\n        overflowContainer = getClosest(element, \".\" + prefix + \"container-overflow\");\r\n        if (overflowContainer) {\r\n            overflow = new Overflow(overflowContainer, {\r\n                position: \"outset\",\r\n                style: \"svg\",\r\n                top: 50,\r\n                lazyload: options.lazyload\r\n            });\r\n            if (!options.lazyload) {\r\n                overflow.detail = overflow.getCurrentDetails();\r\n                updateItemsView();\r\n                overflowContainer.addEventListener(\"uicOverflowChangeEvent\", handleOverflowChange, false);\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    element[stringFilmstrip] = self;\r\n\r\n}\r\n","import {uicoreCustomEvent,prefix,emulateTransitionEnd,getClosest,DOC, jsonOptionsInit} from \"./utilities.js\";\r\n\r\nexport default function Collapse(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.target = element.dataset.target ? element.dataset.target\r\n        : options.target ? options.target : element.href && element.getAttribute(\"href\") ? element.getAttribute(\"href\") : false;\r\n    options.parent = element.dataset.parent ? element.dataset.parent : options.parent ? options.parent : false;\r\n\r\n    // validate options\r\n    (function () {\r\n        if(!options.target || !(options.target.charAt(0) === \"#\")) {\r\n            throw new Error(\"There was a problem found with target value, please correct and try again\");\r\n        }\r\n    })();\r\n\r\n    // event targets and constants\r\n    var self = this,\r\n        accordion = null,\r\n        stringCollapse = \"Collapse\",\r\n        collapse = null,\r\n        activeCollapse,\r\n        activeElement,\r\n        showAllBtn,\r\n        hideAllBtn,\r\n        isClickable = true, \r\n        // private methods\r\n        openAction = function(collapseElement, toggle) {\r\n            uicoreCustomEvent(\"ShowHide\", \"ShowEvent\", collapseElement);\r\n            collapseElement.isAnimating = true;\r\n            collapseElement.classList.add(prefix + \"collapsing\");\r\n            collapseElement.classList.remove(prefix+\"collapse\");\r\n            collapseElement.style.height = collapseElement.scrollHeight + \"px\";\r\n            collapseElement.children[0].focus();\r\n            toggle.setAttribute(\"aria-expanded\", \"true\");\r\n\r\n            emulateTransitionEnd(collapseElement, function() {\r\n                if (!toggle.classList.contains(prefix+\"collapsed\")) {\r\n                    collapseElement.isAnimating = false;\r\n                    collapseElement.setAttribute(\"aria-expanded\", \"true\");\r\n                    collapseElement.classList.remove(prefix + \"collapsing\");\r\n                    collapseElement.classList.add(prefix + \"collapse\");\r\n                    collapseElement.classList.add(prefix + \"show\");\r\n                    collapseElement.style.height = \"\";\r\n                    uicoreCustomEvent(\"ShowHide\", \"Shown\", collapseElement);\r\n                }\r\n            });\r\n        },\r\n        closeAction = function(collapseElement, toggle) {\r\n            uicoreCustomEvent(\"ShowHide\", \"HideEvent\", collapseElement);\r\n            collapseElement.isAnimating = true;\r\n            collapseElement.style.height = collapseElement.scrollHeight + \"px\"; // set height first\r\n            collapseElement.classList.remove(prefix + \"collapse\");\r\n            collapseElement.classList.remove(prefix+\"show\");\r\n            collapseElement.classList.add(prefix + \"collapsing\");\r\n            collapseElement.offsetWidth; // force reflow to enable transition\r\n            collapseElement.style.height = \"0rem\";\r\n            toggle.setAttribute(\"aria-expanded\", \"false\");\r\n\r\n            emulateTransitionEnd(collapseElement, function() {\r\n                collapseElement.isAnimating = false;\r\n                collapseElement.setAttribute(\"aria-expanded\", \"false\");\r\n                collapseElement.classList.remove(prefix + \"collapsing\");\r\n                collapseElement.classList.add(prefix + \"collapse\");\r\n                collapseElement.style.height = \"\";\r\n                uicoreCustomEvent(\"ShowHide\", \"Hidden\", collapseElement);\r\n            });\r\n        },\r\n        showAll = function() {\r\n            // this function will be called by all the sub accordions individually\r\n            // thus, achieve the goal to show all\r\n            if (element.classList.contains(prefix + \"collapsed\")){\r\n                self.show();\r\n            }\r\n        },\r\n        hideAll = function() {\r\n            if (!element.classList.contains(prefix + \"collapsed\")){\r\n                self.hide();\r\n            }\r\n        }, \r\n        handleBeginShow = function() {\r\n            isClickable = false;\r\n        },\r\n        handleEndShow = function() {\r\n            isClickable = true;\r\n        };\r\n\r\n    // public methods\r\n    this.toggle = function(e) {\r\n        if (!isClickable) {\r\n            return;\r\n        }\r\n        if (e) {\r\n            e.preventDefault();\r\n        }\r\n        if (!collapse.classList.contains(prefix+\"show\")) {\r\n            self.show();\r\n        } else {\r\n            self.hide();\r\n        }\r\n    };\r\n    this.hide = function() {\r\n        if (collapse.isAnimating) return;\r\n        closeAction(collapse, element);\r\n        element.classList.add(prefix + \"collapsed\");\r\n    };\r\n    this.show = function() {\r\n        if (accordion && options.parent) {\r\n            activeCollapse = accordion.querySelector(\".\" + prefix + \"collapse\" + \".\" + prefix+\"show\")  || accordion.querySelector(\".\"+prefix+\"collapsing\");\r\n            activeElement =\r\n            activeCollapse &&\r\n            (accordion.querySelector(\"[data-toggle='\" + prefix + \"collapse\" + \"'][data-target='#\" + activeCollapse.id + \"']\") ||\r\n            accordion.querySelector(\"[data-toggle='\" +prefix + \"collapse\" + \"'][href='#\" + activeCollapse.id + \"']\"));\r\n        }\r\n\r\n        if (\r\n            !collapse.isAnimating || (activeCollapse && !activeCollapse.isAnimating)) {\r\n            if (activeElement && activeCollapse !== collapse) {\r\n                closeAction(activeCollapse, activeElement);\r\n                activeElement.classList.add(prefix + \"collapsed\");\r\n            }\r\n            openAction(collapse, element);\r\n            element.classList.remove(prefix + \"collapsed\");\r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringCollapse in element)) {\r\n        element.addEventListener(\"click\", self.toggle, false);\r\n\r\n        collapse = DOC.getElementById(options.target.substr(1));\r\n        if (collapse) {\r\n            collapse.isAnimating = false; //// when true it will prevent click handlers\r\n        }\r\n        accordion = options.parent && getClosest(element, options.parent)\r\n                    || getClosest(element, \".\" + prefix + \"accordion\");\r\n\r\n        if (accordion) {\r\n            var showHideAll = accordion.querySelector(\".dds__show-hide-container\");\r\n            if (showHideAll) {\r\n                showAllBtn = showHideAll.querySelector(\".dds__show-all\");\r\n                if(showAllBtn) {\r\n                    showAllBtn.addEventListener(\"click\", showAll, false);\r\n                }\r\n                hideAllBtn = showHideAll.querySelector(\".dds__hide-all\");\r\n                if(hideAllBtn) {\r\n                    hideAllBtn.addEventListener(\"click\", hideAll, false);\r\n                }\r\n            }\r\n        }\r\n        document.addEventListener(\"uicShowHideShowEvent\", handleBeginShow);\r\n        document.addEventListener(\"uicShowHideShown\", handleEndShow);\r\n    }\r\n    \r\n    element[stringCollapse] = self;\r\n\r\n}\r\n","import {prefix, uicoreCustomEvent, jsonOptionsInit} from \"./utilities.js\";\r\n\r\nexport default function ContactDrawer(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.openTime =  options.openTime ? options.openTime : 5000; // milliseconds\r\n    options.closedTime = options.closedTime ? options.closedTime : 7000;  // milliseconds\r\n    options.transitionTime = options.transitionTime ? options.transitionTime : 500;  // milliseconds\r\n\r\n    // bind, elements\r\n    var self = this,\r\n        stringContactDrawer = \"ContactDrawer\",\r\n        tab = element.querySelector(\".\" + prefix + \"drawer-tab\"),\r\n        closeButton = element.querySelector(\".\" + prefix + \"close-x\"),\r\n        content = element.querySelector(\".\" + prefix + \"drawer-content\"),\r\n        visible = true,\r\n        cancelAutomation = false;\r\n\r\n    // handlers\r\n    var clickHandler = function (e) {\r\n        e.preventDefault();\r\n        if (!cancelAutomation) {\r\n            cancelAutomation = true;\r\n        }\r\n        toggleAction();\r\n    };\r\n\r\n    // private methods\r\n    var openAction = function() {\r\n            visible = true;\r\n            element.classList.add(prefix + \"drawer-open\");\r\n            uicoreCustomEvent(\"ContactDrawer\", \"OpenEvent\", element);\r\n            content.hidden = false;\r\n            content.setAttribute(\"aria-hidden\", false);\r\n        },\r\n        closeAction = function() {\r\n            visible = false;\r\n            element.classList.remove(prefix + \"drawer-open\");\r\n            uicoreCustomEvent(\"ContactDrawer\", \"CloseEvent\", element);\r\n            setTimeout(function() {\r\n                content.hidden = true;\r\n            }, options.transitionTime);\r\n            content.setAttribute(\"aria-hidden\", true);\r\n        },\r\n        toggleAction = function() {\r\n            if (visible) {\r\n                closeAction();\r\n            } else {\r\n                openAction();\r\n            }\r\n        },\r\n        setDrawerToggleOptions =  function() {\r\n            var toggleOptionsStr = content.dataset.contactDrawer;\r\n            if (toggleOptionsStr) {\r\n                var toggleOptions = JSON.parse(toggleOptionsStr);\r\n\r\n                if (toggleOptions) {\r\n                    if (toggleOptions.OpenTimeInSeconds)\r\n                        options.openTime = toggleOptions.OpenTimeInSeconds * 1000;\r\n                    if (toggleOptions.CloseTimeInSeconds)\r\n                        options.closedTime = toggleOptions.CloseTimeInSeconds * 1000;\r\n                    if (toggleOptions.TransitionTimeInMilliseconds)\r\n                        options.transitionTime = toggleOptions.TransitionTimeInMilliseconds;\r\n                }\r\n            }\r\n        },\r\n        setTransitionTime = function() {\r\n            if (\r\n                options.transitionTime > options.openTime ||\r\n                options.transitionTime > options.closedTime\r\n            ) {\r\n                //console.warn(\"contact drawer transition time is too large\");\r\n                return;\r\n            }\r\n\r\n            if (element) {\r\n                element.style.transition = \"all \" + options.transitionTime + \"ms ease\";\r\n            }\r\n        };\r\n\r\n    // public methods\r\n    this.timerAction = function() {\r\n        if (!cancelAutomation) {\r\n            if (visible) {\r\n                closeAction();\r\n                if (options.closedTime) {\r\n                    setTimeout(function() {\r\n                        return self.timerAction();\r\n                    }, options.closedTime);\r\n                }\r\n            } else {\r\n                openAction();\r\n                if (options.openTime) {\r\n                    setTimeout(function() {\r\n                        return self.timerAction();\r\n                    }, options.openTime);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringContactDrawer in element)) {\r\n\r\n        tab.addEventListener(\"click\", clickHandler, false);\r\n        closeButton.addEventListener(\"click\", clickHandler, false);\r\n\r\n        setDrawerToggleOptions();\r\n        setTransitionTime();\r\n    }\r\n\r\n    if(!cancelAutomation) {\r\n        self.timerAction();\r\n    }\r\n    element[stringContactDrawer] = self;\r\n}\r\n","import {prefix,uicoreCustomEvent,DOC,setFocus,createElement, each, jsonOptionsInit} from \"./utilities.js\";\r\n\r\nexport default function Dropdown(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // set option\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.persist = element.dataset.persist ? element.dataset.persist : options.persist ? options.persist : false;\r\n    // constants, event targets, strings\r\n    var self = this,\r\n        stringDropdown = \"Dropdown\",\r\n        parent = element.parentNode,\r\n        isMultiSelect = false,\r\n        relatedTarget = null,\r\n        menu = parent.querySelector(\".\"+prefix+\"button-dropdown-container\"),\r\n        menuItems,\r\n        itemsChecked,\r\n        currentText,\r\n        filters,\r\n        // preventDefault on empty anchor links\r\n        preventEmptyAnchor = function (anchor) {\r\n            if ((anchor && anchor.tagName === \"A\" && anchor.href && anchor.href.slice(-1) === \"#\") ||\r\n                (anchor && anchor.parentNode && anchor.parentNode.tagName === \"A\" && anchor.parentNode.href && anchor.parentNode.href.slice(-1) === \"#\")) {\r\n                this.preventDefault();\r\n            }\r\n        },\r\n        // toggle dismissible events\r\n        toggleDismiss = function () {\r\n            if (element.open) {\r\n                element.addEventListener(\"click\", dismissHandler, false);\r\n                element.addEventListener(\"keydown\", preventScroll, false);\r\n                menu.addEventListener(\"keydown\", preventScroll, false);\r\n                menu.addEventListener(\"click\", dismissHandler, false);\r\n                window.addEventListener(\"click\", windowClickHandler, true);\r\n            } else {\r\n                element.removeEventListener(\"click\", dismissHandler, false);\r\n                element.removeEventListener(\"keydown\", preventScroll, false);\r\n                menu.removeEventListener(\"keydown\", preventScroll, false);\r\n                menu.removeEventListener(\"click\", dismissHandler, false);\r\n                window.removeEventListener(\"click\", windowClickHandler, true);\r\n            }\r\n        },\r\n        // handlers\r\n        dismissHandler = function (e) {\r\n            var eventTarget = e.target, \r\n                hasData = eventTarget && (stringDropdown in eventTarget || stringDropdown in eventTarget.parentNode);\r\n            if ((eventTarget === menu || menu.contains(eventTarget))\r\n                && (options.persist || hasData)) {\r\n                return;\r\n            } else {\r\n                relatedTarget =\r\n                    eventTarget === element || element.contains(eventTarget)\r\n                        ? element\r\n                        : null;\r\n                \r\n                if (!eventTarget.classList.contains(prefix + \"disabled\")) {\r\n                    hide();\r\n                }\r\n            }\r\n            element.focus();\r\n            preventEmptyAnchor.call(e, eventTarget);\r\n        },\r\n        formatDisplayCount = function() {\r\n            var displayTxt;\r\n            if (itemsChecked > 0) {\r\n                displayTxt = \" (\" + itemsChecked +\")\";\r\n            } else {\r\n                displayTxt = \" \";\r\n            }\r\n            var checkedCounter = element.querySelector(\".\" + prefix + \"checked-presentation\");\r\n            if (checkedCounter != null) {\r\n                checkedCounter.innerHTML = checkedCounter.innerHTML.replace(currentText, displayTxt);\r\n                currentText = displayTxt;\r\n            } else {\r\n                checkedCounter = createElement(\"span\", {\r\n                    class: prefix + \"checked-presentation \" + prefix + \"ml-1\",\r\n                    html: displayTxt\r\n                });\r\n                currentText = checkedCounter.innerHTML;\r\n                // element.insertBefore(checkedCounter,element.querySelector(\"svg.\" + prefix + \"arrow-tri-solid-right\"));\r\n                element.querySelector(\".dds__text-truncate\").appendChild(checkedCounter);\r\n            }\r\n            \r\n        },\r\n        clickHandler = function (e) {\r\n            relatedTarget = element;\r\n\r\n            if (isMultiSelect && e.target.tagName === \"INPUT\") {\r\n                if (e.target.checked) {\r\n                    filters.push(e.target.name);\r\n                    e.target.parentElement.parentElement.setAttribute(\"aria-checked\", \"true\");\r\n                    uicoreCustomEvent(\"Dropdown\", \"AddEvent\", element, { \"filters\": filters, \"filter\": e.target.name, \"filterInput\": e.target});\r\n                } else {\r\n                    var index = filters.indexOf(e.target.name);\r\n                    filters.splice(index, 1);\r\n                    e.target.parentElement.parentElement.setAttribute(\"aria-checked\", \"false\");\r\n                    uicoreCustomEvent(\"Dropdown\", \"RemoveEvent\", element, { \"filters\": filters, \"filter\": e.target.name, \"filterInput\": e.target});\r\n                }\r\n                self.recountChecked();\r\n\r\n                // element.innerHTML = element.innerHTML.replace(currentText, displayTxt);\r\n                // currentText = displayTxt;\r\n                element.focus();\r\n            }\r\n            else if (e.target.tagName == \"BUTTON\"  || e.target.parentElement.tagName == \"BUTTON\" || e.target.parentElement.parentElement.tagName == \"BUTTON\"){\r\n                self.toggle();\r\n                preventEmptyAnchor.call(e, e.target);\r\n            }\r\n        },\r\n        preventScroll = function (e) {\r\n            var key = e.which || e.keyCode;\r\n            if (key === 38 || key === 40) {\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        keyHandler = function (e) {\r\n            var key = e.which || e.keyCode,\r\n                activeItem = DOC.activeElement,\r\n                isMenuOpen = menu.classList.contains(prefix + \"show\"),\r\n                isSameElement = (activeItem === element) || (activeItem.parentNode === menu),\r\n                isInsideMenu = menu.contains(activeItem),\r\n                isMenuItem = activeItem.parentNode === menu || activeItem.parentNode.parentNode === menu;\r\n\r\n            if ((isMenuItem) || (isMenuOpen && isSameElement)) {\r\n                // checking element with enter or spacebar\r\n                if (isInsideMenu && (key === 13 || key === 32)) {\r\n                    activeItem.firstElementChild.click();\r\n                }\r\n\r\n                // navigate up | down\r\n                var idx = menuItems.indexOf(activeItem);\r\n                idx = \r\n                    key === 38\r\n                        ? idx >= 1 \r\n                            ? idx - 1 \r\n                            : 0 \r\n                        : key === 40 \r\n                            ? idx < menuItems.length - 1 \r\n                                ? idx + 1 \r\n                                : menuItems.length - 1\r\n                            : idx;\r\n                menuItems[idx] && setFocus(menuItems[idx]);\r\n            }\r\n            if (\r\n                ((menuItems.length && isMenuItem) || // menu has items\r\n                    (!menuItems.length && (isInsideMenu || isSameElement)) || // menu might be a form\r\n                    !isInsideMenu) && // or the focused element is not in the menu at all\r\n                element.open &&\r\n                key === 27 // menu must be open\r\n            ) {\r\n                self.toggle();\r\n                relatedTarget = null;\r\n                element.focus();\r\n            }\r\n            if (!isMenuOpen && !isMenuItem && (key === 40|| key === 13 || key === 32)) { //if menu is closed and hit enter or space on arrow btn, open menu and set focus to first item\r\n                e.preventDefault();\r\n                self.toggle();\r\n                menuItems[0] && setFocus(menuItems[0]);\r\n                relatedTarget = null;\r\n            }\r\n            if (isMenuOpen && (key === 9 || (e.shiftKey && e.keyCode == 9))) { //if menu is open then close menu on tab\r\n                e.preventDefault();\r\n                self.toggle();\r\n                element.focus();\r\n            }\r\n            \r\n        },\r\n        // private methods\r\n        show = function () {\r\n            if (element.classList.contains(prefix + \"btn-split-arrow\")) {\r\n                menu.style.minWidth = parent.offsetWidth+\"px\";\r\n            } else if (element.classList.contains(prefix + \"btn\")) {\r\n                menu.style.minWidth = element.offsetWidth +\"px\";\r\n            }\r\n            uicoreCustomEvent(\"DropDown\", \"ShowEvent\", element);\r\n            menu.classList.add(prefix + \"show\");\r\n            parent.classList.add(prefix + \"show\");\r\n            element.setAttribute(\"aria-expanded\", true);\r\n            uicoreCustomEvent(\"DropDown\", \"Shown\", element);\r\n            element.open = true;\r\n\r\n            setTimeout(function () {\r\n                toggleDismiss();\r\n            }, 100);\r\n        },\r\n        hide = function () {\r\n            uicoreCustomEvent(\"DropDown\", \"HideEvent\", element);\r\n            menu.classList.remove(prefix + \"show\");\r\n            parent.classList.remove(prefix + \"show\");\r\n            element.setAttribute(\"aria-expanded\", false);\r\n            uicoreCustomEvent(\"DropDown\", \"Hidden\", element);\r\n            element.open = false;\r\n\r\n            setTimeout(function () {\r\n                toggleDismiss();\r\n                element.addEventListener(\"click\", clickHandler, false);\r\n            }, 100);\r\n        },\r\n        focusOutHandler = function(e) {\r\n            var target = e.relatedTarget ? e.relatedTarget : e.target ? e.target : DOC.activeElement;\r\n            if(!(e.currentTarget.contains(target))) {\r\n                if(e.currentTarget.classList.contains(prefix + \"btn-dropdown\")) {\r\n                    relatedTarget = parent = e.currentTarget;\r\n                } else {\r\n                    relatedTarget = parent = e.currentTarget.parentNode;\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n            hide();\r\n            preventEmptyAnchor.call(e, relatedTarget);\r\n        },\r\n        windowClickHandler = function(e) {\r\n            if (!parent.contains(e.target) || parent === e.target){\r\n                hide();\r\n                preventEmptyAnchor.call(e, relatedTarget);\r\n            }\r\n        };\r\n\r\n    // public methods\r\n    this.toggle = function () {\r\n        if (parent.classList.contains(prefix + \"show\") && element.open) {\r\n            hide();\r\n        } else {\r\n            show();\r\n        }\r\n    };\r\n\r\n    this.recountChecked = function() {\r\n        itemsChecked = element.parentElement.querySelectorAll(\".\" + prefix + \"form-check-input:checked\").length;\r\n        formatDisplayCount();\r\n    };\r\n\r\n    // init\r\n    if (!(stringDropdown in element)) {\r\n        // set initial state to closed\r\n        element.open = false;\r\n        // prevent adding event handlers twice\r\n        !(\"tabIndex\" in menu) && menu.setAttribute(\"tabindex\", \"0\"); // Fix onblur on Chrome | Safari\r\n        element.addEventListener(\"click\", clickHandler, false);\r\n        parent.addEventListener(\"focusout\", focusOutHandler, true);\r\n        element.addEventListener(\"keydown\", keyHandler, false);\r\n        menu.addEventListener(\"keydown\", keyHandler, false);\r\n        if (element.parentElement.classList.contains(\"dds__multi-select\")){\r\n            isMultiSelect = true;\r\n        }\r\n\r\n        var dropdownEls = menu.children;\r\n        menuItems = [];\r\n        each (dropdownEls, function(dropdownEl) {\r\n            if (dropdownEl.children.length && dropdownEl.children[0].tagName === \"LI\" && !dropdownEl.children[0].firstElementChild.classList.contains(prefix + \"disabled\")) {\r\n                menuItems.push(dropdownEl.children[0]);\r\n            } \r\n            else if (dropdownEl.tagName === \"LI\" && !dropdownEl.firstElementChild.classList.contains(prefix + \"disabled\")) {\r\n                menuItems.push(dropdownEl);\r\n            }        \r\n        });\r\n        if (isMultiSelect){\r\n            each (menuItems, function(menuItem) {\r\n                menuItem.firstElementChild.addEventListener(\"click\", clickHandler, true);\r\n            });\r\n            itemsChecked = 0;\r\n            filters = [];\r\n        }\r\n    }\r\n\r\n    element[stringDropdown] = self;\r\n}\r\n","import { DOC,emulateTransitionEnd, getFocusableElements, getFullScreenOverlay, getTransitionDurationFromElement, prefix,supportTransitions,uicoreCustomEvent, isSafari , isIOS, each, setFocus, jsonOptionsInit, getClosest} from \"./utilities.js\";\r\n\r\nexport default function Modal(element, options) {\r\n    // element can be the modal/triggering button\r\n\r\n    // the modal (both JavaScript / DATA API init) / triggering button element (DATA API)\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.static = options.backdrop === \"static\" ? true : false;\r\n    options.target = element.dataset.target ? DOC.getElementById(element.dataset[\"target\"].substr(1)) : \r\n        options.target ? DOC.getElementById(options.target.substr(1)) : null;\r\n    // validate options\r\n    (function () {\r\n        if (options.target == null || options.target === \"\") {\r\n            throw new Error(\"There was a problem found with target value, please correct and try again\");\r\n        }\r\n    });\r\n    // determine modal, triggering element\r\n    var self = this,\r\n        stringModal = \"Modal\",\r\n        focusableEls,\r\n        header,\r\n        origRightPadding,\r\n        scrollbarWidth,\r\n        modalElement = options.target,\r\n        overlayDelay,\r\n        overlay = getFullScreenOverlay(),\r\n        // private methods\r\n        setFocusableElements = function() {\r\n            focusableEls = getFocusableElements(modalElement);\r\n            modalElement.firstFocusableEl = focusableEls[0];\r\n            modalElement.lastFocusableEl = focusableEls[ focusableEls.length - 1 ];\r\n\r\n        },\r\n        focusFirstDescendant = function () {\r\n            if (modalElement.loading) {\r\n                //if loading indicator modal- trap focus so can't tab out\r\n                modalElement.focus();\r\n            } else {\r\n                setFocusableElements();\r\n                if (focusableEls.length > 0)  {\r\n                    //if there is something to focus\r\n                    setFocus(focusableEls[0]);\r\n                }\r\n            }\r\n        },\r\n        handleKeyDown = function(e) {\r\n\r\n            if (!modalElement.loading) {\r\n                setFocusableElements();\r\n\r\n                var KEY_TAB = 9;\r\n                var KEY_ESC = 27;\r\n\r\n                // For loading modal which has no focusable elements\r\n                if(focusableEls.length == 0){\r\n                    e.preventDefault();\r\n                }\r\n\r\n                switch(e.keyCode) {\r\n                case KEY_TAB:\r\n                    if ( focusableEls.length === 1 ) {\r\n                        e.preventDefault();\r\n                        break;\r\n                    }\r\n                    if ( e.shiftKey ) {\r\n                        handleBackwardTab(e);\r\n                    } else {\r\n                        handleForwardTab(e);\r\n                    }\r\n                    break;\r\n                case KEY_ESC: self.hide(); break;\r\n                default:\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        handleBackwardTab = function (e) {\r\n            if ( document.activeElement === modalElement.firstFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.lastFocusableEl);\r\n            }\r\n            if (header) focusVisibilityHandler();\r\n        },\r\n        handleForwardTab = function (e) {\r\n            if (header) focusVisibilityHandler();\r\n\r\n            if ( document.activeElement === modalElement.lastFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.firstFocusableEl);\r\n            }\r\n        },\r\n        createOverlay = function() {\r\n            if (overlay && !(overlay.classList.contains(prefix + \"show\"))) {\r\n                overlayDelay = getTransitionDurationFromElement(overlay);\r\n                overlay.classList.add(prefix + \"show\");\r\n                overlay.removeAttribute(\"hidden\");\r\n                if( overlay.style.visibility == \"hidden\"){\r\n                    overlay.style.visibility = \"\";\r\n                }\r\n            } else {\r\n                console.warn(\"MODAL: Overlay requested. Corresponding HTML missing. Please apply id 'dds__full-screen-overlay' and class 'dds__overlay' to an empty div\");\r\n            }\r\n           \r\n            if (!options.static) {\r\n                window.addEventListener(\"click\", function(e) {\r\n                    if (modalElement.classList.contains(prefix + \"show\") && e.target != modalElement && !modalElement.contains(e.target)) {\r\n                        self.hide();\r\n                    }\r\n                }, false);\r\n            }\r\n            DOC.body.style.paddingRight = (scrollbarWidth + origRightPadding) + \"px\";\r\n            DOC.body.style.overflow = \"hidden\";\r\n        },\r\n        removeOverlay = function () {\r\n            if (overlay) {\r\n                overlay.classList.remove(prefix + \"show\");\r\n                overlay.setAttribute(\"hidden\",\"\");\r\n            }\r\n            \r\n            if (!options.static) {\r\n                modalElement.removeEventListener(\"click\", function(e) {\r\n                    if (e.target == modalElement) {\r\n                        self.hide();\r\n                    }\r\n                }, false);\r\n            }\r\n            if (origRightPadding == 0) {\r\n                DOC.body.style.paddingRight = \"\";\r\n            } else {\r\n                DOC.body.style.paddingRight = origRightPadding + \"px\";\r\n            }\r\n            DOC.body.style.overflow = \"\";\r\n            if (DOC.body.style.length == 0) {\r\n                DOC.body.removeAttribute(\"style\");\r\n            }\r\n            uicoreCustomEvent(\"Modal\", \"Hidden\", modalElement);\r\n        },\r\n        keydownHandlerToggle = function () {\r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                DOC.addEventListener(\"keydown\", keyHandler, false);\r\n            } else {\r\n                DOC.removeEventListener(\"keydown\", keyHandler, false);\r\n            }\r\n        },\r\n        triggerShow = function () {\r\n            //resizeHandlerToggle();\r\n            keydownHandlerToggle();\r\n            setFocus(modalElement);\r\n            focusFirstDescendant();\r\n            uicoreCustomEvent(\"Modal\", \"Shown\", modalElement);\r\n        },\r\n        triggerHide = function () {\r\n            setTimeout( function() {\r\n                modalElement.style.display = \"\";\r\n            }, getTransitionDurationFromElement(modalElement));\r\n            //check if parent is dropdown, and set focus on appropriate element\r\n            var isInDropdown = getClosest(element, \".\"+prefix+\"btn-dropdown\", true);\r\n            var isInSplitBtn = isInDropdown && isInDropdown.classList.contains(prefix+\"btn-group\");\r\n            element && (isInDropdown ? (isInSplitBtn ? setFocus(isInDropdown.querySelector(\".\"+prefix +\"btn-split-arrow\")): setFocus(isInDropdown.querySelector(\".\"+prefix+\"btn\"))) : setFocus(element));\r\n        \r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                keydownHandlerToggle();\r\n            }\r\n        },\r\n        // handlers\r\n        clickHandler = function (e) {\r\n            if ((e.target === element || e.target.parentElement === element) && !(modalElement.classList.contains(prefix + \"show\"))) {\r\n                self.show();\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        keyHandler = function (e) {\r\n            if (self.keyboard && e.which == 27 && modalElement.classList.contains(prefix + \"show\")) {\r\n                self.hide();\r\n            }\r\n        },\r\n        dismissHandler = function (e) {\r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                self.hide();\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        focusVisibilityHandler = function () {\r\n            // minimum distance from \"to be focused\" element to the bottom of fixed header\r\n            var minDistance = header.parentElement.clientHeight;\r\n            var activeElementIdx = focusableEls.indexOf(document.activeElement);\r\n            \r\n            // handles shift tab loop, and get next element to receive focus - going back\r\n            var prevFocusableEl = activeElementIdx === 0 ? focusableEls[focusableEls.length -1] : focusableEls[activeElementIdx - 1] ;\r\n            \r\n            // handles tab loop, and get next element to receive focus - going forward \r\n            var nextFocusableEl = activeElementIdx === (focusableEls.length -1) ? focusableEls[0] : focusableEls[activeElementIdx + 1];\r\n            \r\n            if(event.shiftKey && event.keyCode === 9) {\r\n                scrollToElement(prevFocusableEl, minDistance, header);\r\n            } else if(!event.shiftKey && event.keyCode === 9) {\r\n                scrollToElement(nextFocusableEl, minDistance, header);\r\n            }\r\n        },\r\n        scrollToElement = function (element, minDistance, header) {\r\n            if((!header.contains(element)) && // prevents scroll if header will receive focus\r\n            element.getBoundingClientRect().top < minDistance) { // element is behind fixed header\r\n                \r\n                // scroll to top of \"to be focused\" element\r\n                modalElement.scrollTop = (element.getBoundingClientRect().top - (minDistance*2)) + modalElement.scrollTop;\r\n            }\r\n        };\r\n\r\n    // public methods\r\n    this.toggle = function () {\r\n        if (modalElement.classList.contains(prefix + \"show\")) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    };\r\n    this.show = function () {\r\n        uicoreCustomEvent(\"Modal\", \"ShowEvent\", modalElement);\r\n\r\n        createOverlay();\r\n\r\n        modalElement.style.display = \"block\";\r\n\r\n        if (isSafari && isIOS) {\r\n            modalElement.classList.add(prefix + \"is-safari\");\r\n        }\r\n\r\n        setTimeout( function() {\r\n            modalElement.classList.add(prefix + \"show\");\r\n        }, 5);\r\n        modalElement.setAttribute(\"aria-hidden\", false);\r\n        modalElement.classList.contains(prefix + \"fade\")\r\n            ? emulateTransitionEnd(modalElement, triggerShow)\r\n            : triggerShow();\r\n\r\n        supportTransitions && modalElement.loading ? overlayDelay : 0;\r\n    };\r\n    this.hide = function () {\r\n        uicoreCustomEvent(\"Modal\", \"HideEvent\", modalElement);\r\n\r\n        modalElement.classList.remove(prefix + \"show\");\r\n        modalElement.setAttribute(\"aria-hidden\", true);\r\n\r\n        if (isSafari && isIOS && modalElement.classList.contains(prefix + \"is-safari\")) {\r\n            modalElement.classList.remove(prefix + \"is-safari\");\r\n        }\r\n        \r\n        setTimeout( function() {\r\n            removeOverlay();\r\n        }, getTransitionDurationFromElement(modalElement));\r\n        \r\n        modalElement.classList.contains(prefix + \"fade\")\r\n            ? emulateTransitionEnd(modalElement, triggerHide)\r\n            : triggerHide();\r\n        supportTransitions && overlay ? overlayDelay : 0;\r\n    };\r\n\r\n    //init\r\n    if (!(stringModal in element)) {\r\n        if (!modalElement) {\r\n            return false;\r\n        } else {\r\n            origRightPadding = DOC.body.style.paddingRight ? DOC.body.style.paddingRight.split(\"px\")[0] : 0;\r\n            scrollbarWidth = window.innerWidth - DOC.documentElement.clientWidth;\r\n            modalElement.loading = modalElement.classList.contains(prefix + \"loading-modal\") ? true : false;\r\n        \r\n            if (!modalElement.loading) {\r\n                element.addEventListener(\"click\", clickHandler, false);\r\n                modalElement.addEventListener(\"keydown\", handleKeyDown);\r\n                each(modalElement.querySelectorAll(\"[data-dismiss='\"+prefix+\"modal']\"), function(dissmissEl) {\r\n                    dissmissEl.addEventListener(\"click\", dismissHandler, false);\r\n                });\r\n                var modalContent = modalElement.querySelector(\".\" + prefix + \"modal-content\");\r\n                var potentialHeader = modalContent.firstElementChild;\r\n                if (potentialHeader.classList.contains(prefix + \"container-fluid\") && !potentialHeader.classList.contains(prefix + \"modal-body\")) {\r\n                    potentialHeader.firstElementChild.classList.add(prefix + \"offcanvas-modal-topbar\");\r\n                }\r\n                header = modalElement.querySelector(\".\"+prefix+\"offcanvas-modal-topbar\");\r\n\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    element[stringModal] = self;\r\n}","import { uicoreCustomEvent, prefix, debounce, createElement, getClosest, classAdd, getFocusableElements, getAnimationDurationFromElement, altFind, renderSvg, each, setFocus, ariaAnnounce} from \"./utilities\";\r\nimport Collapse from \"./collapse.js\";\r\nimport Dropdown from \"./dropdown.js\";\r\nimport Modal from \"./modal.js\";\r\n\r\nexport function FilterKeyword(element) {\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    // bind, target alert, duration and stuff\r\n    var self = this,\r\n        stringFilterKeyword = \"FilterKeyword\",\r\n        addButton,\r\n        filterInput,\r\n        filterCntr,\r\n\r\n        // handlers\r\n        handleClickEvent = function (e) {\r\n            if ((e.target == addButton || addButton.contains(e.target)) && filterInput.value.trim() != \"\") {\r\n                uicoreCustomEvent(\"FilterKeyword\", \"CreateEvent\", element, { \"filter\": filterInput.value } );\r\n                filterInput.value = \"\";\r\n                filterInput.focus();\r\n                window.removeEventListener(\"click\", clickOutHandler, true);\r\n            }\r\n        },\r\n\r\n        handleKeyEvent = debounce(function (e){\r\n            window.addEventListener(\"click\", clickOutHandler, true);\r\n            if (e.keyCode == 13){\r\n                uicoreCustomEvent(\"FilterKeyword\", \"CreateEvent\", element, { \"filter\": filterInput.value } );\r\n                filterInput.value = \"\";\r\n                filterInput.focus();\r\n            }\r\n        }, 50),\r\n\r\n        clickOutHandler = function(e)  {\r\n            if (filterCntr.contains(e.target)) {\r\n                return; \r\n            }\r\n            filterInput.value = \"\";\r\n            window.removeEventListener(\"click\", clickOutHandler, true);\r\n        };\r\n\r\n    // init\r\n    if (!(stringFilterKeyword in element)) {\r\n        addButton = element.querySelector(\".\" + prefix + \"filter-btn\");\r\n        filterInput = element.querySelector(\".\" + prefix + \"filter-input\");\r\n        filterCntr = element.querySelector(\".\" + prefix + \"filter-container\");\r\n\r\n        addButton.addEventListener(\"click\", handleClickEvent, true);\r\n        filterInput.addEventListener(\"keydown\", handleKeyEvent, false);\r\n    }\r\n\r\n    element[stringFilterKeyword] = self;\r\n\r\n}\r\n\r\nexport function FilterCollection(element) {\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    var horizontal = true;\r\n\r\n    // bind, target alert, duration and stuff\r\n    var self = this,\r\n        stringFilterCollection = \"FilterCollection\",\r\n        filterResults,\r\n        filterOffCanvasResults,\r\n        clearAllItem,\r\n        clearAllOffCanvas,\r\n        resultsLabelDesktop,\r\n        filters = [],\r\n        filtersTemp = [],\r\n        filterOffCanvas,\r\n        keywordFilter,\r\n        visibileIdx,\r\n        mediaIncrementforDropdowns,\r\n        showMoreDiv,\r\n        mobileModal,\r\n        dropdownObjects = [],\r\n        accordionObjects = [],\r\n        digit = \"digit\",\r\n        collectionInputsContainer,\r\n        dropdowns,\r\n        collectionInputs,\r\n        targetCollection,\r\n        filterCollection,\r\n        isOffCanvasState = false,\r\n        isApplyingState = false,\r\n        smallWindow,\r\n        smallMediaSize = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        mediumMediaSize = window.matchMedia(\"(max-width: 991.98px)\"),\r\n\r\n        // handlers \r\n        handleAddEvent = function (e) {\r\n            if (e.type === \"uicDropdownAddEvent\" || e.type === \"uicFilterKeywordCreateEvent\") {\r\n                if(!isOffCanvasState){\r\n                    createDesktopFilterItem(e.detail.filter, e.detail.filterInput);\r\n                } else{\r\n                    createOffCanvasFilterItem(e.detail.filter, e.detail.filterInput);\r\n                }\r\n            } else {\r\n                var checkbox = e.srcElement;    \r\n                if (checkbox.tagName != \"INPUT\") {\r\n                    if (checkbox.tagName === \"SPAN\" && checkbox.previousElementSibling.tagName === \"INPUT\") {\r\n                        checkbox = checkbox.previousElementSibling;\r\n                    } else {\r\n                        checkbox = checkbox.querySelector(\"input\");\r\n                    }\r\n                }\r\n                createDesktopFilterItem(checkbox.nextElementSibling.innerText, checkbox);\r\n                if (!horizontal && \r\n                    (element.getBoundingClientRect().y && element.getBoundingClientRect().y< 0) \r\n                        || (element.getBoundingClientRect().top && element.getBoundingClientRect().top < 0 )) { //Edge FF use top, not y\r\n                    element.scrollIntoView({behavior: \"smooth\"});\r\n                }\r\n            }\r\n        },\r\n\r\n        handleClearAllEvent = function (e) {\r\n            if (e.target == clearAllOffCanvas || clearAllOffCanvas.contains(e.target) || e.target === clearAllItem || clearAllItem.contains(e.target)) {\r\n                toggleClearAllButtons(false);\r\n                ariaAnnounce(\r\n                    document.querySelector(\".\" + prefix + \"filter-btn-clear\").innerText // will say \"Clear all\"\r\n                );\r\n            } else {\r\n                ariaAnnounce(\r\n                    getClosest(e.target, \".\" + prefix + \"svg-close-x\", false).getAttribute(\"aria-label\") // will say filter-close\r\n                );\r\n            }\r\n            each(filterResults.querySelectorAll(\"button.\"+prefix + \"filter-item\"), function(filter) {\r\n                clearFilter(filter);\r\n            });\r\n            resultsLabelDesktop.classList.add(prefix + \"d-none\");\r\n            if (horizontal) { clearMultiSelects(); }\r\n            updateFiltersCount();\r\n            uicoreCustomEvent(\"FilterCollection\", \"RemoveAllEvent\", element, { \"filters\": filtersAsStrings()} );\r\n        },\r\n        \r\n        handleDesktopCheckboxClick = function (e){\r\n\r\n            if ( e.type === \"uicDropdownAddEvent\" || e.type === \"uicDropdownRemoveEvent\") {\r\n                if (e.detail.filterInput.checked === true){\r\n                    handleAddEvent(e);\r\n                }  else {\r\n                    var deselected = filterResults.querySelector(\"#\" + e.detail.filter.replace(/\\s/g, \"\").toLowerCase());\r\n                    clearFilter(deselected);\r\n                    if(filters && filters.length === 0) {\r\n                        toggleClearAllButtons(false);\r\n                        uicoreCustomEvent(\"FilterCollection\", \"RemoveAllEvent\", element, { \"filters\": filtersAsStrings()} );\r\n                    }\r\n                }\r\n            } else if (e.type === \"click\") {\r\n                e.preventDefault();\r\n                var checkbox = e.srcElement;\r\n                if (checkbox.tagName != \"INPUT\") {\r\n                    if (checkbox.tagName === \"SPAN\" && checkbox.previousElementSibling.tagName === \"INPUT\") {\r\n                        checkbox = checkbox.previousElementSibling;\r\n                    } else {\r\n                        checkbox = checkbox.querySelector(\"input\");\r\n                    }\r\n                }\r\n                if (!checkbox.hasAttribute(\"disabled\") && !checkbox.classList.contains(prefix+\"disabled\")) {\r\n                    setTimeout(function() {\r\n                        if (checkbox.checked) {\r\n                            checkbox.checked = false;\r\n                            getClosest(checkbox, \"li\", true).setAttribute(\"aria-checked\", \"false\");\r\n                        } else {\r\n                            checkbox.checked = true;\r\n                            getClosest(checkbox, \"li\", true).setAttribute(\"aria-checked\", \"true\");\r\n                        }\r\n                        if (checkbox.checked === true) {\r\n                            handleAddEvent(e); \r\n                        } else {\r\n                            var value = checkbox.name.toLowerCase();\r\n                            var deselected = filterResults.querySelector(\"[value=\\\"\" + value + \"\\\"]\");\r\n                            clearFilter(deselected);\r\n                            if(filters && filters.length === 0) {\r\n                                toggleClearAllButtons(false);\r\n                                uicoreCustomEvent(\"FilterCollection\", \"RemoveAllEvent\", element, { \"filters\": filtersAsStrings()} );\r\n                            }\r\n                        }\r\n                    },25);\r\n                }\r\n            }\r\n        },\r\n\r\n        handleFilterItemClickEvent = function (e) {\r\n            var target = e.target.classList.contains(\".\" + prefix + \"filter-item\") ? e.target : getClosest(e.target, \".\" + prefix + \"filter-item\");\r\n            if(filters.length && filters.length === 1) {\r\n                handleClearAllEvent(e);\r\n                resultsLabelDesktop.classList.add(prefix + \"d-none\");\r\n                accordionObjects[0] ? setFocus(accordionObjects[0]) : setFocus(collectionInputs[0]);\r\n            } else {\r\n                ariaAnnounce(\r\n                    getClosest(e.target, \".\" + prefix + \"svg-close-x\", false).getAttribute(\"aria-label\") // will say filter-close\r\n                );\r\n                var nextFocusableEl = target.previousElementSibling && target.previousElementSibling.classList.contains(prefix+\"filter-item\") ?\r\n                    target.previousElementSibling :\r\n                    target.nextElementSibling && target.nextElementSibling.classList.contains(prefix+\"filter-item\") ? \r\n                        target.nextElementSibling :\r\n                        accordionObjects ?\r\n                            accordionObjects[0] :\r\n                            collectionInputs[0];\r\n                setTimeout(function() {\r\n                    clearFilter(target);\r\n                    uicoreCustomEvent(\"FilterCollection\", \"RemoveEvent\", element, { \"filters\": filtersAsStrings(), \"removedFilter\": target.innerText } );\r\n                    setFocus(nextFocusableEl);\r\n                }, 50);\r\n            }\r\n        },\r\n        \r\n        handleOffCanvasApplyEvent = function () {\r\n            isApplyingState = true;\r\n            isOffCanvasState = false;\r\n            \r\n            // add label\r\n            if (filtersTemp.length > 1) {\r\n                resultsLabelDesktop.classList.remove(prefix + \"d-none\");\r\n            }\r\n            // if temp filter isn't in filters (create)\r\n            each(filtersTemp, function(filterTemp){\r\n                if (!arrayOfObjectsContains(filters, filterTemp.value.toLowerCase())) {\r\n                    var newFilter = filterTemp.cloneNode(true);\r\n                    newFilter.origin = filterTemp.origin;\r\n                    newFilter.offCanvasOrigin = filterTemp.offCanvasOrigin;\r\n                    newFilter.value = filterTemp.value;\r\n                    newFilter.addEventListener(\"click\", handleFilterItemClickEvent, false);\r\n                    horizontal ? filterResults.insertBefore(newFilter, clearAllItem) : filterResults.appendChild(newFilter);\r\n                    if(newFilter.origin){\r\n                        newFilter.origin.checked = true;\r\n                        getClosest(newFilter.origin, \"li\", true).setAttribute(\"aria-checked\", \"true\");\r\n                    }\r\n                }\r\n            });\r\n\r\n            // if filter is no longer in temp filters (delete)\r\n            each(filters.slice(), function(temp) {\r\n                if (!arrayOfObjectsContains(filtersTemp, temp.value.toLowerCase())) {\r\n                    var filterToRemove = altFind(filters, function(result) {\r\n                        return result.value === temp.value;\r\n                    });\r\n                    clearFilter(filterToRemove);\r\n                }\r\n            });\r\n            filters = filtersTemp.slice();\r\n            \r\n            // reset\r\n            isApplyingState = false;\r\n\r\n            if (filters.length > 0) {\r\n                resultsLabelDesktop.classList.remove(prefix + \"d-none\");\r\n                toggleClearAllButtons(true);\r\n            } else {\r\n                resultsLabelDesktop.classList.add(prefix + \"d-none\");\r\n                toggleClearAllButtons(false);\r\n            }\r\n\r\n            // update html filter count values\r\n            updateFiltersCount();\r\n            if (horizontal) {\r\n                each(dropdownObjects, function(dropdown) {\r\n                    dropdown.recountChecked();\r\n                });\r\n            } else {\r\n                updateVerticalDesktopAccordionCount();\r\n            }\r\n\r\n            mobileModal.hide();\r\n            uicoreCustomEvent(\"FilterCollection\", \"UpdateEvent\", element, { \"filters\": filtersAsStrings()} );\r\n        },\r\n\r\n        handleOffCanvasCancelEvent = function(){\r\n            //clear off canvas and reset to filters\r\n            handleOffCanvasClearAllEvent();\r\n            each(filters, function(filter){\r\n                if (filter.offCanvasOrigin) {\r\n                    filter.offCanvasOrigin.click();\r\n                } \r\n                else {\r\n                    createOffCanvasFilterItem(filter, filter.origin);\r\n                }\r\n            });\r\n            if (filters.length === 0) {\r\n                toggleClearAllButtons(false);\r\n            }\r\n\r\n            isOffCanvasState = false;\r\n        },\r\n\r\n        handleOffCanvasCheckboxClick = function(e){\r\n            var checkboxId = e.target.id.replace(\"OffCanvas\", \"\");\r\n            var desktopCheckbox = document.getElementById(checkboxId);\r\n            getClosest(e.target, \"li\", true).setAttribute(\"aria-checked\", e.target.checked);\r\n            if (!e.target.hasAttribute(\"disabled\") && !e.target.classList.contains(prefix+\"disabled\")) {\r\n                //create new off canvas filter\r\n                if(e.target.checked) {\r\n                    createOffCanvasFilterItem(e.target.name, desktopCheckbox);\r\n                    toggleClearAllButtons(true);\r\n                }\r\n                // remove off canvas filter\r\n                else {\r\n                    var checkboxFilter;\r\n                    var value = e.target.name.toLowerCase();\r\n                    checkboxFilter = filterOffCanvasResults.querySelector(\"[value=\\\"\" + value + \"\\\"]\");\r\n                    var currentFilter = altFind(filtersTemp, function(result) {\r\n                        var check = result.innerText.toLowerCase().replace(/\\s/g, \"\") == checkboxFilter.innerText.toLowerCase().replace(/\\s/g, \"\");\r\n                        return check;\r\n                    });\r\n                    // remove from temp array\r\n                    var index = filtersTemp.indexOf(currentFilter);\r\n                    filtersTemp.splice(index, 1);\r\n    \r\n                    if (checkboxFilter) {\r\n                        setTimeout(function() {\r\n                            filterOffCanvasResults.removeChild(checkboxFilter);\r\n                            setTimeout(function() {\r\n                                //if no more filters turn off Clear All Item\r\n                                if (self.numOfFilters(true) < 1) {\r\n                                    toggleClearAllButtons(false);\r\n                                }\r\n                            },10);\r\n                        }, 1);\r\n                    }\r\n                }\r\n                updateOffCanvasAccordionCount(e.target); //horizontal multi-selects don't have updated count at this point\r\n            }\r\n        },\r\n\r\n        handleOffCanvasClearAllClick = function () {\r\n            var focusableEls = getFocusableElements(filterOffCanvas);\r\n            // after hitting \"offcanvas\" clear all button set focus on the previous focusable element \r\n            if(focusableEls.indexOf(clearAllOffCanvas) > 0) {\r\n                focusableEls[focusableEls.indexOf(clearAllOffCanvas) - 1].focus();\r\n            }\r\n            handleOffCanvasClearAllEvent();\r\n        },\r\n\r\n        handleOffCanvasClearAllEvent = function(){\r\n            each(element.querySelectorAll(\".\" + prefix + \"modal-offcanvas input.\" + prefix + \"form-check-input\"), function(checkbox) {\r\n                checkbox.checked = false;\r\n                getClosest(checkbox, \"li\", true).setAttribute(\"aria-checked\", \"false\");\r\n                updateOffCanvasAccordionCount(checkbox);\r\n            });\r\n            each(element.querySelectorAll(\".\" + prefix + \"modal-offcanvas button.\" + prefix + \"filter-item\"), function(filter) {\r\n                filterOffCanvasResults.removeChild(filter);\r\n            });\r\n            filtersTemp = [];\r\n            toggleClearAllButtons(false);\r\n        },\r\n\r\n        handleOffCanvasFilterItemClickEvent = function(e){\r\n            var target = e.target.classList.contains(\".\" + prefix + \"filter-item\") ? e.target : getClosest(e.target, \".\" + prefix + \"filter-item\"),\r\n                currentFilter = altFind(filtersTemp, function(result) {\r\n                    return result.value.toLowerCase().replace(/\\s+/g, \"\") === target.innerText.toLowerCase().replace(/\\s+/g, \"\");\r\n                });\r\n            \r\n            // uncheck the corresponding checkbox\r\n            if (currentFilter.offCanvasOrigin) {\r\n                currentFilter.offCanvasOrigin.checked = false;\r\n                getClosest(currentFilter.offCanvasOrigin, \"li\", true).setAttribute(\"aria-checked\", \"false\");\r\n                updateOffCanvasAccordionCount(currentFilter.offCanvasOrigin);\r\n            }\r\n\r\n            // remove from temp array\r\n            var index = filtersTemp.indexOf(currentFilter);\r\n            filtersTemp.splice(index, 1);\r\n\r\n            //set focus on next element if it exists\r\n            target.nextElementSibling ? \r\n                target.nextElementSibling.focus() : \r\n                target.previousElementSibling && target.previousElementSibling.classList.contains(prefix + \"filter-item\") ?\r\n                    target.previousElementSibling.focus() :\r\n                    setFocus(getFocusableElements(filterOffCanvas)[0]);\r\n            // getFocusableElements(filterOffCanvas)[0].focus();\r\n            \r\n            // remove filter button from DOM\r\n            if (filterOffCanvasResults.contains(target)){\r\n                setTimeout(function() {\r\n                    filterOffCanvasResults.removeChild(target);\r\n                    setTimeout(function() {\r\n                        //if no more filters turn off Clear All Item\r\n                        if (self.numOfFilters(true) < 1) {\r\n                            toggleClearAllButtons(false);\r\n                        }\r\n                    },10);\r\n                }, 1);\r\n            }\r\n        },\r\n    \r\n        handleOffCanvasOpen = function() {\r\n            isOffCanvasState = true;\r\n            filtersTemp = filters.slice();\r\n        },\r\n\r\n        handleResizeSmall = function (e) {\r\n            //change vertical clear all button\r\n            if (!e.matches) {\r\n                //going from small to big\r\n                mobileModal.hide();\r\n                smallWindow = false;\r\n                if (!horizontal) {\r\n                    if (clearAllItem.classList.contains(\"dds__d-flex\")) {\r\n                        clearAllItem.classList.remove(\"dds__d-flex\");\r\n                        clearAllItem.classList.add(\"dds__d-none\");\r\n                        clearAllItem = element.querySelector(\".\"+prefix+\"filter-collector-accordion .\"+prefix+\"filter-btn-clear\");\r\n                        clearAllItem.classList.remove(\"dds__d-none\");\r\n                        clearAllItem.classList.add(\"dds__d-flex\");\r\n                    } else {\r\n                        clearAllItem = element.querySelector(\".\"+prefix+\"filter-collector-accordion .\"+prefix+\"filter-btn-clear\");\r\n                    }\r\n                    clearAllItem.addEventListener(\"click\", handleClearAllEvent, false);\r\n                    clearAllItem.addEventListener(\"touchstart\", handleClearAllEvent, false);\r\n                }\r\n            } else if (e.matches && !horizontal) {\r\n                smallWindow = true;\r\n                if (clearAllItem.classList.contains(\"dds__d-flex\")) {\r\n                    clearAllItem.classList.remove(\"dds__d-flex\");\r\n                    clearAllItem.classList.add(\"dds__d-none\");\r\n                    clearAllItem = element.querySelector(\".dds__filter-label-results .dds__filter-btn-clear\");\r\n                    clearAllItem.classList.remove(\"dds__d-none\");\r\n                    clearAllItem.classList.add(\"dds__d-flex\");\r\n                } else {\r\n                    clearAllItem = element.querySelector(\".dds__filter-label-results .dds__filter-btn-clear\");\r\n                }\r\n                clearAllItem.addEventListener(\"click\", handleClearAllEvent, false);\r\n                clearAllItem.addEventListener(\"touchstart\", handleClearAllEvent, false);\r\n            }\r\n            updateFiltersCount();\r\n        },\r\n\r\n        handleResizeMedium = function (e) {\r\n            var numOfDropdowns, rows;\r\n            if (e.matches) {\r\n                mediaIncrementforDropdowns = 3;\r\n                \r\n                rows = Math.max(Math.ceil((visibileIdx + 1) / 4), 2);\r\n                numOfDropdowns = rows * 3 - 2;\r\n                if (numOfDropdowns < dropdowns.length - 1) {\r\n                    showMoreDiv.classList.remove(prefix + \"d-none\");\r\n                }\r\n                visibileIdx = numOfDropdowns - 1;\r\n                toggleDropdown(visibileIdx);\r\n            } else {\r\n                mediaIncrementforDropdowns = 4;\r\n                if (visibileIdx === dropdowns.length) {\r\n                    return;\r\n                }\r\n                rows = Math.max(Math.ceil((visibileIdx + 1) / 3), 2);\r\n                numOfDropdowns = rows * 4 - 2;\r\n                if (numOfDropdowns > dropdowns.length - 1) {\r\n                    numOfDropdowns = dropdowns.length;\r\n                    showMoreDiv.classList.add(prefix + \"d-none\");\r\n                }\r\n                visibileIdx = numOfDropdowns - 1;\r\n                toggleDropdown(visibileIdx);\r\n            }\r\n        },\r\n\r\n        handleShowMore = function () {\r\n            visibileIdx = Math.min(visibileIdx + mediaIncrementforDropdowns, dropdowns.length - 1);\r\n            if (visibileIdx === dropdowns.length - 1) {\r\n                showMoreDiv.classList.add(prefix + \"d-none\");\r\n            }\r\n            toggleDropdown(visibileIdx);\r\n            setTimeout(function() {\r\n                setFocus(dropdowns[visibileIdx].querySelector(\".\"+prefix+\"btn-secondary\"));\r\n            },1);\r\n        },\r\n\r\n        arrayOfObjectsContains = function (arr, value) {\r\n            var results = arr.filter(function(obj) {\r\n                return obj.value === value;\r\n            });\r\n            return results.length > 0;\r\n        },\r\n\r\n        clearMultiSelects = function () {\r\n            each(collectionInputs, function(input) {\r\n                if (input.querySelector(\".\" + prefix + \"checked-presentation\")) {\r\n                    input.firstElementChild.removeChild(input.querySelector(\".\" + prefix + \"checked-presentation\"));\r\n                }\r\n\r\n                var typeofInput = input[\"getAttribute\"](\"data-filter\");\r\n                if (typeofInput == prefix + \"multi-select\") {\r\n                    var ul = input[\"getAttribute\"](\"data-target\");\r\n                    each(element.querySelector(ul).children, function(option) {\r\n                        option.setAttribute(\"aria-checked\", false);\r\n                        option.querySelector(\"input\").checked = false;\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        clearFilter = function(filter) {\r\n            if (filter === null || filter === undefined) {\r\n                return;\r\n            }\r\n\r\n            // finder filter, if found no match in the filters, return\r\n            var targetValue = filter.innerText,\r\n                results = filters.filter(function(obj) {\r\n                    targetValue = targetValue.toLowerCase().replace(/\\n/g, \"\");\r\n                    return obj.value === targetValue;\r\n                });\r\n\r\n            if (results.length < 1) {\r\n                return;\r\n            }\r\n            \r\n            // if it's a checkbox, uncheck\r\n            var deselectTarget = results[0];            \r\n            if(deselectTarget.origin.tagName === \"INPUT\" && deselectTarget.origin.checked === true){\r\n                deselectTarget.origin.checked = false;\r\n                getClosest(deselectTarget.origin, \"li\", true).setAttribute(\"aria-checked\", \"false\");\r\n            }\r\n            if(deselectTarget.offCanvasOrigin && deselectTarget.offCanvasOrigin.tagName === \"INPUT\" && deselectTarget.offCanvasOrigin.checked === true){\r\n                deselectTarget.offCanvasOrigin.checked = false;\r\n                getClosest(deselectTarget.offCanvasOrigin, \"li\", true).setAttribute(\"aria-checked\", \"false\");\r\n                updateOffCanvasAccordionCount(deselectTarget.offCanvasOrigin);\r\n            }\r\n            if (!horizontal) {\r\n                updateVerticalDesktopAccordionCount(deselectTarget.origin);\r\n            }\r\n\r\n            var value = filter.value.toLowerCase();\r\n            var index;\r\n\r\n            if (filterResults.contains(filter)) {\r\n                var filterOffCanvas;        \r\n\r\n                filterResults.removeChild(filter);\r\n                filterOffCanvas = filterOffCanvasResults.querySelector(\"[value=\\\"\" + value + \"\\\"]\");\r\n                if (filterOffCanvasResults.contains(filterOffCanvas)) {\r\n                    filterOffCanvasResults.removeChild(filterOffCanvas);\r\n                    \r\n                    //remove from filter temp\r\n                    var offCanvasFilterObj = altFind(filtersTemp, function(result) {\r\n                        return result.value === targetValue.toLowerCase().replace(/\\n/g, \"\");\r\n                    });\r\n                    index = filtersTemp.indexOf(offCanvasFilterObj);\r\n                    filtersTemp.splice(index, 1);\r\n                }\r\n            }\r\n\r\n            //if selecting an offcanvas filter\r\n            else if (filterOffCanvasResults.contains(filter) || filterResults.querySelector(\"#\" +filter.id ) != null){\r\n                // filterOffCanvasResults.removeChild(filter);\r\n                var filterDesktop = filterResults.querySelector(\"#\" +filter.id );\r\n                filterResults.removeChild(filterDesktop);\r\n            }\r\n            \r\n            index = filters.indexOf(results[0]);\r\n            filters.splice(index, 1);\r\n            if (!horizontal && \r\n                (element.getBoundingClientRect().y && element.getBoundingClientRect().y< 0) \r\n                    || (element.getBoundingClientRect().top && element.getBoundingClientRect().top < 0 )) { //Edge FF use top, not y\r\n                element.scrollIntoView({behavior: \"smooth\"});\r\n            }\r\n            if (filters.length === 0) {\r\n                toggleClearAllButtons(false);\r\n            }\r\n            // reset text (count) values in dropdowns\r\n            each(dropdownObjects, function(dropdown) {\r\n                dropdown.recountChecked();\r\n            });\r\n\r\n        },\r\n\r\n        createShowMoreButton = function(){\r\n            showMoreDiv = createElement(\"div\", {\r\n                class: prefix + \"col-xs-12 \" + prefix + \"col-sm-6 \" + prefix + \"col-md-4 \" + prefix + \"col-lg-3\",\r\n            });\r\n            var showMore = createElement(\"button\", {\r\n                class: prefix + \"filter-btn-show \" + prefix + \"btn \" + prefix + \"btn-secondary \" + prefix + \"d-flex \" + prefix + \"text-truncate\",\r\n                id: \"showMorefilters\",\r\n                html: \"Show More Filters\"\r\n            });\r\n            showMore.addEventListener(\"click\", handleShowMore, false);\r\n            showMoreDiv.appendChild(showMore);\r\n            collectionInputsContainer.appendChild(showMoreDiv);\r\n        },\r\n\r\n        createOffCanvasFilterItem = function (filterItem, origin) {\r\n            if (filterAlreadyExists(filterItem.value ? filterItem.value : filterItem, true)) {\r\n                return;\r\n            }\r\n\r\n            var filterOffCanvasItem;\r\n            var isDigit = false;\r\n            if (origin === null || origin === undefined) {\r\n                origin = \"\";\r\n            }\r\n            if (typeof filterItem === \"object\") {\r\n                // it's an object so clone it\r\n                filterOffCanvasItem = filterItem.cloneNode(true);\r\n            } else {\r\n                // id's can't have a digit as first number\r\n                if (filterItem[0].match(/\\d/)){\r\n                    filterItem = digit.concat(filterItem);\r\n                    isDigit = true;\r\n                }\r\n                filterItem = filterItem.replace(/\\s+/g,\" \").trim();\r\n                // need to create an object\r\n                filterOffCanvasItem = createFilter(filterItem, true, isDigit);\r\n            }           \r\n            if (!isApplyingState) {\r\n                filterOffCanvasItem.addEventListener(\"click\", handleOffCanvasFilterItemClickEvent, false);\r\n                filterOffCanvasResults.appendChild(filterOffCanvasItem); // DOM Add New Filter to OffCanvas\r\n            }\r\n            var filterValue = filterItem.value ? filterItem.value : filterItem.replace(/^digit/, \"\") ;\r\n            if (isOffCanvasState){\r\n                var offCanvasOriginId = origin.id + \"OffCanvas\";\r\n                var offCanvasOrigin = document.getElementById(offCanvasOriginId);\r\n                filterOffCanvasItem.value = origin.name ? origin.name.toLowerCase() : filterValue.toLowerCase();\r\n                filterOffCanvasItem.origin = origin;\r\n                filterOffCanvasItem.offCanvasOrigin = offCanvasOrigin;\r\n                filtersTemp.push(filterOffCanvasItem);\r\n            }\r\n\r\n            if (clearAllOffCanvas.classList.contains(prefix + \"d-none\")) {\r\n                toggleClearAllButtons(true);\r\n            }\r\n\r\n        },\r\n\r\n        createDesktopFilterItem = function (filter, origin) {\r\n            var isDigit = false;\r\n            if (origin === null || origin === undefined) {\r\n                origin = \"\";\r\n            }\r\n            // id's can't have a digit as first number\r\n            if (filter[0].match(/\\d/)){\r\n                filter = digit.concat(filter);\r\n                isDigit = true;\r\n            }\r\n            filter = filter.replace(/\\s+/g,\" \").trim();\r\n \r\n            if (filterAlreadyExists(filter, false)) {\r\n                return;\r\n            }\r\n\r\n            if (filters.length <= 0) {\r\n                resultsLabelDesktop.classList.remove(prefix + \"d-none\");\r\n            }\r\n    \r\n            if (clearAllItem.classList.contains(prefix + \"d-none\")) {\r\n                toggleClearAllButtons(true);\r\n            }\r\n            \r\n            var filterItem = createFilter(filter, true, isDigit);\r\n            var offCanvasOriginId = origin.id + \"OffCanvas\";\r\n            var offCanvasOrigin = document.getElementById(offCanvasOriginId);\r\n\r\n            filterItem.origin = origin;\r\n            filterItem.offCanvasOrigin = offCanvasOrigin,\r\n            filterItem.value = origin.name ? origin.name.toLowerCase() : filter.replace(/^digit/, \"\").toLowerCase();\r\n            filterItem.addEventListener(\"click\", handleFilterItemClickEvent, false);\r\n\r\n            if(!isOffCanvasState){\r\n                filters.push(filterItem);\r\n                if (offCanvasOrigin) {\r\n                    offCanvasOrigin.checked = true; // Keep offCanvas checkbox in sync\r\n                    getClosest(offCanvasOrigin, \"li\", true).setAttribute(\"aria-checked\", \"true\");\r\n                    updateOffCanvasAccordionCount(offCanvasOrigin);\r\n                }\r\n                if (horizontal) {\r\n                    filterResults.insertBefore(filterItem, clearAllItem);\r\n                } else {\r\n                    filterResults.appendChild(filterItem); // DOM Add new filter to Desktop\r\n                    updateVerticalDesktopAccordionCount(origin);\r\n                }\r\n                if (!isApplyingState){\r\n                    createOffCanvasFilterItem(filterItem, filterItem.origin);\r\n                }\r\n                updateFiltersCount();\r\n                uicoreCustomEvent(\"FilterCollection\", \"CreateEvent\", filterItem, { \"filters\": filtersAsStrings(), \"addedFilter\": filterItem.innerText } );\r\n            }\r\n        },\r\n\r\n        // creates the HTML filterItem button\r\n        createFilter = function (filter, useX, isDigit) {\r\n            var filterText = filter;\r\n            if(isDigit){\r\n                filterText = filter.replace(/^digit/, \"\");\r\n            }\r\n            var filterId = filter.replace(/([^A-Za-z0-9._:/-])/g,\"\"); // =need to delete instances of special characters\r\n            var filterItem = createElement(\"button\", {\r\n                class: prefix + \"filter-item \" + prefix + \"btn \" + prefix +\"btn-secondary \" + prefix + \"btn-sm \" + prefix + \"text-truncate\",\r\n                id: filterId.toLowerCase().replace(/\\s/g, \"\").trim()\r\n            });\r\n\r\n            var filterLabel = createElement(\"label\", {\r\n                html: filterText,\r\n                class: prefix + \"text-truncate\"\r\n            });\r\n\r\n            filterItem.appendChild(filterLabel);\r\n\r\n            // create filterItem SVG\r\n            if(useX) {\r\n                var filterIcon = renderSvg([{name:\"close-x\", show:true}]);\r\n                classAdd(filterIcon, prefix + \"svg-close-x\");\r\n                classAdd(filterIcon, prefix + \"align-self-center\");\r\n                classAdd(filterIcon, prefix + \"m1-1\");\r\n                filterIcon.setAttribute(\"tabindex\", \"-1\");\r\n                filterIcon.setAttribute(\"focusable\", \"false\");\r\n                filterIcon.setAttribute(\"aria-label\", \"filter-close\");\r\n        \r\n                // put everything together\r\n                filterItem.appendChild(filterIcon);\r\n            } \r\n            return filterItem;            \r\n        },\r\n                \r\n        filterAlreadyExists = function(filter, isOffCanvasFilter) {\r\n            var whichFilters = isOffCanvasFilter ? filtersTemp : filters;\r\n            var whichParent = isOffCanvasFilter ? filterOffCanvas : element;\r\n            \r\n            if (filter === null || filter === undefined || filter == \"\") {\r\n                console.warn(\"Not a valid filter tag\");\r\n                return true;\r\n            }\r\n            if(arrayOfObjectsContains(whichFilters, filter.toLowerCase())){\r\n                \r\n                each(whichParent.querySelectorAll(\".dds__filter-item\"), function(htmlFilter) {\r\n                    if (htmlFilter.value.toLowerCase() == filter.toLowerCase()){\r\n                        htmlFilter.classList.add(prefix + \"shakey\");\r\n                        \r\n                        setTimeout(function(){\r\n                            htmlFilter.classList.remove(prefix + \"shakey\");\r\n                        }, getAnimationDurationFromElement(htmlFilter));\r\n                    }\r\n                });\r\n                console.warn(\"This filter has already been added\");\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        updateOffCanvasAccordionCount = function(origin){\r\n            var accordionParent = getClosest(origin, \".\" + prefix + \"collapse\").id;\r\n            var accordionBtn = element.querySelector(\"[data-target='#\"+accordionParent+\"']\");//[data-target='#\" + activeCollapse.id + \"']\"\r\n            var accordionBody = getClosest(origin, \".\" + prefix + \"accordion-card-body\");\r\n            var itemsChecked = accordionBody.querySelectorAll(\".\" + prefix + \"form-check-input:checked\").length;\r\n\r\n            var displayTxt;\r\n            if (itemsChecked > 0) {\r\n                displayTxt = \"(\" + itemsChecked +\")\";\r\n            } else {\r\n                displayTxt = \" \";\r\n            }\r\n\r\n            var checkedCounter = accordionBtn.querySelector(\".\" + prefix + \"checked-presentation\");\r\n            if (checkedCounter != null) {\r\n                checkedCounter.innerHTML = displayTxt;\r\n                // currentText = displayTxt;\r\n            } else {\r\n                checkedCounter = createElement(\"span\", {\r\n                    class: prefix + \"checked-presentation \" + prefix + \"ml-1\",\r\n                    html: displayTxt\r\n                });\r\n                accordionBtn.appendChild(checkedCounter);\r\n            }\r\n        },\r\n\r\n        updateVerticalDesktopAccordionCount = function(origin) {\r\n            if (origin) {\r\n                var accordionParent = getClosest(origin, \".\" + prefix + \"collapse\").id;\r\n                var accordionBtn = element.querySelector(\"[data-target='#\"+accordionParent+\"']\");//[data-target='#\" + activeCollapse.id + \"']\"\r\n                var accordionBody = getClosest(origin, \".\" + prefix + \"secondary-accordion\");\r\n                var itemsChecked = accordionBody.querySelectorAll(\".\" + prefix + \"form-check-input:checked\").length;\r\n                \r\n                var displayTxt;\r\n                if (itemsChecked > 0) {\r\n                    displayTxt = \"(\" + itemsChecked +\")\";\r\n                } else {\r\n                    displayTxt = \" \";\r\n                }\r\n    \r\n                var checkedCounter = accordionBtn.querySelector(\".\" + prefix + \"checked-presentation\");\r\n                if (checkedCounter != null) {\r\n                    checkedCounter.innerHTML = displayTxt;\r\n                } else {\r\n                    checkedCounter = createElement(\"span\", {\r\n                        class: prefix + \"checked-presentation \" + prefix + \"ml-1 \" + prefix + \"font-weight-bold\",\r\n                        html: displayTxt\r\n                    });\r\n                    accordionBtn.insertBefore(checkedCounter, accordionBtn.querySelector(\".\" + prefix + \"arrow-tri-solid-right\"));\r\n                }\r\n            } else {\r\n                accordionObjects.forEach(function(accordion) {\r\n                    var itemsChecked = accordion.parentNode.querySelectorAll(\".\" + prefix + \"form-check-input:checked\").length;\r\n                    \r\n                    var displayTxt;\r\n                    if (itemsChecked > 0) {\r\n                        displayTxt = \"(\" + itemsChecked +\")\";\r\n                    } else {\r\n                        displayTxt = \" \";\r\n                    }\r\n\r\n                    var checkedCounter = accordion.querySelector(\".\" + prefix + \"checked-presentation\");\r\n                    if (checkedCounter != null) {\r\n                        checkedCounter.innerHTML = displayTxt;\r\n                    } else {\r\n                        checkedCounter = createElement(\"span\", {\r\n                            class: prefix + \"checked-presentation \" + prefix + \"ml-1\",\r\n                            html: displayTxt\r\n                        });\r\n                        accordion.querySelector(\"span\").appendChild(checkedCounter);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        updateFiltersCount = function() {\r\n            var itemsChecked = filters.length;\r\n            var filteringMobileBtn = element.querySelectorAll(\".\" + prefix + \"filter-btn-mobile\")[0];\r\n\r\n            var displayTxt;\r\n            if (itemsChecked > 0) {\r\n                displayTxt = \"(\" + itemsChecked +\")\";\r\n            } else {\r\n                displayTxt = \" \";\r\n            }\r\n            var checkedCounter = filteringMobileBtn.querySelector(\".\" + prefix + \"checked-presentation\");\r\n            if (checkedCounter != null) {\r\n                checkedCounter.innerHTML = displayTxt;\r\n            } else {\r\n                checkedCounter = createElement(\"span\", {\r\n                    class: prefix + \"checked-presentation \" + prefix + \"ml-1\",\r\n                    html: displayTxt\r\n                });\r\n                filteringMobileBtn.appendChild(checkedCounter);\r\n            }\r\n        },\r\n\r\n        filtersAsStrings = function() {\r\n            var stringArray = [];\r\n            each(filters, function(filter) {\r\n                stringArray.push(filter.value);\r\n            });\r\n            return stringArray;\r\n        },\r\n\r\n        toggleClearAllButtons = function (onState) {\r\n            if (smallWindow && !horizontal) {\r\n                clearAllItem = element.querySelector(\".\"+prefix+\"filter-label-results .\"+prefix+\"filter-btn-clear\");\r\n            }\r\n            if (onState == true && clearAllItem.classList.contains(prefix + \"d-none\")) {\r\n                clearAllOffCanvas.classList.remove(prefix + \"d-none\");\r\n                clearAllItem.classList.add(prefix + \"d-flex\");\r\n                clearAllItem.classList.remove(prefix + \"d-none\");\r\n                clearAllItem.addEventListener(\"click\", handleClearAllEvent, false);\r\n                clearAllItem.addEventListener(\"touchstart\", handleClearAllEvent, false);\r\n            } else if (onState == false & !clearAllItem.classList.contains(prefix + \"d-none\")) {\r\n                clearAllOffCanvas.classList.add(prefix + \"d-none\");\r\n                clearAllItem.classList.remove(prefix + \"d-flex\");\r\n                clearAllItem.classList.add(prefix + \"d-none\");\r\n                clearAllItem.removeEventListener(\"click\", handleClearAllEvent, false);\r\n                clearAllItem.removeEventListener(\"touchstart\", handleClearAllEvent, false);\r\n            }\r\n        },\r\n\r\n        toggleDropdown = function (index) {\r\n            var i;\r\n            if (dropdowns[index].classList.contains(prefix + \"d-none\")) {\r\n                for (i = 0; i <= index; i++) {\r\n                    dropdowns[i].classList.remove(prefix + \"d-none\");\r\n                }\r\n            }\r\n            else {\r\n                for (i = index + 1; i < dropdowns.length; i++) {\r\n                    dropdowns[i].classList.add(prefix + \"d-none\");\r\n                }\r\n            }\r\n        };\r\n\r\n    this.numOfFilters = function(OffCanvas) {\r\n        if (OffCanvas) {\r\n            return filterOffCanvasResults.querySelectorAll(\".\" + prefix + \"filter-item\").length;\r\n        }\r\n    };\r\n    \r\n    this.updateResultsLabel = function(resultCount) {\r\n        if (!resultCount || typeof resultCount !== \"string\" ) {\r\n            console.warn(\"This is not a valid input for updateResultsLabel.\");\r\n            return;\r\n        }\r\n        element.querySelector(\".\" + prefix + \"resultCount\").innerText = resultCount;\r\n    };\r\n\r\n    // init\r\n    if (!(stringFilterCollection in element)) {\r\n        if (element.classList.contains(prefix + \"filter-collection-vertical\")) {\r\n            horizontal = false;\r\n        }\r\n        if (horizontal) {\r\n            clearAllItem = element.querySelector(\".\"+prefix+\"filter-collection-wrapper .\"+prefix+\"filter-btn-clear\");\r\n        } else if (smallMediaSize.matches) {\r\n            clearAllItem = element.querySelector(\".\"+prefix+\"filter-label-results .\"+prefix+\"filter-btn-clear\");\r\n        } else {\r\n            clearAllItem = element.querySelector(\".\"+prefix+\"filter-collector-accordion .\"+prefix+\"filter-btn-clear\");\r\n        }\r\n    \r\n        collectionInputsContainer = element.querySelector(\".\" + prefix + \"filter-input-container\");\r\n        dropdowns = collectionInputsContainer.querySelectorAll(\"div.\" + prefix + \"btn-dropdown\");\r\n        collectionInputs = element.querySelectorAll(\"[data-filter]\");\r\n        targetCollection = element[\"getAttribute\"](\"data-target\");\r\n        filterCollection = element.querySelector(targetCollection);\r\n\r\n        if (filterCollection == null) {\r\n            console.error(\"Found no filter collection to output results to.\");\r\n            return false;\r\n        }\r\n        if (collectionInputs == null) {\r\n            console.error(\"Found no data-filter element(s) available to use\");\r\n            return false;\r\n        }\r\n\r\n        //off canvas inits\r\n        if (element.querySelector(\".\" + prefix + \"filter-btn-mobile\")) {\r\n            var modalBtn = element.querySelector(\".\" + prefix + \"filter-btn-mobile\");\r\n            mobileModal = new Modal(modalBtn);\r\n            modalBtn.addEventListener(\"click\", handleOffCanvasOpen);\r\n            filterOffCanvas = element.querySelector(\".\" + prefix + \"modal-offcanvas\");\r\n\r\n            if (element.querySelectorAll(\"[data-toggle='\" + prefix + \"collapse\" + \"']\")) {\r\n                each(element.querySelectorAll(\"[data-toggle='\" + prefix + \"collapse\" + \"']\"), function(accordion) {\r\n                    new Collapse(accordion);\r\n                });\r\n            }\r\n            if (filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"btn-primary\")) {\r\n                var applyBtn = filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"btn-primary\");\r\n                applyBtn.addEventListener(\"click\", handleOffCanvasApplyEvent);\r\n            }\r\n            if (filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"dds__btn-secondary-primary\")) {\r\n                var clearAllBtn = filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"dds__btn-secondary\");\r\n                clearAllBtn.addEventListener(\"click\", handleClearAllEvent);\r\n            }\r\n            if (filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"btn-secondary\")) {\r\n                clearAllOffCanvas = filterOffCanvas.querySelector(\".\" + prefix + \"text-right .\" + prefix + \"btn-secondary\");\r\n                clearAllOffCanvas.addEventListener(\"click\", handleOffCanvasClearAllClick, false);\r\n            }\r\n            if (filterOffCanvas.querySelector(\"[data-dismiss]\")) {\r\n                var backOffCanvas = filterOffCanvas.querySelector(\"[data-dismiss]\");\r\n                backOffCanvas.addEventListener(\"click\", handleOffCanvasCancelEvent, false);\r\n            }\r\n            each(filterOffCanvas.querySelectorAll(\".\" + prefix + \"form-check-input\"), function(checkbox){\r\n                checkbox.addEventListener(\"click\", handleOffCanvasCheckboxClick, false);\r\n            });\r\n        }\r\n        if (horizontal) {\r\n            if (!mediumMediaSize.matches) {\r\n                if (collectionInputs.length > 8){\r\n                    visibileIdx = 5;\r\n                    mediaIncrementforDropdowns = 4;\r\n                    for (var i = visibileIdx + 1; i < dropdowns.length; i++ ) {\r\n                        dropdowns[i].classList.add(prefix + \"d-none\");\r\n                    }\r\n                    createShowMoreButton();\r\n                }\r\n            }\r\n            else if (mediumMediaSize.matches) {\r\n                if (collectionInputs.length > 6) {\r\n                    visibileIdx = 3;\r\n                    mediaIncrementforDropdowns = 3;\r\n                    for (i = visibileIdx + 1; i < dropdowns.length; i++ ) {\r\n                        dropdowns[i].classList.add(prefix + \"d-none\");\r\n                    }\r\n                    createShowMoreButton();\r\n                }\r\n            }\r\n        }\r\n\r\n        each(collectionInputs, function(input) {\r\n            var typeofInput = input[\"getAttribute\"](\"data-filter\");\r\n            if (typeofInput == prefix + \"keyword-filter\") {\r\n                keywordFilter = input;\r\n                new FilterKeyword(keywordFilter);\r\n                keywordFilter.addEventListener(\"uicFilterKeywordCreateEvent\", handleAddEvent, false);\r\n            }\r\n            else if (typeofInput == prefix + \"multi-select\") {\r\n                var multiSelect = input;\r\n                dropdownObjects.push(new Dropdown(input));\r\n                multiSelect.addEventListener(\"uicDropdownAddEvent\", handleDesktopCheckboxClick, false);\r\n                multiSelect.addEventListener(\"uicDropdownRemoveEvent\", handleDesktopCheckboxClick, false);\r\n            } else if (typeofInput == prefix + \"secondary-accordion\") {\r\n                accordionObjects.push(input);\r\n                var checkboxes = input.parentNode.querySelectorAll(\".\" + prefix + \"form-check\");\r\n                each(checkboxes, function(checkbox) {\r\n                    checkbox.addEventListener(\"click\", handleDesktopCheckboxClick, true);\r\n                });\r\n            }\r\n        });\r\n        \r\n        filterResults = filterCollection.querySelector(\"div.\" + prefix + \"filter-results\");\r\n        filterOffCanvasResults = element.querySelector(\"div.\" + prefix + \"modal-offcanvas div.\" + prefix + \"filter-results\");\r\n        resultsLabelDesktop = element.querySelector(\"label.\" + prefix + \"filter-label-results\");\r\n\r\n        if (horizontal) { mediumMediaSize.addListener(handleResizeMedium);}\r\n        smallMediaSize.addListener(handleResizeSmall);\r\n        \r\n    }\r\n\r\n    element[stringFilterCollection] = self;\r\n}\r\n","import { prefix, DOC, getElementsByClassName, each, jsonOptionsInit } from \"./utilities.js\";\r\nimport InputMask from \"./helpers/inputMask.js\";\r\n\r\nexport default function Forms(element, options) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    \r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.validate = element.dataset.validate ? element.dataset.validate  === \"true\" ? true: false : options.validate ? options.validate : true;\r\n\r\n    var self = this,\r\n        stringForm = \"Form\",\r\n        togglePassword = function (e) {\r\n            var passwordState = DOC.getElementById(e.target.dataset[\"target\"]);\r\n            if (passwordState) {\r\n                if (passwordState.type === \"password\") {\r\n                    passwordState.type = \"text\";\r\n                } else {\r\n                    passwordState.type = \"password\";\r\n                }\r\n            } else {\r\n                console.warn(\"The target password field does not exist.\");\r\n            }\r\n        },\r\n        submitHandler = function(event) {\r\n            var formValidationErrorSuffix = \"Feedback\";\r\n            if (element.checkValidity() === false) {\r\n                each(element, function(el) {\r\n                    if(el.tagName == \"INPUT\"){\r\n                        var errorMsg = element.querySelector(\"#\"+ el.getAttribute(\"id\")+formValidationErrorSuffix);\r\n                        setTimeout(function(){\r\n                            if (!el.validity.valid) {\r\n                                //if error message has not been turned on yet\r\n                                if(errorMsg && !(getComputedStyle(errorMsg)[\"display\"] == \"block\")){\r\n                                    errorMsg.style.display = \"block\";\r\n                                }\r\n                                el.setAttribute(\"aria-invalid\", \"true\");\r\n                                el.setAttribute(\r\n                                    \"aria-describedby\",\r\n                                    el.getAttribute(\"id\") + formValidationErrorSuffix\r\n                                );\r\n                            } else {\r\n                                //if error message has not been turned off yet\r\n                                if(errorMsg && (getComputedStyle(errorMsg)[\"display\"] == \"block\")){\r\n                                    errorMsg.style.display = \"none\";\r\n                                } \r\n                                el.setAttribute(\"aria-invalid\", \"false\");\r\n                                el.setAttribute(\"aria-describedby\", \"\");\r\n                            }\r\n                        }, 10);\r\n                    }\r\n                });\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n\r\n            element.classList.add(\"dds__was-validated\");\r\n        };\r\n    \r\n    //init\r\n    if (!(stringForm in element)) {\r\n        if (element.querySelectorAll(\"input\")) {\r\n            each(element.querySelectorAll(\"input\"), function(child) {\r\n                if (child.classList.contains(prefix + \"input-masked\")) {\r\n                    new InputMask(child);\r\n                }\r\n            });\r\n        }\r\n        if  (!element.hasAttribute(\"novalidate\")) {\r\n            element.setAttribute(\"novalidate\", \"\");\r\n        } \r\n        if (options.validate) {\r\n            element.addEventListener(\"submit\", submitHandler);\r\n        }\r\n\r\n        var checkboxValidators = getElementsByClassName(element, prefix + \"form-check-input\");\r\n        each(checkboxValidators, function(checkboxValidator) {\r\n            if (checkboxValidator && !!checkboxValidator.dataset[\"target\"]) {\r\n                checkboxValidator.addEventListener(\"click\", togglePassword);\r\n            }\r\n        });\r\n    }\r\n    element[stringForm] = self;\r\n}\r\n","import {each, createElement} from \"./utilities.js\";\r\n\r\nexport default function LinkPicker(element) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // constants, event targets, strings\r\n    var self = this,\r\n        stringLinkPicker = \"LinkPicker\",\r\n        interestName = \"Interest\",\r\n        touseName = \"ToUse\",\r\n        interest = element.querySelector(\"select[name=\\\"\"+stringLinkPicker+\"_\"+interestName+\"\\\"]\"),\r\n        touse = element.querySelector(\"select[name=\\\"\"+stringLinkPicker+\"_\"+touseName+\"\\\"]\"),\r\n        interestData = JSON.parse(interest.getAttribute(\"data-select\")),\r\n        touseData = JSON.parse(touse.getAttribute(\"data-select\")),\r\n        findName = \"Find\",\r\n        find = element.querySelector(\"button[name=\\\"\"+stringLinkPicker+\"_\"+findName+\"\\\"]\"),\r\n        // handlers\r\n        onChangeHandler = function(e) {\r\n            var eventTarget = e[\"target\"];\r\n            if(eventTarget === interest) {\r\n                if(interest.selectedIndex === 0) {\r\n                    touse.disabled = true;\r\n                    touse.classList.add(\"dds__disabled\"); //disabled attribute doesn't work on FF\r\n                } else {\r\n                    touse.disabled = false;\r\n                    touse.classList.remove(\"dds__disabled\");\r\n                }\r\n                var obj = touseData[ touseName ][ interest.value ];\r\n                removeAllOptions(touse, true);\r\n                appendDataToSelect(touse, obj);\r\n                find.classList.add(\"dds__disabled\");\r\n            } else {\r\n                if(touse.selectedIndex === 0)\r\n                {\r\n                    find.disabled = true;\r\n                    find.classList.add(\"dds__disabled\");\r\n                }\r\n                else{\r\n                    find.disabled = false;\r\n                    find.classList.remove(\"dds__disabled\");\r\n                }\r\n            }\r\n        },\r\n        clickHandler = function() {\r\n            var link = touse.options[touse.selectedIndex].value;\r\n            find[\"setAttribute\"](\"href\",link);\r\n            find.click();\r\n        },\r\n        removeAllOptions = function(sel, removeGrp) {\r\n            var len, groups, par;\r\n            if (removeGrp) {\r\n                groups = sel.getElementsByTagName(\"optgroup\");\r\n                len = groups.length;\r\n                for (var i=len; i; i--) {\r\n                    sel.removeChild( groups[i-1] );\r\n                }\r\n            }\r\n\r\n            len = sel.options.length;\r\n            for (i=len; i; i--) {\r\n                par = sel.options[i-1].parentNode;\r\n                par.removeChild( sel.options[i-1] );\r\n            }\r\n        },\r\n        appendDataToSelect = function(sel, obj) {\r\n            var f = document.createDocumentFragment();\r\n            var labels = [], group, opts;\r\n\r\n            function addOptions(obj) {\r\n                var f = document.createDocumentFragment();\r\n                var o;\r\n\r\n                for (var i=0, len=obj.text.length; i<len; i++) {\r\n                    o = createElement(\"option\");\r\n                    o.appendChild( document.createTextNode( obj.text[i] ) );\r\n\r\n                    if ( obj.value ) {\r\n                        o.value = obj.value[i];\r\n                    }\r\n\r\n                    f.appendChild(o);\r\n                }\r\n                return f;\r\n            }\r\n\r\n            if ( obj.text ) {\r\n                opts = addOptions(obj);\r\n                f.appendChild(opts);\r\n            } else {\r\n                for ( var prop in obj ) {\r\n                    if ( Object.prototype.hasOwnProperty.call(obj, prop) ) {\r\n                        labels.push(prop);\r\n                    }\r\n                }\r\n                \r\n                each (labels, function(label) {\r\n                    group = createElement(\"optgroup\", {\r\n                        label: label\r\n                    });\r\n                    f.appendChild(group);\r\n                    opts = addOptions(obj[ label ] );\r\n                    group.appendChild(opts);\r\n                });\r\n            }\r\n            sel.appendChild(f);\r\n        };\r\n\r\n\r\n    // init\r\n    if (!(stringLinkPicker in element)) {\r\n        appendDataToSelect(interest, interestData);\r\n        interest.selectedIndex = 0;\r\n        interest.addEventListener(\"change\", onChangeHandler, false);\r\n        touse.addEventListener(\"change\", onChangeHandler, false);\r\n        find.addEventListener(\"click\", clickHandler, false);\r\n        var data = touseData[ touseName ][ interest.value ];\r\n        appendDataToSelect(touse, data);\r\n    }\r\n\r\n    element[stringLinkPicker] = self;\r\n}\r\n","import {prefix, DOC, getClosest, each, getFullScreenOverlay, isSafari, isIPhone, isIOS, uicoreCustomEvent, setFocus, getFocusableElements, isIE} from \"./utilities.js\";\r\nimport Collapse from \"./collapse.js\";\r\nimport Dropdown from \"./dropdown.js\";\r\n\r\nexport default function Masthead(element) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var self = this,\r\n        stringMasthead = \"Masthead\",\r\n        bottomMenu = element.querySelector(\".\" + prefix + \"msthd-bottom\"),\r\n        mouseHover = [\"mouseenter\", \"mouseleave\"],\r\n        activeContainerId,\r\n        offCanvasMenuBtn,\r\n        fullScreenOverlay,\r\n        overlay,\r\n        signInText = element.querySelector(\"[data-target=msthd-signin-ctnr] .\"+prefix+\"msthd-label\") ? element.querySelector(\"[data-target=msthd-signin-ctnr] .\"+prefix+\"msthd-label\").innerHTML : \"Sign In\",\r\n        mediaSize = window.matchMedia(\"(max-width: 991.98px)\"),\r\n        // validate with Search Story\r\n        // searchClass = \".\" + prefix + \"msthd-search\",\r\n        // searchCtnrClass = \".\" + prefix + \"msthd-search-ctnr\",\r\n        // search = element.querySelector(searchClass),\r\n        // searchCtnr = element.querySelector(searchCtnrClass),\r\n        // searchIconCtnr = element.querySelector(\"div[data-toggle='dds__msthd-search']\"),\r\n        ////////////////////////////\r\n        // handlers\r\n        handleMenuItemEvent = function(e) {\r\n            e.preventDefault();\r\n            var target = e.target.tagName === \"LI\" ? e.target : getClosest(e.target, \"LI\", false);\r\n            // openOverLay();\r\n            updateMenuHeights(target);\r\n            e.stopPropagation();\r\n        },\r\n        handleMenuCntrEvent = function(e) {\r\n            e.preventDefault();\r\n            var currentMenu =  e.target.tagName === \"UL\" ? e.target : getClosest(e.target, \"UL\", false);\r\n            updateMenuHeights(currentMenu);\r\n            e.stopPropagation();\r\n        },\r\n        handleMenuCtnrBlurEvent = function(e) {\r\n            var target = e.currentTarget;\r\n            var relatedTarget = e.relatedTarget ? e.relatedTarget : DOC.activeElement;\r\n            if (!e.currentTarget.contains(relatedTarget)) {\r\n                closeMenu(target);\r\n                if (!relatedTarget.classList.contains(prefix + \"msthd-menu-link\") && !relatedTarget.classList.contains(prefix + \"msthd-menu-top-link\")) {\r\n                    closeOverLay();\r\n                }\r\n            }\r\n        },\r\n        handleMenuHoverInEvent = function(e) {\r\n            e.preventDefault();\r\n            openOverLay();\r\n            e.stopPropagation();\r\n        },\r\n        handleMenuHoverOutEvent = function(e) {\r\n            e.preventDefault();\r\n            closeOverLay();\r\n            e.stopPropagation();\r\n        },\r\n        handleMenuItemKeyEvent = function(e) {\r\n            var anchor = e.target ? e.target : DOC.activeElement,\r\n                item = anchor.parentNode,\r\n                menu = item.querySelector(\"ul\") ? item.querySelector(\"ul\") : undefined,\r\n                isTop = item.classList.contains(prefix + \"msthd-menu-top-item\"),\r\n                nextItem;\r\n            switch (e.keyCode) {\r\n            case 37: // left key\r\n                e.preventDefault();\r\n                if (isTop) {\r\n                    if (item.previousElementSibling && (nextItem = item.previousElementSibling.querySelector(\"a\"))) {\r\n                        nextItem.focus();\r\n                    }\r\n                }\r\n                else if (item.classList.contains(prefix + \"msthd-menu-item-img\") && item.previousElementSibling) {\r\n                    item.previousElementSibling.querySelector(\"a\").focus();\r\n                } else {\r\n                    previousItem = closeMenu(item);\r\n                    \r\n                    if (previousItem.classList.contains(prefix + \"msthd-menu-top-item\")) {\r\n                        closeOverLay();\r\n                        if(previousItem.previousElementSibling) {\r\n                            previousItem.previousElementSibling.querySelector(\"a\").focus();\r\n                        }\r\n                        else{\r\n                            previousItem.querySelector(\"a\").focus();\r\n                        } \r\n                    }\r\n                    else{\r\n                        previousItem.querySelector(\"a\").focus();\r\n                        updateMenuHeights(previousItem);\r\n                    }\r\n                }\r\n                break;\r\n            case 38: // up key\r\n                e.preventDefault();\r\n                if (!isTop) {\r\n                    if (item.previousElementSibling && (nextItem = item.previousElementSibling.querySelector(\"a\"))) {\r\n                        nextItem.focus();\r\n                    } else {\r\n                        item.parentNode.lastElementChild.querySelector(\"a\").focus();\r\n                    }\r\n                } \r\n                break;\r\n            case 39: // right key\r\n                e.preventDefault();\r\n                if (isTop) {\r\n                    if (item.nextElementSibling && (nextItem = item.nextElementSibling.querySelector(\"a\"))) {\r\n                        nextItem.focus();\r\n                    }\r\n                } else {\r\n                    if (anchor.querySelector(\"svg\")) {\r\n                        openMenu([item, menu, anchor]);\r\n                        if (!isTop) {\r\n                            updateMenuHeights(item);\r\n                        }\r\n                        menu.querySelector(\"a\").focus();\r\n                    } else if (item.classList.contains(prefix + \"msthd-menu-item-img\") && item.nextElementSibling) {\r\n                        item.nextElementSibling.querySelector(\"a\").focus();\r\n                    } else {\r\n                        do {\r\n                            previousItem = closeMenu(item);\r\n                            item = previousItem;\r\n                        } while(!item.classList.contains(prefix + \"msthd-menu-top-item\"));\r\n                        closeOverLay();\r\n                        if(item.nextElementSibling) {\r\n                            item.nextElementSibling.querySelector(\"a\").focus();\r\n                        } else {\r\n                            item.querySelector(\"a\").focus();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 40: // down key\r\n                e.preventDefault();\r\n                if (isTop) {\r\n                    if(!menu){\r\n                        item.focus();\r\n                    } else{\r\n                        openMenu([item, menu, anchor]);\r\n                        menu.querySelector(\"a\").focus();\r\n                        openOverLay();\r\n                    }\r\n                } else {\r\n                    if (item.nextElementSibling && (nextItem = item.nextElementSibling.querySelector(\"a\"))) {\r\n                        nextItem.focus();\r\n                    } else {\r\n                        item.parentNode.firstElementChild.querySelector(\"a\").focus();\r\n                    }\r\n                }\r\n                break;\r\n            case 27: // escape key\r\n                if (!item.classList.contains(prefix + \"msthd-menu-top-item\")) {\r\n                    do {\r\n                        var previousItem = closeMenu(item);\r\n                        item = previousItem;\r\n                    } while(!item.classList.contains(prefix + \"msthd-menu-top-item\"));\r\n                    item.querySelector(\"a\").focus();\r\n                }\r\n                closeOverLay();\r\n                break;\r\n            case 13:\r\n            case 32: // enter and spacebar keys\r\n                e.preventDefault();\r\n                if (menu) {\r\n                    if (item.hasAttribute(\"active\")) {\r\n                        closeMenu(item);\r\n                        updateMenuHeights(menu);\r\n                    } else {\r\n                        openMenu([item, menu, anchor]);\r\n                        openOverLay();\r\n                        if (!isTop) {\r\n                            updateMenuHeights(item);\r\n                        }\r\n                    }\r\n                    menu.querySelector(\"a\").focus();\r\n                }\r\n                break;\r\n            case 9: //TAB\r\n                if (e.shiftKey) {\r\n                    closeOverLay();\r\n                }\r\n                break;\r\n            }\r\n        },\r\n        handleIconClickEvent = function(e) {\r\n            var button = e.target.tagName === \"BUTTON\" || e.target.tagName === \"A\"? e.target : e.target.parentNode,\r\n                target = button.dataset.target,\r\n                container = DOC.getElementById(target),\r\n                origContainerId;\r\n\r\n            if (activeContainerId) {\r\n                origContainerId = activeContainerId;\r\n                var activeContainer = DOC.getElementById(activeContainerId);\r\n                var activeButton = getClosest(activeContainer, \"BUTTON\", false);\r\n                closeContainer(activeButton, activeContainer);\r\n            }\r\n            if (origContainerId != target) {\r\n                openContainer(target, button, container);\r\n            }\r\n        },\r\n        handleWindowClickEvent = function(e) {\r\n            if (activeContainerId) {\r\n                var container = DOC.getElementById(activeContainerId),\r\n                    button = getClosest(container, \"button\", false);\r\n                if (!container.contains(e.target) && !button.contains(e.target)) {\r\n                    closeContainer(button, container);\r\n                }\r\n            }\r\n        },\r\n        handleFocusOutEvent = function(e) {\r\n            var target = e.relatedTarget ? e.relatedTarget : e.target;\r\n            if (activeContainerId) {\r\n                var container = DOC.getElementById(activeContainerId),\r\n                    button = getClosest(container, \"button\", false);\r\n                if (target === button) {\r\n                    return;\r\n                } else if (!container.contains(target)) { \r\n                    closeContainer(button, container);\r\n                } else {\r\n                    window.addEventListener(\"click\", handleWindowClickEvent, false);\r\n                }\r\n            }\r\n        },\r\n        handleKeyDownEvent = function(e) {\r\n            if(activeContainerId) {\r\n                var container = DOC.getElementById(activeContainerId);\r\n                var button = getClosest(container, \"button\", false);\r\n\r\n                switch (e.keyCode) {\r\n                case 9: //TAB\r\n                    if (e.shiftKey) {\r\n                        if (e.target === container.querySelectorAll(\"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex='0']\")[0]) {\r\n                            closeContainer(button, container);\r\n                            break;\r\n                        } \r\n                    } \r\n                    setTimeout(function() {\r\n                        if (!container.contains(document.activeElement)) {\r\n                            closeContainer(button, container);\r\n                        }\r\n                    },200);\r\n                    break;\r\n                case 27: //ESC\r\n                    closeContainer(button, container);\r\n                    button.focus();\r\n                    break;\r\n                case 37:\r\n                case 38:\r\n                case 39:\r\n                case 40:\r\n                    e.preventDefault();\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        openOverLay = function() {\r\n            if (overlay) {\r\n                if (!overlay.classList.contains(prefix + \"show\")) {\r\n                    overlay.classList.add(prefix + \"show\");\r\n                }\r\n            } else {\r\n                console.error(\"Please put the overlay in place!\");\r\n            }\r\n        },\r\n        closeOverLay = function() {\r\n            if (overlay) {\r\n                if (overlay.classList.contains(prefix + \"show\")) {\r\n                    overlay.classList.remove(prefix + \"show\");\r\n                }\r\n            } else {\r\n                console.error(\"Please put the overlay in place!\");\r\n            }\r\n        },\r\n        closeMenu = function(item){\r\n            var previousMenu = item.tagName === \"LI\" ? item.parentNode : item,\r\n                previousItem = previousMenu.parentNode,\r\n                previousLink = previousItem.querySelector(\"a\");\r\n\r\n            if (previousMenu.hasAttribute(\"style\")) {\r\n                previousMenu.removeAttribute(\"style\");\r\n            }\r\n\r\n            previousItem.removeAttribute(\"active\");\r\n            previousMenu.removeAttribute(\"active\");\r\n            previousLink.removeAttribute(\"active\");\r\n            previousLink.setAttribute(\"aria-expanded\",\"false\");\r\n\r\n            return previousItem;\r\n        },\r\n        openMenu = function(items) {\r\n            each(items, function(item) {\r\n                item.setAttribute(\"active\",\"\");\r\n                if(item.tagName === \"A\") item.setAttribute(\"aria-expanded\",\"true\");\r\n            });\r\n            \r\n        },\r\n        updateMenuHeights = function(target) {\r\n            var currentMenu, \r\n                nextMenu, \r\n                previousMenu, \r\n                prePreviousMenu,\r\n                heights = [],\r\n                max;\r\n\r\n            // do not do logic on a list item image\r\n            if (!target.classList.contains(prefix + \"msthd-menu-item-img\")) {\r\n                // if a list item is passed\r\n                if (target.tagName === \"LI\") {\r\n                    currentMenu = target.parentNode;\r\n                    nextMenu = target.querySelector(\"ul\") ? target.querySelector(\"ul\") : undefined;\r\n                // if a unordered list is passed\r\n                } else {\r\n                    currentMenu = target;\r\n                }         \r\n\r\n                previousMenu = currentMenu.parentNode.parentNode.classList.contains(prefix + \"msthd-menu-top\") ? undefined : currentMenu.parentNode.parentNode;\r\n                prePreviousMenu = previousMenu ? previousMenu.parentNode.parentNode.classList.contains(prefix + \"msthd-menu-top\") ? undefined : previousMenu.parentNode.parentNode : undefined;\r\n\r\n                if (!previousMenu) {\r\n                    if (currentMenu.hasAttribute(\"style\")) {\r\n                        currentMenu.removeAttribute(\"style\");\r\n                    }\r\n                }\r\n\r\n                if (!nextMenu || !nextMenu.classList.contains(prefix + \"msthd-menu-tier-img\")) {\r\n                    // resst any height style\r\n                    if (currentMenu.hasAttribute(\"style\")) {\r\n                        currentMenu.removeAttribute(\"style\");\r\n                    }\r\n                    if (nextMenu && nextMenu.hasAttribute(\"style\")) {\r\n                        nextMenu.removeAttribute(\"style\");\r\n                    }\r\n                    if (previousMenu && previousMenu.hasAttribute(\"style\")) {\r\n                        previousMenu.removeAttribute(\"style\");\r\n                    }\r\n                    if (prePreviousMenu && prePreviousMenu.hasAttribute(\"style\")) {\r\n                        prePreviousMenu.removeAttribute(\"style\");\r\n                    }\r\n\r\n                    // find max height\r\n                    if (currentMenu) heights.push(currentMenu.offsetHeight);\r\n                    if (nextMenu) heights.push(nextMenu.offsetHeight);\r\n                    if (previousMenu) heights.push(previousMenu.offsetHeight);\r\n                    if (prePreviousMenu) heights.push(prePreviousMenu.offsetHeight);\r\n                    max = Math.max.apply(this, heights);\r\n\r\n                    // update height style\r\n                    if (max > 0) {\r\n                        currentMenu.setAttribute(\"style\",\"height: \"+max+\"px\");\r\n                        if (nextMenu) {\r\n                            nextMenu.setAttribute(\"style\",\"height: \"+max+\"px\");\r\n                        }\r\n                        if (previousMenu) {\r\n                            previousMenu.setAttribute(\"style\",\"height: \"+max+\"px\");\r\n                        }\r\n                        if (prePreviousMenu) {\r\n                            prePreviousMenu.setAttribute(\"style\",\"height: \"+max+\"px\");\r\n                        }\r\n                    }\r\n                } else {\r\n                    var cBottom = currentMenu.getBoundingClientRect().bottom,\r\n                        cHeight =  currentMenu.offsetHeight,\r\n                        nBottom = nextMenu.getBoundingClientRect().bottom,\r\n                        nHeight = nextMenu.offsetHeight;\r\n                        \r\n                    if (cHeight < nHeight) {   \r\n                        if (currentMenu.hasAttribute(\"style\")) {\r\n                            currentMenu.removeAttribute(\"style\");\r\n                        }\r\n                        currentMenu.setAttribute(\"style\",\"height: \"+nHeight+\"px\");\r\n                    }\r\n                    if (cBottom < nBottom) {\r\n                        if (nextMenu.hasAttribute(\"style\")) {\r\n                            nextMenu.removeAttribute(\"style\");\r\n                        }\r\n                        nextMenu.setAttribute(\"style\",\"bottom: -4px\");\r\n                    }\r\n                }\r\n            } \r\n        },\r\n        // Top navigation methods\r\n        openContainer = function(target, button, container) {\r\n            activeContainerId = target;\r\n            button.classList.add(prefix + \"active\");\r\n            button.setAttribute(\"aria-expanded\",\"true\");\r\n            container.classList.add(prefix + \"active\");  \r\n            if (container.classList.contains(prefix + \"msthd-offcanvas-menu\")) {\r\n                toggleFullScreen(container, true);\r\n                uicoreCustomEvent(\"Masthead\", \"OffCanvasOpen\", element);\r\n                setTimeout(function() {\r\n                    setFocus(getFocusableElements(container)[0]);\r\n                }, 200);\r\n            } else {\r\n                container.querySelectorAll(\"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex='0']\")[0].focus();\r\n                container.addEventListener(\"focusout\", handleFocusOutEvent, true);\r\n            }\r\n            container.addEventListener(\"keydown\", handleKeyDownEvent, false);          \r\n            \r\n        },\r\n        closeContainer = function(button, container) {\r\n            activeContainerId = null;\r\n            window.removeEventListener(\"click\", handleWindowClickEvent, false);\r\n            button.classList.remove(prefix + \"active\");\r\n            button.setAttribute(\"aria-expanded\",\"false\");\r\n            if (container.classList.contains(prefix + \"msthd-offcanvas-menu\")) {\r\n                toggleFullScreen(container, false);\r\n                uicoreCustomEvent(\"Masthead\", \"OffCanvasClose\", element);\r\n            } else{\r\n                container.removeEventListener(\"focusout\", handleFocusOutEvent, true);\r\n                container.removeEventListener(\"keydown\", handleKeyDownEvent, false);\r\n            }\r\n            container.classList.remove(prefix + \"active\");\r\n        },\r\n        toggleFullScreen = function(container, show) {\r\n            if (show) {\r\n                if (container) {\r\n                    container.hidden = false;\r\n                }\r\n                DOC.body.classList.add(prefix + \"active\");\r\n                \r\n                // container.addEventListener(\"keydown\", handle)\r\n             \r\n                if(fullScreenOverlay && !(fullScreenOverlay.classList[\"contains\"](prefix + \"show\"))) {\r\n                    fullScreenOverlay.classList.add(prefix + \"show\");\r\n                    fullScreenOverlay.hidden = false;\r\n                }\r\n                window.addEventListener(\"click\", handleWindowClickEvent, false);\r\n                window.addEventListener(\"touchstart\", handleWindowClickEvent, false);\r\n            } else {\r\n                if (container) {\r\n                    container.hidden = true;\r\n                }\r\n                DOC.body.classList.remove(prefix + \"active\");\r\n                if (fullScreenOverlay && fullScreenOverlay.classList[\"contains\"](prefix + \"show\")) {\r\n                    fullScreenOverlay.classList.remove(prefix + \"show\");\r\n                    fullScreenOverlay.hidden = true;\r\n                }\r\n                window.removeEventListener(\"touchstart\", handleWindowClickEvent, false);\r\n            }\r\n        },\r\n        touchHandler = function(e) {\r\n            if (!document.querySelector(\".\" + prefix + \"msthd-menu-top\").contains(e.target)) {\r\n                closeOverLay();\r\n            }\r\n        };\r\n        \r\n    this.logIn = function(displayname) {\r\n        var signInCtnr = element.querySelector(\".\" + prefix + \"msthd-icon-ctnr\"+\"[data-target='msthd-signin-ctnr']\"),\r\n            signInBadge = signInCtnr.querySelector(\".\" + prefix + \"badge\"),\r\n            label = signInCtnr.querySelector(\".\" + prefix + \"msthd-label\");\r\n\r\n        if (signInBadge.hidden) {\r\n            signInBadge.hidden = false;\r\n        }\r\n        \r\n        if (label) {\r\n            label.innerHTML = displayname;\r\n        }\r\n        signInCtnr.setAttribute(\"data-target\",\"msthd-signout-ctnr\");\r\n    };\r\n    this.logOut = function() {\r\n        var signInCtnr = element.querySelector(\".\" + prefix + \"msthd-icon-ctnr\"+\"[data-target='msthd-signout-ctnr']\"),\r\n            signInBadge = signInCtnr.querySelector(\".\" + prefix + \"badge\"),\r\n            label = signInCtnr.querySelector(\".\" + prefix + \"msthd-label\");\r\n\r\n        if (!signInBadge.hidden) {\r\n            signInBadge.hidden = true;\r\n        }\r\n        \r\n        if (label) {\r\n            label.innerHTML = signInText;\r\n        }\r\n        signInCtnr.setAttribute(\"data-target\",\"msthd-signin-ctnr\");\r\n    };\r\n    this.cartCount = function(count) {\r\n        var cartCtnr = element.querySelector(\".\" + prefix + \"msthd-icon-ctnr\"+\"[data-target='msthd-cart-ctnr']\"),\r\n            cartBadge = cartCtnr.querySelector(\".\" + prefix + \"badge\");\r\n        if (count && count > 0) {\r\n            if (cartBadge.hidden) {\r\n                cartBadge.hidden = false;\r\n            }\r\n            cartBadge.innerHTML = count;\r\n        } else {\r\n            cartBadge.hidden = true;\r\n            cartBadge.innerHTML = 0;\r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringMasthead in element)) {\r\n        document.addEventListener(\"uicLeftNavCloseEvent\", function(e) {\r\n            closeContainer(e.detail.button, e.detail.container);\r\n        });\r\n\r\n        each(element.querySelectorAll(\"button.\"+ prefix +\"msthd-icon-ctnr\", \"a.\"+ prefix +\"msthd-icon-ctnr\"),function(button) {\r\n            if (button.dataset.toggle && button.dataset.toggle === (prefix + \"msthd-offcanvas\")) {\r\n                offCanvasMenuBtn = button;\r\n            }\r\n            if (button.dataset.target === \"msthd-country-ctnr\") {\r\n                new Dropdown(button);\r\n            } else {\r\n                button.addEventListener(\"click\", handleIconClickEvent, false);\r\n            }\r\n        });\r\n        if (offCanvasMenuBtn) {\r\n            fullScreenOverlay = getFullScreenOverlay();\r\n            if (!DOC.body.classList.contains(prefix + \"body-off-canvas\")) {\r\n                DOC.body.classList.add(prefix + \"body-off-canvas\");\r\n            }\r\n            if (isIPhone && isSafari) {\r\n                element.querySelector(\".\" + prefix + \"msthd-offcanvas-menu\").classList.add(prefix + \"safari-fix\");\r\n            }\r\n            each(element.querySelectorAll(\"[data-toggle='dds__collapse']\"), function(collapse) {\r\n                new Collapse(collapse);\r\n            });\r\n            mediaSize.addListener(function() {\r\n                if (!mediaSize.matches) {\r\n                    if (activeContainerId) {\r\n                        var container = DOC.getElementById(activeContainerId),\r\n                            button = getClosest(container, \"BUTTON\", false);\r\n                        closeContainer(button, container);\r\n                    }\r\n                    if (bottomMenu) {\r\n                        each(bottomMenu.querySelectorAll(\".\" + prefix + \"msthd-menu-top-item\"), function(topMenuItem){\r\n                            if (topMenuItem.matches(\":hover\")) {\r\n                                openOverLay();\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    closeOverLay();\r\n                }\r\n            });\r\n        }\r\n        if (bottomMenu) {\r\n            \r\n            overlay = DOC.getElementById(prefix + \"msthd-overlay\");\r\n\r\n            each(bottomMenu.querySelectorAll(\".\" + prefix + \"msthd-menu-ctnr\"), function(menuCtnr) {\r\n                if (!menuCtnr.classList.contains(prefix+\"msthd-menu-tier-img\")) {\r\n                    if(window.matchMedia(\"(any-hover: hover)\").matches || isIE) { //Device capable of hover + IE (IE Doesn't support media features)\r\n                        menuCtnr.addEventListener(mouseHover[0], handleMenuCntrEvent, false);\r\n                        menuCtnr.addEventListener(mouseHover[1], handleMenuCntrEvent, false);\r\n                    } else { //Device only capable of touch\r\n                        menuCtnr.addEventListener(\"touchstart\", handleMenuCntrEvent, false);\r\n                    }\r\n                }\r\n                menuCtnr.addEventListener(\"blur\", handleMenuCtnrBlurEvent, true);\r\n            });\r\n            each(bottomMenu.querySelectorAll(\".\" + prefix + \"msthd-menu-top-item > a\"), function(topMenuItem){\r\n                topMenuItem.addEventListener(\"keydown\", handleMenuItemKeyEvent, false);\r\n            });\r\n            each(bottomMenu.querySelectorAll(\".\" + prefix + \"msthd-menu-item , .\" + prefix + \"msthd-menu-item-img\"), function(menuItem) {\r\n                \r\n                menuItem.querySelector(\"a\").addEventListener(\"keydown\", handleMenuItemKeyEvent, false);\r\n                if(window.matchMedia(\"(any-hover: hover)\").matches || isIE) { //Device capable of hover + IE (IE Doesn't support media features)\r\n                    menuItem.addEventListener(mouseHover[0], handleMenuItemEvent, false);\r\n                    menuItem.addEventListener(mouseHover[1], handleMenuItemEvent, false);\r\n                } else { //Device only capable of touch\r\n                    menuItem.addEventListener(\"touchstart\", handleMenuItemEvent, false);\r\n                }\r\n            });\r\n\r\n            bottomMenu = element.querySelector(\".\" + prefix + \"msthd-menu-top\");\r\n            if(window.matchMedia(\"(any-hover: hover)\").matches || isIE) { //Device capable of hover + IE (IE Doesn't support media features)\r\n                bottomMenu.addEventListener(mouseHover[0], handleMenuHoverInEvent, false);\r\n                bottomMenu.addEventListener(mouseHover[1], handleMenuHoverOutEvent, false);\r\n            } else { //Device only capable of touch\r\n                bottomMenu.addEventListener(\"touchstart\", handleMenuHoverInEvent, false);\r\n            }\r\n\r\n            if (isIOS) {\r\n                window.addEventListener(\"touchstart\", touchHandler, false);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    element[stringMasthead] = self;\r\n}\r\n","\r\n/**\r\n* Detect Element Resize\r\n*\r\n* https://github.com/sdecima/javascript-detect-element-resize\r\n* Sebastian Decima\r\n*\r\n* version: 0.5.3\r\n**/\r\nexport default function ResizeElement() {\r\n    (function () {\r\n        var attachEvent = document.attachEvent,\r\n            stylesCreated = false;\r\n    \r\n        if (!attachEvent) {\r\n            var requestFrame = (function(){\r\n                var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame ||\r\n                  function(fn){ return window.setTimeout(fn, 20); };\r\n                return function(fn){ return raf(fn); };\r\n            })();\r\n      \r\n            var cancelFrame = (function(){\r\n                var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame ||\r\n                     window.clearTimeout;\r\n                return function(id){ return cancel(id); };\r\n            })();\r\n  \r\n            var resetTriggers = function(element){\r\n                var triggers = element.__resizeTriggers__,\r\n                    expand = triggers.firstElementChild,\r\n                    contract = triggers.lastElementChild,\r\n                    expandChild = expand.firstElementChild;\r\n                contract.scrollLeft = contract.scrollWidth;\r\n                contract.scrollTop = contract.scrollHeight;\r\n                expandChild.style.width = expand.offsetWidth + 1 + \"px\";\r\n                expandChild.style.height = expand.offsetHeight + 1 + \"px\";\r\n                expand.scrollLeft = expand.scrollWidth;\r\n                expand.scrollTop = expand.scrollHeight;\r\n            };\r\n  \r\n            var checkTriggers = function(element){\r\n                return element.offsetWidth != element.__resizeLast__.width ||\r\n               element.offsetHeight != element.__resizeLast__.height;\r\n            };\r\n      \r\n            var scrollListener = function(e){\r\n                var element = this;\r\n                resetTriggers(this);\r\n                if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\r\n                this.__resizeRAF__ = requestFrame(function(){\r\n                    if (checkTriggers(element)) {\r\n                        element.__resizeLast__.width = element.offsetWidth;\r\n                        element.__resizeLast__.height = element.offsetHeight;\r\n                        element.__resizeListeners__.forEach(function(fn){\r\n                            fn.call(element, e);\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n      \r\n            /* Detect CSS Animations support to detect element display/re-attach */\r\n            var animation = false,\r\n                // animationstring = \"animation\",\r\n                keyframeprefix = \"\",\r\n                animationstartevent = \"animationstart\",\r\n                domPrefixes = \"Webkit Moz O ms\".split(\" \"),\r\n                startEvents = \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\" \"),\r\n                pfx  = \"\";\r\n            {\r\n                var elm = document.createElement(\"fakeelement\");\r\n                if( elm.style.animationName !== undefined ) { animation = true; }    \r\n        \r\n                if( animation === false ) {\r\n                    for( var i = 0; i < domPrefixes.length; i++ ) {\r\n                        if( elm.style[ domPrefixes[i] + \"AnimationName\" ] !== undefined ) {\r\n                            pfx = domPrefixes[ i ];\r\n                            // animationstring = pfx + \"Animation\";\r\n                            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\r\n                            animationstartevent = startEvents[ i ];\r\n                            animation = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n      \r\n            var animationName = \"resizeanim\";\r\n            var animationKeyframes = \"@\" + keyframeprefix + \"keyframes \" + animationName + \" { from { opacity: 0; } to { opacity: 0; } } \";\r\n            var animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\r\n        }\r\n    \r\n        var createStyles = function() {\r\n            if (!stylesCreated) {\r\n                //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\r\n                var css = (animationKeyframes ? animationKeyframes : \"\") +\r\n            \".resize-triggers { \" + (animationStyle ? animationStyle : \"\") + \"visibility: hidden; opacity: 0; } \" +\r\n            \".resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \\\" \\\"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }\",\r\n                    head = document.head || document.getElementsByTagName(\"head\")[0],\r\n                    style = document.createElement(\"style\");\r\n        \r\n                style.type = \"text/css\";\r\n                if (style.styleSheet) {\r\n                    style.styleSheet.cssText = css;\r\n                } else {\r\n                    style.appendChild(document.createTextNode(css));\r\n                }\r\n  \r\n                head.appendChild(style);\r\n                stylesCreated = true;\r\n            }\r\n        };\r\n    \r\n        window.addResizeListener = function(element, fn){\r\n            if (attachEvent) element.attachEvent(\"onresize\", fn);\r\n            else {\r\n                if (!element.__resizeTriggers__) {\r\n                    if (getComputedStyle(element).position == \"static\") element.style.position = \"relative\";\r\n                    createStyles();\r\n                    element.__resizeLast__ = {};\r\n                    element.__resizeListeners__ = [];\r\n                    (element.__resizeTriggers__ = document.createElement(\"div\")).className = \"resize-triggers\";\r\n                    element.__resizeTriggers__.innerHTML = \"<div class=\\\"expand-trigger\\\"><div></div></div>\" +\r\n                                              \"<div class=\\\"contract-trigger\\\"></div>\";\r\n                    element.appendChild(element.__resizeTriggers__);\r\n                    resetTriggers(element);\r\n                    element.addEventListener(\"scroll\", scrollListener, true);\r\n          \r\n                    /* Listen for a css animation to detect element display/re-attach */\r\n                    animationstartevent && element.__resizeTriggers__.addEventListener(animationstartevent, function(e) {\r\n                        if(e.animationName == animationName)\r\n                            resetTriggers(element);\r\n                    });\r\n                }\r\n                element.__resizeListeners__.push(fn);\r\n            }\r\n        };\r\n    \r\n        window.removeResizeListener = function(element, fn){\r\n            if (attachEvent) element.detachEvent(\"onresize\", fn);\r\n            else {\r\n                element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\r\n                if (!element.__resizeListeners__.length) {\r\n                    element.removeEventListener(\"scroll\", scrollListener);\r\n                    element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\r\n                }\r\n            }\r\n        };\r\n    })();\r\n}","import { ariaAnnounce, classAdd, classRemove, createElement, debounce, each, DOC, getClosest, getFocusableElements, getNextFocusableElement, isIE, isIOS, isSafari, jsonOptionsInit, one, prefix, setFocus, uicoreCustomEvent } from \"./utilities.js\";\r\n\r\nimport Collapse from \"./collapse.js\";\r\nimport ResizeElement from \"./helpers/resizeElement.js\";\r\n\r\nexport function NavAnchored(element) {\r\n    // initialization element, the element we spy on\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var self = this,\r\n        items,\r\n        tabs,\r\n        modalElement,\r\n        backButton,\r\n        activeTab = null,\r\n        focusableEls,\r\n        stringNav = \"Nav\",\r\n        sticky,\r\n        isSticky = false,\r\n        targetItems,\r\n        tabbing = false,\r\n        targetNav,\r\n        modalSize = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        exitFocus,\r\n        // Event Handlers\r\n        handleClickEvent = function(e) {\r\n            activeTab = e.target;\r\n            tabbing = false;\r\n            if (modalSize.matches && modalElement && !(modalElement.classList.contains(prefix + \"show\"))) {\r\n                showModal(activeTab);\r\n                for (var index = 0; index < items[\"length\"]; index++) {\r\n                    var item = items[index];\r\n                    if(index == activeTab.idx) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                }\r\n                e.preventDefault();\r\n            } else {\r\n                window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n                if (!isSticky) {\r\n                    if (isIE) {\r\n                        element.scrollIntoView(true);\r\n                    } else {\r\n                        element.scrollIntoView({behavior: \"smooth\"});\r\n                    }\r\n                } \r\n                if (isIE) {\r\n                    targetItems[activeTab.idx].scrollIntoView(true);\r\n                } else {\r\n                    targetItems[activeTab.idx].scrollIntoView({behavior: \"smooth\"});\r\n                }\r\n            }\r\n        },\r\n        handleScrollEvent = function() {\r\n            var last_known_scroll_position = window.pageYOffset;\r\n            stickNav(last_known_scroll_position);\r\n            if (!tabbing) {\r\n                window.requestAnimationFrame(updateItems);\r\n            }\r\n        },\r\n        stickNav = function(itemTop) {\r\n            var targetBottom = targetNav.getBoundingClientRect().bottom,\r\n                spacer;\r\n            if (itemTop > sticky && 0 <= targetBottom) {\r\n                if (!isSticky) {\r\n                    if(isIE) { // bug fix for position fixed on IE\r\n                        spacer = createElement(\"div\", {\r\n                            class: prefix + \"nav-spacer\"\r\n                        });\r\n                        spacer.style.height = element.offsetHeight+\"px\";\r\n                        setElementWidth(element);\r\n                        element.parentElement.insertBefore(spacer, element);\r\n                    }\r\n                    element.style.zIndex = 1030;\r\n                    element.classList.add(prefix + \"active\");\r\n                    isSticky = true;\r\n                }\r\n            } else {\r\n                if (isSticky) {\r\n                    if (isIE) {\r\n                        spacer = element.parentElement.querySelector(\".\" + prefix + \"nav-spacer\");\r\n                        if (spacer) {\r\n                            element.parentElement.removeChild(spacer);\r\n                        }\r\n                        removeElementWidth();\r\n                    }\r\n                    element.style.zIndex = \"\";\r\n                    element.classList.remove(prefix + \"active\");\r\n                    isSticky = false;\r\n                }\r\n            }\r\n        },\r\n        dismissHandler = function(e) {\r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                hideModal();\r\n                e.preventDefault();\r\n                setFocus(activeTab);\r\n            }\r\n        },\r\n        handleModalKeydown = function(e) {            \r\n            var KEY_TAB = 9;\r\n            var KEY_ESC = 27;\r\n    \r\n            switch(e.keyCode) {\r\n            case KEY_TAB:\r\n                if ( focusableEls.length === 1 ) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if ( e.shiftKey ) {\r\n                    handleBackwardTab(e);\r\n                } else {\r\n                    handleForwardTab(e);\r\n                }\r\n                break;\r\n            case KEY_ESC: \r\n                hideModal();\r\n                setFocus(activeTab);\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        },\r\n        showModal = function(item) {\r\n            createModal(item);\r\n            modalElement.style.display = \"block\";\r\n            modalElement.setAttribute(\"aria-hidden\", false);\r\n            triggerShow();\r\n            modalElement.classList.add(prefix + \"show\");\r\n\r\n            if (isSafari && isIOS) {\r\n                modalElement.classList.add(prefix + \"is-safari\");\r\n            }\r\n\r\n            DOC.body.classList.add(prefix + \"modal-open\");\r\n\r\n            backButton = modalElement && modalElement.querySelector(\"[data-dismiss='\"+prefix+\"modal']\");\r\n            backButton.addEventListener(\"click\", dismissHandler, false);\r\n            setFocusableElements();\r\n            setTimeout(function() {\r\n                setFocus(backButton);\r\n            }, 50);\r\n            modalElement.addEventListener(\"keydown\", handleModalKeydown);\r\n        },\r\n        hideModal = function() {\r\n            modalElement.classList.add(prefix + \"slide-right\");\r\n            modalElement.classList.remove(prefix + \"show\");\r\n            modalElement.setAttribute(\"aria-hidden\", true);\r\n            if (isSafari && isIOS && modalElement.classList.contains(prefix + \"is-safari\")) {\r\n                modalElement.classList.remove(prefix + \"is-safari\");\r\n            }\r\n            setTimeout(function() {\r\n                triggerHide();\r\n                \r\n                DOC.body.classList.remove(prefix + \"modal-open\");\r\n                if (backButton) {\r\n                    backButton.removeEventListener(\"click\", dismissHandler, false);\r\n                }\r\n            }, 200);\r\n        },\r\n        createModal = function(tab) {\r\n            var controls = tab.getAttribute(\"aria-controls\");\r\n            var isIconElement =\r\n                (tab === tab.parentElement\r\n                    .querySelector(\".dds__icons.dds__chevron-right.dds__tab-icon\"));\r\n\r\n            if (!controls && isIconElement) {\r\n                controls = tab.parentElement.getAttribute(\"aria-controls\");\r\n            }\r\n\r\n            var tabContent = document.getElementById(controls).innerHTML;\r\n    \r\n            var modalBody = modalElement.querySelector(\".\" + prefix+ \"modal-body\");\r\n            modalBody.innerHTML = tabContent;\r\n        },\r\n        // triggers\r\n        triggerShow = function() {\r\n            setFocus(modalElement);\r\n        },\r\n        triggerHide = function() {\r\n            modalElement.style.display = \"\";\r\n        },\r\n        setFocusableElements = function() {\r\n            focusableEls = getFocusableElements(modalElement);\r\n            modalElement.firstFocusableEl = focusableEls[0];\r\n            modalElement.lastFocusableEl = focusableEls[ focusableEls.length - 1 ];\r\n        },\r\n        handleBackwardTab = function (e) {\r\n            if ( document.activeElement === modalElement.firstFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.lastFocusableEl);\r\n            }\r\n        },\r\n        handleForwardTab = function (e) {\r\n            if ( document.activeElement === modalElement.lastFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.firstFocusableEl);\r\n            }\r\n        },\r\n        setElementWidth = function(el) {\r\n            element.style.width = el.offsetWidth+\"px\";\r\n        },\r\n        removeElementWidth = function() {\r\n            element.style.width = \"\";\r\n        },\r\n        toggleElementWidth = debounce(function() {\r\n            if (isSticky) {\r\n                setElementWidth(element.parentElement);\r\n            } else {\r\n                removeElementWidth();\r\n            }\r\n        }, 10),\r\n        // takes a number to slighly adjust scroll offset if needed        \r\n        determineSection = function(scrollOffset) {\r\n            scrollOffset = scrollOffset || 0;\r\n            for (var i = 0; i < targetItems.length; i++) {\r\n                if (targetItems[i].getBoundingClientRect().top + scrollOffset > 0) {\r\n                    return i;\r\n                }\r\n            }\r\n            return targetItems.length >= 1 ? targetItems.length : 1;\r\n        },\r\n        handleEnterEvent = function(e) {\r\n            var target = e.target;\r\n            tabbing = true;\r\n            if (e.keyCode == 9) {\r\n                if (!modalSize.matches) {\r\n                    var currentSection = (determineSection(-5) -1);\r\n                    currentSection = currentSection < 0 ? 0 : currentSection;\r\n                    if (isIE) {\r\n                        targetItems[target.idx].scrollIntoView(true);\r\n                    } else {\r\n                        targetItems[target.idx].scrollIntoView({behavior: \"smooth\"});\r\n                    }\r\n                    toggleTab(tabs[currentSection],tabs[target.idx]);\r\n                }\r\n            }\r\n            tabbing = false;\r\n        },\r\n        handleKeydownEvent = function(e) {\r\n            var key = e.keyCode,\r\n                idx = e.target.idx;\r\n            \r\n            switch(key) {\r\n            case 9: if (!e.shiftKey) {\r\n                if (modalSize.matches) {\r\n                    e.preventDefault(); \r\n                    setFocus(exitFocus);\r\n                } else {\r\n                    tabbing = true;\r\n                    var focusEl;\r\n                    each(targetItems, function(target, iter) {\r\n                        if (iter >= idx && target.focusableEls.length > 0 && !focusEl) {\r\n                            focusEl = target.focusableEls;\r\n                        }\r\n                    });\r\n                    if (focusEl) { e.preventDefault(); setFocus(focusEl[0]); }\r\n                    else if (exitFocus) { e.preventDefault(); setFocus(exitFocus); }\r\n                }\r\n            }\r\n                break;\r\n            case 13:\r\n            case 32: // enter and spacebar keys\r\n                e.preventDefault();\r\n                tabbing = false;\r\n                setFocus(e.target);\r\n                e.target.click();\r\n                break;\r\n            case 35:    e.preventDefault();\r\n                setFocus(items[tabs.length-1]);\r\n                items[tabs.length-1].click();\r\n                break;\r\n            case 36:    e.preventDefault();\r\n                setFocus(items[0]);\r\n                items[0].click();\r\n                break;\r\n            case 39:    e.preventDefault();\r\n                if (idx === items.length-1) {\r\n                    setFocus(items[0]);\r\n                } else {\r\n                    setFocus(items[idx+1]);\r\n                }\r\n                break;\r\n            case 37:    e.preventDefault();\r\n                if (idx === 0) {\r\n                    setFocus(items[items.length-1]);\r\n                } else {\r\n                    setFocus(items[idx-1]);\r\n                }\r\n                break;\r\n            }\r\n        },\r\n        updateItems = function() {\r\n            var section = (determineSection(-5) -1);\r\n            section = section < 0 ? 0 : section;\r\n            for (var index = 0; index < items[\"length\"]; index++) {\r\n                var item = items[index];\r\n                if (isSticky) {\r\n                    if(index == section) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                } else {\r\n                    if (index == 0) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                }\r\n            }\r\n            return item;\r\n        },\r\n        toggleTab = function(oldItem, newItem) {\r\n            deactivateTab(oldItem);\r\n            activateTab(newItem);\r\n        },\r\n        activateTab = function(item) {\r\n            item.setAttribute(\"tabindex\",\"0\");\r\n            item.classList.add(prefix + \"active\");\r\n            item.setAttribute(\"aria-selected\",\"true\");\r\n        },\r\n        deactivateTab = function(item) {\r\n            item.setAttribute(\"tabindex\",\"-1\");\r\n            item.classList.remove(prefix + \"active\");\r\n            item.setAttribute(\"aria-selected\",\"false\");\r\n        },\r\n        activateItems = function() {\r\n            element.setAttribute(\"style\", \"display: none !important;\");\r\n            each(targetItems, function(item) {\r\n                item.setAttribute(\"style\", \"display: block;\");\r\n            });\r\n        };\r\n        \r\n    // init - prevent adding event handlers twice\r\n    if (!(stringNav in element)) {\r\n\r\n        modalElement = element.dataset[\"target\"] && DOC.getElementById(element.dataset[\"target\"].substr(1));\r\n\r\n        targetNav = element.nextElementSibling;\r\n        \r\n        tabs = element.querySelectorAll(\"li button\");\r\n\r\n        sticky = element.getBoundingClientRect().top;\r\n        items = [];\r\n        targetItems = [];\r\n        \r\n        if (isIE) {\r\n            window.addEventListener(\"resize\", toggleElementWidth, false);\r\n        }\r\n        \r\n        // populate items and targets\r\n        for (var i=0; i < tabs.length; i++) {\r\n            tabs[i].idx = i;\r\n            items.push(tabs[i]);\r\n            items[i].addEventListener(\"click\", handleClickEvent, false);\r\n            items[i].addEventListener(\"keydown\", handleKeydownEvent, false);\r\n            var panel = document.getElementById(tabs[i].dataset[\"target\"].slice(1));\r\n            panel.scrollTop += element.offsetHeight;\r\n            panel.focusableEls = getFocusableElements(panel);\r\n            each(panel.focusableEls, function(field) {\r\n                field.addEventListener(\"keyup\", handleEnterEvent, false);\r\n                field.idx = i;\r\n            });\r\n            targetItems.push(panel);\r\n        }\r\n        if (targetItems[targetItems.length-1].focusableEls.length == 0) { // last panel and no focusable items\r\n            DOC.addEventListener(\"DOMContentLoaded\", function() { // make sure all HTML is available prior to checking\r\n                exitFocus = getNextFocusableElement(panel);\r\n            });\r\n        }\r\n\r\n        if (modalSize.matches) {\r\n            window.removeEventListener(\"scroll\", handleScrollEvent, false);\r\n            if (!modalElement) {\r\n                activateItems();\r\n            }\r\n        } else {\r\n            window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n        }\r\n        modalSize.addListener(function() {\r\n            if (!modalSize.matches) {\r\n                element.removeAttribute(\"style\");\r\n                window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n                if (modalElement) {\r\n                    hideModal();\r\n                }\r\n            } else {\r\n                element.classList.remove(prefix + \"active\");\r\n                var spacer = element.parentElement.querySelector(\".\" + prefix + \"nav-spacer\");\r\n                if (spacer) {\r\n                    element.parentElement.removeChild(spacer);\r\n                }\r\n                window.removeEventListener(\"scroll\", handleScrollEvent, false);\r\n                if (!modalElement) {\r\n                    activateItems();\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    element[stringNav] = self;\r\n}\r\n\r\nexport function NavSkip(element) {\r\n\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var self = this,\r\n        stringNavSkip = \"NavSkip\",\r\n        hiddenZindex = \"-1000\",\r\n        visibleZindex = \"1080\",\r\n        tabindex,\r\n        borderStyle,\r\n        dataInset,\r\n   \r\n        // handlers\r\n        focusInHandler = function(e) {\r\n            if (element === e.target || element.contains(e.target)) {\r\n                element.style.zIndex = visibleZindex;\r\n                element.style.opacity = \"1\";\r\n                each(element.querySelectorAll(\"a.\" + prefix + \"btn\"), function(button) {\r\n                    button.addEventListener(\"click\", clickHandler, false);\r\n                });\r\n            }\r\n            element.addEventListener(\"focusout\", focusOutHandler);\r\n        },\r\n\r\n        focusOutHandler = function(e) {\r\n            var target = e.relatedTarget ? e.relatedTarget : DOC.activeElement;\r\n            if (!element.contains(target) && !(element === target)) {\r\n                toggleZindex();\r\n            }\r\n        },    \r\n        \r\n        toggleZindex = function() {\r\n            element.style.zIndex = hiddenZindex;\r\n            element.style.opacity = \"0\";\r\n            each(element.querySelectorAll(\"a.\" + prefix + \"btn\"), function(button) {\r\n                button.removeEventListener(\"click\", clickHandler, false);\r\n            });\r\n            element.removeEventListener(\"focusout\", focusOutHandler);\r\n\r\n        },\r\n\r\n        clickHandler = function(e) {\r\n            // element.style.zIndex = hiddenZindex;\r\n            toggleZindex();\r\n            var focusElement = document.getElementById(e.target.getAttribute(\"href\").substr(1));\r\n            tabindex = focusElement.getAttribute(\"tabIndex\");\r\n            if (tabindex !== 0) {\r\n                focusElement.setAttribute(\"tabIndex\", \"0\"); \r\n            } \r\n            focusElement.addEventListener(\"focusout\", blurHandler, false);\r\n            setTimeout( function() {\r\n                focusElement.focus();\r\n            }, 100); //firefox needs a little timeout to register tabindex\r\n            if (e.target.getAttribute(\"data-inset\") === \"true\") { //only add special border if pass in this attr\r\n                dataInset = true;\r\n                borderStyle = focusElement.style.border;\r\n                setTimeout( function() {  \r\n                    focusElement.style.border = \"2px inset #000000\";\r\n                }, 10);\r\n            } else {\r\n                dataInset = false;\r\n            }\r\n        },\r\n\r\n        blurHandler = function(e) { \r\n            if (dataInset) {\r\n                e.target.style.border = borderStyle;\r\n            }\r\n            if (tabindex !== 0) {\r\n                tabindex == null ? e.target.removeAttribute(\"tabIndex\") : e.target.setAttribute(\"tabIndex\", tabindex);\r\n            }\r\n            e.target.removeEventListener(\"focusout\", blurHandler, false); //once one blur event occurs, we want to remove the event listener\r\n        };\r\n\r\n    // init\r\n    if (!(stringNavSkip in element)) {\r\n        // prevent adding event handlers twice\r\n        element.addEventListener(\"focusin\", focusInHandler);\r\n        // window.addEventListener(\"keyup\", keydownZindexHandler);\r\n        // var focusableEls = document.querySelectorAll(\"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex='0']\");\r\n        // focusableEls[0].addEventListener(\"keyup\", keydownZindexHandler);\r\n        // if using Mac, keyboard accessbility  will only work if you set up this setting: https://stackoverflow.com/questions/11704828/how-to-allow-keyboard-focus-of-links-in-firefox\r\n        // On Mac: In System Preferences  Keyboard, in the Shortcuts pane, check the all controls radio at the bottom.\r\n        // Safari on Mac: additionally, go to safari preferences-> Advanced -> Accessibility \"Press Tab to highlight each item on a webpage\"\r\n        // Firefox on Mac: additionally, type \"about:config\" in the URL bar. There is no accessibility.tabfocus preference on the mac, so you'll have to make one. Right click in the window, create a new \"integer\" pref, and set it to 7.\r\n    }\r\n\r\n\r\n    element[stringNavSkip] = self;\r\n}\r\n\r\nexport function NavAnchoredVertical(element, options) { \r\n    // initialization element, the element we spy on\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    var opt = {};\r\n\r\n    if (options && Object.keys(options).length) {\r\n        opt.showModal = typeof options.showModal === \"boolean\" && options.showModal;\r\n    }\r\n\r\n    var self = this,\r\n        activeCSSClassName = prefix + \"active\",\r\n        activeTab = null,\r\n        backButton,\r\n        exitFocus,\r\n        focusableEls,\r\n        modalElement,\r\n        modalSize = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        isSticky = false,\r\n        items,\r\n        stringNav = \"Nav\",\r\n        sticky,\r\n        tabs,\r\n        targetItems,\r\n        tabbing = false,\r\n        targetNav,\r\n        // Event Handlers\r\n        handleClickEvent = function (e) {\r\n            var scrollViewType = !isIE ? { behavior: \"smooth\" } : true;\r\n            var shouldShowModal = opt.showModal && \r\n                modalSize.matches &&\r\n                modalElement && \r\n                !(modalElement.classList.contains(prefix + \"show\"));\r\n\r\n            var isClickOnIconElement = (e.target === e.target.parentElement\r\n                .querySelector(\".dds__icons.dds__chevron-right.dds__tab-icon\"));\r\n\r\n            activeTab = isClickOnIconElement ? e.target.parentElement : e.target;\r\n            tabbing = false;\r\n\r\n            if (shouldShowModal) {\r\n                showModal(activeTab);\r\n                for (var index = 0; index < items[\"length\"]; index++) {\r\n                    var item = items[index];\r\n                    if (index == activeTab.idx) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                }\r\n                return e.preventDefault();\r\n            } \r\n\r\n            window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n            \r\n            if (!isSticky) {\r\n                element.scrollIntoView(scrollViewType);\r\n            }\r\n\r\n            targetItems[activeTab.idx].scrollIntoView(scrollViewType);\r\n        },\r\n        handleScrollEvent = function () {\r\n            var lastKnownScrollPosition = window.pageYOffset;\r\n            stickNav(lastKnownScrollPosition);\r\n            if (!tabbing) {\r\n                window.requestAnimationFrame(updateItems);\r\n            }\r\n        },\r\n        stickNav = function (lastKnownScrollPosition) {\r\n            // var lastTargetContent = targetItems[targetItems.length - 1];\r\n\r\n            var target = targetNav.getBoundingClientRect();\r\n            var navPositionCoords = element.parentElement.getBoundingClientRect();\r\n\r\n            var navOnTopScreen = (navPositionCoords.top <= 0);\r\n            var elemClassList = element.classList;\r\n\r\n            if (lastKnownScrollPosition > sticky && 0 <= target.bottom) {\r\n                elemClassList.add(activeCSSClassName);\r\n                element.style.zIndex = 1030;\r\n                isSticky = true;\r\n            } else if (isSticky) {\r\n                elemClassList.remove(activeCSSClassName);\r\n                element.style.zIndex = \"\";\r\n                isSticky = false;\r\n            }\r\n\r\n            if (isIE) {\r\n                var navItem = element.querySelectorAll(\".dds__nav-anchored-vertical-item\");\r\n                var lastNavItem = navItem[navItem.length - 1];\r\n                \r\n                var positionOflastNavItemBottom = lastNavItem.getBoundingClientRect().bottom;\r\n                var negativeTop = target.bottom - lastNavItem.parentElement.getBoundingClientRect().height;\r\n                var isNavAfterLastContentBottom = (target.bottom >= positionOflastNavItemBottom);\r\n\r\n                if (navOnTopScreen) {\r\n                    element.style.top = isNavAfterLastContentBottom ? \"0px\" : negativeTop + \"px\";\r\n                    element.style.position = \"fixed\";\r\n                    element.style.height = target.bottom +\"px\";\r\n\r\n                    targetNav.style.marginLeft =\"270px\";\r\n                    return;\r\n                }\r\n\r\n                element.style.height =\"auto\";\r\n                element.style.position =\"relative\";\r\n                targetNav.style.marginLeft =\"0\";\r\n            }\r\n        },\r\n        dismissHandler = function (e) {\r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                hideModal();\r\n                e.preventDefault();\r\n                setFocus(activeTab);\r\n            }\r\n        },\r\n        handleModalKeydown = function (e) {\r\n            var KEY_TAB = 9;\r\n            var KEY_ESC = 27;\r\n\r\n            switch (e.keyCode) {\r\n            case KEY_TAB:\r\n                if (focusableEls.length === 1) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if (e.shiftKey) {\r\n                    handleBackwardTab(e);\r\n                } else {\r\n                    handleForwardTab(e);\r\n                }\r\n                break;\r\n            case KEY_ESC:\r\n                hideModal();\r\n                setFocus(activeTab);\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        },\r\n        showModal = function (item) {\r\n            createModal(item);\r\n            modalElement.style.display = \"block\";\r\n            modalElement.setAttribute(\"aria-hidden\", false);\r\n            triggerShow();\r\n            modalElement.classList.add(prefix + \"show\");\r\n\r\n            if (isSafari && isIOS) {\r\n                modalElement.classList.add(prefix + \"is-safari\");\r\n            }\r\n\r\n            DOC.body.classList.add(prefix + \"modal-open\");\r\n\r\n            backButton = modalElement && modalElement.querySelector(\"[data-dismiss='\" + prefix + \"modal']\");\r\n            backButton.addEventListener(\"click\", dismissHandler, false);\r\n            setFocusableElements();\r\n            setTimeout(function () {\r\n                setFocus(backButton);\r\n            }, 50);\r\n            modalElement.addEventListener(\"keydown\", handleModalKeydown);\r\n        },\r\n        hideModal = function () {\r\n            modalElement.classList.add(prefix + \"slide-right\");\r\n            modalElement.classList.remove(prefix + \"show\");\r\n            modalElement.setAttribute(\"aria-hidden\", true);\r\n            if (isSafari && isIOS && modalElement.classList.contains(prefix + \"is-safari\")) {\r\n                modalElement.classList.remove(prefix + \"is-safari\");\r\n            }\r\n            setTimeout(function () {\r\n                triggerHide();\r\n\r\n                DOC.body.classList.remove(prefix + \"modal-open\");\r\n                if (backButton) {\r\n                    backButton.removeEventListener(\"click\", dismissHandler, false);\r\n                }\r\n            }, 200);\r\n        },\r\n        createModal = function (tab) {\r\n            var controls = tab.getAttribute(\"aria-controls\");\r\n            var isIconElement = \r\n                (tab === tab.parentElement\r\n                    .querySelector(\".dds__icons.dds__chevron-right.dds__tab-icon\"));\r\n\r\n            if (!controls && isIconElement) {\r\n                controls = tab.parentElement.getAttribute(\"aria-controls\");\r\n            }\r\n\r\n            var tabContent = document.getElementById(controls).innerHTML;\r\n\r\n            var modalBody = modalElement.querySelector(\".\" + prefix + \"modal-body\");\r\n            modalBody.innerHTML = tabContent;\r\n        },\r\n        // triggers\r\n        triggerShow = function () {\r\n            setFocus(modalElement);\r\n        },\r\n        triggerHide = function () {\r\n            modalElement.style.display = \"\";\r\n        },\r\n        setFocusableElements = function () {\r\n            focusableEls = getFocusableElements(modalElement);\r\n            modalElement.firstFocusableEl = focusableEls[0];\r\n            modalElement.lastFocusableEl = focusableEls[focusableEls.length - 1];\r\n        },\r\n        handleBackwardTab = function (e) {\r\n            if (document.activeElement === modalElement.firstFocusableEl) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.lastFocusableEl);\r\n            }\r\n        },\r\n        handleForwardTab = function (e) {\r\n            if (document.activeElement === modalElement.lastFocusableEl) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.firstFocusableEl);\r\n            }\r\n        },\r\n        setElementWidth = function (el) {\r\n            element.style.width = el.offsetWidth + \"px\";\r\n        },\r\n        removeElementWidth = function () {\r\n            element.style.width = \"\";\r\n        },\r\n        toggleElementWidth = debounce(function () {\r\n            if (isSticky) {\r\n                setElementWidth(element.parentElement);\r\n            } else {\r\n                removeElementWidth();\r\n            }\r\n        }, 10),\r\n        toogleContent = debounce(function () {\r\n            each(targetItems, function (panel) {\r\n                if (opt.showModal && !modalSize.matches) {\r\n                    panel.classList.remove(\"modal-off\");\r\n                    panel.classList.remove(\"modal-on\");\r\n                } else {\r\n                    panel.classList.add(\"modal-off\");\r\n                    panel.classList.add(\"modal-on\");\r\n                }\r\n            });\r\n        }, 10),\r\n        // takes a number to slighly adjust scroll offset if needed        \r\n        determineSection = function (scrollOffset) {\r\n            scrollOffset = scrollOffset || 0;\r\n            for (var i = 0; i < targetItems.length; i++) {\r\n                if (targetItems[i].getBoundingClientRect().top + scrollOffset > 0) {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            return targetItems.length >= 1 ? targetItems.length : 1;\r\n        },\r\n        handleEnterEvent = function (e) {\r\n            var target = e.target;\r\n            tabbing = true;\r\n            if (e.keyCode == 9) {\r\n                if (!modalSize.matches) {\r\n                    var currentSection = (determineSection(-5) - 1);\r\n                    currentSection = currentSection < 0 ? 0 : currentSection;\r\n                    if (isIE) {\r\n                        targetItems[target.idx].scrollIntoView(true);\r\n                    } else {\r\n                        targetItems[target.idx].scrollIntoView({ behavior: \"smooth\" });\r\n                    }\r\n                    toggleTab(tabs[currentSection], tabs[target.idx]);\r\n                }\r\n            }\r\n            tabbing = false;\r\n        },\r\n        handleKeydownEvent = function (e) {\r\n            var key = e.keyCode,\r\n                idx = e.target.idx;\r\n\r\n            switch (key) {\r\n            case 9: if (!e.shiftKey) {\r\n                if (modalSize.matches) {\r\n                    e.preventDefault();\r\n                    setFocus(exitFocus);\r\n                } else {\r\n                    tabbing = true;\r\n                    var focusEl;\r\n                    each(targetItems, function (target, iter) {\r\n                        if (iter >= idx && target.focusableEls.length > 0 && !focusEl) {\r\n                            focusEl = target.focusableEls;\r\n                        }\r\n                    });\r\n                    if (focusEl) { e.preventDefault(); setFocus(focusEl[0]); }\r\n                    else if (exitFocus) { e.preventDefault(); setFocus(exitFocus); }\r\n                }\r\n            }\r\n                break;\r\n            case 13:\r\n            case 32: // enter and spacebar keys\r\n                e.preventDefault();\r\n                tabbing = false;\r\n                setFocus(e.target);\r\n                e.target.click();\r\n                break;\r\n            case 35: e.preventDefault();\r\n                setFocus(items[tabs.length - 1]);\r\n                items[tabs.length - 1].click();\r\n                break;\r\n            case 36: e.preventDefault();\r\n                setFocus(items[0]);\r\n                items[0].click();\r\n                break;\r\n            case 39: e.preventDefault();\r\n                if (idx === items.length - 1) {\r\n                    setFocus(items[0]);\r\n                } else {\r\n                    setFocus(items[idx + 1]);\r\n                }\r\n                break;\r\n            case 37: e.preventDefault();\r\n                if (idx === 0) {\r\n                    setFocus(items[items.length - 1]);\r\n                } else {\r\n                    setFocus(items[idx - 1]);\r\n                }\r\n                break;\r\n            }\r\n        },\r\n        updateItems = function () {\r\n            var section = (determineSection(-5) - 1);\r\n            section = section < 0 ? 0 : section;\r\n            for (var index = 0; index < items[\"length\"]; index++) {\r\n                var item = items[index];\r\n                if (isSticky) {\r\n                    if (index == section) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                } else {\r\n                    if (index == 0) {\r\n                        activateTab(item);\r\n                    } else {\r\n                        deactivateTab(item);\r\n                    }\r\n                }\r\n            }\r\n            return item;\r\n        },\r\n        toggleTab = function (oldItem, newItem) {\r\n            deactivateTab(oldItem);\r\n            activateTab(newItem);\r\n        },\r\n        activateTab = function (item) {\r\n            item.setAttribute(\"tabindex\", \"0\");\r\n            item.classList.add(prefix + \"active\");\r\n            item.setAttribute(\"aria-selected\", \"true\");\r\n        },\r\n        deactivateTab = function (item) {\r\n            item.setAttribute(\"tabindex\", \"-1\");\r\n            item.classList.remove(prefix + \"active\");\r\n            item.setAttribute(\"aria-selected\", \"false\");\r\n        },\r\n        activateItems = function () {\r\n            element.setAttribute(\"style\", \"display: none !important;\");\r\n            each(targetItems, function (item) {\r\n                item.setAttribute(\"style\", \"display: none;\");\r\n            });\r\n        };\r\n\r\n    // init - prevent adding event handlers twice\r\n    if (!(stringNav in element)) {\r\n\r\n        modalElement = element.dataset[\"target\"] && DOC.getElementById(element.dataset[\"target\"].substr(1));\r\n\r\n        targetNav = element.nextElementSibling;\r\n\r\n        tabs = element.querySelectorAll(\"li button\");\r\n        sticky = element.getBoundingClientRect().top;\r\n        items = [];\r\n        targetItems = [];\r\n\r\n        // populate items and targets\r\n        for (var i = 0; i < tabs.length; i++) {\r\n            tabs[i].idx = i;\r\n            items.push(tabs[i]);\r\n            items[i].addEventListener(\"click\", handleClickEvent, false);\r\n            items[i].addEventListener(\"keydown\", handleKeydownEvent, false);\r\n\r\n            var panel = document.getElementById(tabs[i].dataset[\"target\"].slice(1));\r\n            panel.scrollTop += element.offsetHeight;\r\n            panel.focusableEls = getFocusableElements(panel);\r\n\r\n            each(panel.focusableEls, function (field) {\r\n                field.addEventListener(\"keyup\", handleEnterEvent, false);\r\n                field.idx = i;\r\n            });\r\n\r\n            targetItems.push(panel);\r\n            \r\n            if (opt.showModal && modalSize.matches) {\r\n                panel.classList.add(\"modal-on\");\r\n                panel.classList.remove(\"modal-off\");\r\n            } else {\r\n                panel.classList.add(\"modal-off\");\r\n                panel.classList.remove(\"modal-off\");\r\n            }\r\n        }\r\n\r\n        if (targetItems[targetItems.length - 1].focusableEls.length == 0) { // last panel and no focusable items\r\n            DOC.addEventListener(\"DOMContentLoaded\", function () { // make sure all HTML is available prior to checking\r\n                exitFocus = getNextFocusableElement(panel);\r\n            });\r\n        }\r\n\r\n        if (modalSize.matches && !opt.showModal) {    \r\n            window.removeEventListener(\"scroll\", handleScrollEvent, false);\r\n\r\n            if (!modalElement) {\r\n                activateItems();\r\n            }\r\n\r\n            element\r\n                .setAttribute(\"style\", \"display: none !important;\");\r\n        } else {\r\n            window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n        }\r\n\r\n        window.addEventListener(\"resize\", function () {\r\n            if (modalSize.matches && !opt.showModal) {\r\n                return element\r\n                    .setAttribute(\"style\", \"display: none !important;\");\r\n            }\r\n\r\n            opt.showModal && toogleContent();\r\n\r\n            if (isIE) {\r\n                opt.showModal && stickNav(window.pageYOffset);\r\n                toggleElementWidth();\r\n            }\r\n        }, false);\r\n\r\n        modalSize.addListener(function () {\r\n            if (!modalSize.matches) {\r\n                element.removeAttribute(\"style\");\r\n                window.addEventListener(\"scroll\", handleScrollEvent, false);\r\n                if (modalElement) {\r\n                    hideModal();\r\n                }\r\n            } else {\r\n                element.classList.remove(prefix + \"active\");\r\n                var spacer = element.parentElement.querySelector(\".\" + prefix + \"nav-spacer\");\r\n                if (spacer) {\r\n                    element.parentElement.removeChild(spacer);\r\n                }\r\n                window.removeEventListener(\"scroll\", handleScrollEvent, false);\r\n                if (!modalElement) {\r\n                    activateItems();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    element[stringNav] = self;\r\n}\r\n\r\nexport function NavLeft(element, options) {\r\n    // initialization element, the element we spy on\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.menu = element.dataset.menu ? element.dataset.menu : options.menu ? options.menu : \"navLeft-list\";\r\n    options.main = element.dataset.main ? element.dataset.main : options.main ? options.main : null;\r\n    options.suffix = element.dataset.suffix ? element.dataset.suffix : options.suffix ? options.suffix : null;\r\n    options.arrows = element.dataset.arrows ? element.dataset.arrows : options.arrows ? options.arrows : \"right\"; // can be \"left\", \"right\", or \"center\"\r\n    options.selected = element.dataset.selected ? element.dataset.selected : options.selected ? options.selected : null;\r\n    options.altmenu = element.dataset.altmenu ? element.dataset.altmenu : options.altmenu ? options.altmenu : null; \r\n    options.replace = element.dataset.replace ? element.dataset.replace == \"true\" : options.replace ? options.replace == \"true\" : false; \r\n\r\n    // warn if required options are not provided\r\n    if (!options.main) {\r\n        throw new Error(\"Left Nav 'main' option must be set.\");\r\n    }\r\n\r\n    var self = this,\r\n        stringNavLeft = \"NavLeft\",\r\n        masthead,\r\n        desktopLeftNav,\r\n        siteBody,\r\n        offCanvas,\r\n        suffix,\r\n        footer,\r\n        buttonToggle,\r\n        footerHeight,\r\n        mastheadHeight,\r\n        visibleFooter,\r\n        parentAccordions = [],\r\n        focusableElms,\r\n        KEY_TAB = 9,\r\n        KEY_ESC = 27,\r\n        defaultMain = options.menu === \"navLeft-list\",\r\n        adjustHeightForFooter = function () {\r\n            if (!footer) {\r\n                return;\r\n            }\r\n            visibleFooter = (document.documentElement.clientHeight - footer.getBoundingClientRect().top);\r\n            visibleFooter = visibleFooter < 0 ? 0 : visibleFooter;\r\n            var calcHeight = (document.documentElement.clientHeight - visibleFooter);\r\n            if (visibleFooter > 0) {\r\n                buttonToggle.style.height = element.style.height = calcHeight + \"px\";\r\n            }\r\n            if (suffix) {\r\n                if (visibleFooter > 0) {\r\n                    suffix.style.bottom = visibleFooter + \"px\";\r\n                }\r\n                desktopLeftNav.style.maxHeight = (document.documentElement.clientHeight - suffix.getBoundingClientRect().height - footerHeight) + \"px\";\r\n            }\r\n        },\r\n        adjustHeightForMasthead = function () {\r\n            if (!masthead) {\r\n                return;\r\n            }\r\n            var calcHeight;\r\n            mastheadHeight = masthead.getBoundingClientRect().height;\r\n            if (window.pageYOffset > mastheadHeight) {\r\n                // if masthead not is visible\r\n                element.style.top = \"0px\";\r\n                if (!isFooterVisible()) {\r\n                    buttonToggle.style.height = element.style.height = document.documentElement.clientHeight + \"px\";\r\n                } else {\r\n                    buttonToggle.style.height = element.style.height = (document.documentElement.clientHeight  - visibleFooter)+ \"px\";\r\n                }\r\n            } else {\r\n                element.style.top = (mastheadHeight - window.pageYOffset) + \"px\";\r\n                if (isFooterVisible()) {\r\n                    calcHeight = (parseInt(window.getComputedStyle(element).height, 10) - (mastheadHeight - window.pageYOffset));\r\n                    buttonToggle.style.height = element.style.height = calcHeight + \"px\";\r\n                } else {\r\n                    calcHeight = (document.documentElement.clientHeight - mastheadHeight + window.pageYOffset);\r\n                    buttonToggle.style.height = element.style.height = calcHeight + \"px\";\r\n                }\r\n            }\r\n        },\r\n        alignChevrons = function(accordionButtons) {\r\n            if (accordionButtons) {\r\n                if (options.arrows === \"right\") {\r\n                    each(accordionButtons, function (accordionButton) {\r\n                        classAdd(accordionButton, prefix + \"navLeft-button-optionRight\");\r\n                    });\r\n                } else if (options.arrows === \"center\") {\r\n                    each(accordionButtons, function (accordionButton) {\r\n                        classAdd(accordionButton, prefix + \"navLeft-button-optionCenter\");\r\n                        accordionButton.children[1].after(accordionButton.children[0]);\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        cloneLeftNavToOffCanvas = function () {\r\n            if (defaultMain && !options.altmenu) {\r\n                return;\r\n            }\r\n            var offCanvasCloneSuffix = \"-offCanvas\";\r\n            if (options.altmenu) {\r\n                each(DOC.getElementById(options.altmenu).children, function (li) {\r\n                    offCanvas.leftMenu.querySelector(\"ul\").appendChild(li.cloneNode(true));\r\n                });\r\n                DOC.getElementById(options.altmenu).parentElement.removeChild(DOC.getElementById(options.altmenu));\r\n            } else {\r\n                each(element.querySelectorAll(\".\" + prefix + \"navLeft-list>li\"), function (li) {\r\n                    offCanvas.leftMenu.querySelector(\"ul\").appendChild(li.cloneNode(true));\r\n                });\r\n            }\r\n            each(offCanvas.leftMenu.querySelectorAll(\".\" + prefix + \"accordion\"), function(lnAccordion) {\r\n                lnAccordion.id = lnAccordion.id + offCanvasCloneSuffix;\r\n                lnAccordion.querySelector(\".\" + prefix + \"accordion-btn\").setAttribute(\"data-parent\", \r\n                    lnAccordion.querySelector(\".\" + prefix + \"accordion-btn\").getAttribute(\"data-parent\").substr(1) + offCanvasCloneSuffix);\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\".\" + prefix + \"accordion-card-header\"), function(lnCardHeader) {\r\n                lnCardHeader.id = lnCardHeader.id + offCanvasCloneSuffix;\r\n                lnCardHeader.nextElementSibling.setAttribute(\"aria-labelledby\", \r\n                    lnCardHeader.nextElementSibling.getAttribute(\"aria-labelledby\") + offCanvasCloneSuffix);\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\".\" + prefix + \"collapse\"), function(lnCollapse) {\r\n                lnCollapse.id = lnCollapse.id + offCanvasCloneSuffix;\r\n                if (lnCollapse.previousElementSibling.querySelector(\".\" + prefix + \"accordion-btn\")) {\r\n                    lnCollapse.previousElementSibling.querySelector(\".\" + prefix + \"accordion-btn\").setAttribute(\"data-target\", \r\n                        lnCollapse.previousElementSibling.querySelector(\".\" + prefix + \"accordion-btn\").getAttribute(\"data-target\") + offCanvasCloneSuffix);\r\n                    lnCollapse.previousElementSibling.querySelector(\".\" + prefix + \"accordion-btn\").setAttribute(\"aria-controls\", \r\n                        lnCollapse.previousElementSibling.querySelector(\".\" + prefix + \"accordion-btn\").getAttribute(\"aria-controls\") + offCanvasCloneSuffix);\r\n                }\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\"a\"), function(lnAnchor) {\r\n                if(lnAnchor.id) {\r\n                    lnAnchor.id = lnAnchor.id + offCanvasCloneSuffix;\r\n                }\r\n            });\r\n            \r\n            // define focusable offcanvas elements\r\n            focusableElms = getFocusableElements(DOC.querySelector(\".\" + prefix + \"msthd-top .\" + prefix + \"navLeft\"));\r\n\r\n            \r\n            // reinit offcanvas collapses\r\n            each(offCanvas.leftMenu.querySelectorAll(\"[data-toggle='\" + prefix + \"collapse']\"), function (collapse) {\r\n                new Collapse(collapse);\r\n            });\r\n        },\r\n        createOffCanvasMenu = function () {\r\n            if (defaultMain && !options.altmenu) {\r\n                return;\r\n            }\r\n            // remove header menu\r\n            offCanvas = {\r\n                mastheadMend: masthead.querySelectorAll(\".\" + prefix + \"msthd-offcanvas-menu\")[0],\r\n                parent: undefined,\r\n                storedId: undefined,\r\n                leftMenu: element.querySelectorAll(\".\" + prefix + \"msthd-offcanvas-menu\")[0]\r\n            };\r\n            if (offCanvas.mastheadMend) {\r\n                offCanvas.parent = offCanvas.mastheadMend.parentElement;\r\n                offCanvas.storedId = offCanvas.mastheadMend.id;\r\n                offCanvas.parent.removeChild(offCanvas.mastheadMend);\r\n            } else {\r\n                throw new Error(\"Left Nav cannot initialize without a masthead component in the header element.\");\r\n            }\r\n\r\n            // reassign ID to leftNav's offCanvas\r\n            offCanvas.leftMenu.id = offCanvas.storedId;\r\n            if (offCanvas.parent) {\r\n                offCanvas.parent.appendChild(offCanvas.leftMenu);\r\n            }\r\n        },\r\n        expandSelection = function () {\r\n            if (!options.selected) {\r\n                return;\r\n            }\r\n            each(parentAccordions, function(stepAccord) {\r\n                var aButton = stepAccord.querySelector(\".\" + prefix + \"accordion-btn\"),\r\n                    aChevron = stepAccord.querySelector(\".\" + prefix + \"accordion-btn i\"),\r\n                    aCollapse = stepAccord.querySelector(\".\" + prefix + \"collapse\");\r\n                aButton.setAttribute(\"aria-expanded\", true);\r\n                classAdd(aChevron, prefix + \"navLeft-icon-rotate\");\r\n                one(aButton, \"click\", function(event) {\r\n                    each(getClosest(event.target, \".\" + prefix + \"accordion\", true).querySelectorAll(\".\" + prefix + \"accordion-btn i\"), function(thisChevron) {\r\n                        classRemove(thisChevron, prefix + \"navLeft-icon-rotate\");\r\n                    });\r\n                });\r\n                aCollapse.setAttribute(\"aria-expanded\", true);\r\n                classAdd(aCollapse, prefix + \"show\");\r\n            });\r\n\r\n            setTimeout(function() {\r\n                each(element.querySelectorAll(\".\" + prefix + \"navLeft-list\"), function(list) {\r\n                    var selectedLink = list.querySelector(\".\" + prefix + \"navLeft-link-selected\");\r\n                    if (selectedLink) {\r\n                        selectedLink.scrollIntoView();\r\n                    }\r\n                });\r\n            }, 500);\r\n        },\r\n        handleAdjustmentEvent = function () {\r\n            adjustHeightForFooter();\r\n            adjustHeightForMasthead();\r\n        },\r\n        handleBackClick = function () {\r\n            var activeContainer = masthead.querySelector(\".\" + prefix + \"msthd-offcanvas-menu\");\r\n            var activeButton = masthead.querySelector(\"[data-toggle='\" + prefix + \"msthd-offcanvas']\");\r\n            uicoreCustomEvent(\"LeftNav\", \"CloseEvent\", element, {\"button\": activeButton, \"container\": activeContainer});\r\n        },\r\n        handleOffCanvasKeyDown = function (e) {\r\n            switch(e.keyCode) {\r\n            case KEY_TAB:\r\n                if ( focusableElms.length === 1 ) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if ( e.shiftKey ) {\r\n                    handleBackwardTab(e);\r\n                } else {\r\n                    handleForwardTab(e);\r\n                }\r\n                break;\r\n            case KEY_ESC: {\r\n                handleBackClick();\r\n                break;   \r\n            }\r\n            default:\r\n                break;\r\n            }\r\n        },\r\n        handleBackwardTab = function (e) {\r\n            if ( DOC.activeElement === focusableElms[0] ) {\r\n                e.preventDefault();\r\n                focusableElms[focusableElms.length-1].focus();\r\n            }\r\n        },\r\n        handleForwardTab = function (e) {\r\n            if ( DOC.activeElement === focusableElms[focusableElms.length-1] ) {\r\n                e.preventDefault();\r\n                focusableElms[0].focus();\r\n            }\r\n        },\r\n        handleOffCanvasItemEsc = function (e) {\r\n            switch(e.keyCode) {\r\n            case KEY_ESC: {\r\n                handleBackClick();\r\n                break;   \r\n            }\r\n            default:\r\n                break;\r\n            }    \r\n        },\r\n        handleOffCanvasOpenEvent = function () {\r\n            each(focusableElms, function(fElement) { // top level categories\r\n                fElement.addEventListener(\"keydown\", handleOffCanvasKeyDown, false);\r\n            });\r\n            // add eventListener to offCanvas menu choices, but not categories\r\n            each(offCanvas.leftMenu.querySelectorAll(\"li a\"), function(aItem) {\r\n                aItem.addEventListener(\"keydown\", handleOffCanvasItemEsc);\r\n                aItem.addEventListener(\"click\", handleBackClick);\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\"li button\"), function(aItem) {\r\n                aItem.addEventListener(\"keydown\", handleOffCanvasItemEsc);\r\n            });\r\n            if (DOC.body.classList.contains(\"user-is-tabbing\")) {\r\n                setTimeout(function() {\r\n                    setFocus(focusableElms[0]);\r\n                }, 200);\r\n            }\r\n        },\r\n        handleOffCanvasCloseEvent = function () {\r\n            each(focusableElms, function(fElement) {\r\n                fElement.removeEventListener(\"keydown\", handleOffCanvasKeyDown, false);\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\"li a\"), function(aItem) {\r\n                aItem.removeEventListener(\"keydown\", handleOffCanvasItemEsc);\r\n                aItem.removeEventListener(\"click\", handleBackClick);\r\n            });\r\n            each(offCanvas.leftMenu.querySelectorAll(\"li button\"), function(aItem) {\r\n                aItem.removeEventListener(\"keydown\", handleOffCanvasItemEsc);\r\n            });\r\n            if (DOC.body.classList.contains(\"user-is-tabbing\")) {\r\n                setTimeout(function() {\r\n                    setFocus(masthead.querySelector(\"[data-toggle='\" + prefix + \"msthd-offcanvas']\"));\r\n                }, 200);\r\n            }\r\n            ariaAnnounce(\r\n                masthead.querySelector(\"[data-toggle='\" + prefix + \"msthd-offcanvas']\").getAttribute(\"aria-label\") + \" \" + \r\n                masthead.querySelector(\"[data-toggle='\" + prefix + \"msthd-offcanvas']\").getAttribute(\"aria-expanded\")\r\n            );\r\n        },\r\n        handleToggleClick = function () { // active in this case means the site body is fully expanded, or that the leftnav has been altered from its initial state (thus, collapsed)\r\n            if (element.classList[\"contains\"](prefix + \"active\")) {\r\n                classRemove(element, prefix + \"active\");\r\n                classRemove(siteBody, prefix + \"active\");\r\n                classRemove(buttonToggle.querySelector(\"svg\"), prefix + \"rotate-180\");\r\n                buttonToggle.setAttribute(\"aria-expanded\", \"true\");\r\n                element.querySelector(\"#navLeft-list\").style.display = \"\";\r\n            } else {\r\n                classAdd(element, prefix + \"active\");\r\n                classAdd(siteBody, prefix + \"active\");\r\n                classAdd(buttonToggle.querySelector(\"svg\"), prefix + \"rotate-180\");\r\n                buttonToggle.setAttribute(\"aria-expanded\", \"false\");\r\n                element.querySelector(\"#navLeft-list\").style.display = \"none\";\r\n            }\r\n            setTimeout(function () {\r\n                adjustHeightForFooter();\r\n                adjustHeightForMasthead();\r\n            }, 200);\r\n        },\r\n        highlightSelection = function () {\r\n            if (!options.selected) {\r\n                return;\r\n            }\r\n            var anchortags = DOC.querySelectorAll(\"a[href*='\" + options.selected + \"']\");\r\n            each(anchortags, function (tag) {\r\n                var ps = tag.parentElement.previousElementSibling;\r\n                if (ps && ps.tagName.toLowerCase() === \"li\") {\r\n                    classAdd(ps, prefix + \"navLeft-link-selectedPrev\");\r\n                }\r\n                classAdd(tag.parentElement, prefix + \"navLeft-link-selected\");\r\n                // take note of parent accordions\r\n                var parentAccordion = getClosest(tag, \".\" + prefix + \"accordion\", true);\r\n                do {\r\n                    parentAccordions.push(parentAccordion);\r\n                    parentAccordion = getClosest(parentAccordion.parentElement, \".\" + prefix + \"accordion\", true);\r\n                } while (parentAccordion);\r\n                parentAccordions = parentAccordions.reverse();\r\n            });\r\n        },\r\n        isFooterVisible = function () {\r\n            return footer ? DOC.body.offsetHeight >= footer.getBoundingClientRect().top : false;\r\n        };\r\n\r\n    // init\r\n    if (!(stringNavLeft in element)) { // prevents adding event handlers twice\r\n        var pageReadyCount = 0,\r\n            pageReadyInterval = 50,\r\n            maxPageReadyTry = 5000;\r\n        // assign global variables\r\n        desktopLeftNav = element.querySelector(\".\" + prefix + \"navLeft\");\r\n        siteBody = DOC.getElementById(options.main);\r\n        buttonToggle = element.querySelector(\".\" + prefix + \"navLeft-btn-toggle\");\r\n\r\n        // add event handlers\r\n        window.addEventListener(\"scroll\", handleAdjustmentEvent);\r\n        window.addEventListener(\"resize\", handleAdjustmentEvent);\r\n        if (options.menu.length > 0 || options.altmenu.length > 0) { // otherwise let masthead continue to manage offcanvas\r\n            DOC.addEventListener(\"uicMastheadOffCanvasOpen\", handleOffCanvasOpenEvent, false);\r\n            DOC.addEventListener(\"uicMastheadOffCanvasClose\", handleOffCanvasCloseEvent, false);\r\n        }\r\n        buttonToggle.addEventListener(\"click\", handleToggleClick);\r\n\r\n        // adjust initial page elements\r\n        if (!defaultMain) {\r\n            if (DOC.getElementById(options.menu)) {\r\n                DOC.getElementById(options.menu).hidden = true;\r\n            } else {\r\n                throw new Error(\"Element not found by ID ('\" + options.menu + \"') for left nav menu choices.\");\r\n            }\r\n        }\r\n        if (options.altmenu) {\r\n            if (DOC.getElementById(options.altmenu)) {\r\n                DOC.getElementById(options.altmenu).hidden = true;\r\n            } else {\r\n                throw new Error(\"Element not found by ID ('\" + options.altmenu + \"') for left nav (offcanvas) menu choices.\");\r\n            }\r\n        }\r\n        classAdd(siteBody, prefix + \"body-ml-20\");\r\n        if (options.suffix) {\r\n            suffix = DOC.getElementById(options.suffix);\r\n            element.querySelector(\"nav\").appendChild(suffix);\r\n            classAdd(suffix, prefix + \"navLeft-suffix\");\r\n        }\r\n\r\n        // move user's leftNav options into our HTML structure\r\n        if (!defaultMain) {\r\n            each(DOC.getElementById(\"navLeft-list\").querySelectorAll(\"li\"), function(oneLi) {\r\n                oneLi.parentElement.removeChild(oneLi);\r\n            });\r\n            var developerLinks = DOC.querySelectorAll(\"#\" + options.menu + \">ul>li\").length ? \r\n                DOC.querySelectorAll(\"#\" + options.menu + \">ul>li\") : \r\n                DOC.querySelectorAll(\"#\" + options.menu + \">li\");\r\n            each(developerLinks, function(thisLi) {\r\n                element.querySelector(\".\" + prefix + \"navLeft-list\").appendChild(thisLi);\r\n            });\r\n            DOC.getElementById(options.menu).parentElement.removeChild(DOC.getElementById(options.menu));\r\n        }\r\n\r\n        // Remove masthead horizontal menu if it exists\r\n        if (options.replace) {\r\n            var headerHorizontalMenu = DOC.querySelector(\".\" + prefix + \"msthd-navbar-bottom\");\r\n            if (headerHorizontalMenu) {\r\n                headerHorizontalMenu.parentElement.removeChild(headerHorizontalMenu);\r\n            }\r\n        }\r\n\r\n        // align accordion chevrons\r\n        alignChevrons(element.querySelectorAll(\".\" + prefix + \"accordion button\"));\r\n        if (options.altmenu) {\r\n            alignChevrons(document.getElementById(options.altmenu).querySelectorAll(\".\" + prefix + \"accordion button\"));\r\n        }\r\n\r\n        // assign global variables that have dependencies\r\n        var pageReady = function() {\r\n            footer = DOC.querySelector(\"footer\");\r\n            masthead = DOC.querySelector(\"header\");\r\n            footerHeight = footer.getBoundingClientRect().height;\r\n            createOffCanvasMenu();\r\n            cloneLeftNavToOffCanvas();\r\n            // set initial heights of elements\r\n            adjustHeightForFooter();\r\n            adjustHeightForMasthead();\r\n            element.style.top = mastheadHeight;\r\n            if (!isIE) { // this is a bonus check for guaranteed initial display. IE doesn't Promise, so it's skip IE, or use a polyfill.\r\n                Promise.all(Array.from(DOC.images).filter(function (img) { !img.complete; }).map(function (img) { new Promise(function (resolve) { { img.onload = img.onerror = resolve; } }); })).then(function () {\r\n                    adjustHeightForFooter();\r\n                    adjustHeightForMasthead();\r\n                });\r\n            }\r\n            highlightSelection();\r\n            expandSelection();\r\n            ResizeElement();\r\n        };\r\n\r\n        // wait for header and footer. Will be instant unless page load time is abnormally lengthy\r\n        var waitForLeftNav = function() {\r\n            if (pageReadyCount < maxPageReadyTry) {\r\n                if (DOC.querySelector(\"footer\") && DOC.querySelector(\"header\")) {\r\n                    setTimeout(pageReady, pageReadyInterval);\r\n                } else {\r\n                    setTimeout(waitForLeftNav, pageReadyInterval);\r\n                }\r\n                pageReadyCount += pageReadyInterval;\r\n            } else {\r\n                throw new Error(\"Unable to initialize Left Nav component due to page load timeout.\");\r\n            }\r\n        };\r\n\r\n        waitForLeftNav();\r\n    }\r\n\r\n\r\n    element[stringNavLeft] = self;\r\n}\r\n","import { DOC, prefix, createElement, isArray, uicoreCustomEvent, isIE, each, validateNum, renderSvg, flush } from \"./utilities.js\";\r\n\r\nexport default function Pagination(element, options) {\r\n\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    var jsonParams = element.dataset.page;\r\n    if (jsonParams) {\r\n        options = JSON.parse(jsonParams);\r\n    }\r\n\r\n    // set options\r\n    options = options || {};\r\n    options.items =  validateNum(options.items, 1);\r\n    options.filter = element.classList.contains(prefix + \"pagination-justified-filter\") ? true : false;\r\n    options.pageText = typeof options.pageText === \"string\" ? options.pageText : \"Page\";\r\n    options.itemsPerPageText = typeof options.itemsPerPageText === \"string\" ? options.itemsPerPageText : \"Items per page\";\r\n    options.perPageSelect = options.perPageSelect ? options.perPageSelect : [12, 24, 48, 96];\r\n    if (isArray(options.perPageSelect)) {\r\n        if (typeof options.perPageSelect[0] === \"number\") {\r\n            options.perPageSelect = options.perPageSelect.map(function(i) { \r\n                i = Math.abs(parseInt(i));\r\n                return i;\r\n            });\r\n        } else if (validateNum(options.perPageSelect[0])) {\r\n            options.perPageSelect = options.perPageSelect.map(function(i) { \r\n                i = Math.abs(parseInt(i));\r\n                return i;\r\n            });\r\n        } else {\r\n            throw new Error(\"Invalid perPageSelect. Should be a non-empty array of integer\");\r\n        }\r\n    } else {\r\n        options.perPageSelect = [12,24,28,96];\r\n    }\r\n    options.perPage = options.perPageSelect.indexOf(options.perPage) > -1 ? validateNum(options.perPage) : options.perPageSelect[0];\r\n    options.hidePages = options.hidePages && typeof options.hidePages === \"boolean\" ? options.hidePages : false;\r\n    options.external = options.external != null && typeof options.external === \"boolean\" ? options.external : false;\r\n    options.buttonLabelLeft = options.buttonLabelLeft ? options.buttonLabelLeft : \"Previous\";\r\n    options.buttonLabelRight = options.buttonLabelRight ? options.buttonLabelRight : \"Next\";\r\n    options.disablePaginationInput = options.disablePaginationInput != null && typeof options.disablePaginationInput === \"boolean\" ? options.disablePaginationInput : false;\r\n    options.showTotal = options.showTotal && typeof options.showTotal === \"string\" ? options.showTotal : false;\r\n\r\n    var self = this,\r\n        stringPagination = \"Pagination\",\r\n        template = \"{total}{pager}{select}\",\r\n        pagination,\r\n        prevText = options.buttonLabelLeft,\r\n        nextText = options.buttonLabelRight,\r\n        currentPage,\r\n        origPerPage = options.perPage,\r\n        previousPerPage,\r\n        newPage,\r\n        totalPages,\r\n        newTotalPages,\r\n        lastPage,\r\n        onFirstPage,\r\n        onLastPage,\r\n        links,\r\n        // handlers\r\n        handlePaginationEvent = function(e) {\r\n            var target;\r\n            if (e.target.dataset[\"page\"]) {\r\n                target = e.target;\r\n            } else {\r\n                target = e.target.parentNode;\r\n            }\r\n            var name = target.getAttribute(\"aria-label\");\r\n            var focusBtn;\r\n\r\n            var buttons = pagination.querySelectorAll(\"button\");\r\n            for (var idx = 0;idx < buttons.length;idx++) {\r\n                if (target === buttons[idx]) {\r\n                    focusBtn = buttons[idx];\r\n                    break;\r\n                } \r\n            }\r\n\r\n            if (!options.external) {\r\n                if (target.dataset[\"page\"]) {\r\n                    self.page(target.dataset[\"page\"]);\r\n                }\r\n            } else {\r\n                uicoreCustomEvent(\"Pagination\", \"PageChangeEvent\", element, { \"page\": target.dataset[\"page\"], \"perPage\" : options.perPage, \"pages\" : totalPages });\r\n            }\r\n\r\n            focusBtn = pagination.querySelector(\"[aria-label=\\\"\"+name+\"\\\"]\"),\r\n            focusBtn.focus();\r\n\r\n        },\r\n        handleKeydownEvent = function(e) {\r\n            if(e.keyCode == 13) {\r\n                if(e.target.value <= totalPages && e.target.value > 0) {\r\n                    if (!options.external) {\r\n                        self.page(e.target.value);\r\n                    } else {\r\n                        uicoreCustomEvent(\"Pagination\", \"PageChangeEvent\", element, { \"page\": e.target.value, \"perPage\" : options.perPage, \"pages\" : totalPages });\r\n                    }\r\n                } else {\r\n                    e.target.value = currentPage;\r\n                }\r\n                var queryStr = e.target.tagName;\r\n                each(e.target.classList, function(clazz) {\r\n                    queryStr += \".\" + clazz;\r\n                });\r\n                pagination.querySelector(queryStr).focus();\r\n            }\r\n        },\r\n        handleFocusoutEvent = function(e) {\r\n            if(e.target.value != currentPage) {\r\n                e.target.value = currentPage;\r\n            } else {\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        handleChangeEvent = function(e) {\r\n            if (e.target.value != options.perPage) {\r\n                previousPerPage = options.perPage;\r\n                options.perPage = parseInt(e.target.value);\r\n                if (!options.external) {\r\n                    update();\r\n                } else {\r\n                    renderPage(); \r\n                    uicoreCustomEvent(\"Pagination\", \"PerPageChangeEvent\", element, { \"page\": currentPage, \"perPage\" : options.perPage, \"pages\" : totalPages });\r\n                }\r\n                var queryStr = e.target.tagName;\r\n                each(e.target.classList, function(clazz) {\r\n                    queryStr += \".\" + clazz;\r\n                });\r\n                element.querySelector(queryStr).focus();\r\n            }\r\n        },\r\n        // dynamic ui\r\n        render = function() {\r\n            if (options.showTotal) {\r\n                var totalItems = createElement(\"div\", {\r\n                    class: prefix + \"pagination-total-items\"\r\n                });\r\n                var spanItems = createElement(\"span\", {\r\n                    html: options.items + \" \" + options.showTotal\r\n                });\r\n                totalItems.appendChild(spanItems);\r\n                template = template.replace(\"{total}\", totalItems.outerHTML);\r\n            } else {\r\n                template = template.replace(\"{total}\", \"\");\r\n            }\r\n\r\n            var paginator = createElement(\"ul\", {\r\n                class: prefix + \"pagination-list\",\r\n                role: \"presentation\"\r\n            });\r\n    \r\n            // Pager placement\r\n            template = template.replace(\"{pager}\", paginator.outerHTML);\r\n\r\n            // Per Page Select placement\r\n            if (options.filter) {\r\n                var wrap = \"<div class='\" + prefix + \"perpage'></div>\";\r\n    \r\n                // Selector placement\r\n                template = template.replace(\"{select}\", wrap);\r\n            } else {\r\n                template = template.replace(\"{select}\", \"\");\r\n            }\r\n\r\n            element.innerHTML = template;\r\n\r\n            pagination = element.querySelector(\".\" + prefix + \"pagination-list\");\r\n\r\n            if (options.items < options.perPage) {\r\n                pagination.classList.add(prefix + \"pagination-hidden\");\r\n            }\r\n\r\n            update();\r\n        },\r\n        renderPage = function () {\r\n            var origCurrentPage = currentPage;\r\n\r\n            if (newPage) {\r\n                currentPage = newPage;\r\n                newPage = null;\r\n            } else if (previousPerPage) {\r\n                var firstItemOnPage = ( (origCurrentPage - 1) * previousPerPage) + 1;\r\n                currentPage = Math.ceil(firstItemOnPage / options.perPage);\r\n                previousPerPage = null;\r\n            } else if (newTotalPages && currentPage > newTotalPages) {\r\n                currentPage = newTotalPages;\r\n            }\r\n\r\n            onFirstPage = currentPage === 1;\r\n            onLastPage = currentPage === lastPage;\r\n\r\n            if (origCurrentPage != currentPage) {\r\n                uicoreCustomEvent(\"Pagination\", \"PageUpdateEvent\", element, { \"page\": currentPage, \"perPage\" : options.perPage, \"pages\" : totalPages });\r\n            }\r\n        },\r\n        renderPageInput = function() {\r\n            var pageInputWrapper = createElement(\"li\", {\r\n                class: prefix + \"pagination-input-ctnr\"\r\n            });\r\n            if (options.hidePages) {\r\n                pageInputWrapper.classList.add(prefix + \"d-none\");\r\n            }\r\n            var pageInputTextBefore = createElement(\"label\", {\r\n                html: options.pageText\r\n            });\r\n            var pageInputField = createElement(\"input\", {\r\n                class: prefix + \"form-control \" + prefix + \"text-center\" ,\r\n                type: \"text\",\r\n                value: currentPage,\r\n                \"aria-label\": \"Page \" + currentPage + \" of \" +  (newTotalPages ? newTotalPages : totalPages)\r\n            });\r\n            pageInputField.disabled = options.disablePaginationInput;\r\n            var pageInputTextAfter = createElement(\"label\", {\r\n                html: \"of \" +  (newTotalPages ? newTotalPages : totalPages)\r\n            });\r\n            \r\n            pageInputWrapper.appendChild(pageInputTextBefore);\r\n            pageInputWrapper.appendChild(pageInputField);\r\n            pageInputWrapper.appendChild(pageInputTextAfter);\r\n            return pageInputWrapper;\r\n        },\r\n        renderPager = function () {\r\n            var origTotalPages = totalPages,\r\n                pages = newTotalPages ? newTotalPages : totalPages;\r\n\r\n            flush(pagination, isIE);\r\n    \r\n            if (pages > 1) {\r\n                var frag = DOC.createDocumentFragment(),\r\n                    prev = onFirstPage ? 1 : currentPage - 1,\r\n                    next = onLastPage ? pages : currentPage + 1;\r\n    \r\n                frag.appendChild(button(\"dds__btn dds__btn-secondary dds__page-item\", prev, prevText));\r\n    \r\n                each(links, function(p) {\r\n                    frag.appendChild(p);\r\n                });\r\n    \r\n                frag.appendChild(button(\"dds__btn dds__btn-secondary dds__page-item\", next, nextText));\r\n            \r\n                pagination.appendChild(frag.cloneNode(true));\r\n                // add in click and keydown listeners\r\n                each(pagination.querySelectorAll(\"li\"), function(el) {\r\n                    var hasInput = el.querySelector(\"input\");\r\n                    var hasButton = el.querySelector(\"button\");\r\n                    if(hasButton) {\r\n                        el.addEventListener(\"click\", handlePaginationEvent, true);\r\n                    }\r\n                    if(hasInput) {\r\n                        hasInput.addEventListener(\"keydown\", handleKeydownEvent, false);\r\n                        hasInput.addEventListener(\"focusout\", handleFocusoutEvent, false);\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (pages != origTotalPages || newTotalPages) {\r\n                totalPages = pages;\r\n                newTotalPages = null;\r\n                uicoreCustomEvent(\"Pagination\", \"PerPageUpdateEvent\", element, { \"page\": currentPage, \"perPage\" : options.perPage, \"pages\" : totalPages });\r\n            }\r\n        },\r\n        renderSelect = function() {\r\n            var el = element.querySelector(\".\" + prefix + \"perpage\");\r\n            if (el) { flush(el, isIE); }\r\n            var select = createElement(\"select\",{\r\n                class: prefix + \"form-control\"\r\n            });\r\n\r\n            // Create the options\r\n            each(options.perPageSelect, function(val) {\r\n                var option;\r\n                if (val == options.perPage) {\r\n                    option = new Option(val, val, true, true);\r\n                } else {\r\n                    option = new Option(val, val, false, false);\r\n                }\r\n                select.add(option);\r\n            });\r\n\r\n            var label = createElement(\"label\", {\r\n                html: options.itemsPerPageText\r\n            });\r\n\r\n            // Custom label\r\n            el.innerHTML = \"\";\r\n            el.appendChild(select);\r\n            el.appendChild(label);\r\n\r\n            select.addEventListener(\"change\", handleChangeEvent, false);\r\n\r\n        },\r\n        renderTotalItems = function() {\r\n            var totalItemsWrapper = element.querySelector(\".\" + prefix + \"pagination-total-items\");\r\n            flush(totalItemsWrapper, isIE);\r\n            totalItemsWrapper.appendChild(createElement(\"span\", {html: options.items + \" \" + options.showTotal}));\r\n        },\r\n        button = function (c, p, t) {\r\n            var el = createElement(\"li\");\r\n\r\n            var bEl = createElement(\"button\", {\r\n                class: c + \" \" + prefix + \"pager-link\",\r\n\r\n                \"aria-label\": t,\r\n                \"data-page\": p\r\n            });\r\n            \r\n            var span = createElement(\"span\", {\r\n                html: t\r\n            });\r\n            bEl.appendChild(span);\r\n            var svgElem;\r\n            if (t === prevText) {\r\n                svgElem = renderSvg([{name:\"chevron-left\", show:true}]);\r\n                svgElem.setAttribute(\"name\",\"chevron-left\");\r\n                bEl.insertBefore(svgElem, span);\r\n                if (onFirstPage) {\r\n                    bEl.setAttribute(\"disabled\",\"\");\r\n                }\r\n            } else if (t === nextText) {\r\n                svgElem = renderSvg([{name:\"chevron-right\", show:true}]);\r\n                svgElem.setAttribute(\"name\",\"chevron-right\");\r\n                bEl.appendChild(svgElem);\r\n                if (onLastPage) {\r\n                    bEl.setAttribute(\"disabled\",\"\");\r\n                }\r\n            }\r\n            el.appendChild(bEl);\r\n\r\n            return el;\r\n        },\r\n        paginate = function () {\r\n            var pages;\r\n\r\n            if (options.items < options.perPage) {\r\n                pages = 1;\r\n            } else {\r\n                pages = Math.ceil( (options.items / options.perPage) );\r\n            }\r\n            if (!totalPages) {\r\n                totalPages = lastPage = pages;\r\n            } else {\r\n                newTotalPages = lastPage = pages;\r\n            }\r\n        },\r\n        update = function() {\r\n\r\n            if (options.items < options.perPage) {\r\n                pagination.classList.add(prefix + \"pagination-hidden\");\r\n            } else if (pagination.classList.contains(prefix + \"pagination-hidden\")) {\r\n                pagination.classList.remove(prefix + \"pagination-hidden\");\r\n            }\r\n\r\n            paginate(); \r\n\r\n            renderPage();\r\n    \r\n            links = [renderPageInput()];\r\n    \r\n            renderPager();\r\n\r\n            if(options.filter) {\r\n                renderSelect();\r\n            }\r\n\r\n            if (options.showTotal) {\r\n                renderTotalItems();\r\n            }\r\n        };\r\n\r\n\r\n\r\n    /**\r\n     * Changes the page to the number passed in\r\n     * @param  {int} num\r\n     * @return {void}\r\n     */\r\n    this.page = function(num) {\r\n        \r\n        newPage = validateNum(num);\r\n\r\n        if (!newPage\r\n            || newPage == currentPage \r\n            || newPage > totalPages \r\n            || newPage < 0\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        update();\r\n    };\r\n\r\n    /**\r\n     * Changes the value chosen in the per-page selection input\r\n     * @param  {int} num\r\n     * @return {void}\r\n     */\r\n    this.perPage = function(num) {\r\n        var newPerPage = validateNum(num);\r\n\r\n        if (!newPerPage) {\r\n            return false;\r\n        } else {\r\n            options.perPage = newPerPage;\r\n        }\r\n\r\n        update();\r\n    };\r\n    \r\n    /**\r\n     * Adds the amount of items passed in\r\n     * @param  {int} num\r\n     * @return {void}\r\n     */\r\n    this.addItems = function(num) {\r\n        \r\n        var addItems = validateNum(num);\r\n\r\n        if (!addItems) {\r\n            return false;\r\n        } else {\r\n            options.items += addItems;\r\n        }\r\n\r\n        update();\r\n    };\r\n\r\n    /**\r\n     * Removes the amount of items passed in\r\n     * @param  {int} num\r\n     * @return {void}\r\n     */\r\n    this.removeItems = function(num) {\r\n        \r\n        var remItems = validateNum(num);\r\n\r\n        if (!remItems) {\r\n            return false;\r\n        } else {\r\n            options.items -= remItems;\r\n        }\r\n\r\n        update();\r\n    };\r\n\r\n    /**\r\n     * Sets the total number of items to the number passed in\r\n     * @param  {int} num\r\n     * @return {void}\r\n     */\r\n    this.setItems = function(num) {\r\n        \r\n        var newItems = validateNum(num);\r\n        if (newItems == undefined || newItems == null) {\r\n            if (num === 0) options.items = 0;\r\n            pagination.classList.add(prefix + \"pagination-hidden\");\r\n            return false;\r\n        } else {\r\n            options.items = newItems;\r\n            if (options.items === 0) {\r\n                options.perPage = origPerPage;\r\n                previousPerPage = null;\r\n            }\r\n        }\r\n\r\n        update();\r\n    };\r\n\r\n    /**\r\n     * Return the calculated pages\r\n     * @return {int} totalPages\r\n     */\r\n    this.pages = function() {\r\n        return totalPages;\r\n    };\r\n\r\n    //init\r\n    if (!(stringPagination in element)) {\r\n        currentPage = 1;\r\n        render();\r\n    }\r\n\r\n    element[stringPagination] = self;\r\n}","import { DOC, emulateTransitionEnd, globalObject, getClosest, prefix, styleTip, uicoreCustomEvent, getFullScreenOverlay, createElement, jsonOptionsInit} from \"./utilities.js\";\r\n\r\nexport default function Popover(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.delay = element.dataset.delay ? parseInt(element.dataset.delay) : options.delay ? parseInt(options.delay) : 10;\r\n    options.title = element.dataset.title ? element.dataset.title : options.data_title ? options.data_title : null;\r\n    options.content = element.dataset.content ? element.dataset.content : options.data_content ? options.data_content : null;\r\n    options.placement = element.dataset.placement ? element.dataset.placement : options.data_placement ? options.data_placement : null;\r\n    options.container = element.dataset.container ? element.dataset.container : options.container ? options.container : DOC.body;\r\n\r\n    // validate options\r\n    (function () {\r\n        if (options.title == null || options.title === \"\") {\r\n            throw new Error(\"There was a problem found with title value, please correct and try again\");\r\n        }\r\n        if (options.content == null || options.content === \"\") {\r\n            throw new Error(\"There was a problem found with content value, please correct and try again\");\r\n        }\r\n        if (options.placement == null) {\r\n            throw new Error(\"There was a problem found with placement value, please correct and try again\");\r\n        }\r\n        var inOffCanvas = getClosest(element, \".\" + prefix + \"modal-offcanvas\");\r\n        if(inOffCanvas) {\r\n            options.container = inOffCanvas;\r\n        } else {\r\n            var inFixedTop = getClosest(element, \".fixed-top\");\r\n            if(inFixedTop) {\r\n                options.container = inFixedTop;\r\n            } else {\r\n                var inFixedBottom = getClosest(element, \".fixed-bottom\");\r\n                if(inFixedBottom) {\r\n                    options.container = inFixedBottom;\r\n                }\r\n            }\r\n        }\r\n    })();\r\n\r\n    // DATA API\r\n    var self = this,\r\n        popoverString = \"Popover\",\r\n        container = DOC.body,\r\n        overlay = getFullScreenOverlay(),\r\n        popoverArrow = null,\r\n        popoverCloseBtn = null,\r\n        positionCalc = true,\r\n        smallMedia = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        popover = null,\r\n        popoverModal = null,\r\n        // handlers\r\n        triggerHandler = function(e) {\r\n            setTimeout( function() {\r\n                self.toggle();\r\n                e.preventDefault();\r\n            }, options.delay);\r\n        },\r\n        blurHandler = function(e) {\r\n            setTimeout( function() {\r\n                if(popover && !popover.contains(DOC.activeElement)) {\r\n                    self.hide();\r\n                    element.focus();\r\n                    DOC.activeElement.removeEventListener(\"focusout\", blurHandler, false);\r\n                    e.preventDefault();\r\n                } else {\r\n                    DOC.activeElement.addEventListener(\"focusout\", blurHandler, false);\r\n                }\r\n            }, options.delay);\r\n        },\r\n        clickHandler = function(e) {\r\n            if (popover && popover.contains(e.target)) {\r\n                if(e.target === popoverCloseBtn || popoverCloseBtn.contains(e.target)) {\r\n                    self.hide();\r\n                    element.focus();\r\n                    e.preventDefault();\r\n                }\r\n            } \r\n        },\r\n        keyHandler = function (e) {\r\n            if (e.keyCode === 27 && e.type === \"keydown\") { //esc\r\n                element.focus();\r\n                self.hide();\r\n                e.preventDefault();\r\n            } else if (e.keyCode === 13 && e.type === \"keydown\") { //enter\r\n                if (e.currentTarget.classList.contains(prefix + \"close\")) {\r\n                    self.hide();\r\n                    element.focus();\r\n                    e.preventDefault();\r\n                }\r\n            } else if (e.keyCode === 9 & e.type === \"keydown\") { //tab out\r\n                if (e.shiftKey && e.srcElement.classList.contains(prefix + \"popover\")) {\r\n                    self.hide();\r\n                    element.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        },\r\n        createPopover = function () {\r\n            //create popover divs\r\n            var popoverDialog = null,\r\n                popoverTitleDiv = null,\r\n                popoverTitle = null,\r\n                popoverContent = null,\r\n                popoverParagraph = null;\r\n\r\n            popover = createElement(\"div\", {\r\n                class: prefix + \"modal-dialog\",\r\n                tabindex: \"0\",\r\n                role: \"dialog\"\r\n            });\r\n\r\n\r\n            popoverDialog = createElement(\"div\", {\r\n                class: prefix + \"popover-dialog\",\r\n            });\r\n            popover.appendChild(popoverDialog);\r\n\r\n            //create popover arrow\r\n            popoverArrow = createElement(\"div\", {\r\n                class: prefix + \"arrow\"\r\n            });\r\n            popover.appendChild(popoverArrow);\r\n\r\n            //set popover title container\r\n            popoverTitleDiv = createElement(\"div\", {\r\n                class: prefix + \"popover-title-container \" + prefix + \"d-flex\"\r\n            });\r\n\r\n            popoverDialog.appendChild(popoverTitleDiv);\r\n\r\n            popoverTitle = createElement(\"h3\", {\r\n                class: prefix + \"popover-header \" + prefix + \"bold-16\",\r\n                html: options.title\r\n            });\r\n            popoverTitleDiv.appendChild(popoverTitle);\r\n\r\n            //set popover body content\r\n            popoverContent = createElement(\"div\", {\r\n                class: prefix + \"popover-body\"\r\n            });\r\n\r\n            popoverParagraph = createElement(\"p\", {\r\n                html: options.content\r\n            });\r\n\r\n            popoverDialog.appendChild(popoverContent);\r\n            popoverContent.appendChild(popoverParagraph);\r\n            \r\n            //create close button\r\n            popoverCloseBtn = createElement(\"button\", {\r\n                class: prefix + \"close\" + \" \" +  prefix + \"icons \" + prefix + \"close-x \" + prefix + \"position-absolute\",\r\n                tabindex: \"0\",\r\n                aria_label: \"Close Popover\",\r\n                data_dismiss: prefix + \"popover\"\r\n            });\r\n\r\n            popoverTitleDiv.appendChild(popoverCloseBtn);\r\n        \r\n            //append to the container\r\n            if (smallMedia.matches) {\r\n                popoverModal = createElement(\"div\", {\r\n                    class: prefix + \"modal\"\r\n                });\r\n                popoverModal.style.display = \"block\";\r\n            \r\n                DOC.body.classList.add(prefix + \"modal-open\");\r\n                popoverModal.appendChild(popover);\r\n                element.parentNode.insertBefore(popoverModal, element);\r\n            } else {\r\n                container.insertBefore(popover, container.firstChild);\r\n            }\r\n            popover.style.display = \"block\";\r\n            popover.setAttribute(\"class\", prefix + \"popover\" + \" \" + prefix + \"bs-popover-\" + options.placement + \" \" + prefix + \"fade\"+ \" \" + prefix + \"show \" + prefix + \"rounded-0\");\r\n        },\r\n        createOverlay = function () {\r\n            if (overlay) {\r\n                overlay.classList.add(prefix + \"show\");\r\n                overlay.removeAttribute(\"hidden\");\r\n                overlay.style.visibility = \"hidden\";\r\n            } else {\r\n                console.warn(\"POPOVER: Overlay requested. Corresponding HTML missing. Please apply 'dds__overlay' to a div\");\r\n            }\r\n\r\n        },\r\n        removeOverlay = function () {\r\n            if (overlay) {\r\n                overlay.classList.remove(prefix + \"show\");\r\n            }\r\n        },\r\n        removePopover = function () {\r\n            var popoverParent = popover.parentNode;\r\n\r\n            // if popover has the dds__modal, then access it's parent to remove the whole node\r\n            if (popoverParent.getAttribute('class') === prefix + \"modal\") {\r\n                popoverParent.parentNode.removeChild(popoverParent);\r\n            } else {\r\n                container.removeChild(popover);\r\n            }\r\n            popover = null;\r\n            DOC.body.classList.remove(prefix + \"modal-open\");\r\n        },\r\n        showPopover = function () {\r\n            !(popover.classList.contains(prefix + \"show\")) && popover.classList.add(prefix + \"show\");\r\n            popover.focus();\r\n        },\r\n        updatePopover = function () {\r\n            if (positionCalc) {\r\n                styleTip(element, popover, options.placement, container);\r\n            }\r\n            else {\r\n                popover.style.cssText = \"\";\r\n            }\r\n        },\r\n        // triggers\r\n        showTrigger = function() {\r\n            popover.addEventListener(\"blur\", blurHandler, false);\r\n            uicoreCustomEvent(\"Popver\", \"Shown\", element);\r\n        },\r\n        hideTrigger = function() {\r\n            popover.removeEventListener(\"blur\", blurHandler, false);\r\n            removePopover();\r\n            uicoreCustomEvent(\"Popover\", \"Hidden\", element);\r\n        },\r\n        positionCalculation = function(e) {\r\n            if (e.matches) {\r\n                positionCalc = false;\r\n            }\r\n            else {\r\n                positionCalc = true;\r\n            }\r\n        };\r\n\r\n    // public methods / handlers\r\n    this.toggle = function() {\r\n        if (popover === null) {\r\n            self.show();\r\n        } else {\r\n            self.hide();\r\n        }\r\n    };\r\n    this.show = function() {\r\n        setTimeout(function () {\r\n            if (popover === null) {\r\n                createPopover();\r\n                createOverlay();\r\n                updatePopover();\r\n                showPopover();\r\n\r\n                element.removeEventListener(\"click\", triggerHandler, false);\r\n                window.addEventListener(\"click\", clickHandler, false);\r\n                popover.addEventListener(\"keydown\", keyHandler, false);\r\n                globalObject.addEventListener(\"resize\", self.toggle, false);\r\n                uicoreCustomEvent(\"Popover\", \"ShowEvent\", element);\r\n\r\n                emulateTransitionEnd(popover, showTrigger);\r\n            }\r\n        }, options.delay);\r\n    };\r\n    this.hide = function() {\r\n        removeOverlay();\r\n        setTimeout(function () {\r\n            if (popover && popover !== null && popover.classList.contains(prefix + \"show\")) {\r\n\r\n                uicoreCustomEvent(\"Popover\", \"HideEvent\", element);\r\n                window.removeEventListener(\"click\", clickHandler, false);\r\n                popover.removeEventListener(\"keydown\", keyHandler, false);\r\n                globalObject.removeEventListener(\"resize\", self.toggle, false);\r\n                popover.classList.remove(prefix + \"show\");\r\n\r\n                emulateTransitionEnd(popover, hideTrigger);\r\n                element.addEventListener(\"click\", triggerHandler, false);\r\n            }\r\n        }, options.delay);\r\n    };\r\n    this.update = function () {\r\n        updatePopover();\r\n    };\r\n\r\n    // init\r\n    if (!(popoverString in element)) {\r\n        // prevent adding event handlers twice\r\n        element.addEventListener(\"click\", triggerHandler, false);\r\n        positionCalculation(smallMedia);\r\n        smallMedia.addListener(positionCalculation);\r\n    }\r\n\r\n    element[popoverString] = self;\r\n}\r\n","import {createElement, prefix, uicoreCustomEvent, each, jsonOptionsInit, debounce, isIE, isSafari, isEdge} from \"./utilities.js\";\r\n\r\nexport default function ProductStack(element, options) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.lazyload = typeof options.lazyload === \"boolean\" ? options.lazyload : false;\r\n    options.type = options.type ? options.type : \"single\";\r\n\r\n    var stringProductStack = \"ProductStack\",\r\n        itemsView,\r\n        currentOffset,\r\n        overflowContainer,\r\n        childrenWidth,\r\n        productStacks,\r\n        rightCtrls,\r\n        leftCtrls,\r\n        productStackID,\r\n        // handlers\r\n        resizeHandler = function() {\r\n            updateSectionHeights();\r\n            updateItemsView();\r\n        },\r\n        controlClick = function(e) {\r\n            var increment = childrenWidth;\r\n            if (options.type == \"page\") {\r\n                // increment = overflowContainer.offsetWidth;\r\n                var leftNumber = Math.ceil((overflowContainer.scrollLeft - 5) / childrenWidth) + 1;\r\n                var rightNumber = Math.floor((overflowContainer.scrollLeft + overflowContainer.offsetWidth + 5) / childrenWidth);\r\n                if (rightNumber - leftNumber <= 0){\r\n                    increment = childrenWidth;\r\n                } else {\r\n                    increment = childrenWidth * (rightNumber - leftNumber + 1);\r\n                }\r\n            }\r\n            \r\n            var isRight = (e.target.classList.contains(prefix + \"overflow-control-right\") || e.target.parentElement.classList.contains(prefix + \"overflow-control-right\")) ? true : false;\r\n            \r\n            if (isRight) {\r\n                if ((currentOffset + increment) < childrenWidth * productStacks.length - overflowContainer.offsetWidth - 1) {\r\n                    currentOffset += increment;\r\n                }\r\n                else {\r\n                    currentOffset = childrenWidth * productStacks.length - overflowContainer.offsetWidth;\r\n                }\r\n            } else {\r\n                if ((currentOffset - increment) > 1) {\r\n                    currentOffset -= increment;\r\n                }\r\n                else {\r\n                    currentOffset = 0;\r\n                }\r\n            }\r\n            if(isIE || isSafari || isEdge) {\r\n                overflowContainer.scrollLeft = currentOffset;\r\n            }\r\n            else {\r\n                overflowContainer.scroll({ top: 0, left: currentOffset, behavior: \"smooth\" });\r\n            }\r\n            updateItemsView();\r\n        },\r\n        updateSectionHeights = function() {\r\n            element.getElementsByTagName(\"style\")[0].innerHTML = \"\";\r\n            childrenWidth = productStacks[0].parentElement.offsetWidth;\r\n            // tallestSections can be used in the future to optimize the performace on resize\r\n            // var tallestSections = [];\r\n            each(productStacks[0].sections, function(section) {\r\n                // to optimize, we can extract querySelectorAll outside and save it somewhere instead of doing it over and over\r\n                var sectionName = \".\" + section.className.replace(/\\s/g, \".\");\r\n                var sectionMatches = element.querySelectorAll(sectionName);         \r\n                if(sectionMatches.length > 1){\r\n                    var maxHeight = 0;\r\n                    each(sectionMatches, function(sectionMatch) {\r\n                        if (sectionMatches.style){\r\n                            sectionMatches.removeAttribute(\"style\");\r\n                        }\r\n                        if (sectionMatch.offsetHeight > maxHeight) {\r\n                            maxHeight = sectionMatch.offsetHeight;\r\n                        }\r\n                        else if (sectionMatch.offsetHeight == 0) {\r\n                            sectionMatch.nextElementSibling.style.visibility = \"hidden\";\r\n                        }\r\n                    });\r\n                    var styleTag = element.getElementsByTagName(\"style\")[0].innerHTML;\r\n                    element.getElementsByTagName(\"style\")[0].innerHTML = styleTag + \"#\"+ productStackID + \" \" + sectionName + \"{ height: \" + maxHeight + \"px }\";\r\n                }\r\n            }); \r\n        },\r\n        updateItemsView = function() {\r\n            //can be optimized later on to avoid cycling through all sections to generate stylesheet \r\n            // adding and subtracting 5 pixels for flexibility on non-integer scrollLeft\r\n            if (itemsView) {\r\n                var leftNumber = Math.ceil((overflowContainer.scrollLeft - 5) / childrenWidth) + 1;\r\n                var rightNumber = Math.floor((overflowContainer.scrollLeft + overflowContainer.offsetWidth + 5) / childrenWidth);\r\n                each(itemsView, function(view){\r\n                    view.innerHTML = \"<span>\" + (leftNumber) + (leftNumber < rightNumber ? \" - \" + (Math.min(rightNumber, productStacks.length)) : \"\") + \" of \"+ productStacks.length +\"</span>\";\r\n                });\r\n                uicoreCustomEvent(\"ProductStack\", \"ChangeEvent\", element, {\"left\": leftNumber, \"right\": rightNumber, \"totalItems\": productStacks.length});\r\n                if(leftNumber <= 1){\r\n                    each(leftCtrls, function(leftCtrl){\r\n                        leftCtrl.setAttribute(\"disabled\", \"\");\r\n                    });\r\n                } else {\r\n                    each(leftCtrls, function(leftCtrl){\r\n                        leftCtrl.removeAttribute(\"disabled\");\r\n                    });\r\n                }\r\n                if (rightNumber >= productStacks.length) {\r\n                    each(rightCtrls, function(rightCtrl){\r\n                        rightCtrl.setAttribute(\"disabled\", \"\");\r\n                    });\r\n                } else {\r\n                    each(rightCtrls, function(rightCtrl){\r\n                        rightCtrl.removeAttribute(\"disabled\");\r\n                    });\r\n                }\r\n                if(rightCtrls[0].disabled && leftCtrls[0].disabled){\r\n                    each(rightCtrls, function(rightCtrl){\r\n                        rightCtrl.style.display = \"none\";\r\n                    });\r\n                    each(leftCtrls, function(leftCtrl){\r\n                        leftCtrl.style.display = \"none\";\r\n                    });\r\n                    each(itemsView, function(viewDiv){\r\n                        viewDiv.style.display = \"none\";\r\n                    });\r\n                } else{\r\n                    each(rightCtrls, function(rightCtrl){\r\n                        rightCtrl.style.display = \"block\";\r\n                    });\r\n                    each(leftCtrls, function(leftCtrl){\r\n                        leftCtrl.style.display = \"block\";\r\n                    });\r\n                    each(itemsView, function(viewDiv){\r\n                        viewDiv.style.display = \"block\";\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n    this.lazyLoad = function() {\r\n        if (options.lazyload) {\r\n            updateSectionHeights();\r\n            updateItemsView();\r\n            uicoreCustomEvent(\"ProductStack\", \"LazyLoadEvent\", element, {\"success\": true});\r\n        }\r\n        else {\r\n            uicoreCustomEvent(\"ProductStack\", \"LazyLoadEvent\", element, {\"success\": false, \"msg\": \"Carousel cannot be lazy loaded. Check usage or avoid mulitple lazy loads.\"});\r\n        }\r\n    };\r\n\r\n    // prevent adding event handlers twice\r\n    if (!(stringProductStack in element)) {\r\n        productStackID = element.id ? element.id : \"product-stack\";\r\n        var style = createElement(\"style\");\r\n        style.type = \"text/css\"; \r\n        element.insertBefore(style, element.firstElementChild);\r\n        productStacks = element.querySelectorAll(\"UL.\" + prefix + \"product-stack\");\r\n        each(productStacks, function(productStack) {\r\n            productStack.sections = [];\r\n            var i = 0;\r\n            each(productStack.children, function(section) {\r\n                if (section.tagName ==\"LI\") {\r\n                    section.classList.add(prefix + \"ps-row-\"+ i++);\r\n                    productStack.sections.push(section);\r\n                }\r\n            });  \r\n        });\r\n        itemsView = element.parentElement.querySelectorAll(\"DIV.\" + prefix + \"items-view\");\r\n        overflowContainer = element.querySelector(\".\" + prefix + \"product-stack-wrapper\");\r\n        overflowContainer.addEventListener(\"scroll\", debounce(function() {\r\n            if (overflowContainer.scrollLeft != currentOffset) {\r\n                updateItemsView();\r\n                currentOffset = overflowContainer.scrollLeft;\r\n            }\r\n        }), 15);\r\n        window.addEventListener(\"load\", updateSectionHeights, false); \r\n        window.addEventListener(\"resize\", debounce(resizeHandler, 15));\r\n        childrenWidth = element.querySelector(\".\" + prefix + \"product-stack\").parentElement.offsetWidth;\r\n        rightCtrls = element.querySelectorAll(\"[data-toggle='\" + prefix + \"product-stack-control-right']\");\r\n        each(rightCtrls, function(rightCtrl){\r\n            rightCtrl.addEventListener(\"click\", controlClick, true);\r\n        });\r\n        leftCtrls = element.querySelectorAll(\"[data-toggle='\" + prefix + \"product-stack-control-left']\");\r\n        each(leftCtrls, function(leftCtrl){\r\n            leftCtrl.addEventListener(\"click\", controlClick, true);\r\n            leftCtrl.setAttribute(\"disabled\", \"\");\r\n        });\r\n        if (isEdge) {\r\n            rightCtrls[0].addEventListener(\"keydown\", function(e){\r\n                setTimeout(function(){\r\n                    if ((e.keyCode == 13 || e.keyCode == 32) && rightCtrls[0].disabled) {\r\n                        e.preventDefault();\r\n                        leftCtrls[0].focus();\r\n                    }\r\n                }, 100);\r\n            }, false);\r\n            leftCtrls[0].addEventListener(\"keydown\", function(e){\r\n                setTimeout(function(){\r\n                    if ((e.keyCode == 13 || e.keyCode == 32) && leftCtrls[0].disabled) {\r\n                        e.preventDefault();\r\n                        rightCtrls[0].focus();\r\n                    }\r\n                }, 100);\r\n            }, false);\r\n            leftCtrls[1].addEventListener(\"keydown\", function(e){\r\n                setTimeout(function(){\r\n                    if ((e.keyCode == 13 || e.keyCode == 32) && leftCtrls[1].disabled) {\r\n                        e.preventDefault();\r\n                        rightCtrls[1].focus();\r\n                    }\r\n                }, 100);\r\n            }, false);\r\n            rightCtrls[1].addEventListener(\"keydown\", function(e){\r\n                setTimeout(function(){\r\n                    if ((e.keyCode == 13 || e.keyCode == 32) && rightCtrls[1].disabled) {\r\n                        e.preventDefault();\r\n                        leftCtrls[1].focus();\r\n                    }\r\n                }, 100);\r\n            }, false);\r\n        }\r\n        currentOffset = overflowContainer.scrollLeft;\r\n        updateItemsView();\r\n    }\r\n\r\n    element[stringProductStack] = self;\r\n}","import { validateNum, jsonOptionsInit } from \"./utilities\";\r\n\r\nexport default function Progress(element, options) {\r\n    element = element instanceof HTMLElement ? element : (function () {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.showText = element.dataset.showtext ? element.dataset.showtext == \"true\" ? true : false : options.showtext == \"true\" ? true : false;\r\n    options.timeToComplete = element.dataset.timeToComplete ? validateNum(element.dataset.timeToComplete, 10000) : validateNum(options.timeToComplete, 10000);\r\n\r\n\r\n    // this defines how chunky you want the increment block to be the smaller the increment, the smoother it is,\r\n    // however, it will impact minimum time to complete depending on client's machine's performance\r\n    var increment = 0.25,\r\n        timeToComplete = options.timeToComplete,\r\n        millisecondPerTick = timeToComplete / (100.0 / increment),\r\n        width = 0,\r\n        id,\r\n        stringProgress = \"Progress\",\r\n        frame = function() {\r\n            if (width < 100.0) {\r\n                width += increment;\r\n                element.style.width = width + \"%\";\r\n                element.setAttribute(\"aria-valuenow\", Math.round(width));\r\n            } else {\r\n                element.style.width = \"100%\";\r\n                clearInterval(id);\r\n            }\r\n            if (options.showText) {\r\n                element.innerHTML = width < 100 ? Math.round(width) + \"%\" : \"100%\";\r\n            }\r\n        };\r\n\r\n    // init\r\n    if (!(stringProgress in element)) {\r\n        setInterval(frame, millisecondPerTick);\r\n    }\r\n\r\n    element[stringProgress] = self;\r\n}\r\n","import { uicoreCustomEvent, prefix, DOC, offWindowLeft, createElement, isIE, isArray, each } from \"./utilities\";\r\n\r\nexport default function Slider(element, optionsInput) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    var isJson = false,\r\n        jsonParams = element.dataset.slider;\r\n    if (jsonParams) {\r\n        optionsInput = JSON.parse(jsonParams);\r\n        isJson = true;\r\n    }\r\n    var options = optionsInput || {};\r\n    \r\n\r\n    // User supplied\r\n    options.animate = typeof options.animate == \"boolean\" ? options.animate : true;\r\n    options.animationDuration = typeof options.animationDuration == \"number\" ? options.animationDuration : 300;\r\n    options.ort = options.orientation ? options.orientation === \"vertical\" ? 1 : 0 : 0;\r\n    options.dir = options.direction ? options.direction === \"rtl\" ? 1 : 0 : options.ort == 1 ? 1 : 0;\r\n    options.singleStep = typeof options.step == \"number\" ? options.step : undefined;\r\n    options.percision = typeof options.percision == \"number\" ? options.percision > 2 ? 2 : options.percision : 0;\r\n    // User supplied but heeds more calculations at see validateOptions\r\n    options.behaviour = options.behaviour ? options.behaviour : \"tap\";\r\n    options.margin = typeof options.margin == \"number\" ? options.margin : 1;\r\n    options.limit = typeof options.limit == \"number\" ? options.limit : 0;\r\n    options.padding = options.padding ? options.padding : 0;\r\n    options.tooltips = typeof options.tooltips == \"boolean\" ? options.tooltips : true;\r\n    options.content = typeof options.content == \"string\" ? options.content : false;\r\n    options.showRange = typeof options.showRange == \"boolean\" ? options.showRange : false;\r\n    // Formats at see validateOptions\r\n    options.format = typeof options.format == \"object\" ? options.format : undefined;\r\n    options.ariaFormat = typeof options.ariaFormat == \"object\" ? options.ariaFormat : undefined;\r\n\r\n    var stringSlider = \"Slider\",\r\n        slider, \r\n        container,\r\n        spectrum,\r\n        optEvents = {},\r\n        events = {},\r\n        connects,\r\n        handles,\r\n        handleNumbers,\r\n        sliderBase,\r\n        parsed,\r\n        actions,\r\n        supportsPassive = isIE ? false : true,\r\n        locations = [],\r\n        values = [],\r\n        tooltips,\r\n        activeHandlesCount = 0,\r\n        minContainers = [],\r\n        maxContainers = [],\r\n        // For horizontal sliders in standard ltr documents,\r\n        // make .dds__slider-origin overflow to the left so the document doesn't scroll.\r\n        dirOffset = options.dir == 1 || options.ort == 1 ? 0 : 100,\r\n        msPrefix = element.style.msTransform !== undefined,\r\n        noPrefix = element.style.transform !== undefined,\r\n        transformRule = noPrefix ? \"transform\" : msPrefix ? \"msTransform\" : \"webkitTransform\",\r\n        // Default formatter uses numbers only and supplies percision/decimal places\r\n        defaultFormatter = { to: function(value) { return value !== undefined && value.toFixed(options.percision); }, from: Number },\r\n        // Validation\r\n        validateMargin = function(entry) {\r\n            if (options.margin === 0) {\r\n                return;\r\n            }\r\n    \r\n            options.margin = spectrum.getMargin(entry);\r\n    \r\n            if (!options.margin) {\r\n                throw new Error(\"Slider 'margin' option is only supported on linear sliders.\");\r\n            }\r\n        },\r\n        validateOptions = function() {\r\n            // Range always first initiates Spectrum\r\n            if (options.range) {\r\n                // Filter incorrect input.\r\n                if (typeof options.range !== \"object\" || isArray(options.range)) {\r\n                    throw new Error(\"Slider 'range' is not an object.\");\r\n                }\r\n\r\n                // Update if only one handle\r\n                if (options.range.min === undefined) {\r\n                    options.range.min = 0;\r\n                }\r\n\r\n                // Catch missing end.\r\n                if (options.range.max === undefined) {\r\n                    throw new Error(\"Slider Missing 'max' in 'range'.\");\r\n                }\r\n\r\n                // Catch equal start or end.\r\n                if (options.range.min === options.range.max) {\r\n                    throw new Error(\"Slider 'range' 'min' and 'max' cannot be equal.\");\r\n                }\r\n\r\n                spectrum = new Spectrum(options.range, options.snap, options.singleStep);\r\n            } else {\r\n                throw new RangeError(\"There was a problem found with the range option values, please correct and try again!\");\r\n            }\r\n            // Start\r\n            if (options.start) {\r\n                var entry = asArray(options.start);\r\n\r\n                // Validate input. Values aren't tested, as the public .val method\r\n                // will always provide a valid location.\r\n                if (!Array.isArray(entry) || !entry.length) {\r\n                    throw new Error(\"Slider 'start' option is incorrect.\");\r\n                }\r\n\r\n                // Store the number of handles.\r\n                options.handles = entry.length;\r\n\r\n                // When the slider is initialized, the .val method will\r\n                // be called with the start options.\r\n                options.start = entry;\r\n            } else {\r\n                if (options.range.min && options.range.max) {\r\n                    options.start = [options.range.min,options.range.max];\r\n                    options.handles = 2;\r\n                } else {\r\n                    options.start = options.range.max;\r\n                    options.handles = 1;\r\n                }\r\n            }\r\n            // Events\r\n            if (options.behaviour) {\r\n                // Make sure the input is a string.\r\n                if (typeof options.behaviour !== \"string\") {\r\n                    throw new Error(\"Slider 'behaviour' must be a string containing options.\");\r\n                }\r\n\r\n                // Check if the string contains any keywords.\r\n                // None are required.\r\n                var tap = options.behaviour.indexOf(\"tap\") >= 0;\r\n                var drag = options.behaviour.indexOf(\"drag\") >= 0;\r\n                var fixed = options.behaviour.indexOf(\"fixed\") >= 0;\r\n                var snap = options.behaviour.indexOf(\"snap\") >= 0;\r\n                var hover = options.behaviour.indexOf(\"hover\") >= 0;\r\n                var unconstrained = options.behaviour.indexOf(\"unconstrained\") >= 0;\r\n\r\n                if (fixed) {\r\n                    if (parsed.handles !== 2) {\r\n                        throw new Error(\"Slider 'fixed' behaviour must be used with 2 handles\");\r\n                    }\r\n\r\n                    // Use margin to enforce fixed state\r\n                    validateMargin(options.start[1] - options.start[0]);\r\n                }\r\n\r\n                if (unconstrained && (parsed.margin || parsed.limit)) {\r\n                    throw new Error(\r\n                        \"Slider 'unconstrained' behaviour cannot be used with margin or limit\"\r\n                    );\r\n                }\r\n\r\n                optEvents = {\r\n                    tap: tap || snap,\r\n                    drag: drag,\r\n                    fixed: fixed,\r\n                    snap: snap,\r\n                    hover: hover,\r\n                    unconstrained: unconstrained\r\n                };\r\n            }\r\n            // Margin\r\n            if (optEvents.fixed == 0) { // at see validateBehaviour\r\n                validateMargin(options.margin);\r\n            }\r\n            // Limit\r\n            options.limit = spectrum.getMargin(options.limit);\r\n            // Padding\r\n            if (options.padding) {\r\n                if (typeof options.padding == \"number\" && !Array.isArray(options.padding)) {\r\n                    throw new Error(\r\n                        \"Slider 'padding' option must be numeric or array of exactly 2 numbers.\"\r\n                    );\r\n                }\r\n        \r\n                if (Array.isArray(options.padding) \r\n                    && !(   options.padding.length == 2 \r\n                            || typeof options.padding[0] != \"number\" \r\n                            || typeof options.padding[1] != \"number\"\r\n                    )\r\n                )\r\n                {\r\n                    throw new Error(\r\n                        \"Slider 'padding' option must be numeric or array of exactly 2 numbers.\"\r\n                    );\r\n                }\r\n        \r\n                if (options.padding === 0) {\r\n                    return;\r\n                }\r\n        \r\n                if (!Array.isArray(options.padding)) {\r\n                    options.padding = [options.padding];\r\n                }\r\n        \r\n                // 'getMargin' returns false for invalid values.\r\n                options.padding = [spectrum.getMargin(options.padding[0]), spectrum.getMargin(options.padding[1])];\r\n        \r\n                if (options.padding[0] === false || options.padding[1] === false) {\r\n                    throw new Error(\"Slider 'padding' option is only supported on linear sliders.\");\r\n                }\r\n        \r\n                if (options.padding[0] < 0 || options.padding[1] < 0) {\r\n                    throw new Error(\"Slider 'padding' option must be a positive number(s).\");\r\n                }\r\n        \r\n                if (options.padding[0] + options.padding[1] > 100) {\r\n                    throw new Error(\"Slider 'padding' option must not exceed 100% of the range.\");\r\n                }\r\n            }\r\n            // Tooltips\r\n            if (options.tooltips) {\r\n                var tooltips;\r\n                if (options.tooltips === false) {\r\n                    return;\r\n                }\r\n        \r\n                if (options.tooltips === true) {\r\n                    tooltips = [];\r\n        \r\n                    for (var i = 0; i < options.handles; i++) {\r\n                        tooltips.push(true);\r\n                    }\r\n                } else {\r\n                    tooltips = asArray(options.tooltips);\r\n        \r\n                    if (tooltips.length !== handles) {\r\n                        throw new Error(\"Slider must pass a formatter for all handles.\");\r\n                    }\r\n        \r\n                    tooltips.forEach(function(formatter) {\r\n                        if (\r\n                            typeof formatter !== \"boolean\" &&\r\n                            (typeof formatter !== \"object\" || typeof formatter.to !== \"function\")\r\n                        ) {\r\n                            throw new Error(\"Slider 'tooltips' must be passed a formatter or 'false'.\");\r\n                        }\r\n                    });\r\n                }\r\n                options.tooltips = tooltips;\r\n            }\r\n            // Formats\r\n            if (!options.format) {\r\n                if (isJson) {\r\n                    var inputs = JSON.parse(jsonParams);\r\n                    if (inputs.format) {\r\n                        var testJs;\r\n                        if (inputs.format.indexOf(\"(\") > -1) {\r\n                            testJs = inputs.format.substring(0, inputs.format.indexOf(\"(\")).trim();\r\n                        } else {\r\n                            testJs = inputs.format;\r\n                        }\r\n                        if (!window[testJs]) {\r\n                            throw new Error(\"The supplied format function \"+inputs.format+\" could not be accessed, please verify and try again!\");\r\n                        } else {\r\n                            options.format = window[testJs];\r\n                        }\r\n                    } else {\r\n                        options.format = defaultFormatter;\r\n                    }\r\n                } else {\r\n                    options.format = defaultFormatter;\r\n                }\r\n            }\r\n            if (!options.ariaFormat) {\r\n                if (isJson) {\r\n                    inputs = JSON.parse(jsonParams);\r\n                    if (inputs.ariaFormat) {\r\n                        if (inputs.ariaFormat.indexOf(\"(\") > -1) {\r\n                            testJs = inputs.ariaFormat.substring(0, inputs.ariaFormat.indexOf(\"(\")).trim();\r\n                        } else {\r\n                            testJs = inputs.ariaFormat;\r\n                        }\r\n                        if (!window[testJs]) {\r\n                            throw new Error(\"The supplied format function \"+inputs.ariaFormat+\" could not be accessed, please verify and try again!\");\r\n                        } else {\r\n                            options.ariaFormat = window[testJs];\r\n                        }\r\n                    } else {\r\n                        options.ariaFormat = options.format;\r\n                    }\r\n                } else {\r\n                    options.ariaFormat = options.format;\r\n                }\r\n            }\r\n            if (options.format) {\r\n                if (!options.format.to || !options.format.from) {\r\n                    throw new Error(\"The supplied format function \"+options.format+\" is missing required method to or from, please verify and try again!\");\r\n                }\r\n            }\r\n            if (options.ariaFormat) {\r\n                if (!options.ariaFormat.to || !options.ariaFormat.from) {\r\n                    throw new Error(\"The supplied format function \"+options.format+\" is missing required method to or from, please verify and try again!\");\r\n                }\r\n            }\r\n        },\r\n        // Event Handlers\r\n        endEventHandler = function() {\r\n            var data = get();\r\n            if (!Array.isArray(data)) {\r\n                data = asArray(data);\r\n            }\r\n            for (var d = 0; d < data.length; d++) {\r\n                data[d] = typeof data[d] == \"string\" ? data[d] : options.format.to(data[d]);\r\n            }\r\n            var containers = null;\r\n            if (handles.length == 1) {\r\n                containers = maxContainers;\r\n            } else {\r\n                containers = minContainers;\r\n            }\r\n            \r\n            for (var c = 0; containers.length > c; c++) {\r\n                containers[c].innerHTML = data[0];\r\n            }\r\n            if (handles.length > 1) {\r\n                for (var max = 0; maxContainers.length > max; max++) {\r\n                    maxContainers[max].innerHTML = data[1];\r\n                }\r\n            }\r\n            var details = {};\r\n            if (data[1]) {\r\n                details.min = data[0];\r\n                details.max = data[1];\r\n            } else {\r\n                details.value = data[0];\r\n            }\r\n            uicoreCustomEvent(\"Slider\", \"SlideEnd\", element, details);\r\n        },\r\n        focusEventHandler = function(e) {\r\n            e[\"currentTarget\"].classList.add(prefix + \"slider-active\");\r\n        },\r\n        blurEventHandler = function(e) {\r\n            e[\"currentTarget\"].classList.remove(prefix + \"slider-active\");\r\n        },\r\n        \r\n        // Handles keydown on focused handles\r\n        // Don't move the document when pressing arrow keys on focused handles\r\n        eventKeydown = function(event, handleNumber) {\r\n            if (isSliderDisabled() || isHandleDisabled(handleNumber)) {\r\n                return false;\r\n            }\r\n\r\n            var horizontalKeys = [\"Left\", \"Right\"];\r\n            var verticalKeys = [\"Down\", \"Up\"];\r\n            var largeStepKeys = [\"PageDown\", \"PageUp\"];\r\n            var edgeKeys = [\"Home\", \"End\"];\r\n\r\n            if (options.dir && !options.ort) {\r\n                // On an right-to-left slider, the left and right keys act inverted\r\n                horizontalKeys.reverse();\r\n            } else if (options.ort && !options.dir) {\r\n                // On a top-to-bottom slider, the up and down keys act inverted\r\n                verticalKeys.reverse();\r\n                largeStepKeys.reverse();\r\n            }\r\n\r\n            // Strip \"Arrow\" for IE compatibility. https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key\r\n            var key = event.key.replace(\"Arrow\", \"\");\r\n\r\n            var isLargeDown = key === largeStepKeys[0];\r\n            var isLargeUp = key === largeStepKeys[1];\r\n            var isDown = key === verticalKeys[0] || key === horizontalKeys[0] || isLargeDown;\r\n            var isUp = key === verticalKeys[1] || key === horizontalKeys[1] || isLargeUp;\r\n            var isMin = key === edgeKeys[0];\r\n            var isMax = key === edgeKeys[1];\r\n\r\n            if (!isDown && !isUp && !isMin && !isMax) {\r\n                return true;\r\n            }\r\n\r\n            event.preventDefault();\r\n\r\n            var to;\r\n\r\n            if (isUp || isDown) {\r\n                var multiplier = 5;\r\n                var direction = isDown ? 0 : 1;\r\n                var steps = getNextStepsForHandle(handleNumber);\r\n                var step = steps[direction];\r\n\r\n                // At the edge of a slider, do nothing\r\n                if (step === null) {\r\n                    return false;\r\n                }\r\n\r\n                // No step set, use the default of 10% of the sub-range\r\n                if (step === false) {\r\n                    step = Spectrum.getDefaultStep(locations[handleNumber], isDown, 10);\r\n                }\r\n\r\n                if (isLargeUp || isLargeDown) {\r\n                    step *= multiplier;\r\n                }\r\n\r\n                // Step over zero-length ranges (#948);\r\n                step = Math.max(step, 0.0000001);\r\n\r\n                // Decrement for down steps\r\n                step = (isDown ? -1 : 1) * step;\r\n\r\n                to = values[handleNumber] + step;\r\n            } else if (isMax) {\r\n                // End key\r\n                to = options.spectrum.xVal[options.spectrum.xVal.length - 1];\r\n            } else {\r\n                // Home key\r\n                to = options.spectrum.xVal[0];\r\n            }\r\n\r\n            setHandle(handleNumber, spectrum.toStepping(to), true, true);\r\n\r\n            fireEvent(\"slide\", handleNumber);\r\n            fireEvent(\"update\", handleNumber);\r\n            fireEvent(\"change\", handleNumber);\r\n            fireEvent(\"set\", handleNumber);\r\n\r\n            return false;\r\n        },\r\n        getNextStepsForHandle = function(handleNumber) {\r\n            var location = locations[handleNumber];\r\n            var nearbySteps = spectrum.getNearbySteps(location);\r\n            var value = values[handleNumber];\r\n            var increment = nearbySteps.thisStep.step;\r\n            var decrement = null;\r\n\r\n            // If snapped, directly use defined step value\r\n            if (options.snap) {\r\n                return [\r\n                    value - nearbySteps.stepBefore.startValue || null,\r\n                    nearbySteps.stepAfter.startValue - value || null\r\n                ];\r\n            }\r\n\r\n            // If the next value in this step moves into the next step,\r\n            // the increment is the start of the next step - the current value\r\n            if (increment !== false) {\r\n                if (value + increment > nearbySteps.stepAfter.startValue) {\r\n                    increment = nearbySteps.stepAfter.startValue - value;\r\n                }\r\n            }\r\n\r\n            // If the value is beyond the starting point\r\n            if (value > nearbySteps.thisStep.startValue) {\r\n                decrement = nearbySteps.thisStep.step;\r\n            } else if (nearbySteps.stepBefore.step === false) {\r\n                decrement = false;\r\n            }\r\n\r\n            // If a handle is at the start of a step, it always steps back into the previous step first\r\n            else {\r\n                decrement = value - nearbySteps.stepBefore.highestStep;\r\n            }\r\n\r\n            // Now, if at the slider edges, there is no in/decrement\r\n            if (location === 100) {\r\n                increment = null;\r\n            } else if (location === 0) {\r\n                decrement = null;\r\n            }\r\n\r\n            // As per #391, the comparison for the decrement step can have some rounding issues.\r\n            var stepDecimals = spectrum.countStepDecimals();\r\n\r\n            // Round per #391\r\n            if (increment !== null && increment !== false) {\r\n                increment = Number(increment.toFixed(stepDecimals));\r\n            }\r\n\r\n            if (decrement !== null && decrement !== false) {\r\n                decrement = Number(decrement.toFixed(stepDecimals));\r\n            }\r\n\r\n            return [decrement, increment];\r\n        },\r\n        // Attach events to several slider parts.\r\n        bindSliderEvents = function(behaviour) {\r\n            // Attach the standard drag event to the handles.\r\n            if (!behaviour.fixed) {\r\n                handles.forEach(function(handle, index) {\r\n                    // These events are only bound to the visual handle\r\n                    // element, not the 'real' origin element.\r\n                    attachEvent(actions.start, handle.children[0], eventStart, {\r\n                        handleNumbers: [index]\r\n                    });\r\n                });\r\n            }\r\n\r\n            // Attach the tap event to the slider base.\r\n            if (behaviour.tap) {\r\n                attachEvent(actions.start, sliderBase, eventTap, {});\r\n            }\r\n\r\n            // Fire hover events\r\n            if (behaviour.hover) {\r\n                // attachEvent(actions.move, sliderBase, eventHover, {\r\n                //     hover: true\r\n                // });\r\n            }\r\n\r\n            // Make the range draggable.\r\n            if (behaviour.drag) {\r\n                connects.forEach(function(connect, index) {\r\n                    if (connect === false || index === 0 || index === connects.length - 1) {\r\n                        return;\r\n                    }\r\n\r\n                    var handleBefore = handles[index - 1];\r\n                    var handleAfter = handles[index];\r\n                    var eventHolders = [connect];\r\n\r\n                    connect.classList.add(prefix + \"slider-draggable\");\r\n\r\n                    // When the range is fixed, the entire range can\r\n                    // be dragged by the handles. The handle in the first\r\n                    // origin will propagate the start event upward,\r\n                    // but it needs to be bound manually on the other.\r\n                    if (behaviour.fixed) {\r\n                        eventHolders.push(handleBefore.children[0]);\r\n                        eventHolders.push(handleAfter.children[0]);\r\n                    }\r\n\r\n                    eventHolders.forEach(function(eventHolder) {\r\n                        attachEvent(actions.start, eventHolder, eventStart, {\r\n                            handles: [handleBefore, handleAfter],\r\n                            handleNumbers: [index - 1, index]\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        // Attach an event to this slider, possibly including a namespace\r\n        bindEvent = function(namespacedEvent, callback) {\r\n            events[namespacedEvent] = events[namespacedEvent] || [];\r\n            events[namespacedEvent].push(callback);\r\n\r\n            // If the event bound is 'update,' fire it immediately for all handles.\r\n            if (namespacedEvent.split(\".\")[0] === \"update\") {\r\n                handles.forEach(function(a, index) {\r\n                    fireEvent(\"update\", index);\r\n                });\r\n            }\r\n        },\r\n        // Helpers\r\n        addNodeTo = function(addTarget, className) {\r\n            var div = createElement(\"div\", {\r\n                class: className ? className : \"\"\r\n            });\r\n\r\n            addTarget.appendChild(div);\r\n\r\n            return div;\r\n        },\r\n        // Round a value to the closest 'to'.\r\n        closest = function(value, to) {\r\n            return Math.round(value / to) * to;\r\n        },\r\n        // Current position of an element relative to the document.\r\n        offset = function(elem, orientation) {\r\n            var rect = elem.getBoundingClientRect();\r\n            var doc = elem.ownerDocument;\r\n            var docElem = doc.documentElement;\r\n            var pageOffset = getPageOffset(doc);\r\n\r\n            // getBoundingClientRect contains left scroll in Chrome on Android.\r\n            // I haven't found a feature detection that proves this. Worst case\r\n            // scenario on mis-match: the 'tap' feature on horizontal sliders breaks.\r\n            if (/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)) {\r\n                pageOffset.x = 0;\r\n            }\r\n            return orientation\r\n                ? rect.top + pageOffset.y - docElem.clientTop\r\n                : rect.left + pageOffset.x - docElem.clientLeft;\r\n        },\r\n        // Fire 'end' when a mouse or pen leaves the document.\r\n        documentLeave = function(event, data) {\r\n            if (event.type === \"mouseout\" && event.target.nodeName === \"HTML\" && event.relatedTarget === null) {\r\n                eventEnd(event, data);\r\n            }\r\n        },\r\n        // Handle movement on document for handle and range drag.\r\n        eventMove = function(event, data) {\r\n            // Check if we are moving up or down\r\n            var movement = (options.dir ? -1 : 1) * (event.calcPoint - data.startCalcPoint);\r\n\r\n            // Convert the movement into a percentage of the slider width/height\r\n            var proposal = (movement * 100) / data.baseSize;\r\n\r\n            moveHandles(movement > 0, proposal, data.locations, data.handleNumbers);\r\n        },\r\n        // Unbind move events on document, call callbacks.\r\n        eventEnd = function(event, data) {\r\n            // The handle is no longer active, so remove the class.\r\n            if (data.handle) {\r\n                data.handle.classList.remove(prefix + \"slider-active\");\r\n                activeHandlesCount -= 1;\r\n            }\r\n\r\n            // Unbind the move and end events, which are added on 'start'.\r\n            data.listeners.forEach(function(c) {\r\n                DOC.removeEventListener(c[0], c[1]);\r\n            });\r\n\r\n            if (activeHandlesCount === 0) {\r\n                // Remove dragging class.\r\n                slider.classList.remove(prefix + \"slider-drag\");\r\n                setZindex();\r\n\r\n                // Remove cursor styles and text-selection events bound to the element.\r\n                if (event.cursor) {\r\n                    element.style.cursor = \"\";\r\n                }\r\n            }\r\n\r\n            data.handleNumbers.forEach(function(handleNumber) {\r\n                fireEvent(\"change\", handleNumber);\r\n                fireEvent(\"set\", handleNumber);\r\n                fireEvent(\"end\", handleNumber);\r\n            });\r\n        },\r\n        // Bind move events on document.\r\n        eventStart = function(event, data) {\r\n            // Ignore event if any handle is disabled\r\n            if (data.handleNumbers.some(isHandleDisabled)) {\r\n                return false;\r\n            }\r\n\r\n            var handle;\r\n\r\n            if (data.handleNumbers.length === 1) {\r\n                var handleOrigin = handles[data.handleNumbers[0]];\r\n\r\n                handle = handleOrigin.children[0];\r\n                activeHandlesCount += 1;\r\n\r\n                // Mark the handle as 'active' so it can be styled.\r\n                handle.classList.add(prefix + \"slider-active\");\r\n            }\r\n\r\n            // A drag should never propagate up to the 'tap' event.\r\n            event.stopPropagation();\r\n\r\n            // Record the event listeners.\r\n            var listeners = [];\r\n\r\n            // Attach the move and end events.\r\n            var moveEvent = attachEvent(actions.move, DOC, eventMove, {\r\n                // The event target has changed so we need to propagate the original one so that we keep\r\n                // relying on it to extract target touches.\r\n                target: event.target,\r\n                handle: handle,\r\n                listeners: listeners,\r\n                startCalcPoint: event.calcPoint,\r\n                baseSize: baseSize(),\r\n                pageOffset: event.pageOffset,\r\n                handleNumbers: data.handleNumbers,\r\n                buttonsProperty: event.buttons,\r\n                locations: locations.slice()\r\n            });\r\n\r\n            var endEvent = attachEvent(actions.end, DOC, eventEnd, {\r\n                target: event.target,\r\n                handle: handle,\r\n                listeners: listeners,\r\n                doNotReject: true,\r\n                handleNumbers: data.handleNumbers\r\n            });\r\n\r\n            var outEvent = attachEvent(\"mouseout\", DOC, documentLeave, {\r\n                target: event.target,\r\n                handle: handle,\r\n                listeners: listeners,\r\n                doNotReject: true,\r\n                handleNumbers: data.handleNumbers\r\n            });\r\n\r\n            // We want to make sure we pushed the listeners in the listener list rather than creating\r\n            // a new one as it has already been passed to the event handlers.\r\n            listeners.push.apply(listeners, moveEvent.concat(endEvent, outEvent));\r\n\r\n            // Text selection isn't an issue on touch devices,\r\n            // so adding cursor styles can be skipped.\r\n            if (event.cursor) {\r\n                // Prevent the 'I' cursor and extend the range-drag cursor.\r\n                element.style.cursor = getComputedStyle(event.target).cursor;\r\n\r\n                // Mark the target with a dragging state.\r\n                if (handles.length > 1) {\r\n                    slider.classList.add(prefix + \"slider-drag\");\r\n                }\r\n            }\r\n\r\n            data.handleNumbers.forEach(function(handleNumber) {\r\n                fireEvent(\"start\", handleNumber);\r\n            });\r\n        },\r\n        // Move closest handle to tapped location.\r\n        eventTap = function(event) {\r\n            // The tap event shouldn't propagate up\r\n            event.stopPropagation();\r\n\r\n            var proposal = calcPointToPercentage(event.calcPoint);\r\n            var handleNumber = getClosestHandle(proposal);\r\n\r\n            // Tackle the case that all handles are 'disabled'.\r\n            if (handleNumber === false) {\r\n                return false;\r\n            }\r\n\r\n            // Flag the slider as it is now in a transitional state.\r\n            // Transition takes a configurable amount of ms (default 300). Re-enable the slider after that.\r\n            if (!events.snap) {\r\n                addClassFor(slider, prefix +\"slider-tap\", options.animationDuration);\r\n            }\r\n\r\n            setHandle(handleNumber, proposal, true, true);\r\n\r\n            setZindex();\r\n\r\n            fireEvent(\"slide\", handleNumber, true);\r\n            fireEvent(\"update\", handleNumber, true);\r\n            fireEvent(\"change\", handleNumber, true);\r\n            fireEvent(\"set\", handleNumber, true);\r\n\r\n            if (events.snap) {\r\n                eventStart(event, { handleNumbers: [handleNumber] });\r\n            }\r\n        },\r\n\r\n        addTooltip = function(handle, handleNumber) {\r\n            if (!options.tooltips[handleNumber]) {\r\n                return false;\r\n            }\r\n\r\n            return addNodeTo(handle.firstChild, prefix + \"slider-tooltip\");\r\n        },\r\n        isSliderDisabled = function() {\r\n            return slider.hasAttribute(\"disabled\");\r\n        },\r\n        // Disable the slider dragging if any handle is disabled\r\n        isHandleDisabled = function(handleNumber) {\r\n            var handleOrigin = handles[handleNumber];\r\n            return handleOrigin.hasAttribute(\"disabled\");\r\n        },\r\n        // Append a origin to the base\r\n        addOrigin = function(handleNumber) {\r\n            var origin = addNodeTo(sliderBase, prefix + \"slider-origin\");\r\n            var handle = addNodeTo(origin, prefix + \"slider-handle\");\r\n            \r\n            addNodeTo(handle, prefix + \"slider-touch-area\");\r\n            \r\n            handle.setAttribute(\"data-handle\", handleNumber);\r\n            \r\n            // keyboard support\r\n            handle.setAttribute(\"tabindex\", \"0\");\r\n            handle.addEventListener(\"keydown\", function(event) {\r\n                return eventKeydown(event, handleNumber);\r\n            });\r\n                        \r\n            handle.setAttribute(\"role\", \"slider\");\r\n            handle.setAttribute(\"aria-orientation\", options.ort ? \"vertical\" : \"horizontal\");\r\n            \r\n            if (options.handles == 1) {\r\n                handle.classList.add(prefix + \"slider-handle-upper\");\r\n            } else if (handleNumber === 0) {\r\n                handle.classList.add(prefix + \"slider-handle-lower\");\r\n            } else {\r\n                handle.classList.add(prefix + \"slider-handle-upper\");\r\n            }\r\n            \r\n            return origin;\r\n        },\r\n        // nsert nodes for connect elements\r\n        addConnect = function(base, add) {\r\n            if (!add) {\r\n                return false;\r\n            }\r\n            \r\n            return addNodeTo(base, prefix + \"slider-connect\");\r\n        },\r\n        addLabels = function() {\r\n            var min, max, minLabel, maxLabel;\r\n            var minValue = options.format.to(options.range.min);\r\n            var maxValue = options.format.to(options.range.max);\r\n            if (handles.length == 1) {\r\n                max = createElement(\"div\", {\r\n                    class: prefix + \"slider-max\"\r\n                });\r\n                maxLabel = addNodeTo(max);\r\n                maxLabel.innerHTML = maxValue;\r\n                maxContainers.push(maxLabel);\r\n            } else {\r\n                min = createElement(\"div\", {\r\n                    class: prefix + \"slider-min\"\r\n                });\r\n                minLabel = addNodeTo(min);\r\n                minLabel.innerHTML = minValue;\r\n                minContainers.push(minLabel);\r\n                max = createElement(\"div\", {\r\n                    class: prefix + \"slider-max\"\r\n                });\r\n                maxLabel = addNodeTo(max);\r\n                maxLabel.innerHTML = maxValue;\r\n                maxContainers.push(maxLabel);\r\n            }\r\n            if (options.ort === 0) {\r\n                if (min) { container.insertBefore(min, container.childNodes[0]); }\r\n                container.appendChild(max);\r\n            } else {\r\n                if (min) { container.appendChild(min); }\r\n                container.insertBefore(max, container.childNodes[0]);\r\n            }\r\n        },\r\n        addContent = function() {\r\n            var label = createElement(\"div\", {\r\n                class: prefix + \"text-no-wrap \"+prefix+\"mb-3\" + (options.ort == 1 ? \" \"+prefix+\"d-flex \"+prefix+\"flex-column \"+prefix+\"align-items-center\" : \"\")\r\n            });\r\n            var text = DOC.createTextNode(options.content);\r\n            label.appendChild(text);\r\n            element.insertBefore(label, element.firstChild);\r\n            if (options.showRange) {\r\n                var span = createElement(\"span\", {\r\n                    html: \" ( \" + options.format.to(options.range.min) + \" - \" + options.format.to(options.range.max) + \" )\"\r\n                });\r\n                label.appendChild(span);\r\n            }\r\n        },\r\n        addContainer = function() {\r\n            container = element.querySelector(\".\" + prefix + \"slider-container\");\r\n        \r\n            // if vertical add class to parent\r\n            if(options.ort == 1) {\r\n                container.classList.add(prefix + \"slider-container-vertical\");\r\n            }\r\n            \r\n            // update wrapper to singe with one handle\r\n            if (options.handles == 1) {\r\n                var wrapper = container.querySelector(\".\" + prefix + \"slider-wrapper\");\r\n                wrapper.classList.remove(prefix + \"slider-wrapper\");\r\n                wrapper.classList.add(prefix + \"slider-wrapper-single\");\r\n            }\r\n        },\r\n        addElements = function() {\r\n\r\n            var connectBase = addNodeTo(sliderBase, prefix + \"slider-connects\");\r\n\r\n            handles = [];\r\n            connects = [];\r\n            handleNumbers = [];\r\n            var optConnects;\r\n\r\n            if (options.handles === 1) {\r\n                optConnects = [true,false];\r\n            } else {\r\n                optConnects = [false,options.range,false];\r\n            }\r\n            connects.push(addConnect(connectBase, optConnects[0]));\r\n\r\n            for (var i = 0; i < options.handles; i++) {\r\n                // Keep a list of all added handles.\r\n                handles.push(addOrigin(i));\r\n                handleNumbers[i] = i;\r\n                connects.push(addConnect(connectBase, optConnects[i + 1]));\r\n            }\r\n        },\r\n        // Initialize a single slider.\r\n        addSlider = function() {\r\n\r\n            if (options.dir === 0) {\r\n                slider.classList.add(prefix + \"slider-ltr\");\r\n            } else {\r\n                slider.classList.add(prefix + \"slider-rtl\");\r\n            }\r\n\r\n            if (options.ort === 0) {\r\n                slider.classList.add(prefix + \"slider-horizontal\");\r\n            } else {\r\n                slider.classList.add(prefix + \"slider-vertical\");\r\n            }\r\n\r\n            var base = addNodeTo(slider, prefix + \"slider-base\");\r\n            base.setAttribute(\"tabindex\", \"0\");\r\n            base.setAttribute(\"aria-label\", (options.content ? options.content : \"Slider\") + \" \"  + options.format.to(options.range.min) + \" to \" + options.format.to(options.range.max));\r\n                    \r\n            return base;\r\n        },\r\n        valueSet = function(input, fireSetEvent) {\r\n            var values = asArray(input);\r\n            var isInit = locations[0] === undefined;\r\n\r\n            // Event fires by default\r\n            fireSetEvent = fireSetEvent === undefined ? true : !!fireSetEvent;\r\n\r\n            // Animation is optional.\r\n            // Make sure the initial values were set before using animated placement.\r\n            if (options.animate && !isInit) {\r\n                addClassFor(slider, prefix + \"slider-tap\", options.animationDuration);\r\n            }\r\n\r\n            // First pass, without lookAhead but with lookBackward. Values are set from left to right.\r\n            handleNumbers.forEach(function(handleNumber) {\r\n                setHandle(handleNumber, resolveToValue(values[handleNumber], handleNumber), true, false);\r\n            });\r\n\r\n            // Second pass. Now that all base values are set, apply constraints\r\n            handleNumbers.forEach(function(handleNumber) {\r\n                setHandle(handleNumber, locations[handleNumber], true, true);\r\n            });\r\n\r\n            setZindex();\r\n\r\n            handleNumbers.forEach(function(handleNumber) {\r\n                fireEvent(\"update\", handleNumber);\r\n\r\n                // Fire the event only for handles that received a new value, as per #579\r\n                if (values[handleNumber] !== null && fireSetEvent) {\r\n                    fireEvent(\"set\", handleNumber);\r\n                }\r\n            });\r\n        },\r\n\r\n        asArray = function(a) {\r\n            return Array.isArray(a) ? a : [a];\r\n        },\r\n        addClassFor = function(element, className, duration) {\r\n            if (duration > 0) {\r\n                element.classList.add(className);\r\n                setTimeout(function() {\r\n                    element.classList.remove(className);\r\n                }, duration);\r\n            }\r\n        },\r\n        // Counts decimals\r\n        countDecimals = function(numStr) {\r\n            numStr = String(numStr);\r\n            var pieces = numStr.split(\".\");\r\n            return pieces.length > 1 ? pieces[1].length : 0;\r\n        },\r\n        // Limits a value to 0 - 100\r\n        limit = function(a) {\r\n            return Math.max(Math.min(a, 100), 0);\r\n        },\r\n        // Moves handle(s) by a percentage\r\n        // (bool, % to move, [% where handle started, ...], [index in handles, ...])\r\n        moveHandles = function(upward, proposal, locations, handleNumbers) {\r\n            var proposals = locations.slice();\r\n\r\n            var b = [!upward, upward];\r\n            var f = [upward, !upward];\r\n\r\n            // Copy handleNumbers so we don't change the dataset\r\n            handleNumbers = handleNumbers.slice();\r\n\r\n            // Check to see which handle is 'leading'.\r\n            // If that one can't move the second can't either.\r\n            if (upward) {\r\n                handleNumbers.reverse();\r\n            }\r\n\r\n            // Step 1: get the maximum percentage that any of the handles can move\r\n            if (handleNumbers.length > 1) {\r\n                handleNumbers.forEach(function(handleNumber, o) {\r\n                    var to = checkHandlePosition(\r\n                        proposals,\r\n                        handleNumber,\r\n                        proposals[handleNumber] + proposal,\r\n                        b[o],\r\n                        f[o],\r\n                        false\r\n                    );\r\n\r\n                    // Stop if one of the handles can't move.\r\n                    if (to === false) {\r\n                        proposal = 0;\r\n                    } else {\r\n                        proposal = to - proposals[handleNumber];\r\n                        proposals[handleNumber] = to;\r\n                    }\r\n                });\r\n            }\r\n\r\n            // If using one handle, check backward AND forward\r\n            else {\r\n                b = f = [true];\r\n            }\r\n\r\n            var state = false;\r\n\r\n            // Step 2: Try to set the handles with the found percentage\r\n            handleNumbers.forEach(function(handleNumber, o) {\r\n                state = setHandle(handleNumber, locations[handleNumber] + proposal, b[o], f[o]) || state;\r\n            });\r\n\r\n            // Step 3: If a handle moved, fire events\r\n            if (state) {\r\n                handleNumbers.forEach(function(handleNumber) {\r\n                    fireEvent(\"update\", handleNumber);\r\n                    fireEvent(\"slide\", handleNumber);\r\n                });\r\n            }\r\n        },\r\n        // Takes a base value and an offset. This offset is used for the connect bar size.\r\n        // In the initial design for this feature, the origin element was 1% wide.\r\n        // Unfortunately, a rounding bug in Chrome makes it impossible to implement this feature\r\n        // in this manner: https://bugs.chromium.org/p/chromium/issues/detail?id=798223\r\n        transformDirection = function(a, b) {\r\n            return options.dir ? 100 - a - b : a;\r\n        },\r\n        // Updates locations and values, updates visual state\r\n        updateHandlePosition = function(handleNumber, to) {\r\n            // Update locations.\r\n            locations[handleNumber] = to;\r\n\r\n            // Convert the value to the slider stepping/range.\r\n            values[handleNumber] = spectrum.fromStepping(to);\r\n\r\n            var rule = \"translate(\" + inRuleOrder(transformDirection(to, 0) - dirOffset + \"%\", \"0\") + \")\";\r\n            handles[handleNumber].style[transformRule] = rule;\r\n\r\n            updateConnect(handleNumber);\r\n            updateConnect(handleNumber + 1);\r\n        },\r\n        // Test suggested values and apply margin, step.\r\n        setHandle = function(handleNumber, to, lookBackward, lookForward) {\r\n            to = checkHandlePosition(locations, handleNumber, to, lookBackward, lookForward, false);\r\n\r\n            if (to === false) {\r\n                return false;\r\n            }\r\n\r\n            updateHandlePosition(handleNumber, to);\r\n\r\n            return true;\r\n        },\r\n        // Updates style attribute for connect nodes\r\n        updateConnect = function(index) {\r\n            // Skip connects set to false\r\n            if (!connects[index]) {\r\n                return;\r\n            }\r\n\r\n            var l = 0;\r\n            var h = 100;\r\n\r\n            if (index !== 0) {\r\n                l = locations[index - 1];\r\n            }\r\n\r\n            if (index !== connects.length - 1) {\r\n                h = locations[index];\r\n            }\r\n\r\n            // We use two rules:\r\n            // 'translate' to change the left/top offset;\r\n            // 'scale' to change the width of the element;\r\n            // As the element has a width of 100%, a translation of 100% is equal to 100% of the parent (.noUi-base)\r\n            var connectWidth = h - l;\r\n            var translateRule = \"translate(\" + inRuleOrder(transformDirection(l, connectWidth) + \"%\", \"0\") + \")\";\r\n            var scaleRule = \"scale(\" + inRuleOrder(connectWidth / 100, \"1\") + \")\";\r\n\r\n            connects[index].style[transformRule] = translateRule + \" \" + scaleRule;\r\n        },\r\n        setZindex = function() {\r\n            handleNumbers.forEach(function(handleNumber) {\r\n                var dir = locations[handleNumber] > 50 ? -1 : 1;\r\n                var zIndex = 3 + (handles.length + dir * handleNumber);\r\n                handles[handleNumber].style.zIndex = zIndex;\r\n            });\r\n        },\r\n        // Undo attachment of event\r\n        removeEvent = function(namespacedEvent) {\r\n            var event = namespacedEvent && namespacedEvent.split(\".\")[0];\r\n            var namespace = event && namespacedEvent.substring(event.length);\r\n\r\n            Object.keys(events).forEach(function(bind) {\r\n                var tEvent = bind.split(\".\")[0];\r\n                var tNamespace = bind.substring(tEvent.length);\r\n\r\n                if ((!event || event === tEvent) && (!namespace || namespace === tNamespace)) {\r\n                    delete events[bind];\r\n                }\r\n            });\r\n        },\r\n        // External event handling\r\n        fireEvent = function(eventName, handleNumber, tap) {\r\n            Object.keys(events).forEach(function(targetEvent) {\r\n                var eventType = targetEvent.split(\".\")[0];\r\n\r\n                if (eventName === eventType) {\r\n                    events[targetEvent].forEach(function(callback) {\r\n                        callback.call(\r\n                            // Use the slider public API as the scope ('this')\r\n                            self,\r\n                            // Return values as array, so arg_1[arg_2] is always valid.\r\n                            values.map(options.format.to),\r\n                            // Handle index, 0 or 1\r\n                            handleNumber,\r\n                            // Un-formatted slider values\r\n                            values.slice(),\r\n                            // Event is fired by tap, true or false\r\n                            tap || false,\r\n                            // Left offset of the handle, in relation to the slider\r\n                            locations.slice()\r\n                        );\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        // Split out the handle positioning logic so the Move event can use it, too\r\n        checkHandlePosition = function(reference, handleNumber, to, lookBackward, lookForward, getValue) {\r\n            // For sliders with multiple handles, limit movement to the other handle.\r\n            // Apply the margin option by adding it to the handle positions.\r\n            if (handles.length > 1 && !optEvents.unconstrained) {\r\n                if (lookBackward && handleNumber > 0) {\r\n                    to = Math.max(to, reference[handleNumber - 1] + options.margin);\r\n                }\r\n\r\n                if (lookForward && handleNumber < handles.length - 1) {\r\n                    to = Math.min(to, reference[handleNumber + 1] - options.margin);\r\n                }\r\n            }\r\n\r\n            // The limit option has the opposite effect, limiting handles to a\r\n            // maximum distance from another. Limit must be > 0, as otherwise\r\n            // handles would be unmovable.\r\n            if (handles.length > 1 && options.limit) {\r\n                if (lookBackward && handleNumber > 0) {\r\n                    to = Math.min(to, reference[handleNumber - 1] + options.limit);\r\n                }\r\n\r\n                if (lookForward && handleNumber < handles.length - 1) {\r\n                    to = Math.max(to, reference[handleNumber + 1] - options.limit);\r\n                }\r\n            }\r\n\r\n            // The padding option keeps the handles a certain distance from the\r\n            // edges of the slider. Padding must be > 0.\r\n            if (options.padding) {\r\n                if (handleNumber === 0) {\r\n                    to = Math.max(to, options.padding[0]);\r\n                }\r\n\r\n                if (handleNumber === handles.length - 1) {\r\n                    to = Math.min(to, 100 - options.padding[1]);\r\n                }\r\n            }\r\n\r\n            to = spectrum.getStep(to);\r\n\r\n            // Limit percentage to the 0 - 100 range\r\n            to = limit(to);\r\n\r\n            // Return false if handle can't move\r\n            if (to === reference[handleNumber] && !getValue) {\r\n                return false;\r\n            }\r\n\r\n            return to;\r\n        },\r\n        // Uses slider orientation to create CSS rules. a = base value;\r\n        inRuleOrder = function(v, a) {\r\n            var o = options.ort;\r\n            return (o ? a : v) + \", \" + (o ? v : a);\r\n        },\r\n        // Parses value passed to .set method. Returns current value if not parse-able.\r\n        resolveToValue = function(to, handleNumber) {\r\n            // Setting with null indicates an 'ignore'.\r\n            // Inputting 'false' is invalid.\r\n            if (to === null || to === false || to === undefined) {\r\n                return locations[handleNumber];\r\n            }\r\n\r\n            // If a formatted number was passed, attempt to decode it.\r\n            if (typeof to === \"number\") {\r\n                to = String(to);\r\n            }\r\n\r\n            to = options.format.from(to);\r\n            to = spectrum.toStepping(to);\r\n\r\n            // If parsing the number failed, use the current value.\r\n            if (to === false || isNaN(to)) {\r\n                return locations[handleNumber];\r\n            }\r\n\r\n            return to;\r\n        },\r\n        toStepping = function(xVal, xPct, value) {\r\n            if (value >= xVal.slice(-1)[0]) {\r\n                return 100;\r\n            }\r\n    \r\n            var j = getJ(value, xVal);\r\n            var va = xVal[j - 1];\r\n            var vb = xVal[j];\r\n            var pa = xPct[j - 1];\r\n            var pb = xPct[j];\r\n    \r\n            return pa + toPercentage([va, vb], value) / subRangeRatio(pa, pb);\r\n        },\r\n        // (value) Input a percentage, find where it is on the specified range.\r\n        fromStepping = function(xVal, xPct, value) {\r\n            // There is no range group that fits 100\r\n            if (value >= 100) {\r\n                return xVal.slice(-1)[0];\r\n            }\r\n\r\n            var j = getJ(value, xPct);\r\n            var va = xVal[j - 1];\r\n            var vb = xVal[j];\r\n            var pa = xPct[j - 1];\r\n            var pb = xPct[j];\r\n\r\n            return isPercentage([va, vb], (value - pa) * subRangeRatio(pa, pb));\r\n        },\r\n        subRangeRatio = function(pa, pb) {\r\n            return 100 / (pb - pa);\r\n        },\r\n        // (percentage) How many percent is this value of this range?\r\n        fromPercentage = function(range, value) {\r\n            return (value * 100) / (range[1] - range[0]);\r\n        },\r\n        // (percentage) Where is this value on this range?\r\n        toPercentage = function(range, value) {\r\n            return fromPercentage(range, range[0] < 0 ? value + Math.abs(range[0]) : value - range[0]);\r\n        },\r\n        // (percentage) Get the step that applies at a certain value.\r\n        getStep = function(xPct, xSteps, snap, value) {\r\n            \r\n            if (value === 100) {\r\n                return value;\r\n            }\r\n\r\n            var j = getJ(value, xPct);\r\n            var a = xPct[j - 1];\r\n            var b = xPct[j];\r\n\r\n            // If 'snap' is set, steps are used as fixed points on the slider.\r\n            if (snap) {\r\n                // Find the closest position, a or b.\r\n                if (value - a > (b - a) / 2) {\r\n                    return b;\r\n                }\r\n\r\n                return a;\r\n            }\r\n\r\n            if (!xSteps[j - 1]) {\r\n                return value;\r\n            }\r\n\r\n            return xPct[j - 1] + closest(value - xPct[j - 1], xSteps[j - 1]);\r\n        },\r\n        handleEntryPoint = function(index, value, that) {\r\n            var percentage;\r\n    \r\n            // Wrap numerical input in an array.\r\n            if (typeof value === \"number\") {\r\n                value = [value];\r\n            }\r\n    \r\n            // Reject any invalid input, by testing whether value is an array.\r\n            if (!isArray(value)) {\r\n                throw new Error(\"Slider 'range' contains invalid value.\");\r\n            }\r\n    \r\n            // Covert min/max syntax to 0 and 100.\r\n            if (index === \"min\") {\r\n                percentage = 0;\r\n            } else if (index === \"max\") {\r\n                percentage = 100;\r\n            } else {\r\n                percentage = parseFloat(index);\r\n            }\r\n    \r\n            // Check for correct input.\r\n            if (!isNumeric(percentage) || !isNumeric(value[0])) {\r\n                throw new Error(\"Slider 'range' value isn't numeric.\");\r\n            }\r\n    \r\n            // Store values.\r\n            that.xPct.push(percentage);\r\n            that.xVal.push(value[0]);\r\n    \r\n            // NaN will evaluate to false too, but to keep\r\n            // logging clear, set step explicitly. Make sure\r\n            // not to override the 'step' setting with false.\r\n            if (!percentage) {\r\n                if (!isNaN(value[1])) {\r\n                    that.xSteps[0] = value[1];\r\n                }\r\n            } else {\r\n                that.xSteps.push(isNaN(value[1]) ? false : value[1]);\r\n            }\r\n    \r\n            that.xHighestCompleteStep.push(0);\r\n        },\r\n        handleStepPoint = function(i, n, that) {\r\n            // Ignore 'false' stepping.\r\n            if (!n) {\r\n                return;\r\n            }\r\n    \r\n            // Step over zero-length ranges (#948);\r\n            if (that.xVal[i] === that.xVal[i + 1]) {\r\n                that.xSteps[i] = that.xHighestCompleteStep[i] = that.xVal[i];\r\n    \r\n                return;\r\n            }\r\n    \r\n            // Factor to range ratio\r\n            that.xSteps[i] =\r\n                fromPercentage([that.xVal[i], that.xVal[i + 1]], n) / subRangeRatio(that.xPct[i], that.xPct[i + 1]);\r\n    \r\n            var totalSteps = (that.xVal[i + 1] - that.xVal[i]) / that.xNumSteps[i];\r\n            var highestStep = Math.ceil(Number(totalSteps.toFixed(3)) - 1);\r\n            var step = that.xVal[i] + that.xNumSteps[i] * highestStep;\r\n    \r\n            that.xHighestCompleteStep[i] = step;\r\n        },\r\n        // Checks whether a value is numerical.\r\n        isNumeric = function(a) {\r\n            return typeof a === \"number\" && !isNaN(a) && isFinite(a);\r\n        },\r\n        // (value) How much is this percentage on this range?\r\n        isPercentage = function(range, value) {\r\n            return (value * (range[1] - range[0])) / 100 + range[0];\r\n        },\r\n        getJ = function(value, arr) {\r\n            \r\n            var j = 1;\r\n    \r\n            while (value >= arr[j]) {\r\n                j += 1;\r\n            }\r\n    \r\n            return j;\r\n        },\r\n        // Shorthand for base dimensions.\r\n        baseSize = function() {\r\n            var rect = sliderBase.getBoundingClientRect();\r\n            var alt = \"offset\" + [\"Width\", \"Height\"][options.ort];\r\n            return options.ort === 0 ? rect.width || sliderBase[alt] : rect.height || sliderBase[alt];\r\n        },\r\n        // Handler for attaching events trough a proxy.\r\n        attachEvent = function(events, element, callback, data) {\r\n            // This function can be used to 'filter' events to the slider.\r\n            // element is a node, not a nodeList\r\n\r\n            var method = function(e) {\r\n                e = fixEvent(e, data.pageOffset, data.target || element);\r\n\r\n                // fixEvent returns false if this event has a different target\r\n                // when handling (multi-) touch events;\r\n                if (!e) {\r\n                    return false;\r\n                }\r\n\r\n                // doNotReject is passed by all end events to make sure released touches\r\n                // are not rejected, leaving the slider \"stuck\" to the cursor;\r\n                if (isSliderDisabled() && !data.doNotReject) {\r\n                    return false;\r\n                }\r\n\r\n                // Stop if an active 'tap' transition is taking place.\r\n                if (slider.classList.contains(prefix + \"slider-tap\") && !data.doNotReject) {\r\n                    return false;\r\n                }\r\n\r\n                // Ignore right or middle clicks on start #454\r\n                if (events === actions.start && e.buttons !== undefined && e.buttons > 1) {\r\n                    return false;\r\n                }\r\n\r\n                // Ignore right or middle clicks on start #454\r\n                if (data.hover && e.buttons) {\r\n                    return false;\r\n                }\r\n\r\n                // 'supportsPassive' is only true if a browser also supports touch-action: none in CSS.\r\n                // iOS safari does not, so it doesn't get to benefit from passive scrolling. iOS does support\r\n                // touch-action: manipulation, but that allows panning, which breaks\r\n                // sliders after zooming/on non-responsive pages.\r\n                // See: https://bugs.webkit.org/show_bug.cgi?id=133112\r\n                if (!supportsPassive) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                e.calcPoint = e.points[options.ort];\r\n\r\n                // Call the event handler with the event [ and additional data ].\r\n                callback(e, data);\r\n            };\r\n\r\n            var methods = [];\r\n\r\n            // Bind a closure on the target for every event type.\r\n            events.split(\" \").forEach(function(eventName) {\r\n                element.addEventListener(eventName, method, supportsPassive ? { passive: true } : false);\r\n                methods.push([eventName, method]);\r\n            });\r\n\r\n            return methods;\r\n        },\r\n        // Provide a clean event with standardized offset values.\r\n        fixEvent = function(e, pageOffset, eventTarget) {\r\n            // Filter the event to register the type, which can be\r\n            // touch, mouse or pointer. Offset changes need to be\r\n            // made on an event specific basis.\r\n            var touch = e.type.indexOf(\"touch\") === 0;\r\n            var mouse = e.type.indexOf(\"mouse\") === 0;\r\n            var pointer = e.type.indexOf(\"pointer\") === 0;\r\n\r\n            var x;\r\n            var y;\r\n\r\n            // The only thing one handle should be concerned about is the touches that originated on top of it.\r\n            if (touch) {\r\n                // Returns true if a touch originated on the target.\r\n                var isTouchOnTarget = function(checkTouch) {\r\n                    return checkTouch.target === eventTarget || eventTarget.contains(checkTouch.target);\r\n                };\r\n\r\n                // In the case of touchstart events, we need to make sure there is still no more than one\r\n                // touch on the target so we look amongst all touches.\r\n                if (e.type === \"touchstart\") {\r\n                    var targetTouches = Array.prototype.filter.call(e.touches, isTouchOnTarget);\r\n\r\n                    // Do not support more than one touch per handle.\r\n                    if (targetTouches.length > 1) {\r\n                        return false;\r\n                    }\r\n\r\n                    x = targetTouches[0].pageX;\r\n                    y = targetTouches[0].pageY;\r\n                } else {\r\n                    // In the other cases, find on changedTouches is enough.\r\n                    var targetTouch = Array.prototype.find.call(e.changedTouches, isTouchOnTarget);\r\n\r\n                    // Cancel if the target touch has not moved.\r\n                    if (!targetTouch) {\r\n                        return false;\r\n                    }\r\n\r\n                    x = targetTouch.pageX;\r\n                    y = targetTouch.pageY;\r\n                }\r\n            }\r\n\r\n            pageOffset = pageOffset || getPageOffset(DOC);\r\n\r\n            if (mouse || pointer) {\r\n                x = e.clientX + pageOffset.x;\r\n                y = e.clientY + pageOffset.y;\r\n            }\r\n\r\n            e.pageOffset = pageOffset;\r\n            e.points = [x, y];\r\n            e.cursor = mouse || pointer; // Fix #435\r\n\r\n            return e;\r\n        },\r\n        // Translate a coordinate in the document to a percentage on the slider\r\n        calcPointToPercentage = function(calcPoint) {\r\n            var location = calcPoint - offset(sliderBase, options.ort);\r\n            var proposal = (location * 100) / baseSize();\r\n\r\n            // Clamp proposal between 0% and 100%\r\n            proposal = limit(proposal);\r\n\r\n            return options.dir ? 100 - proposal : proposal;\r\n        },\r\n        // Find handle closest to a certain percentage on the slider\r\n        getClosestHandle = function(proposal) {\r\n            var closest = 100;\r\n            var handleNumber = false;\r\n\r\n            handles.forEach(function(handle, index) {\r\n                // Disabled handles are ignored\r\n                if (isHandleDisabled(index)) {\r\n                    return;\r\n                }\r\n\r\n                var pos = Math.abs(locations[index] - proposal);\r\n\r\n                if (pos < closest || (pos === 100 && closest === 100)) {\r\n                    handleNumber = index;\r\n                    closest = pos;\r\n                }\r\n            });\r\n\r\n            return handleNumber;\r\n        },\r\n        removeTooltips = function() {\r\n            if (tooltips) {\r\n                removeEvent(\"update.tooltips\");\r\n                tooltips.forEach(function(tooltip) {\r\n                    if (tooltip) {\r\n                        removeElement(tooltip);\r\n                    }\r\n                });\r\n                tooltips = null;\r\n            }\r\n        },\r\n        // The tooltips option is a shorthand for using the 'update' event.\r\n        setTooltips = function() {\r\n            removeTooltips();\r\n\r\n            // Tooltips are added with options.tooltips in original order.\r\n            tooltips = handles.map(addTooltip);\r\n\r\n            bindEvent(\"update.tooltips\", function(values, handleNumber, unencoded) {\r\n                if (!tooltips[handleNumber]) {\r\n                    return;\r\n                }\r\n\r\n                var formattedValue = values[handleNumber];\r\n\r\n                if (options.tooltips[handleNumber] !== true) {\r\n                    formattedValue = options.tooltips[handleNumber].to(unencoded[handleNumber]);\r\n                }\r\n\r\n                tooltips[handleNumber].innerHTML = formattedValue;\r\n            });\r\n\r\n            // Fix for vertical sliders, if tooltip flows off the window move it the right side.\r\n            if (options.ort == 1 &&\r\n                offWindowLeft(handles[0].querySelector(\".\" + prefix + \"slider-tooltip\"), handles[0].querySelector(\"div.\"+prefix+\"slider-handle\"))) {\r\n                each(handles, function(handle) {\r\n                    handle.querySelector(\".\" + prefix + \"slider-tooltip\").style.right = \"auto\";\r\n                    handle.querySelector(\".\" + prefix + \"slider-tooltip\").style.left = \"120%\";\r\n                });\r\n            }\r\n        },\r\n        aria = function() {\r\n            bindEvent(\"update\", function(values, handleNumber, unencoded, tap, positions) {\r\n                // Update Aria Values for all handles, as a change in one changes min and max values for the next.\r\n                handleNumbers.forEach(function(index) {\r\n                    var handle = handles[index];\r\n\r\n                    var min = checkHandlePosition(locations, index, 0, true, true, true);\r\n                    var max = checkHandlePosition(locations, index, 100, true, true, true);\r\n\r\n                    var now = positions[index];\r\n\r\n                    // Formatted value for display\r\n                    var text = options.ariaFormat.to(unencoded[index]);\r\n\r\n                    // Map to slider range values\r\n                    min = spectrum.fromStepping(min).toFixed(options.percision);\r\n                    max = spectrum.fromStepping(max).toFixed(options.percision);\r\n                    now = spectrum.fromStepping(now).toFixed(options.percision);\r\n                    \r\n                    handle.children[0].setAttribute(\"aria-valuemin\", min);\r\n                    handle.children[0].setAttribute(\"aria-valuemax\", max);\r\n                    handle.children[0].setAttribute(\"aria-valuenow\", now);\r\n                    handle.children[0].setAttribute(\"aria-valuetext\", text);\r\n                });\r\n            });\r\n        },\r\n        // Get the slider value.\r\n        get = function() {\r\n            var v = values.map(options.format.to);\r\n\r\n            // If only one handle is used, return a single value.\r\n            if (v.length === 1) {\r\n                return values[0];\r\n            }\r\n\r\n            return v;\r\n        },\r\n        removeElement = function(el) {\r\n            el.parentElement.removeChild(el);\r\n        },\r\n        getPageOffset = function(doc) {\r\n            var supportPageOffset = window.pageXOffset !== undefined;\r\n            var isCSS1Compat = (doc.compatMode || \"\") === \"CSS1Compat\";\r\n            var x = supportPageOffset\r\n                ? window.pageXOffset\r\n                : isCSS1Compat\r\n                    ? doc.documentElement.scrollLeft\r\n                    : doc.body.scrollLeft;\r\n            var y = supportPageOffset\r\n                ? window.pageYOffset\r\n                : isCSS1Compat\r\n                    ? doc.documentElement.scrollTop\r\n                    : doc.body.scrollTop;\r\n\r\n            return {\r\n                x: x,\r\n                y: y\r\n            };\r\n        },\r\n        // we provide a function to compute constants instead\r\n        // of accessing window.* as soon as the module needs it\r\n        // so that we do not compute anything if not needed\r\n        getActions = function() {\r\n            // Determine the events to bind. IE11 implements pointerEvents without\r\n            // a prefix, which breaks compatibility with the IE10 implementation.\r\n            return window.navigator.pointerEnabled\r\n                ? {\r\n                    start: \"pointerdown\",\r\n                    move: \"pointermove\",\r\n                    end: \"pointerup\"\r\n                }\r\n                : window.navigator.msPointerEnabled\r\n                    ? {\r\n                        start: \"MSPointerDown\",\r\n                        move: \"MSPointerMove\",\r\n                        end: \"MSPointerUp\"\r\n                    }\r\n                    : {\r\n                        start: \"mousedown touchstart\",\r\n                        move: \"mousemove touchmove\",\r\n                        end: \"mouseup touchend\"\r\n                    };\r\n        };\r\n        \r\n    function Spectrum(entry, snap, singleStep) {\r\n        this.xPct = [];\r\n        this.xVal = [];\r\n        this.xSteps = [singleStep || false];\r\n        this.xNumSteps = [false];\r\n        this.xHighestCompleteStep = [];\r\n    \r\n        this.snap = snap;\r\n    \r\n        var index;\r\n        var ordered = []; // [0, 'min'], [1, '50%'], [2, 'max']\r\n    \r\n        // Map the object keys to an array.\r\n        for (index in entry) {\r\n            if (Object.prototype.hasOwnProperty.call(entry, index)) {\r\n                ordered.push([entry[index], index]);\r\n            }\r\n        }\r\n    \r\n        // Sort all entries by value (numeric sort).\r\n        if (ordered.length && typeof ordered[0][0] === \"object\") {\r\n            ordered.sort(function(a, b) {\r\n                return a[0][0] - b[0][0];\r\n            });\r\n        } else {\r\n            ordered.sort(function(a, b) {\r\n                return a[0] - b[0];\r\n            });\r\n        }\r\n    \r\n        // Convert all entries to subranges.\r\n        for (index = 0; index < ordered.length; index++) {\r\n            handleEntryPoint(ordered[index][1], ordered[index][0], this);\r\n        }\r\n    \r\n        // Store the actual step values.\r\n        // xSteps is sorted in the same order as xPct and xVal.\r\n        this.xNumSteps = this.xSteps.slice(0);\r\n    \r\n        // Convert all numeric steps to the percentage of the subrange they represent.\r\n        for (index = 0; index < this.xNumSteps.length; index++) {\r\n            handleStepPoint(index, this.xNumSteps[index], this);\r\n        }\r\n    }\r\n\r\n    Spectrum.prototype.getMargin = function(value) {\r\n        var step = this.xNumSteps[0];\r\n    \r\n        if (step && (value / step) % 1 !== 0) {\r\n            throw new Error(\"Slider 'limit', 'margin' and 'padding' must be divisible by step.\");\r\n        }\r\n    \r\n        return this.xPct.length === 2 ? fromPercentage(this.xVal, value) : false;\r\n    };\r\n    \r\n    Spectrum.prototype.toStepping = function(value) {\r\n        value = toStepping(this.xVal, this.xPct, value);\r\n    \r\n        return value;\r\n    };\r\n    \r\n    Spectrum.prototype.fromStepping = function(value) {\r\n        return fromStepping(this.xVal, this.xPct, value);\r\n    };\r\n    \r\n    Spectrum.prototype.getStep = function(value) {\r\n        value = getStep(this.xPct, this.xSteps, this.snap, value);\r\n    \r\n        return value;\r\n    };\r\n    \r\n    Spectrum.prototype.getDefaultStep = function(value, isDown, size) {\r\n        var j = getJ(value, this.xPct);\r\n    \r\n        // When at the top or stepping down, look at the previous sub-range\r\n        if (value === 100 || (isDown && value === this.xPct[j - 1])) {\r\n            j = Math.max(j - 1, 1);\r\n        }\r\n    \r\n        return (this.xVal[j] - this.xVal[j - 1]) / size;\r\n    };\r\n    \r\n    Spectrum.prototype.getNearbySteps = function(value) {\r\n        var j = getJ(value, this.xPct);\r\n    \r\n        return {\r\n            stepBefore: {\r\n                startValue: this.xVal[j - 2],\r\n                step: this.xNumSteps[j - 2],\r\n                highestStep: this.xHighestCompleteStep[j - 2]\r\n            },\r\n            thisStep: {\r\n                startValue: this.xVal[j - 1],\r\n                step: this.xNumSteps[j - 1],\r\n                highestStep: this.xHighestCompleteStep[j - 1]\r\n            },\r\n            stepAfter: {\r\n                startValue: this.xVal[j],\r\n                step: this.xNumSteps[j],\r\n                highestStep: this.xHighestCompleteStep[j]\r\n            }\r\n        };\r\n    };\r\n    \r\n    Spectrum.prototype.countStepDecimals = function() {\r\n        var stepDecimals = this.xNumSteps.map(countDecimals);\r\n        return Math.max.apply(null, stepDecimals);\r\n    };\r\n    \r\n    // Outside testing\r\n    Spectrum.prototype.convert = function(value) {\r\n        return this.getStep(this.toStepping(value));\r\n    };\r\n\r\n    // init\r\n    if (!(stringSlider in element)) {\r\n        validateOptions(options);\r\n        \r\n        if (options.ort == 1) {\r\n            element.classList.add(prefix+\"align-items-center\");\r\n        }\r\n        if (options.content) {\r\n            addContent();\r\n        }\r\n        \r\n        addContainer();\r\n\r\n        actions = getActions();\r\n\r\n        slider = element.querySelector(\".\" + prefix + \"slider-target\");\r\n        sliderBase = addSlider();\r\n        addElements();\r\n\r\n        // Attach user events.\r\n        bindSliderEvents(optEvents);\r\n\r\n        // Use the public value method to set the start values.\r\n        valueSet(options.start);\r\n\r\n        if (options.tooltips) {\r\n            setTooltips();\r\n        }\r\n\r\n        aria();\r\n\r\n        bindEvent(\"end\", endEventHandler);\r\n\r\n        addLabels();\r\n\r\n        for (var i = 0; i < handles.length; i++) {\r\n            handles[i].firstChild.addEventListener(\"focus\", focusEventHandler, false);\r\n            handles[i].firstChild.addEventListener(\"blur\", blurEventHandler, false);\r\n            handles[i].addEventListener(\"keyup\", endEventHandler, false);\r\n        }\r\n        element.addEventListener(\"click\", endEventHandler, false);\r\n    }\r\n\r\n    element[stringSlider] = self;\r\n\r\n}\r\n","import {getClosest, prefix, DOC, isSafari, isIOS, uicoreCustomEvent, createElement, each, setFocus, getFocusableElements, jsonOptionsInit} from \"./utilities.js\";\r\nimport Overflow from \"./overflow.js\";\r\nimport Collapse from \"./collapse.js\";\r\n\r\nexport default function Tab(element, options) {\r\n\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    options.lazyload = typeof options.lazyload === \"boolean\" ? options.lazyload : false;\r\n\r\n    var self = this,\r\n        stringTab = \"Tab\",\r\n        tablist,\r\n        activeTab = null,\r\n        modalElement,\r\n        withinModal,\r\n        tabs,\r\n        backButton,\r\n        panels,\r\n        delay,\r\n        nested = false,\r\n        focusableEls,\r\n        thresholdMediaSize,\r\n        tabContainer,\r\n        accordionWrapper,\r\n        smallMediaSize = window.matchMedia(\"(max-width: 767.98px)\"),\r\n        overflow,\r\n        overflowContainer;\r\n\r\n    // Key mappings for easy reference\r\n    var keys = {\r\n        end: 35,\r\n        home: 36,\r\n        left: 37,\r\n        up: 38,\r\n        right: 39,\r\n        down: 40,\r\n        delete: 46\r\n    };\r\n\r\n    // Add or substract depending on key pressed\r\n    var direction = {\r\n            37: -1,\r\n            38: -1,\r\n            39: 1,\r\n            40: 1\r\n        },\r\n        handleOverflowEvent = function(e) {\r\n            overflow.detail = e.detail;\r\n        },\r\n        setFocusableElements = function() {\r\n            focusableEls = getFocusableElements(modalElement);\r\n            modalElement.firstFocusableEl = focusableEls[0];\r\n            modalElement.lastFocusableEl = focusableEls[ focusableEls.length - 1 ];\r\n        },\r\n        handleBackwardTab = function (e) {\r\n            if ( document.activeElement === modalElement.firstFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.lastFocusableEl);\r\n            }\r\n        },\r\n        handleForwardTab = function (e) {\r\n            if ( document.activeElement === modalElement.lastFocusableEl ) {\r\n                e.preventDefault();\r\n                setFocus(modalElement.firstFocusableEl);\r\n            }\r\n        },\r\n        handleModalKeydown = function(e) {\r\n            var KEY_TAB = 9;\r\n            var KEY_ESC = 27;\r\n            switch(e.keyCode) {\r\n            case KEY_TAB:\r\n                if ( focusableEls.length === 1 ) {\r\n                    e.preventDefault();\r\n                    break;\r\n                }\r\n                if ( e.shiftKey ) {\r\n                    handleBackwardTab(e);\r\n                } else {\r\n                    handleForwardTab(e);\r\n                }\r\n                break;\r\n            case KEY_ESC: \r\n                self.hide();\r\n                setFocus(activeTab);\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        },\r\n        // When a tab is clicked, activateTab is fired to activate it\r\n        clickEventListener = function(e) {\r\n            var target = e.target;\r\n            if (target === element && modalElement && !(modalElement.classList.contains(prefix + \"show\"))) {\r\n                e.preventDefault();\r\n            }\r\n            self.show();\r\n            activeTab = getClosest(target, \".\" + prefix + \"tab-link\");\r\n            activateTab(activeTab, false);\r\n        },\r\n        // Handle keydown on tabs\r\n        keydownEventListener = function(e) {\r\n            var key = e.keyCode;\r\n\r\n            switch (key) {\r\n            case keys.end:\r\n                e.preventDefault();\r\n                // Activate last tab\r\n                if (overflow) {\r\n                    overflow.clickEnd();\r\n                }\r\n                activateTab(tabs[tabs.length - 1]);\r\n                break;\r\n            case keys.home:\r\n                e.preventDefault();\r\n                if (overflow) {\r\n                    overflow.clickHome();\r\n                }\r\n                // Activate first tab\r\n                activateTab(tabs[0]);\r\n                break;\r\n\r\n            // Up, down, left, and right keys are in keydown\r\n            // because we need to prevent page scroll\r\n            case keys.up:\r\n            case keys.down:\r\n                determineOrientation(e);\r\n                break;\r\n            case keys.left:\r\n            case keys.right:\r\n                determineOrientation(e);\r\n                break;\r\n            }\r\n        },\r\n        // Handle keyup on tabs\r\n        keyupEventListener = function(e) {\r\n            var key = e.keyCode;\r\n\r\n            switch (key) {\r\n            case keys.delete:\r\n                determineDeletable(e);\r\n                break;\r\n            }\r\n        },\r\n        // When a tablist's aria-orientation is set to vertical,\r\n        // only up and down arrow should function.\r\n        // In all other cases only left and right arrow function.\r\n        determineOrientation = function(e) {\r\n            var key = e.keyCode;\r\n            var vertical = tablist.getAttribute(\"aria-orientation\") == \"vertical\";\r\n            var proceed = false;\r\n\r\n            if (vertical) {\r\n                if (key === keys.up || key === keys.down) {\r\n                    e.preventDefault();\r\n                    proceed = true;\r\n                }\r\n            }\r\n            else {\r\n                if (key === keys.left || key === keys.right) {\r\n                    e.preventDefault();\r\n                    proceed = true;\r\n                }\r\n            }\r\n\r\n            if (proceed) {\r\n                switchTabOnArrowPress(e);\r\n            }\r\n        },\r\n        // Find first parent of el with role=\"tablist\"\r\n        getParentTablist = function(el) {\r\n            var role = \"tablist\";\r\n            while (el && el.parentNode) {\r\n                el = el.parentNode;\r\n                if (el.getAttribute(\"role\") && el.getAttribute(\"role\") == role) {\r\n                    return el;\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        // Get all siblings of el with class=\"dds__tab-link\"\r\n        getSiblingTabs = function() {\r\n            var siblingTabs = tablist.querySelectorAll(\".\" + prefix + \"tab-link\");\r\n            for (var i = 0; i < siblingTabs.length; i++) {\r\n                siblingTabs[i].index = i;\r\n            }\r\n            return siblingTabs;\r\n        },\r\n        getTablistPanels = function(tab) {\r\n            var controls = tab.getAttribute(\"aria-controls\");\r\n            var panelGroup = document.getElementById(controls).parentElement;\r\n            var siblingPanels = panelGroup.children;\r\n\r\n            return siblingPanels;\r\n\r\n        },\r\n        // Either focus the next, previous, first, or last tab\r\n        // depening on key pressed\r\n        switchTabOnArrowPress = function(e) {\r\n            var pressed = e.keyCode;\r\n            each (tabs, function(tab) {\r\n                tab.addEventListener(\"focus\", focusEventHandler);\r\n            });\r\n\r\n            if (direction[pressed]) {\r\n                var target = e.target;\r\n                if (target.index !== undefined) {\r\n                \r\n                    if (tabs[target.index + direction[pressed]]) {\r\n                        var targetTab = target.index + direction[pressed];\r\n                        if (overflow) {\r\n                            if (targetTab < overflow.detail.left) {\r\n                                overflow.clickLeft();\r\n                            } else if (targetTab > overflow.detail.right) {\r\n                                overflow.clickRight();\r\n                            }\r\n                        } \r\n                        setTimeout(function() {\r\n                            setFocus(tabs[targetTab]);\r\n                        }, 125);\r\n                    }\r\n                    else if (pressed === keys.left || pressed === keys.up) {\r\n                        if (overflow) overflow.clickEnd();\r\n                        focusLastTab();\r\n                    }\r\n                    else if (pressed === keys.right || pressed == keys.down) {\r\n                        if (overflow) overflow.clickHome();\r\n                        focusFirstTab();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // Activates any given tab panel\r\n        activateTab = function(tab, needsFocus) {\r\n            needsFocus = needsFocus || true;\r\n\r\n            // Deactivate all other tabs\r\n            deactivateTabs(tab);\r\n\r\n            // Remove tabindex attribute\r\n            tab.removeAttribute(\"tabindex\");\r\n\r\n            // Set the tab as selected\r\n            tab.setAttribute(\"aria-selected\", \"true\");\r\n\r\n            // Get the value of aria-controls (which is an ID)\r\n            var controls = tab.getAttribute(\"aria-controls\");\r\n\r\n            tab.classList.add(prefix + \"active\");\r\n\r\n            // Remove hidden attribute from tab panel to make it visible\r\n            // document.getElementById(controls).removeAttribute('hidden');\r\n            document.getElementById(controls).classList.add(prefix + \"active\");\r\n            document.getElementById(controls).classList.add(prefix + \"show\");\r\n\r\n            // Set focus when required\r\n            if (needsFocus) {\r\n                setFocus(tab);\r\n            }\r\n        },\r\n        // Deactivate all tabs and tab panels\r\n        deactivateTabs = function(tab) {\r\n            panels = getTablistPanels (tab);\r\n            each (tabs, function(tab) {\r\n                tab.setAttribute(\"tabindex\", \"-1\");\r\n                tab.setAttribute(\"aria-selected\", \"false\");\r\n                tab.removeEventListener(\"focus\", focusEventHandler);\r\n                tab.classList.remove(prefix + \"active\");\r\n                tab.classList.remove(prefix + \"show\");\r\n            });\r\n\r\n            each (panels, function(panel) {\r\n                // panel.setAttribute('hidden', 'hidden');\r\n                panel.classList.remove(prefix + \"active\");\r\n                panel.classList.remove(prefix + \"show\");\r\n            });\r\n        },\r\n        // Make a guess\r\n        focusFirstTab = function() {\r\n            setFocus(tabs[0]);\r\n        },\r\n        // Make a guess\r\n        focusLastTab = function() {\r\n            setFocus(tabs[tabs.length - 1]);\r\n        },\r\n        // Detect if a tab is deletable\r\n        determineDeletable = function(e) {\r\n            var target = e.target;\r\n\r\n            if (target.getAttribute(\"data-deletable\") !== null) {\r\n                // Delete target tab\r\n                deleteTab(e);\r\n\r\n                // Update arrays related to tabs widget\r\n                // generateArrays();\r\n\r\n                // Activate the closest tab to the one that was just deleted\r\n                if (target.index - 1 < 0) {\r\n                    activateTab(tabs[0]);\r\n                }\r\n                else {\r\n                    activateTab(tabs[target.index - 1]);\r\n                }\r\n            }\r\n        },\r\n        // Deletes a tab and its panel\r\n        deleteTab = function(e) {\r\n            var target = e.target;\r\n            var panel = document.getElementById(target.getAttribute(\"aria-controls\"));\r\n\r\n            target.parentElement.removeChild(target);\r\n            panel.parentElement.removeChild(panel);\r\n        },\r\n        // Determine whether there should be a delay\r\n        // when user navigates with the arrow keys\r\n        determineDelay = function() {\r\n            var hasDelay = tablist.hasAttribute(\"data-delay\");\r\n            var delay = 0;\r\n\r\n            if (hasDelay) {\r\n                var delayValue = tablist.getAttribute(\"data-delay\");\r\n                if (delayValue) {\r\n                    delay = delayValue;\r\n                }\r\n                else {\r\n                    // If no value is specified, default to 300ms\r\n                    delay = 300;\r\n                }\r\n            }\r\n\r\n            return delay;\r\n        },\r\n        //\r\n        focusEventHandler = function(e) {\r\n            var target = e.target;\r\n\r\n            setTimeout(checkTabFocus, delay, target);\r\n        },\r\n        // Only activate tab on focus if it still has focus after the delay\r\n        checkTabFocus = function(target) {\r\n            var focused = document.activeElement;\r\n\r\n            if (target === focused) {\r\n                activateTab(target, false);\r\n            }\r\n        },\r\n        // triggers\r\n        triggerShow = function() {\r\n            setFocus(modalElement);\r\n        },\r\n        triggerHide = function() {\r\n            modalElement.style.display = \"\";\r\n        },\r\n        createModal = function() {\r\n            var modalBody = modalElement.querySelector(\".\" + prefix+ \"modal-body\");\r\n            \r\n            tabContainer = getClosest(tablist, \".\" + prefix + \"tabs-container\");\r\n            var tabContentContainer;\r\n            if (overflowContainer) {\r\n                tabContentContainer = getClosest(tabContainer,\".\" + prefix + \"tab-content\", false);\r\n            } else {\r\n                tabContentContainer = tabContainer.querySelector(\".\" + prefix + \"tab-content\");\r\n            }\r\n\r\n            if (modalBody.firstElementChild) {\r\n                tabContentContainer.appendChild(modalBody.firstElementChild);\r\n            }\r\n            var tab = getClosest(event.target, \".\" + prefix+ \"tab-link\");\r\n            var controls = tab.getAttribute(\"aria-controls\");\r\n            var tabContent = document.getElementById(controls);\r\n\r\n            setTimeout(function() {\r\n                modalBody.appendChild(tabContent);\r\n            }, 50);\r\n        },\r\n        dismissHandler = function(e) {\r\n            if (modalElement.classList.contains(prefix + \"show\")) {\r\n                self.hide();\r\n                e.preventDefault();\r\n                setFocus(activeTab);\r\n            }\r\n        },\r\n        resizeHandler = function(){\r\n            if (!smallMediaSize.matches && modalElement.classList.contains(prefix + \"show\")) {\r\n                self.hide();\r\n            }\r\n        }, \r\n        createAccordions = function() {\r\n            accordionWrapper = createElement(\"div\", {\r\n                class: prefix + \"accordion \" + prefix + \"mb-3\",\r\n                id: tabs[0].id + \"parent\"\r\n            });\r\n            tabContainer.parentElement.insertBefore(accordionWrapper, tabContainer);\r\n            each(tabs, function(tab) {\r\n                var card = createElement(\"div\", {\r\n                    class: prefix + \"accordion-card\"\r\n                });\r\n                var cardHeader = createElement(\"div\", {\r\n                    class: prefix + \"accordion-card-header\"\r\n                });\r\n                var h5 = createElement(\"h5\", {\r\n                    class: prefix + \"mb-0\"\r\n                });\r\n                var accordionBtn = createElement(\"button\", {\r\n                    class: prefix + \"accordion-btn \" + prefix + \"collapsed \" + prefix + \"d-flex\",\r\n                    type: \"button\",\r\n                    role: \"button\",\r\n                    data_toggle: prefix + \"collapse\",\r\n                    data_target: \"#\" + tab.id + \"accord\", //Need to create IDs\r\n                    data_parent: \"#\" + tabs[0].id + \"parent\",\r\n                    aria_controls: tab.id + \"accord\",\r\n                    aria_expanded: \"false\"\r\n                });\r\n                var chevron = createElement(\"i\", {\r\n                    class: prefix + \"icons \" + prefix + \"chevron-right\",\r\n                    aria_hidden: \"true\"\r\n                });\r\n                var accordionSpan = createElement(\"span\", {\r\n                    class: prefix + \"mx-2\",\r\n                    html: tab.innerText,\r\n                    id: tab.id + \"header\"\r\n                });\r\n\r\n                accordionBtn.appendChild(chevron);\r\n                accordionBtn.appendChild(accordionSpan);\r\n                h5.appendChild(accordionBtn);\r\n                cardHeader.appendChild(h5);\r\n                card.appendChild(cardHeader);\r\n                accordionWrapper.appendChild(card);\r\n                var cardBodyWrapper = createElement(\"div\", {\r\n                    id: tab.id + \"accord\",\r\n                    class: prefix + \"collapse\",\r\n                    aria_labelledby: tab.id + \"header\",\r\n                    role: \"region\",\r\n                    aria_expanded: \"false\"\r\n                });\r\n                var cardBody = createElement(\"div\", {\r\n                    class: prefix + \"accordion-card-body\",\r\n                    html: document.getElementById(tab.getAttribute(\"aria-controls\")).innerHTML\r\n                });\r\n                card.appendChild(cardBodyWrapper);\r\n                cardBodyWrapper.appendChild(cardBody);\r\n            });\r\n            each(withinModal.querySelectorAll(\"[data-toggle='\" + prefix + \"collapse\" + \"']\"), function(accordion) {\r\n                new Collapse(accordion);\r\n            });\r\n        },\r\n        handleResizeSmall = function() {\r\n            if (thresholdMediaSize.matches) {\r\n                var activeTab = tabContainer.querySelector(\"[aria-selected='true']\");\r\n                var sisterCollapseStr = activeTab.getAttribute(\"id\") + \"accord\";\r\n                var activateCollapse = accordionWrapper.querySelector(\"[data-target='#\" + sisterCollapseStr + \"']\");\r\n                if (activateCollapse && activateCollapse.classList.contains(prefix + \"collapsed\")) { //Need to Activate the collapse\r\n                    var prevActivated = accordionWrapper.querySelector(\"button[aria-expanded='true']\");\r\n                    var showBlock;\r\n                    if (prevActivated) {\r\n                        prevActivated.setAttribute(\"aria-expanded\", false);\r\n                        prevActivated.classList.add(prefix + \"collapsed\");\r\n                        showBlock = getClosest(prevActivated, \".dds__collapse\", false);\r\n                        showBlock.classList.remove(prefix + \"show\");\r\n                        showBlock.setAttribute(\"aria-expanded\", \"false\");\r\n                    }\r\n                    activateCollapse.setAttribute(\"aria-expanded\", true);\r\n                    activateCollapse.classList.remove(prefix + \"collapsed\");\r\n                    showBlock = getClosest(activateCollapse, \".dds__collapse\", false);\r\n                    showBlock.classList.add(prefix + \"show\");\r\n                    showBlock.setAttribute(\"aria-expanded\", \"true\");\r\n                }\r\n                accordionWrapper.classList.remove(prefix + \"d-none\");\r\n                tabContainer.classList.add(prefix + \"d-none\");\r\n\r\n            } else {\r\n                var activeCollapse = accordionWrapper.querySelector(\"button[aria-expanded='true']\");\r\n                if (activeCollapse) {\r\n                    var sisterTabStr = activeCollapse.getAttribute(\"aria-controls\").slice(0,-6);\r\n                    var tabToActivate = document.getElementById(sisterTabStr);\r\n                    activateTab(tabToActivate);\r\n                }\r\n                accordionWrapper.classList.add(prefix + \"d-none\");\r\n                tabContainer.classList.remove(prefix + \"d-none\");\r\n            }\r\n        };\r\n\r\n    this.show = function() {\r\n        if (window.innerWidth > 767.98) {\r\n            return;\r\n        }\r\n        createModal();\r\n        modalElement.style.display = \"block\";\r\n        //modalElement.classList.remove(prefix + \"slide-right\");\r\n        modalElement.setAttribute(\"aria-hidden\", false);\r\n        triggerShow();\r\n        modalElement.classList.add(prefix + \"show\");\r\n\r\n        if (isSafari && isIOS) {\r\n            modalElement.classList.add(prefix + \"is-safari\");\r\n        }\r\n\r\n        if (DOC.body.classList.contains(prefix + \"modal-open\")) {\r\n            nested = true;\r\n        } else {\r\n            DOC.body.classList.add(prefix + \"modal-open\");\r\n            nested = false;\r\n        }\r\n\r\n        backButton = modalElement && modalElement.querySelector(\"[data-dismiss='\"+prefix+\"modal']\");\r\n        backButton.addEventListener(\"click\", dismissHandler, false);\r\n        smallMediaSize.addListener(resizeHandler);\r\n        setTimeout(function() {\r\n            setFocusableElements();\r\n            setFocus(backButton);\r\n        }, 50);\r\n        modalElement.addEventListener(\"keydown\", handleModalKeydown);\r\n    };\r\n\r\n    this.hide = function() {\r\n        //Need to append tab content back to tabContentContainer\r\n        var modalBody = modalElement.querySelector(\".\" + prefix+ \"modal-body\");\r\n        // var tabContainer = getClosest(tablist, \".\" + prefix + \"tabs-container\", true);\r\n        var tabContainer = getClosest(tablist, \".\" + prefix + \"tabs-container\");\r\n        var tabContentContainer;\r\n        if (overflowContainer) {\r\n            tabContentContainer = getClosest(tabContainer,\".\" + prefix + \"tab-content\", false);\r\n        } else {\r\n            tabContentContainer = tabContainer.querySelector(\".\" + prefix + \"tab-content\");\r\n        }\r\n        if (modalBody.firstElementChild) {\r\n            tabContentContainer.appendChild(modalBody.firstElementChild);\r\n        }\r\n        modalElement.classList.add(prefix + \"slide-right\");\r\n        modalElement.classList.remove(prefix + \"show\");\r\n        modalElement.setAttribute(\"aria-hidden\", true);\r\n        if (isSafari && isIOS && modalElement.classList.contains(prefix + \"is-safari\")) {\r\n            modalElement.classList.remove(prefix + \"is-safari\");\r\n        }\r\n        smallMediaSize.removeListener(resizeHandler);\r\n        setTimeout(function() {\r\n            triggerHide();\r\n            if (!nested) {\r\n                DOC.body.classList.remove(prefix + \"modal-open\");\r\n            } \r\n            backButton.removeEventListener(\"click\", dismissHandler, false);\r\n        }, 200);\r\n        modalElement.removeEventListener(\"keydown\", handleModalKeydown);\r\n    };\r\n\r\n    this.lazyLoad = function() {\r\n        if (options.lazyload && overflow && !overflow.detail) {\r\n            overflow.lazyLoad();\r\n            overflow.detail = overflow.getCurrentDetails();\r\n            overflowContainer.addEventListener(\"uicOverflowChangeEvent\", handleOverflowEvent, false);\r\n            uicoreCustomEvent(\"Tab\", \"LazyLoadEvent\", element, {\"success\": true});\r\n        }\r\n        else {\r\n            uicoreCustomEvent(\"Tab\", \"LazyLoadEvent\", element, {\"success\": false, \"msg\": \"Tab cannot be lazy loaded. Check usage or avoid mulitple lazy loads.\"});\r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringTab in element)) {\r\n        tablist = getParentTablist(element);\r\n        modalElement = element.dataset[\"target\"] && DOC.getElementById(element.dataset[\"target\"].substr(1));\r\n        delay = determineDelay();\r\n        tabs = getSiblingTabs();\r\n        // prevent adding event handlers twice\r\n        element.addEventListener(\"keydown\", keydownEventListener);\r\n        element.addEventListener(\"keyup\", keyupEventListener);\r\n        element.addEventListener(\"click\", clickEventListener);\r\n        overflowContainer = getClosest(element, \".\" + prefix + \"container-overflow\");\r\n        if (overflowContainer) {\r\n            if (!(\"overflow\" in tablist)) {\r\n                overflow = new Overflow(overflowContainer, {\r\n                    lazyload: options.lazyload\r\n                });\r\n                if (!options.lazyload) {\r\n                    overflow.detail = overflow.getCurrentDetails();\r\n                    overflowContainer.addEventListener(\"uicOverflowChangeEvent\", handleOverflowEvent);\r\n                }\r\n                tablist[\"overflow\"] = overflow;\r\n            } else {\r\n                overflow = tablist[\"overflow\"];\r\n            }\r\n        }\r\n        tabContainer = getClosest(tablist, \".\" + prefix + \"tabs-container\");\r\n        withinModal = getClosest(element, \".\" + prefix + \"modal-offcanvas\", true);\r\n        if (withinModal) { //check if tabs are within Modal\r\n            var accordionExist = withinModal.querySelector(\"#\" + element.id + \"accord\"); //check if accordions already been made\r\n            if (!accordionExist) {\r\n                createAccordions();\r\n                if (withinModal.classList.contains(prefix + \"modal-width-25\")) {\r\n                    thresholdMediaSize = window.matchMedia(\"(max-width: 3071.92px)\"); //3071.92*0.25 = 767.98\r\n                } else if (withinModal.classList.contains(prefix + \"modal-width-50\")) {\r\n                    thresholdMediaSize = window.matchMedia(\"(max-width: 1535.96px)\"); //1535.96*0.5 = 767.98\r\n                } else if (withinModal.classList.contains(prefix + \"modal-width-75\")) {\r\n                    thresholdMediaSize = window.matchMedia(\"(max-width: 1023.97px)\"); //3071.92*0.25 = 767.98\r\n                } else {\r\n                    thresholdMediaSize = window.matchMedia(\"(max-width: 767.98px)\");\r\n                }\r\n                thresholdMediaSize.addListener(handleResizeSmall);\r\n                handleResizeSmall();\r\n            }\r\n        }\r\n    }\r\n    \r\n    element[stringTab] = self;\r\n}\r\n","import { each, sortItems, isArray, createElement } from \"../utilities.js\";\r\n/**\r\n * Columns API\r\n * @param {Object} instance DataTable instance\r\n * @param {Mixed} columns  Column index or array of column indexes\r\n */\r\nexport default function Columns(dt) {\r\n    var hiddenHeader = false;\r\n    /**\r\n     * Swap two columns\r\n     * @return {Void}\r\n     */\r\n    this.swap = function(columns) {\r\n        if (columns.length && columns.length === 2) {\r\n            var cols = [];\r\n\r\n            // Get the current column indexes\r\n            each(dt.headings, function (h, i) {\r\n                cols.push(i);\r\n            });\r\n\r\n            var x = columns[0];\r\n            var y = columns[1];\r\n            var b = cols[y];\r\n            cols[y] = cols[x];\r\n            cols[x] = b;\r\n\r\n            this.order(cols);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reorder the columns\r\n     * @return {Array} columns  Array of ordered column indexes\r\n     */\r\n    this.order = function(columns) {\r\n            \r\n        var a, b, c, d, h, s, cell,\r\n            temp = [\r\n                [],\r\n                [],\r\n                [],\r\n                []\r\n            ];\r\n\r\n        // Order the headings\r\n        each(columns, function (column, x) {\r\n            h = dt.headings[column];\r\n            s = h.getAttribute(\"data-sortable\") !== \"false\";\r\n            a = h.cloneNode(true);\r\n            a.originalCellIndex = x;\r\n            a.sortable = s;\r\n\r\n            temp[0].push(a);\r\n\r\n            if (dt.hiddenColumns.indexOf(column) < 0) {\r\n                b = h.cloneNode(true);\r\n                b.originalCellIndex = x;\r\n                b.sortable = s;\r\n\r\n                temp[1].push(b);\r\n            }\r\n        });\r\n\r\n        // Order the row cells\r\n        each(dt.data, function (row, i) {\r\n            c = row.cloneNode();\r\n            d = row.cloneNode();\r\n\r\n            c.dataIndex = d.dataIndex = i;\r\n            if(dt.expandable){\r\n                c.details = d.details = row.details;\r\n            }\r\n\r\n            \r\n            if (row.searchIndex !== null && row.searchIndex !== undefined) {\r\n                c.searchIndex = d.searchIndex = row.searchIndex;\r\n            }\r\n\r\n            // Append the cell to the fragment in the correct order\r\n            each(columns, function (column) {\r\n                cell = row.cells[column].cloneNode(true);\r\n                cell.data = row.cells[column].data;\r\n                c.appendChild(cell);\r\n                \r\n                if (dt.hiddenColumns.indexOf(column) < 0) {\r\n                    cell = row.cells[column].cloneNode(true);\r\n                    cell.data = row.cells[column].data;\r\n                    d.appendChild(cell);\r\n                }\r\n            });\r\n            \r\n            temp[2].push(c);\r\n            temp[3].push(d);\r\n        });\r\n\r\n        dt.headings = temp[0];\r\n        dt.activeHeadings = temp[1];\r\n\r\n        each(dt.headings, function(header) {\r\n            if (header.classList.contains(\"desc\") || header.classList.contains(\"asc\")) {\r\n                dt.lastTh = header;\r\n            }\r\n        });\r\n\r\n        dt.data = temp[2];\r\n        dt.activeRows = temp[3];\r\n    };\r\n\r\n    /**\r\n     * Hide columns\r\n     * @return {Void}\r\n     */\r\n    this.hide = function(columns) {\r\n        if (columns.length) {\r\n            each(columns, function (column) {\r\n                if (dt.hiddenColumns.indexOf(column) < 0) {\r\n                    dt.hiddenColumns.push(column);\r\n                }\r\n            });\r\n\r\n            this.rebuild();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Show columns\r\n     * @return {Void}\r\n     */\r\n    this.show = function(columns) {\r\n        if (columns.length) {\r\n            var index;\r\n\r\n            each(columns, function (column) {\r\n                index = dt.hiddenColumns.indexOf(column);\r\n                if (index > -1) {\r\n                    dt.hiddenColumns.splice(index, 1);\r\n                }\r\n            });\r\n\r\n            this.rebuild();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check column(s) visibility\r\n     * @return {Boolean}\r\n     */\r\n    this.visible = function(columns) {\r\n        var cols;\r\n\r\n        columns = columns || dt.headings.map(function (th) {\r\n            return th.originalCellIndex;\r\n        });\r\n\r\n        if (!isNaN(columns)) {\r\n            cols = dt.hiddenColumns.indexOf(columns) < 0;\r\n        } else if (isArray(columns)) {\r\n            cols = [];\r\n            each(columns, function (column) {\r\n                cols.push(dt.hiddenColumns.indexOf(column) < 0);\r\n            });\r\n        }\r\n\r\n        return cols;\r\n    };\r\n\r\n    /**\r\n     * Add a new column\r\n     * @param {Object} data\r\n     */\r\n    this.add = function(data) {\r\n        var that = this,\r\n            td, th = createElement(\"th\");\r\n\r\n        if (!dt.headings.length) {\r\n            dt.insert({\r\n                headings: [data.heading],\r\n                rows: data.rows.map(function (i) {\r\n                    return [i];\r\n                })\r\n            });\r\n            this.rebuild();\r\n            return;\r\n        }\r\n\r\n        if (!hiddenHeader) {\r\n            if (data.heading.nodeName) {\r\n                th.appendChild(data.heading);\r\n            } else {\r\n                th.innerHTML = data.heading;\r\n            }\r\n        } else {\r\n            th.innerHTML = \"\";\r\n        }\r\n\r\n        dt.headings.push(th);\r\n\r\n        each(dt.data, function (row, i) {\r\n            if (data.data[i]) {\r\n                td = createElement(\"td\");\r\n\r\n                if (data.data[i].nodeName) {\r\n                    td.appendChild(data.data[i]);\r\n                } else {\r\n                    td.innerHTML = data.data[i];\r\n                }\r\n\r\n                td.data = td.innerHTML;\r\n\r\n                if (data.render) {\r\n                    td.innerHTML = data.render.call(that, td.data, td, row);\r\n                }\r\n\r\n                row.appendChild(td);\r\n            }\r\n        });\r\n\r\n        if (data.type) {\r\n            th.setAttribute(\"data-type\", data.type);\r\n        }\r\n        if (data.format) {\r\n            th.setAttribute(\"data-format\", data.format);\r\n        }\r\n        if (Object.prototype.hasOwnProperty.call(data, \"sortable\")) {\r\n            th.sortable = data.sortable;\r\n            th.setAttribute(\"data-sortable\", data.sortable === true ? \"true\" : \"false\");\r\n        }\r\n\r\n        this.rebuild();\r\n\r\n        dt.renderHeader();\r\n    };\r\n\r\n    /**\r\n     * Remove column(s)\r\n     * @param  {Array|Number} select\r\n     * @return {Void}\r\n     */\r\n    this.remove = function(select) {\r\n        if (isArray(select)) {\r\n            // Remove in reverse otherwise the indexes will be incorrect\r\n            select.sort(function (a, b) {\r\n                return b - a;\r\n            });\r\n\r\n            each(select, function (column) {\r\n                this.remove(column);\r\n            }, this);\r\n        } else {\r\n            dt.headings.splice(select, 1);\r\n\r\n            each(dt.data, function (row) {\r\n                row.removeChild(row.cells[select]);\r\n            });\r\n        }\r\n\r\n        this.rebuild();\r\n    };\r\n\r\n    /**\r\n     * Sort by column\r\n     * @param  {int} column - The column no.\r\n     * @param  {string} direction - asc or desc\r\n     * @return {void}\r\n     */\r\n    this.sort = function(column, direction) {\r\n        // Check column is present\r\n        if (dt.hasHeadings && (column < 0 || column > dt.activeHeadings.length - 1 )) {\r\n            return false;\r\n        }\r\n        \r\n        dt.sorting = true;\r\n        \r\n        var rows = [],\r\n            alpha = [],\r\n            numeric = [],\r\n            a = 0,\r\n            n = 0,\r\n            th = dt.activeHeadings[column];\r\n\r\n        rows = dt.data;\r\n        column = th.originalCellIndex;\r\n        \r\n        each(rows, function (tr) {\r\n            var num, content;\r\n            \r\n            var cell = tr.cells[column];\r\n            content = cell.hasAttribute(\"data-content\") ? cell.getAttribute(\"data-content\") : cell.data;\r\n            num = content.replace(/(\\$|,|\\s|%)/g, \"\");\r\n            \r\n            if (th.getAttribute(\"data-type\") === \"date\") {                \r\n                num = Date.parse(content);\r\n                if (num.isNaN) {\r\n                    num = 0;\r\n                }\r\n            }\r\n            \r\n            if (parseFloat(num) == num) {\r\n                numeric[n++] = {\r\n                    value: Number(num),\r\n                    row: tr\r\n                };\r\n            } else {\r\n                alpha[a++] = {\r\n                    value: content.toLowerCase(),\r\n                    row: tr\r\n                };\r\n            }\r\n\r\n        });\r\n        \r\n        /* Sort according to direction (ascending or descending) */\r\n        var top, btm;\r\n        if (th.classList.contains(\"asc\") || direction == \"desc\") {\r\n            top = sortItems(alpha, -1);\r\n            btm = sortItems(numeric, -1);\r\n        } else {\r\n            top = sortItems(numeric, 1);\r\n            btm = sortItems(alpha, 1);\r\n\r\n        }\r\n        this.updateSortDirection(th, direction);\r\n        \r\n        dt.lastTh = th;\r\n        \r\n        /* Reorder the table */\r\n        rows = top.concat(btm);\r\n        dt.data = [];\r\n        dt.selectedRows = [];\r\n        var indexes = [];\r\n            \r\n        each(rows, function (v, i) {\r\n            dt.data.push(v.row);\r\n\r\n            if (v.row.searchIndex !== null && v.row.searchIndex !== undefined) {\r\n                indexes.push(i);\r\n            }\r\n\r\n        }, dt);\r\n        \r\n        dt.searchData = indexes;\r\n\r\n        this.rebuild();\r\n    };\r\n\r\n    this.updateSortDirection = function(th, direction){\r\n        if (th.classList.contains(\"asc\") || direction == \"desc\") {\r\n            // top = sortItems(alpha, -1);\r\n            // btm = sortItems(numeric, -1);\r\n            th.classList.remove(\"asc\");\r\n            th.classList.add( \"desc\");\r\n            th.setAttribute(\"aria-sort\",\"descending\");\r\n        } else {\r\n            // top = sortItems(numeric, 1);\r\n            // btm = sortItems(alpha, 1);\r\n            th.classList.remove(\"desc\");\r\n            th.classList.add(\"asc\");\r\n            th.setAttribute(\"aria-sort\",\"ascending\");\r\n        }\r\n\r\n        if (dt.lastTh && th != dt.lastTh) {\r\n            dt.lastTh.classList.remove(\"desc\");\r\n            dt.lastTh.classList.remove(\"asc\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Rebuild the columns\r\n     * @return {Void}\r\n     */\r\n    this.rebuild = function() {\r\n        var a, b, c, d, temp = [];\r\n\r\n        dt.activeRows = [];\r\n        dt.activeHeadings = [];\r\n\r\n        each(dt.headings, function (th, i) {\r\n            th.originalCellIndex = i;\r\n            th.sortable = th.getAttribute(\"data-sortable\") !== \"false\";\r\n            if (dt.hiddenColumns.indexOf(i) < 0) {\r\n                dt.activeHeadings.push(th);\r\n            \r\n            } \r\n        });\r\n        // Loop over the rows and reorder the cells\r\n        each(dt.data, function (row, i) {\r\n            a = row.cloneNode();\r\n            b = row.cloneNode();\r\n\r\n            a.dataIndex = b.dataIndex = i;\r\n            a.details = b.details =  row.details;\r\n\r\n            if (row.searchIndex !== null && row.searchIndex !== undefined) {\r\n                a.searchIndex = b.searchIndex = row.searchIndex;\r\n            }\r\n\r\n            // Append the cell to the fragment in the correct order\r\n            each(row.cells, function (cell) {\r\n                c = cell.cloneNode(true);\r\n                c.data = cell.data;\r\n                a.appendChild(c);\r\n\r\n                if (dt.hiddenColumns.indexOf(cell.cellIndex) < 0) {\r\n                    d = cell.cloneNode(true);\r\n                    d.data = cell.data;\r\n                    b.appendChild(d);\r\n                \r\n                }\r\n            });\r\n\r\n            // Append the fragment with the ordered cells\r\n            temp.push(a);\r\n            dt.activeRows.push(b);\r\n        });\r\n        \r\n        dt.data = temp;\r\n    };\r\n}\r\n","import { each, isArray, createElement, getText } from \"../utilities.js\";\r\n\r\n/**\r\n * Rows API\r\n * @param {Object} instance DataTable instance\r\n * @param {Array} rows\r\n */\r\nexport default function Rows(dt) {\r\n    /**\r\n     * Build a new row\r\n     * @param  {Array} row\r\n     * @return {HTMLElement}\r\n     */\r\n    this.build = function(row) {\r\n        var td, tr = createElement(\"tr\");\r\n\r\n        var headings = dt.headings;\r\n\r\n        if (!headings.length) {\r\n            headings = row.map(function () {\r\n                return \"\";\r\n            });\r\n        }\r\n\r\n        each(row, function(tdx) {\r\n            if (tdx.indexOf(\"table-cmplx-accordion-btn\") > -1 || tdx.indexOf(\"table-cmplx-row-select\") > -1) {\r\n                td = createElement(\"tr\");\r\n                td.innerHTML = tdx;\r\n                tr.appendChild(td.firstChild);\r\n            } else {\r\n                td = createElement(\"td\");\r\n                td.innerHTML = tdx;\r\n                td.data = tdx;\r\n                td.setAttribute(\"data-content\", getText(tdx));\r\n                tr.appendChild(td);\r\n            }\r\n        });\r\n\r\n        if (row.details) {\r\n            tr.details = row.details;\r\n        }\r\n        return tr;\r\n    };\r\n\r\n    this.render = function(row) {\r\n        return row;\r\n    };\r\n\r\n    /**\r\n     * Add new row\r\n     * @param {Array} select\r\n     */\r\n    this.add = function(data, details) {\r\n\r\n        if (isArray(data)) {\r\n            // Check for multiple rows\r\n            if (isArray(data[0])) {\r\n                each(data, function (row, i) {\r\n                    // append details is supplied\r\n                    if (details[i]) {\r\n                        row.details = details[i];\r\n                    }\r\n                    dt.data.push(this.build(row));\r\n                }, this);\r\n            } else {\r\n                // append details is supplied\r\n                if (details) {\r\n                    data.details = details[0];\r\n                }\r\n                dt.data.push(this.build(data));\r\n            }\r\n\r\n            // We may have added data to an empty table\r\n            if ( dt.data.length ) {\r\n                dt.hasRows = true;\r\n            }\r\n\r\n            this.update();\r\n\r\n            // Needs to be called after the return of add\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Remove row(s)\r\n     * @param  {Array|Number} select\r\n     * @return {Void}\r\n     */\r\n    this.remove = function(select) {\r\n\r\n        if (isArray(select)) {\r\n            // Remove in reverse otherwise the indexes will be incorrect\r\n            select.sort(function (a, b) {\r\n                return b - a;\r\n            });\r\n\r\n            each(select, function (row) {\r\n                dt.data.splice(row, 1);\r\n            });\r\n        } else {\r\n            dt.data.splice(select, 1);\r\n        }\r\n\r\n        this.update();\r\n    };\r\n\r\n    /**\r\n     * Update row indexes\r\n     * @return {Void}\r\n     */\r\n    this.update = function() {\r\n        var idx = 0;\r\n        each(dt.data, function (row) {\r\n            if(row.children.length != 1) {\r\n                row.dataIndex = idx++;\r\n            }\r\n        });\r\n    };\r\n}","import { DOC, isObject, isArray, isJson, each, createElement, getClosest, prefix, classRemove, classAdd, getSibling, uicoreCustomEvent, validateNum, renderSvg, flush, isEdge, getText} from \"./utilities.js\";\r\nimport Pagination from \"./pagination.js\";\r\nimport Columns from \"./helpers/columns.js\";\r\nimport Rows from \"./helpers/rows.js\";\r\nimport Dropdown from \"./dropdown.js\";\r\nimport Modal from \"./modal.js\";\r\n\r\nexport default function TableComplex(element, params) {\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return;\r\n    })();\r\n\r\n    function validateRow(row, name) {\r\n        var hasErrors = \"\";\r\n        var rowCount = row.match(/\\{((\\w*|\\d*):?)+\\}/g);\r\n        if (rowCount.length < 1 || rowCount.length > 3) {\r\n            hasErrors += \"Custom layout for row \"+name+\" was delared with an incorrect set of elements!\\n\";\r\n        }\r\n        var rowLength = 0;\r\n        var localFunctions = [\"placeholder\",\"actions\",\"settings\",\"search\"];\r\n        each(rowCount, function(temp) {\r\n            var subElements = temp.replace(/\\{|\\}/g, \"\").split(\":\");\r\n            if (subElements.indexOf(\"placeholder\") === -1 && !temp.match(/\\{[A-Z,a-z]+:[1,2,3](:(start|center|end))*\\}/g) ) {\r\n                hasErrors += \"Custom layout for row \"+name+\" has an element \"+ temp +\", which has been declared incorrectly!\\n\";\r\n            }\r\n            if (layoutOptions.indexOf(subElements[0]) === -1 && !window[subElements[0]] && localFunctions.indexOf(subElements[0]) < 0) { // does custom function exist\r\n                hasErrors += \"Custom layout for row \"+name+\" has an element with custom function '\"+ subElements[0] +\"' that is not accessible or dosen't exist!\\n\";\r\n            }\r\n            if (!isNaN(subElements[1].substring(0,1))) {\r\n                rowLength += +subElements[1].substring(0,1);\r\n            }\r\n        });\r\n        if (rowLength != 3) {\r\n            hasErrors += \"Custom layout for row \"+name+\" is configured with grid length '\"+ rowLength +\"', which needs to add up to '3'!\\n\";\r\n        }\r\n        return hasErrors;\r\n    }\r\n\r\n    var jsonParams = element.dataset.tableData;\r\n    if (jsonParams) {\r\n        params = JSON.parse(jsonParams);\r\n    }\r\n\r\n    // init options\r\n    var options = {};\r\n    var layoutOptions = [\"{actions:1:start}\",\"{search:1:center}\",\"{settings:1:end}\"];\r\n    \r\n    // Check to see what Javascript options are set or are missing from table element classes\r\n    options.sort = typeof params.sort === \"boolean\" ? params.sort : false;\r\n    options.expand = typeof params.expand === \"boolean\" ? params.expand : false;\r\n    if (options.expand) {\r\n        options.expandIcon = params.expandIcon && typeof params.expandIcon === \"string\" ? params.expandIcon : \"arrow-tri-solid-right\";\r\n        if (options.expandIcon.indexOf(prefix) > -1) {\r\n            options.expandIcon = options.expandIcon.split(prefix)[1];\r\n        }\r\n    }\r\n    options.showTotal = typeof params.showTotal === \"string\" ? params.showTotal : false;\r\n    options.condensed = typeof params.condensed === \"boolean\" ? params.condensed : false;\r\n    options.fixedColumns = typeof params.fixedColumns === \"boolean\" ? params.fixedColumns : false;\r\n    options.rearrangeableColumns = typeof params.rearrangeableColumns === \"boolean\" ? params.rearrangeableColumns : false;\r\n    options.fixedHeight = typeof params.fixedHeight === \"boolean\" ? params.fixedHeight : false;\r\n    options.header = typeof params.header === \"boolean\" ? params.header : true;\r\n    //Set Default Batch Actions\r\n    options.defaultBatchActions = {};\r\n    options.defaultBatchActions.exportCsv = params.defaultBatchActions && typeof params.defaultBatchActions.exportCsv === \"boolean\" ? params.defaultBatchActions.exportCsv : true ;\r\n    options.defaultBatchActions.exportJson = params.defaultBatchActions && typeof params.defaultBatchActions.exportJson === \"boolean\" ? params.defaultBatchActions.exportJson : true ;\r\n    options.defaultBatchActions.deleteRow = params.defaultBatchActions && typeof params.defaultBatchActions.delete === \"boolean\" ? params.defaultBatchActions.delete : true ;\r\n\r\n    // Set all table text to variables\r\n    options.text = {};\r\n    options.text.apply = params.text && params.text.apply && typeof params.text.apply === \"string\"? params.text.apply : \"Apply\";\r\n    options.text.cancel = params.text && params.text.cancel && typeof params.text.cancel === \"string\" ? params.text.cancel : \"Cancel\";\r\n    options.text.exportCsv = params.text && params.text.exportCsv && typeof params.text.exportCsv === \"string\" ? params.text.exportCsv : \"Export as csv\";\r\n    options.text.exportJson = params.text && params.text.exportJson && typeof params.text.exportJson === \"string\" ? params.text.exportJson : \"Export as json\";\r\n    options.text.deleteRow = params.text && params.text.delete && typeof params.text.delete === \"string\" ? params.text.delete : \"Delete\";\r\n    options.text.noEntries = params.text && params.text.noEntries && typeof params.text.noEntries === \"string\" ? params.text.noEntries: \"No entries found\";\r\n    options.text.import = params.text && params.text.import && typeof params.text.import === \"string\" ? params.text.import: \"Import\";\r\n    options.text.print = params.text && params.text.print && typeof params.text.print === \"string\" ? params.text.print: \"Print\";\r\n    options.text.columns = params.text && params.text.columns && typeof params.text.columns === \"string\" ? params.text.columns: \"Columns\";\r\n    options.text.batchActions = params.text && params.text.batchActions && typeof params.text.batchActions === \"string\" ? params.text.batchActions: \"Batch Actions\";\r\n    options.text.chooseActions = params.text && params.text.chooseAction && typeof params.text.chooseAction === \"string\" ? params.text.chooseAction: \"Choose Actions\";\r\n    \r\n    // Remove the data from the Table element\r\n    options.showData = jsonParams && typeof params.showData === \"boolean\" ? params.showData : true;\r\n    // Search is either on by default or can be truned off\r\n    options.search = typeof params.search === \"boolean\" ? params.search : true;\r\n    if (options.search) {\r\n        options.text.search  = {};\r\n        options.text.search.label = params.text && params.text.search && typeof params.text.search.label === \"string\" ? params.text.search.label : false;\r\n        options.text.search.placeholder = params.text && params.text.search && typeof params.text.search.placeholder === \"string\" ? params.text.search.placeholder : false;\r\n    }\r\n    // Settings is either on by default or can be turned off\r\n    options.settings = typeof params.settings === \"boolean\" ? params.settings : true;\r\n    // Import either on by default or can be turned off\r\n    options.import = typeof params.import === \"boolean\" ? params.import : true;\r\n    // Printing is either on by default or can be turned off\r\n    options.print = typeof params.print === \"boolean\" ? params.print : true;\r\n    // Column Management is either on by default or can be turned off\r\n    options.column = typeof params.column === \"boolean\" ? params.column : true;\r\n    // Export details roww is either on by default or can be turned off\r\n    options.exportDetails = typeof params.exportDetails === \"boolean\" ? params.exportDetails : true;\r\n\r\n    var allowedExtensions = [\".csv\", \".json\", \".js\"];\r\n    options.allowedImportExtensions = [];\r\n    //is it just one or is it an array \r\n    each(params.allowedImportExtensions, function(ext) {\r\n        if (typeof ext  === \"string\" && allowedExtensions.indexOf(ext) >= -1) {\r\n            options.allowedImportExtensions.push(ext); \r\n        }\r\n    });\r\n    if (options.allowedImportExtensions.length === 0) options.allowedImportExtensions = allowedExtensions;\r\n    // Bulk Actions\r\n    options.actionsSelectFilters = [];\r\n    each(params.additionalActions, function(additionalAction) {\r\n        if (additionalAction.js) {\r\n            var testJs = additionalAction.js;\r\n            if (additionalAction.js.indexOf(\"(\") > -1) {\r\n                testJs = additionalAction.js.substring(0, additionalAction.js.indexOf(\"(\")).trim();\r\n            } else {\r\n                additionalAction.js += \"()\";\r\n            }\r\n            if (!window[testJs]) {\r\n                throw new Error(\"The additional action function \"+additionalAction.js+\" could not be accessed, please verify and try again!\");\r\n            } else {\r\n                options.actionsSelectFilters.splice(additionalAction.pos, 0, additionalAction);\r\n            }\r\n        } else {\r\n            options.actionsSelectFilters.splice(additionalAction.pos, 0, additionalAction);\r\n        }\r\n    });\r\n    for (var action in options.defaultBatchActions) {\r\n        if (options.defaultBatchActions[action]) {\r\n            if (action === \"deleteRow\" && options.actionsSelectFilters[0]) { //place divider above `delete` action only when other actions are present\r\n                options.actionsSelectFilters.push(\"hr\");\r\n            }\r\n            options.actionsSelectFilters.push(options.text[action]);\r\n        }\r\n    }\r\n    options.select = typeof params.select === \"boolean\" ? params.select : true;\r\n    if (!options.select) layoutOptions.splice(layoutOptions.indexOf(\"{actions:1:start}\"),1,\"{placeholder:1:start}\");\r\n    if (!options.search) layoutOptions.splice(layoutOptions.indexOf(\"{search:1:center}\"),1,\"{placeholder:1:center}\");\r\n    if (!options.settings) layoutOptions.splice(layoutOptions.indexOf(\"{settings:1:end}\"),1,\"{placeholder:1:end}\");\r\n    // Customise the layout\r\n    if (params.layout) {\r\n        var rowCount = 0;\r\n        var hasErrors = \"\";\r\n        if (params.layout.row1) {\r\n            hasErrors += validateRow(params.layout.row1, \"one\");\r\n            rowCount++;\r\n        }\r\n        if (params.layout.row2) {\r\n            hasErrors += validateRow(params.layout.row2, \"two\");\r\n            rowCount++;\r\n        }\r\n        if (rowCount === 0) {\r\n            hasErrors += \"Custom layout was configured to have no Rows, which it needs to have at least 1!\\n\";\r\n        }\r\n        if (hasErrors.length > 0) {\r\n            throw new Error(hasErrors);\r\n        }\r\n    }\r\n    options.layout = params.layout ? params.layout : {row2:layoutOptions.join(\"\")};\r\n\r\n    if (isArray(params.perPageSelect)) {\r\n        if (typeof params.perPageSelect[0] === \"number\") {\r\n            options.perPageSelect = params.perPageSelect.map(function(i) { \r\n                i = Math.abs(parseInt(i));\r\n                return i;\r\n            });\r\n        } else if (validateNum(params.perPageSelect[0])) {\r\n            options.perPageSelect = params.perPageSelect.map(function(i) { \r\n                i = Math.abs(parseInt(i));\r\n                return i;\r\n            });\r\n        } else {\r\n            throw new Error(\"Invalid perPageSelect. Should be a non-empty array of integer\");\r\n        }\r\n    } else {\r\n        options.perPageSelect = [12,24,48,96];\r\n    }\r\n    options.perPage = options.perPageSelect.indexOf(params.perPage) > -1 ? validateNum(params.perPage) : options.perPageSelect[0];\r\n    options.origPerPage = options.perPage;\r\n    options.items = validateNum(params.items, 0);\r\n    options.buttonLabelLeft = params.buttonLabelLeft && typeof params.buttonLabelLeft === \"string\" ? params.buttonLabelLeft : \"Previous\";\r\n    options.buttonLabelRight = params.buttonLabelRight && typeof params.buttonLabelRight === \"string\" ? params.buttonLabelRight : \"Next\";\r\n    options.disablePaginationInput = params.disablePaginationInput !== null && typeof params.disablePaginationInput === \"boolean\" ? params.disablePaginationInput : false;\r\n\r\n    // transfer data\r\n    options.data = {};\r\n    if(!params.data) {\r\n        var msg = \"Missing data parameters for table!\";\r\n        console.error(msg);\r\n        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n        return false;\r\n    }\r\n    if (!params.data.headings) {\r\n        msg = \"Missing data.headings parameters for table!\";\r\n        console.error(msg);\r\n        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n        return false;\r\n    }\r\n    options.data.headings = params.data.headings;\r\n    if (!params.data.columns) {\r\n        msg = \"Missing data.columns parameters for table!\";\r\n        console.error(msg);\r\n        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n        return false;\r\n    }\r\n    options.data.columns = params.data.columns;\r\n    if (!params.data.rows) {\r\n        msg = \"Missing data.rows parameters for table!\";\r\n        console.error(msg);\r\n        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n        return false;\r\n    }\r\n    options.data.rows = params.data.rows;\r\n    \r\n    options.labels = {\r\n        noRows: options.text.noEntries, // Message shown when there are no search results\r\n    };\r\n\r\n    if (!options.showData) {\r\n        delete element.dataset.tableData;\r\n    }\r\n\r\n    var self = this,\r\n        stringTable = \"Table\",\r\n        table = element,\r\n        body,\r\n        head,\r\n        header,\r\n        wrapper,\r\n        container,\r\n        bottom,\r\n        columnBox,\r\n        isIE,\r\n        pages,\r\n        currentPage,\r\n        totalPages,\r\n        paginationElement,\r\n        pagination,\r\n        columnRenderers,\r\n        selectedColumns,\r\n        labels,\r\n        rect,\r\n        input,\r\n        searching = false,\r\n        dragSrcEl,\r\n        sortedColumnIdx,\r\n        metHeight = true,\r\n        batchId,\r\n        searchId,\r\n        columnsFixed = false,\r\n        initialY,\r\n        begOffsetTop,\r\n        currentY,\r\n        moveableCols = [],\r\n        colMoved = false,\r\n        // Handlers\r\n        handleTouchEvent = function(e) {\r\n            if (e.pointerType === \"mouse\") {\r\n                return false; //If mouse touch on IE, cancel and use handleDragEvent\r\n            } else {\r\n                e.preventDefault(); //else prevent default actions, like scrolling\r\n            }\r\n            var yOffset = 0;\r\n            var finOffsetTop;\r\n            if (e.type === \"touchstart\" || e.type === \"pointerdown\") {\r\n                if (e.type === \"pointerdown\") {\r\n                    initialY = e.clientY - yOffset;\r\n                } else {\r\n                    initialY = e.touches[0].clientY - yOffset;\r\n                }\r\n                dragSrcEl = e[\"target\"];\r\n                if (dragSrcEl.tagName != \"LI\" ) {\r\n                    dragSrcEl = getClosest(dragSrcEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                }\r\n                dragSrcEl.dataTransfer = {};\r\n                dragSrcEl.dataTransfer.data = dragSrcEl.outerHTML;\r\n                begOffsetTop = dragSrcEl.offsetTop;\r\n            }\r\n            if (e.type === \"touchmove\" || e.type === \"pointermove\") {\r\n                e.preventDefault();\r\n                var before = false;\r\n                if (isIE || isEdge) {\r\n                    currentY = e.clientY - initialY;\r\n                    dragSrcEl.addEventListener(\"pointerleave\", handlePointerLeave);\r\n                } else {\r\n                    currentY = e.touches[0].clientY - initialY; //difference btn start and end if you move up it is negative\r\n                }\r\n                yOffset = currentY;\r\n                if (yOffset === 0) {\r\n                    return false;\r\n                }\r\n\r\n                if (!dragSrcEl) {\r\n                    dragSrcEl = e[\"target\"];\r\n                    if (dragSrcEl.tagName != \"LI\" ) {\r\n                        dragSrcEl = getClosest(dragSrcEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                    }\r\n                }\r\n\r\n                finOffsetTop = begOffsetTop + currentY;\r\n                dragSrcEl.style.transform = \"translate3d(0, \" + yOffset + \"px, 0)\";\r\n                dragSrcEl.style.opacity = 0.5;\r\n                colMoved = true;\r\n                each(moveableCols, function(col) {\r\n                    var startedBelow = col.offsetTop < dragSrcEl.offsetTop;\r\n                    var startedAbove = col.offsetTop > dragSrcEl.offsetTop;\r\n                    var endedBelow = col.offsetTop < finOffsetTop;\r\n                    var endedAbove = col.offsetTop > finOffsetTop;\r\n                    if (endedAbove && startedBelow  //if started from below and moved above column\r\n                        || endedBelow && startedAbove) { //if started from above and moved below column\r\n                        if (endedAbove) { //if item is being moved before col\r\n                            if (col.previousElementSibling) { //if not the first column\r\n                                if (finOffsetTop > col.previousElementSibling.offsetTop) { //if moving up, but not above predecessor\r\n                                    if (col.classList.contains(prefix + \"border-bottom-black\")) {\r\n                                        col.classList.remove(prefix + \"border-bottom-black\");\r\n                                    } \r\n                                    col.classList.add(prefix + \"border-top-black\");\r\n                                } else if (col.classList.contains(prefix + \"border-top-black\")) {\r\n                                    col.classList.remove(prefix + \"border-top-black\");\r\n                                } else if (col.classList.contains(prefix + \"border-bottom-black\")) {\r\n                                    col.classList.remove(prefix + \"border-bottom-black\");\r\n                                }\r\n                            } else if (finOffsetTop < 0) { //if being placed before first column\r\n                                col.classList.add(prefix + \"border-top-black\");\r\n                            }\r\n                        } else if (endedBelow) { //if item is being moved below\r\n                            if (col.nextElementSibling) {\r\n                                if (finOffsetTop < col.nextElementSibling.offsetTop) {\r\n                                    if (col.classList.contains(prefix + \"border-top-black\")) {\r\n                                        col.classList.remove(prefix + \"border-top-black\");\r\n                                    }\r\n                                    col.classList.add(prefix + \"border-bottom-black\");\r\n                                } else  if (col.classList.contains(prefix + \"border-bottom-black\")) { //either should get the styling or should not\r\n                                    col.classList.remove(prefix + \"border-bottom-black\");\r\n                                } else if (col.classList.contains(prefix + \"border-top-black\")) {\r\n                                    col.classList.remove(prefix + \"border-top-black\");\r\n                                }\r\n                            } else if (finOffsetTop > col.offsetTop) {\r\n                                col.classList.add(prefix + \"border-bottom-black\");\r\n                            }\r\n    \r\n                        }\r\n                    } else if (startedBelow && col.nextElementSibling && col.nextElementSibling.offsetTop > finOffsetTop && !col.nextElementSibling.classList.contains(prefix + \"table-cmplx-drag-li\")) { // started from below + moved below a draggable but above a fixed column\r\n                        col.classList.add(prefix + \"border-bottom-black\");\r\n                    } else if (endedAbove && startedAbove && finOffsetTop > col.previousElementSibling.offsetTop && col.previousElementSibling.classList.contains(prefix + \"table-cmplx-li\")) { //if started from above + moved above but below a fixed \r\n                        col.classList.add(prefix + \"border-top-black\");\r\n                    } else if (col.classList.contains(prefix + \"border-top-black\")) { //If it has a border but doesmn't fall into above category, remove it\r\n                        col.classList.remove(prefix + \"border-top-black\");\r\n                    } else if (col.classList.contains(prefix + \"border-bottom-black\")) { //If it has a border but doesmn't fall into above category, remove it\r\n                        col.classList.remove(prefix + \"border-bottom-black\");\r\n                    }\r\n                });\r\n            }\r\n            if (e.type ===\"touchend\" || e.type === \"pointerup\") {\r\n                initialY = currentY;\r\n                before = false;\r\n                if (!dragSrcEl) {\r\n                    dragSrcEl = e[\"target\"];\r\n                    if (dragSrcEl.tagName != \"LI\" ) {\r\n                        dragSrcEl = getClosest(dragSrcEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                    }\r\n                }\r\n                finOffsetTop = begOffsetTop + currentY;\r\n                if (colMoved) {\r\n                    each(moveableCols, function(col) {\r\n                        if (col != dragSrcEl) {\r\n                            var startedBelow = col.offsetTop < dragSrcEl.offsetTop;\r\n                            var startedAbove = col.offsetTop > dragSrcEl.offsetTop;\r\n                            var endedBelow = col.offsetTop < finOffsetTop;\r\n                            var endedAbove = col.offsetTop > finOffsetTop;\r\n                            if (endedAbove && startedBelow \r\n                                || endedBelow && startedAbove \r\n                                    || col.nextElementSibling && startedBelow && col.nextElementSibling.offsetTop > finOffsetTop && !col.nextElementSibling.classList.contains(prefix + \"table-cmplx-drag-li\") //if moving from bottom coming up: starting top is lower than above's starting top but ending top is higher \r\n                                        || endedAbove && startedAbove && finOffsetTop > col.previousElementSibling.offsetTop && col.previousElementSibling.classList.contains(prefix + \"table-cmplx-li\") ) {          \r\n                                if (endedAbove && startedBelow \r\n                                                || endedAbove && startedAbove && finOffsetTop > col.previousElementSibling.offsetTop && col.previousElementSibling.classList.contains(prefix + \"table-cmplx-li\")) {\r\n                                    before = true;\r\n                                    if (col.previousElementSibling) { //if not the first column\r\n                                        if (finOffsetTop > col.previousElementSibling.offsetTop) {\r\n                                            handleTouchEnd(dragSrcEl, before, col);\r\n                                        } \r\n                                    } else if (!col.previousElementSibling && finOffsetTop < 0) { //if being placed before the first column\r\n                                        handleTouchEnd(dragSrcEl, before, col);\r\n                                    }\r\n                                } else if (endedBelow && startedAbove \r\n                                                || startedBelow && col.nextElementSibling && col.nextElementSibling.offsetTop > finOffsetTop && !col.nextElementSibling.classList.contains(prefix + \"table-cmplx-drag-li\")) { //if moving column down\r\n                                    if (col.nextElementSibling && finOffsetTop < col.nextElementSibling.offsetTop) {\r\n                                        handleTouchEnd(dragSrcEl, before, col);\r\n                                    } else if (!col.nextElementSibling && finOffsetTop > col.offsetTop) { //if being placed below last column\r\n                                        handleTouchEnd(dragSrcEl, before, col);\r\n                                    }\r\n                                }\r\n\r\n                                col.classList.remove(prefix + \"border-top-black\");\r\n                                col.classList.remove(prefix + \"border-bottom-black\");\r\n\r\n                                columnBox.orderChanged = true;\r\n                            }\r\n                        }\r\n                    });\r\n                    if (dragSrcEl.hasAttribute(\"style\")) { //set back to origin if doesn't get moved into available slot\r\n                        dragSrcEl.removeAttribute(\"style\");\r\n                    }\r\n                    colMoved = false; //once touch end is over, set colMoved back to false \r\n                } else {\r\n                    if (dragSrcEl.querySelector(\"input\").checked) {\r\n                        dragSrcEl.querySelector(\"input\").checked = false;\r\n                    } else {\r\n                        dragSrcEl.querySelector(\"input\").checked = true;\r\n                    }\r\n                }\r\n                var applyButton = columnBox.querySelector(\".\"+prefix+\"btn-primary\");\r\n                if (applyButton.disabled) {\r\n                    applyButton.removeAttribute(\"disabled\");\r\n                }\r\n                if (isIE || isEdge) {\r\n                    dragSrcEl.removeEventListener(\"pointerleave\", handlePointerLeave);\r\n                }\r\n            }\r\n        },\r\n        handleTouchEnd = function(dragSrcEl, before, col) {\r\n            var input = dragSrcEl.querySelector(\"input\");\r\n            var checked = input && input.checked;\r\n            setTimeout(function() {\r\n                var dropElem;\r\n                var dropHTML = dragSrcEl.dataTransfer.data;\r\n    \r\n                dragSrcEl.parentNode.removeChild(dragSrcEl);\r\n                if (before) {\r\n                    col.insertAdjacentHTML(\"beforebegin\", dropHTML);\r\n                    dropElem = col.previousSibling;\r\n                } else {\r\n                    col.insertAdjacentHTML(\"afterend\", dropHTML);\r\n                    dropElem = col.nextSibling;\r\n                }\r\n                \r\n                moveableCols.push(dropElem);\r\n                moveableCols = moveableCols.filter( function(value) {\r\n                    return value != dragSrcEl;\r\n                });\r\n                if (checked) {\r\n                    dropElem.querySelector(\"input\").checked = true;\r\n                }\r\n                setupDragEvents(dropElem);\r\n            }, 50);\r\n        },\r\n        handlePointerLeave = function(e) {\r\n            setTimeout(function() {\r\n                dragSrcEl = e[\"relatedTarget\"];\r\n                if (dragSrcEl.tagName != \"LI\" ) {\r\n                    dragSrcEl = getClosest(dragSrcEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                }\r\n                if (dragSrcEl.hasAttribute(\"style\")) {\r\n                    dragSrcEl.removeAttribute(\"style\");\r\n                }\r\n                each(moveableCols, function(col) {\r\n                    if (col.classList.contains(prefix + \"border-top-black\")) {\r\n                        col.classList.remove(prefix + \"border-top-black\");\r\n                    } else if (col.classList.contains(prefix + \"border-bottom-black\")) {\r\n                        col.classList.remove(prefix + \"border-bottom-black\");\r\n                    }\r\n                });\r\n            },50);\r\n        },\r\n        handleDragEvent = function(e) {\r\n            e.stopPropagation();\r\n            if (e.type === \"dragstart\") {\r\n                dragSrcEl = e[\"target\"];\r\n\r\n                dragSrcEl.dataTransfer = {};\r\n                dragSrcEl.dataTransfer.data = dragSrcEl.outerHTML;\r\n            }\r\n            if (e.type === \"dragover\") {\r\n                var overEl = e[\"target\"];\r\n                if (overEl.tagName != \"LI\" ) {\r\n                    overEl = getClosest(overEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                }\r\n                if (dragSrcEl != overEl) {\r\n                    if (e.preventDefault) {\r\n                        e.preventDefault(); // Necessary. Allows us to drop.\r\n                    }\r\n                    overEl.classList.add(prefix + \"border-bottom-black\");\r\n                    if (overEl.previousElementSibling && overEl.previousElementSibling.classList.contains(prefix + \"border-bottom-black\")) {\r\n                        overEl.previousElementSibling.classList.remove(prefix + \"border-bottom-black\");\r\n                    }\r\n                    if (overEl.nextElementSibling && overEl.nextElementSibling.classList.contains(prefix + \"border-bottom-black\")) {\r\n                        overEl.nextElementSibling.classList.remove(prefix + \"border-bottom-black\");\r\n                    }\r\n                    return false;\r\n                }\r\n               \r\n            }\r\n              \r\n            if (e.type === \"dragleave\") {\r\n                \r\n                var leaveEl = e[\"target\"];\r\n                if (leaveEl.tagName != \"LI\" ) {\r\n                    leaveEl = getClosest(leaveEl, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                }\r\n                if (dragSrcEl != leaveEl) {\r\n                    if (e.preventDefault) {\r\n                        e.preventDefault(); // Necessary. Allows us to drop.\r\n                    }\r\n                    \r\n                    leaveEl.classList.remove(prefix + \"border-bottom-black\");\r\n                    return false;\r\n                }\r\n                \r\n            }\r\n              \r\n            if (e.type === \"drop\") {\r\n              \r\n                if (e.stopPropagation) {\r\n                    e.stopPropagation(); // Stops some browsers from redirecting.\r\n                }\r\n              \r\n                var dropTarget = e[\"target\"];    \r\n                if (dropTarget.tagName != \"LI\") {\r\n                    dropTarget = getClosest(dropTarget, \".\" + prefix + \"table-cmplx-drag-li\");\r\n                }\r\n                // Don't do anything if dropping the same column we're dragging.\r\n                if (dragSrcEl != dropTarget) {\r\n                    var checkbox = dragSrcEl.querySelector(\"input\");\r\n                    var checked = checkbox ? checkbox.checked : false;\r\n                    var dropHTML = dragSrcEl.dataTransfer.data;\r\n                    dragSrcEl.parentNode.removeChild(dragSrcEl);\r\n                    \r\n                    dropTarget.insertAdjacentHTML(\"afterend\",dropHTML);\r\n                    var dropElem = dropTarget.nextSibling;\r\n                    if (checked) {\r\n                        dropElem.querySelector(\"input\").checked = true;\r\n                    }\r\n                    setupDragEvents(dropElem);\r\n                    dropTarget.classList.remove(prefix + \"border-bottom-black\");\r\n\r\n                    columnBox.orderChanged = true;\r\n                    var applyButton = columnBox.querySelector(\".\"+prefix+\"btn-primary\");\r\n                    // eanble Apply and Cancel\r\n                    if (applyButton.disabled) {\r\n                        applyButton.removeAttribute(\"disabled\");\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        },\r\n        handleImportActionEvent = function(e) {\r\n            var t = e.target;\r\n            var reader = new FileReader();\r\n            var output = \"\"; //placeholder for text output\r\n            var type = \"\"; //placeholder for file type\r\n            if(t.files && t.files[0]) {\r\n                if (!t.files[0].type || \r\n                    t.files[0].type === \"application/json\") {\r\n                    type = \"json\";\r\n                } else if(t.files[0].type && \r\n                    (t.files[0].type === \"application/vnd.ms-excel\" ||\r\n                    t.files[0].type === \"text/csv\")) {\r\n                    type = \"csv\";\r\n                } else {\r\n                    var msg = \"The file type for the file selected was not recognizable!\";\r\n                    console.error(msg);\r\n                    uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                }     \r\n                reader.onload = function (e) {\r\n                    output = e.target.result;\r\n                    if(type === \"json\") {\r\n                        if(!isJson(output)) {\r\n                            msg = \"The file type for the supplied file was not recognizable!\";\r\n                            console.error(msg);\r\n                            uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                        }\r\n                    }\r\n                    var inputOptions = {type: type,\r\n                        data: output,\r\n                        headings: true};\r\n                    self.import(inputOptions);\r\n                    t.value = \"\";\r\n                    \r\n                };//end onload()\r\n                reader.readAsText(t.files[0]);\r\n            }//end if html5 filelist support\r\n            e.preventDefault();\r\n        },\r\n        handleExportActionEvent = function(t) {\r\n            var exportFileOptions = { };\r\n            if (options.expand && options.select) {\r\n                exportFileOptions.skipColumn = [0,1];\r\n            } else if (options.expand || options.select) {\r\n                exportFileOptions.skipColumn = [0];\r\n            }\r\n\r\n            if (t.innerHTML === options.text.exportCsv) {\r\n                exportFileOptions.type = \"csv\";\r\n            } else {\r\n                exportFileOptions.type = \"json\";\r\n            }\r\n            self.export(exportFileOptions);\r\n        },\r\n        handleDeleteActionEvent = function() {\r\n            self.delete();\r\n        },\r\n        handleSelectAllChange = function(state) {\r\n            if (options.select) {\r\n                var actions = wrapper.querySelector(\"[data-target='#cmplxTablesActions']\");\r\n                if (state === \"checked\" || state === \"indeterminate\" && actions.disabled) {\r\n                    actions.removeAttribute(\"disabled\");\r\n                } else if (state === \"unchecked\" && !actions.disabled && table.selectedRows.length < 1) {\r\n                    actions.setAttribute(\"disabled\",\"\");\r\n                }\r\n            }\r\n        },\r\n        handleCheckBoxEvent = function(t) {\r\n            if(options.select && t.classList.contains(prefix + \"table-cmplx-select-all\")) { // Header Select All\r\n                if (table.hasRows) {\r\n                    var cellIdx = getHeaderCellIndex(prefix + \"table-cmplx-select-all\");\r\n                    var check = t.checked;\r\n                    if (!check || t.state === \"indeterminate\") {\r\n                        check = false;\r\n                        t.checked = false;\r\n                        t.state = \"unchecked\";\r\n                    } else {\r\n                        t.state = \"checked\";\r\n                        check = true;\r\n                    }\r\n                    each(pages[currentPage-1], function(row) {\r\n                        if(row.cells.length != 1) {\r\n                            var cell = row.cells[cellIdx];\r\n                            var input = cell.querySelector(\"input[type='checkbox']\");\r\n                            var dataInput = table.data[row.dataIndex].cells[cellIdx].querySelector(\"input[type='checkbox']\");\r\n\r\n                            if (check) {\r\n                                dataInput.checked = input.checked = true;\r\n                                table.selectedRows.push(row.dataIndex);\r\n                                row.classList.add(\"selected\");\r\n                                if (options.expand) {\r\n                                    row.nextElementSibling.classList.add(\"selected\");\r\n                                }\r\n                                t.state = \"checked\";\r\n                            } else {\r\n                                dataInput.checked = input.checked = false;\r\n                                table.selectedRows.pop(row.dataIndex);\r\n                                row.classList.remove(\"selected\");\r\n                                if (options.expand) {\r\n                                    row.nextElementSibling.classList.remove(\"selected\");\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    pages[currentPage-1].selected = t.checked;\r\n                    handleSelectAllChange(t.state);\r\n                } else {\r\n                    t.checked = false;\r\n                }\r\n            } else if(options.select && t.parentNode.classList.contains(prefix + \"table-cmplx-row-select\")) { // Table Cell Select\r\n                cellIdx = getHeaderCellIndex(prefix + \"table-cmplx-select-all\");\r\n                var tr = getClosest(t, \"tr\", false);\r\n                if (t.checked) {\r\n                    table.data[tr.dataIndex].cells[cellIdx].querySelector(\"input[type='checkbox']\").checked = true;\r\n                    tr.classList.add(\"selected\");\r\n                    if (options.expand) {\r\n                        tr.nextElementSibling.classList.add(\"selected\");\r\n                    }\r\n                    if (table.selectedRows.length === 0) {\r\n                        table.selectedRows.push(tr.dataIndex);\r\n                    } else {\r\n                        var newRows = [];\r\n                        for (var idx = 0; idx < table.selectedRows.length; idx++) {\r\n                            \r\n                            var value = table.selectedRows[idx];\r\n                            var less = table.selectedRows[idx-1];\r\n                            var more = table.selectedRows[idx+1];\r\n                            if (tr.dataIndex < value \r\n                                && (less === undefined || tr.dataIndex > less)\r\n                                && newRows.indexOf(tr.dataIndex) === -1) {\r\n                                newRows.push(tr.dataIndex);\r\n                                newRows.push(value);\r\n                            } else if (tr.dataIndex > value \r\n                                && (more === undefined || tr.dataIndex < more)\r\n                                && newRows.indexOf(tr.dataIndex) === -1) {\r\n                                newRows.push(value);\r\n                                newRows.push(tr.dataIndex);\r\n                            } else {\r\n                                newRows.push(value);\r\n                            }\r\n                        }\r\n                        if (newRows.length > 0) {\r\n                            table.selectedRows = newRows;\r\n                        }\r\n                    }\r\n                } else {\r\n                    table.data[tr.dataIndex].cells[cellIdx].querySelector(\"input[type='checkbox']\").checked = false;\r\n                    tr.classList.remove(\"selected\");\r\n                    if (options.expand) {\r\n                        tr.nextElementSibling.classList.remove(\"selected\");\r\n                    }\r\n                    table.selectedRows = table.selectedRows.filter( function(value) {\r\n                        if (value != tr.dataIndex) {\r\n                            return \"\" + value;\r\n                        }\r\n                    });\r\n                    each(table.activeHeadings[cellIdx].children, function(el) {\r\n                        if (el && el.classList.contains(prefix + \"table-cmplx-select-all\")) {\r\n                            el.checked = false;\r\n                        }\r\n                    });\r\n                }\r\n                var selectAll = wrapper.querySelector(\".\" + prefix + \"table-cmplx-select-all\");\r\n                if (table.selectedRows.length === options.perPage || table.selectedRows.length === pages[currentPage-1].length) {\r\n                    selectAll.indeterminate = false;\r\n                    selectAll.state = \"checked\";\r\n                    selectAll.checked = true;\r\n                } else if (table.selectedRows.length > 0) {\r\n                    selectAll.state = \"indeterminate\";\r\n                    selectAll.indeterminate = true;\r\n                } else {\r\n                    selectAll.state = \"unchecked\";\r\n                    selectAll.indeterminate = false;\r\n                }\r\n                handleSelectAllChange(selectAll.state);\r\n            }\r\n        },\r\n        handleButtonEvent =  function(t) {\r\n            if (t.innerHTML === options.text.cancel) {\r\n                columnBox.classList.remove(prefix + \"show\");\r\n            }\r\n            else if (t.innerHTML === options.text.apply) {\r\n                if(columnBox.orderChanged) {\r\n                    var order = [];\r\n                    // Make sure we pick up cells for Expandable, Selectable and Labels\r\n                    for (var h = 0; h < baseCellIdx(); h++) {\r\n                        order.push(h);\r\n                    }\r\n                    each (columnBox.getElementsByTagName(\"ul\"), function(unOderedList) {\r\n                        each(unOderedList.children, function(li) {\r\n                            each(table.headings, function(header) {\r\n                                if(li.querySelectorAll(\"label\")[0].textContent === header.textContent) {\r\n                                    order.push(header.originalCellIndex);\r\n                                }\r\n                            });\r\n                        });\r\n                    });\r\n                    columnBox.orderChanged = false;\r\n                    columns().order(order);\r\n                    table.hiddenColumns = [];\r\n                    self.update();\r\n                }\r\n\r\n                each (columnBox.getElementsByTagName(\"ul\"), function(unOderedList) {\r\n                    each(unOderedList.children, function(li) {\r\n                        var liCheckbox = li.querySelector(\"input[type='checkbox']\");\r\n                        if (liCheckbox && liCheckbox.checked) {\r\n                            each(table.headings, function(header) {\r\n                                if(li.querySelectorAll(\"label\")[0].textContent === header.textContent) {\r\n                                    columns().show([header.originalCellIndex]);\r\n                                    self.update();\r\n                                }\r\n                            });\r\n                        } else if (liCheckbox && !liCheckbox.checked) {\r\n                            each(table.headings, function(header) {\r\n                                if(li.querySelectorAll(\"label\")[0].textContent === header.textContent) {\r\n                                    columns().hide([header.originalCellIndex]);\r\n                                    self.update();\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    if (searching) {\r\n                        self.search(input.value);\r\n                    }\r\n                });\r\n                columnsFixed = false;\r\n                renderHeader();\r\n                columnBox.classList.remove(prefix + \"show\");\r\n            }\r\n        },\r\n        handleTableHeaderEvent = function(e,t) {\r\n            if (\r\n                options.sort &&\r\n                t.hasAttribute(\"data-sortable\")\r\n            ) {\r\n                if ( options.items > 0 && (options.items != table.activeRows.length)) {\r\n                    self.deleteAll();\r\n                    //change column to asc or desc\r\n                    columns().updateSortDirection(table.activeHeadings[table.activeHeadings.indexOf(t)], t.classList.contains(\"asc\") ? \"asc\":\"desc\");\r\n                }\r\n                else{\r\n                    columns().sort(table.activeHeadings.indexOf(t));\r\n                    sortedColumnIdx = t.originalCellIndex;\r\n                    self.update();\r\n                    e.preventDefault();\r\n                }\r\n                uicoreCustomEvent(\"Table\", \"SortEvent\", table, { \"column\" : table.activeHeadings.indexOf(t), \"direction\" : (t.classList.contains(\"asc\") ? \"ascending\":\"descending\"), \"currentPage\": currentPage, \"perPage\": options.perPage });\r\n            }\r\n            t.focus();\r\n        },\r\n        handleAccordionEvent = function(t) {\r\n            if(t.classList.contains(prefix + \"table-cmplx-accordion-btn\")) {\r\n                var htmlRow = t.parentNode.parentNode,\r\n                    currentRow = table.data[htmlRow.dataIndex];\r\n                if (currentRow.details) {\r\n                    var detailsRow = htmlRow.nextElementSibling.children[0];\r\n                    if (detailsRow.classList.contains(prefix + \"show\")) {\r\n                        detailsRow.classList.remove(prefix + \"show\");\r\n                        t.classList.add(prefix + \"collapsed\");\r\n                        t.setAttribute(\"aria-expanded\",false);\r\n                    } else {\r\n                        detailsRow.classList.add(prefix + \"show\");\r\n                        t.classList.remove(prefix + \"collapsed\");\r\n                        t.setAttribute(\"aria-expanded\",true);\r\n                    }\r\n                } else {\r\n                    each(t.querySelector(\"svg\").childNodes, function(use) {\r\n                        if (use.getAttribute(\"class\").indexOf(prefix + \"show\") > -1) {\r\n                            classRemove(use, prefix + \"show\");\r\n                            if (use.getAttribute(\"xlink:href\").indexOf(prefix + \"loading-sqrs\") != -1) {\r\n                                var row = getClosest(use, \"tr\", false);\r\n                                table.activeRows[row.dataIndex].event = \"ExpandCancelEvent\";\r\n                                uicoreCustomEvent(\"Table\", \"ExpandCancelEvent\", table, {\"rowId\": row.dataIndex});\r\n                            }\r\n                        } else {\r\n                            classAdd(use, prefix + \"show\");\r\n                            if (use.getAttribute(\"xlink:href\").indexOf(prefix + \"loading-sqrs\") != -1) {\r\n                                row = getClosest(use, \"tr\", false);\r\n                                table.activeRows[row.dataIndex].event = \"ExpandStartEvent\";\r\n                                var content = [];\r\n                                each(table.data[row.dataIndex].cells, function(cell, idx) {\r\n                                    if (options.expand && options.select) {\r\n                                        if (idx >= 2) {\r\n                                            var dt = \"\\\"\"+labels[idx]+\"\\\": \\\"\"+ ( (cell.hasAttribute(\"data-content\") ? cell.getAttribute(\"data-content\") : cell.textContent )+\"\\\"\" );\r\n                                            content.push(dt);\r\n                                        }\r\n                                    } else if (options.expand ||  options.select) {\r\n                                        if (idx >= 1) {\r\n                                            dt = \"\\\"\"+labels[idx]+\"\\\": \\\"\"+ ( (cell.hasAttribute(\"data-content\") ? cell.getAttribute(\"data-content\") : cell.textContent )+\"\\\"\" );\r\n                                            content.push(dt);\r\n                                        }\r\n                                    } else {\r\n                                        dt = \"\\\"\"+labels[idx]+\"\\\": \\\"\"+ ( (cell.hasAttribute(\"data-content\") ? cell.getAttribute(\"data-content\") : cell.textContent )+\"\\\"\" );\r\n                                        content.push(dt);\r\n                                    }\r\n                                });\r\n                                uicoreCustomEvent(\"Table\", \"ExpandStartEvent\", table, {\"rowId\": row.dataIndex, \"content\": content});\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        setupDragEvents = function(el) {\r\n            el.addEventListener(\"dragstart\", handleDragEvent, false);\r\n            el.addEventListener(\"dragover\", handleDragEvent, false);\r\n            el.addEventListener(\"dragleave\", handleDragEvent, false);\r\n            el.addEventListener(\"drop\", handleDragEvent, false);\r\n            if (isIE || isEdge) {\r\n                el.addEventListener(\"pointerdown\", handleTouchEvent, false);\r\n                el.addEventListener(\"pointerup\", handleTouchEvent, false);\r\n                el.addEventListener(\"pointermove\", handleTouchEvent, false);\r\n                if (isEdge) {\r\n                    el.addEventListener(\"click\", function(e) {\r\n                        if (e.pointerType === \"touch\") {\r\n                            e.preventDefault();\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                el.addEventListener(\"touchstart\", handleTouchEvent, false);\r\n                el.addEventListener(\"touchend\", handleTouchEvent, false);\r\n                el.addEventListener(\"touchmove\", handleTouchEvent, false);\r\n            }\r\n\r\n        },\r\n        extend = function (src, props) {\r\n            for (var prop in props) {\r\n                if (Object.prototype.hasOwnProperty.call(props, prop)) {\r\n                // if (props.hasOwnProperty(prop)) {\r\n                    var val = props[prop];\r\n                    if (val && isObject(val)) {\r\n                        src[prop] = src[prop] || {};\r\n                        extend(src[prop], val);\r\n                    } else {\r\n                        src[prop] = val;\r\n                    }\r\n                }\r\n            }\r\n            return src;\r\n        },\r\n        baseCellIdx = function() {\r\n            var baseIdx = 0;\r\n            if (table.expand) {\r\n                baseIdx++;\r\n            }\r\n            if (table.select) {\r\n                baseIdx++;\r\n            }\r\n            return baseIdx;\r\n        },\r\n        columns = function (columns) {\r\n            return new Columns(table, columns);\r\n        },\r\n        rows = function (rows) {\r\n            return new Rows(table, rows);\r\n        },\r\n        // Function used to convert options data to thead and tbody\r\n        dataToTable = function() {\r\n            var thead = false,\r\n                tbody = false;\r\n\r\n            table.data = table.data || options.data;\r\n\r\n            if (table.data.headings) {\r\n                thead = createElement(\"thead\");\r\n                var tr = createElement(\"tr\");\r\n\r\n                // Add the expandable header for row details\r\n                if (options.expand) {\r\n                    var th = createElement(\"th\", {\r\n                        title: \"expand details\"\r\n                    });\r\n                    tr.appendChild(th);\r\n                    table.expand = options.expand;\r\n                }\r\n                if (options.select) {\r\n                    th = createElement(\"th\");\r\n                    th.appendChild(createElement(\"input\", {\r\n                        type: \"checkbox\",\r\n                        class: prefix + \"table-cmplx-select-all\",\r\n                        title: \"select all rows\"\r\n                    }));\r\n                    tr.appendChild(th);\r\n                    table.select = options.select;\r\n                }\r\n                each(table.data.headings, function (col) {\r\n                    var th = createElement(\"th\", {\r\n                        scope: \"col\",\r\n                        html: col\r\n                    });\r\n                    tr.appendChild(th);\r\n                });\r\n                thead.appendChild(tr);\r\n            }\r\n\r\n            if (table.data.rows && table.data.rows.length) {\r\n                tbody = createElement(\"tbody\");\r\n               \r\n                each(table.data.rows, function (row, idx) {\r\n                    row.dataIndex = idx;\r\n                    if (table.data.headings) {\r\n                        if (options.data.headings.length !== row.data.length) {\r\n                            throw new Error(\r\n                                \"Row found at index, [ \"+idx+\" ] that does not match the number of headings supplied.\"\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    var tr = createElement(\"tr\");\r\n                    //Add secondary accordion arrow for details\r\n                    if(options.expand) {\r\n                        tr.appendChild(renderExpand());\r\n                    }\r\n                    //Add selectable checkboxes\r\n                    if(options.select) {\r\n                        tr.appendChild(renderSelect());\r\n                    }\r\n                    each(row.data, function (value) {\r\n                        var td = createElement(\"td\", {\r\n                            html: value\r\n                        });\r\n                        td.setAttribute(\"data-content\", getText(value));\r\n                        tr.appendChild(td);\r\n                    });\r\n                    \r\n                    tbody.appendChild(tr);\r\n\r\n                    if (row.details) {\r\n                        tr.details = row.details;\r\n                    }\r\n\r\n                    // Secondary accordion html for details\r\n                    if (options.expand){\r\n                        tbody.appendChild(renderDetails(tr, table.headings.length));\r\n                    }\r\n                    \r\n                });\r\n            }\r\n\r\n            if (thead) {\r\n                if (table.tHead !== null) {\r\n                    table.removeChild(table.tHead);\r\n                }\r\n                table.appendChild(thead);\r\n            }\r\n\r\n            if (tbody) {\r\n                if (table.tBodies.length) {\r\n                    table.removeChild(table.tBodies[0]);\r\n                }\r\n                table.appendChild(tbody);\r\n            }\r\n        },\r\n        setRenderColumns = function() {\r\n            if (selectedColumns.length) {\r\n                each(table.data, function (row) {\r\n                    each(row.cells, function (cell, i) {\r\n                        if (selectedColumns.indexOf(i) > -1) {\r\n                            each(columnRenderers, function (renderers) {\r\n                                if (renderers.columns === cell.cellIndex) {\r\n                                    cell.innerHTML = renderers.renderer.call(self, cell.data, cell, row);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        renderDetails = function(row, length, stripeClass, selected) {\r\n\r\n            var clazz = prefix + \"table-cmplx-row-details\";\r\n            if (stripeClass) {\r\n                clazz = stripeClass + \" \" + clazz;\r\n            }\r\n            if (selected) {\r\n                clazz += \" \" + \"selected\";\r\n            }\r\n           \r\n            var detailsRow = createElement(\"tr\", {\r\n                class: clazz\r\n            });\r\n            var detailsCell = createElement(\"td\", {\r\n                class :  prefix + \"table-complx-details\",\r\n                colspan: length\r\n            });\r\n            var accordionBody = createElement(\"div\",{\r\n                class : prefix + \"table-complx-details-body\"\r\n            });\r\n            if (row.details) {\r\n                accordionBody.innerHTML = row.details;\r\n            } else {\r\n                row.details = false;\r\n            }\r\n            detailsCell.appendChild(accordionBody);\r\n            detailsRow.appendChild(detailsCell);\r\n            return detailsRow;\r\n        },\r\n        renderExpand = function() {\r\n            var td = createElement(\"td\");\r\n            var showButton = createElement(\"button\", {\r\n                    class: prefix + \"table-cmplx-accordion-btn \" + prefix + \"collapsed\", \r\n                    \"aria-expanded\": false,\r\n                    \"aria-label\": \"expand details\"\r\n                }),\r\n                svgElem = renderSvg([{name:options.expandIcon, show:true},{name:\"loading-sqrs\", show:false}]);\r\n            showButton.appendChild(svgElem);\r\n            td.appendChild(showButton);\r\n            return td;\r\n        },\r\n        renderSelect = function() {\r\n            var td = createElement(\"td\", {\r\n                class: prefix + \"table-cmplx-row-select\"\r\n            });\r\n            var inputCheckbox = createElement(\"input\", {\r\n                type: \"checkbox\",\r\n                title: \"row select\"\r\n            });\r\n            td.appendChild(inputCheckbox);\r\n            return td;\r\n        },\r\n        renderCustomRow = function(row) {\r\n            var template = \"<div class='\" + prefix + \"table-cmplx-top'>\";\r\n            template += row;\r\n            template += \"</div>\";\r\n\r\n            each(row.match(/\\{((\\w*|\\d*):?)+\\}/g), function(el) {\r\n                var replace = el;\r\n                var clean = el.replace(/[{,}]/g, \"\").split(\":\");\r\n                switch(clean[0]) {\r\n                case \"actions\": template = template.replace(replace, renderActions(clean[1], clean[2])); break;\r\n                case \"search\": template = template.replace(replace, renderSearch(clean[1], clean[2])); break;\r\n                case \"settings\": template = template.replace(replace, renderSettings(clean[1], clean[2])); break;\r\n                case \"placeholder\": template = template.replace(replace, renderPlaceholder(clean[1])); break;\r\n                default : \r\n                    var topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr \" + prefix + \"justify-content-\" + clean[2] + \"' style='flex-grow: \" + clean[1] +\";'>\";\r\n                    topCtnr += window[clean[0]]()+\"</div>\";\r\n                    template = template.replace(replace, topCtnr);\r\n                    \r\n                }\r\n            });\r\n            return template;\r\n        },\r\n        createActionButton = function(html, js, dataToggle, dataTarget) {\r\n            var button;\r\n            if (dataToggle && dataTarget) {\r\n                button = createElement(\"button\", {\r\n                    class: prefix + \"dropdown-item\",\r\n                    role :\"menuitem\",\r\n                    onclick: js ? js : \"javascript: void(0);\",\r\n                    html: html,\r\n                    tabindex: \"-1\",\r\n                    data_toggle: dataToggle,\r\n                    data_target: dataTarget\r\n                });\r\n            } else {\r\n                button = createElement(\"button\", {\r\n                    class: prefix + \"dropdown-item\",\r\n                    role :\"menuitem\",\r\n                    onclick: js ? js : \"javascript: void(0);\",\r\n                    html: html,\r\n                    tabindex: \"-1\"\r\n                });\r\n            }\r\n            return button;\r\n        },\r\n        createActionLi = function () {\r\n            return createElement(\"li\", {\r\n                class: prefix + \"dropdown-list-item\",\r\n                role: \"none presentation\",\r\n                tabindex: \"0\"\r\n            });\r\n        },\r\n        renderActions = function(flexGrow, justifyContent) {\r\n            var topCtnr;\r\n            if (options.select) {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr \" + prefix + \"justify-content-\" + justifyContent +\"'\";\r\n                flexGrow ? topCtnr += \" style='flex-grow: \" + flexGrow + \";'>\" :  +\">\";\r\n                var cmplxAction = createElement(\"div\", {\r\n                    class: prefix + \"table-cmplx-action\"\r\n                });\r\n                var cmplxActionLabel = createElement(\"label\", {\r\n                    class: prefix + \"table-cmplx-action-label\",\r\n                    html: options.text.batchActions,\r\n                    for: batchId+\"BatchActions\"\r\n                });\r\n                cmplxAction.appendChild(cmplxActionLabel);\r\n\r\n                var cmplxActionDropdown = createElement(\"div\", {\r\n                    class: prefix + \"mb-0 \" + prefix + \"btn-dropdown\"\r\n                });\r\n                var anchor = createElement(\"button\", {\r\n                    id: batchId+\"BatchActions\",\r\n                    class: prefix + \"btn \" + prefix + \"btn-secondary \" + prefix + \"table-cmplx-action-button\" ,\r\n                    tabindex: \"0\",\r\n                    \"data-toggle\": prefix + \"dropdown\",\r\n                    \"data-target\": \"#cmplxTablesActions\",\r\n                    \"aria-expanded\": \"false\",\r\n                    \"aria-controls\": \"cmplxTablesActions\",\r\n                    html: options.text.chooseActions\r\n                });\r\n                \r\n                var svgElem = renderSvg([{name:\"arrow-tri-solid-right\", show:true}]);\r\n                var svgClass= svgElem.getAttribute(\"class\");\r\n                svgElem.setAttribute(\"class\", svgClass + \" \" + prefix + \"arrow-tri-solid-right\");\r\n                anchor.appendChild(svgElem);\r\n                cmplxActionDropdown.appendChild(anchor);\r\n\r\n                var unordered = createElement(\"ul\", {\r\n                    id: \"cmplxTablesActions\",\r\n                    class: prefix + \"button-dropdown-container \" + prefix + \"collapse\",\r\n                    role: \"menu\"\r\n                });\r\n\r\n                each(options.actionsSelectFilters, function(action) {\r\n                    if (\"hr\" === action) {\r\n                        unordered.appendChild(createElement(action,{class: prefix+\"dropdown-divider\"}));\r\n                    } else {\r\n                        var actionLI = createActionLi();\r\n                        var actionLabel;\r\n                        if (typeof action === \"string\") {\r\n                            if (action === options.text.exportCsv) { \r\n                                actionLabel = createActionButton(action, null, \"dds__modal\", \"#\"+prefix+\"csvSpecialChars\");\r\n                            } else {\r\n                                actionLabel = createActionButton(action);\r\n                            }\r\n                        } else {\r\n                            actionLabel = createActionButton(action.html, action.js);\r\n                        }\r\n                        actionLI.appendChild(actionLabel);\r\n                        unordered.appendChild(actionLI);\r\n                    }\r\n                });\r\n                \r\n                anchor.setAttribute(\"disabled\",\"\");\r\n\r\n                cmplxActionDropdown.appendChild(unordered);\r\n                cmplxAction.appendChild(cmplxActionDropdown);\r\n\r\n                topCtnr += cmplxAction.outerHTML + \"</div>\";\r\n            } else {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr'></div>\";\r\n            }\r\n\r\n            return topCtnr;\r\n        },\r\n        renderSearch = function(flexGrow, justifyContent) {\r\n            var topCtnr;\r\n            if (options.search) {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr \" + prefix + \"justify-content-\" + justifyContent +\"'\";\r\n                flexGrow ? topCtnr += \" style='flex-grow: \" + flexGrow + \";'>\" :  +\">\";\r\n                var inputGroup = createElement(\"div\", {\r\n                    class: prefix + \"table-cmplx-input-group\"\r\n                });\r\n                var searchCtnr = createElement(\"div\", {\r\n                    class: prefix + \"table-cmplx-search\"\r\n                });\r\n                var searchIcon = renderSvg([{name:\"search\", show:true}]);\r\n                var searchInput = createElement(\"input\", {\r\n                    type: \"search\",\r\n                    class: prefix + \"form-control \",\r\n                    \"aria-label\": \"search\"\r\n                });\r\n                if (options.search && options.text.search.placeholder) {\r\n                    searchInput.setAttribute(\"placeholder\", options.text.search.placeholder);\r\n                }\r\n                searchCtnr.appendChild(searchInput);\r\n                searchCtnr.appendChild(searchIcon);\r\n                if (options.search && options.text.search.label) {\r\n                    var searchLabel = createElement(\"label\", {\r\n                        for: searchId + \"Search\",\r\n                        html: options.text.search.label\r\n                    });\r\n                    searchInput.setAttribute(\"id\",searchId+\"Search\");\r\n                    inputGroup.appendChild(searchLabel);\r\n                    inputGroup.appendChild(searchCtnr);\r\n                    topCtnr += inputGroup.outerHTML + \"</div>\";\r\n                } else {\r\n                    topCtnr += searchCtnr.outerHTML + \"</div>\";\r\n                }\r\n            } else {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr'></div>\";\r\n            }\r\n\r\n            return topCtnr;\r\n        },\r\n        renderSettings = function(flexGrow, justifyContent) {\r\n            var topCtnr;\r\n            if (options.settings) {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr \" + prefix + \"justify-content-\" + justifyContent +\"'\";\r\n                flexGrow ? topCtnr += \" style='flex-grow: \" + flexGrow + \";'>\" :  +\">\";\r\n                var optGear = \"<div class='\" + prefix + \"table-cmplx-settings'>\";\r\n                \r\n                if (options.import) {\r\n                    optGear += \"<button class='\"+prefix+\"table-cmplx-settings-button dds__text-truncate' aria-label='table settings import'>\";\r\n                    var svgElem = renderSvg([{name:\"import-alt\", show:true}]);\r\n                    optGear += svgElem.outerHTML || new XMLSerializer().serializeToString(svgElem);\r\n                    optGear += \" \" + options.text.import +\"</button>\";\r\n                    optGear += \"<input class='dds__table-cmplx-file-import' type='file' hidden accept='\" + options.allowedImportExtensions + \"'/>\";\r\n                }\r\n                if (options.print) {\r\n                    optGear += \"<button class='\"+prefix+\"table-cmplx-settings-button dds__text-truncate' aria-label='table settings print'>\";\r\n                    svgElem = renderSvg([{name:\"printer\", show:true}]);\r\n                    optGear += svgElem.outerHTML || new XMLSerializer().serializeToString(svgElem);\r\n                    optGear += \" \" + options.text.print +\"</button>\";\r\n                }\r\n                if (options.column) {\r\n                    optGear += \"<button class='\"+prefix+\"table-cmplx-settings-button dds__text-truncate' aria-label='table settings columns'>\";\r\n                    svgElem = renderSvg([{name:\"gear\", show:true}]);\r\n                    optGear += svgElem.outerHTML || new XMLSerializer().serializeToString(svgElem);\r\n                    optGear += \" \" + options.text.columns +\"</button>\";\r\n                }\r\n                \r\n                optGear += columnBox = \"<div class=\\\"\" + prefix + \"column-box\";\r\n                optGear += \"\\\" data-toggle=\\\"data-column-box\\\"></div>\";\r\n                optGear += \"</div>\";\r\n                topCtnr += optGear + \"</div>\";\r\n            } else {\r\n                topCtnr = \"<div class='\" + prefix + \"table-cmplx-top-cntr'></div>\";\r\n            }\r\n\r\n            return topCtnr;\r\n        },\r\n        renderPlaceholder = function (flexGrow) {\r\n            return \"<div class='\" + prefix + \"table-cmplx-top-cntr \" + prefix + \"table-cmplx-placeholder' style='flex-grow: \" + flexGrow + \";'></div>\";\r\n        },\r\n        render = function() {\r\n \r\n            var template = \"\";\r\n\r\n            // Convert data to HTML\r\n            if (options.data) {\r\n                dataToTable(options.data);\r\n            }\r\n\r\n            body = table.tBodies[0];\r\n            head = table.tHead;\r\n    \r\n            // Should move this to dataToTable method\r\n            if (!body) {\r\n                body = createElement(\"tbody\");\r\n                table.appendChild(body);\r\n            }\r\n    \r\n\r\n            table.hasRows = body.rows.length > 0;\r\n    \r\n            // Make a tHead if there isn't one (fixes #8)\r\n            // Should move this to dataToTable method\r\n            if (!head) {\r\n                var h = createElement(\"thead\");\r\n                var t = createElement(\"tr\");\r\n    \r\n                if (table.hasRows) {\r\n                    each(body.rows[0].cells, function () {\r\n                        t.appendChild(createElement(\"th\"));\r\n                    });\r\n    \r\n                    h.appendChild(t);\r\n                }\r\n    \r\n                head = h;\r\n    \r\n                table.insertBefore(head, body);\r\n            }\r\n    \r\n            table.hasHeadings = head.rows.length > 0;\r\n    \r\n            if (table.hasHeadings) {\r\n                header = head.rows[0];\r\n                table.headings = [].slice.call(header.cells);\r\n            }\r\n    \r\n            // Header\r\n            if (!options.header) {\r\n                if (head) {\r\n                    table.removeChild(table.tHead);\r\n                }\r\n            }\r\n    \r\n            // Build\r\n            wrapper = createElement(\"div\", {\r\n                class: prefix + \"table-cmplx-wrapper\"\r\n            });\r\n    \r\n            //////////////////////////////////////////////////////\r\n            // Top template - Begin\r\n            //////////////////////////////////////////////////////\r\n   \r\n            if (options.layout.row1) {\r\n                template += renderCustomRow(options.layout.row1);\r\n            }\r\n\r\n            if (options.layout.row2) {\r\n                template += renderCustomRow(options.layout.row2);\r\n            }\r\n\r\n            //////////////////////////////////////////////////////\r\n            // Top template - End\r\n            //////////////////////////////////////////////////////\r\n\r\n            template += \"<div class='\" + prefix + \"table-cmplx-container'></div>\";\r\n            \r\n            //////////////////////////////////////////////////////\r\n            // Bottom template - Begin\r\n            //////////////////////////////////////////////////////\r\n\r\n            template += \"<div class='\" + prefix + \"table-cmplx-bottom'>\";\r\n            template += \"</div>\";\r\n    \r\n            //////////////////////////////////////////////////////\r\n            // Bottom template - End\r\n            //////////////////////////////////////////////////////\r\n\r\n            if (table.hasHeadings) {\r\n                // Sortable\r\n                renderHeader();\r\n            }\r\n    \r\n            // Add table class\r\n            table.classList.add(prefix + \"table-cmplx\");\r\n            \r\n            wrapper.innerHTML = template;\r\n    \r\n            container = wrapper.querySelector(\".\" + prefix + \"table-cmplx-container\");\r\n\r\n            bottom = wrapper.querySelector(\".\" + prefix + \"table-cmplx-bottom\");\r\n    \r\n            // Pagination\r\n            options.pagination = getSibling(element, \".dds__pagination\") ? true : false;\r\n            if (options.pagination) {\r\n                paginationElement = getSibling(element, \".dds__pagination\");\r\n                bottom.appendChild(paginationElement);\r\n            }\r\n\r\n            columnBox = wrapper.querySelector(\"[data-toggle='data-column-box']\");\r\n    \r\n            // Insert in to DOM tree\r\n            table.parentNode.replaceChild(wrapper, table);\r\n            container.appendChild(table);\r\n    \r\n            // Store the table dimensions\r\n            rect = table.getBoundingClientRect();\r\n    \r\n            // Convert rows to array for processing\r\n            table.data = [];\r\n            table.activeRows = [];\r\n\r\n            var dataIdx = 0;\r\n            each(body.rows, function(row, idx) {\r\n                if (options.expand) {\r\n                    if (idx % 2 == 0) {\r\n                        row.dataIndex = dataIdx++;\r\n                        table.activeRows.push(row);\r\n                        table.data.push(row);\r\n                    }\r\n                } else {\r\n                    row.dataIndex = idx;\r\n                    table.activeRows.push(row);\r\n                    table.data.push(row);\r\n                }\r\n            }, true);\r\n\r\n            table.activeHeadings = table.headings.slice();\r\n\r\n            // Update\r\n            self.update();\r\n    \r\n            // Set Columns\r\n            setColumns();\r\n\r\n            // Fix columns, think this is the only valid call for fixColumns\r\n            fixColumns();\r\n\r\n            // Options condensed\r\n            if (options.condensed) {\r\n                wrapper.querySelector(\".\" + prefix + \"table-cmplx\").classList.add(prefix + \"condensed\");\r\n            }\r\n            \r\n            // This needs to run after the options.condensed\r\n            if (options.fixedHeight) {\r\n                if (options.origPerPage > table.activeRows.length) {\r\n                    metHeight = false;\r\n                } else {\r\n                    // Fix height\r\n                    fixHeight();\r\n                }\r\n            }\r\n    \r\n            bindEvents();\r\n        },\r\n        renderPage = function () {\r\n            if (options.search && searching === true && table.searchData.length === 0) return;\r\n            if (table.hasRows && totalPages) {\r\n    \r\n                // Use a fragment to limit touching the DOM\r\n                var index = currentPage - 1,\r\n                    frag = DOC.createDocumentFragment();\r\n    \r\n                var page = pages[index];\r\n                var selectHeader;\r\n                var selectCellIdx;\r\n                \r\n                if (table.hasHeadings) {\r\n                    flush(header, isIE);\r\n                    \r\n                    each(table.activeHeadings, function (th) {\r\n                        if (options.select) {\r\n                            each(th.children, function(el) {\r\n                                if (el && el.classList.contains(prefix + \"table-cmplx-select-all\")) {\r\n                                    selectHeader = el;\r\n                                    selectCellIdx = th.originalCellIndex;\r\n                                    if(page.selected) {\r\n                                        selectHeader.checked = true;\r\n                                        selectHeader.state = \"checked\"; // set the state\r\n                                    } else {\r\n                                        selectHeader.checked = false;\r\n                                        selectHeader.state = \"unchecked\"; // set the state\r\n                                    }\r\n                                } \r\n                            });\r\n                        }\r\n                        // reest sortable columns\r\n                        if (th.hasAttribute(\"data-sortable\") && th.originalCellIndex != sortedColumnIdx) {\r\n                            th.setAttribute(\"aria-sort\", \"none\");\r\n                        }\r\n                        header.appendChild(th);\r\n                    }, this);\r\n                }\r\n                \r\n                var selectedRows = 0;\r\n                each(page, function (row, idx) {\r\n                    //row.className = \"\";\r\n                    row.removeAttribute(\"class\");\r\n                    var selected = false;\r\n                    // redo if previously selected\r\n                    if (options.select) {\r\n                        if(table.data[row.dataIndex].cells[selectCellIdx].querySelector(\"input[type='checkbox']\").checked) {\r\n                            row.classList.add(\"selected\");\r\n                            selected = true;\r\n                            selectedRows++;\r\n                            if (!selectHeader.checked) {\r\n                                selectHeader.indeterminate = true;\r\n                                selectHeader.state = \"indeterminate\"; // set the state\r\n                            }\r\n                        }\r\n                    }\r\n                    // redo if stripped table\r\n                    if (table.classList.contains(prefix + \"table-striped\")) {\r\n                        var stripeColor = idx % 2 > 0 ? prefix + \"table-cmplx-row-odd\" : prefix + \"table-cmplx-row-even\";\r\n                        row.classList.add(stripeColor);\r\n                    }\r\n                    frag.appendChild(rows().render(row));\r\n                    if(options.expand) {\r\n                        row.querySelector(\".\" + prefix + \"table-cmplx-accordion-btn\").classList.add(prefix + \"collapsed\");\r\n                        var detailsRow = renderDetails(row, table.headings.length, stripeColor, selected);\r\n                        detailsRow.children[0].classList.remove(prefix + \"show\");\r\n                        frag.appendChild(detailsRow);\r\n                    }\r\n                }, this);\r\n\r\n                if (options.select) {\r\n                    if (selectedRows === page.length) {\r\n                        selectHeader.indeterminate = false;\r\n                        selectHeader.checked = true;\r\n                        selectHeader.state = \"checked\";\r\n                    } else if (selectedRows === 0 && options.select) {\r\n                        selectHeader.indeterminate = false;\r\n                        selectHeader.checked = false;\r\n                        selectHeader.state = \"unchecked\";\r\n                    }\r\n                    handleSelectAllChange(selectHeader.state);\r\n                }\r\n                self.clear(frag);\r\n    \r\n            } else if (searching && totalPages == 0) {\r\n                if (table.hasHeadings) {\r\n                    flush(header, isIE);\r\n    \r\n                    each(table.activeHeadings, function (th) {\r\n                        header.appendChild(th);\r\n                    }, this);\r\n                }\r\n            } else {\r\n                self.clear();\r\n            }\r\n            if(!metHeight) {\r\n                fixHeight();\r\n            }\r\n        },\r\n        renderHeader = function () {\r\n    \r\n            labels = [];\r\n    \r\n            if (table.headings && table.headings.length) {\r\n\r\n                each(table.headings, function (th, i) {\r\n    \r\n                    labels[i] = th.textContent;\r\n    \r\n                    th.sortable = th.hasAttribute(\"data-sortable\");\r\n    \r\n                    th.originalCellIndex = i;\r\n                    if (options.sort && th.sortable) {\r\n                        var sortLabel = createElement(\"label\", {\r\n                            class: prefix + \"table-cmplx-sorter\",\r\n                            html: th.textContent\r\n                        });\r\n                        th.textContent = \"\";\r\n                        th.setAttribute(\"tabindex\",\"0\");\r\n                        th.appendChild(sortLabel);\r\n                    }\r\n                });\r\n            }\r\n    \r\n            fixColumns();\r\n        },\r\n        getHeaderCellIndex = function(selector) {\r\n            var cellIdx = 0;\r\n            each(table.activeHeadings, function(header) {\r\n                each(header.children, function(el) {\r\n                    if (el.classList.contains(selector)) {\r\n                        cellIdx = header.originalCellIndex;\r\n                    }\r\n                });\r\n            });\r\n            return cellIdx;\r\n        },\r\n        bindEvents = function () {\r\n\r\n            // Batch Actions\r\n            if (options.select) {\r\n                var actionSelect = wrapper.querySelector(\"#cmplxTablesActions\");\r\n                actionSelect.addEventListener(\"keydown\", function(e) {\r\n                    if (e.keyCode == 13) {\r\n                        e.preventDefault();\r\n                        var actionButton = e.target.querySelector(\"button\");\r\n                        if (actionButton.innerHTML ===  options.text.deleteRow) {\r\n                            handleDeleteActionEvent();\r\n                        } else if (actionButton.innerHTML === options.text.exportCsv ) {\r\n                            createSpecialCharModal();\r\n                        } else if (actionButton.innerHTML === options.text.exportJson) {\r\n                            handleExportActionEvent(e.target);\r\n                        }\r\n                    }\r\n                });\r\n                actionSelect.addEventListener(\"mousedown\", function(e) {\r\n                    e.preventDefault();\r\n                    var actionButton = e.target;\r\n                    if (actionButton.innerHTML ===  options.text.deleteRow) {\r\n                        handleDeleteActionEvent();\r\n                    } else if (actionButton.innerHTML === options.text.exportCsv ) {\r\n                        createSpecialCharModal();\r\n                    } else if (actionButton.innerHTML === options.text.exportJson) {\r\n                        handleExportActionEvent(e.target);\r\n                    }\r\n                });\r\n            } \r\n\r\n            // Search\r\n            if (options.search) {\r\n                input = wrapper.querySelector(\".\" + prefix + \"table-cmplx-search\").querySelector(\"input[type=search]\");\r\n                if (input) {\r\n                    input.addEventListener(\"keyup\",function (e) {\r\n                        if (e.keyCode === 9 || e.keyCode === 16 || e.keyCode === 13) return;\r\n                        self.search(input.value);\r\n                        e.preventDefault();\r\n                    }, false);\r\n                    input.addEventListener(\"mouseup\", function (e) {\r\n                        var origInput = input.value;\r\n                        setTimeout ( function() {\r\n                            if (input.value == \"\" && origInput != \"\") { //the 'x' was pressed and removed the orig query string\r\n                                self.search(input.value);\r\n                            }\r\n                        }, 100);\r\n                        e.preventDefault();\r\n                    }, false);\r\n                }\r\n            }\r\n    \r\n            // Settings\r\n            if (options.settings) {\r\n                var settingsCtnr = wrapper.querySelector(\".\" + prefix + \"table-cmplx-settings\");\r\n                if (options.column) {\r\n                    var button = settingsCtnr.querySelector(\"button[aria-label='table settings columns']\");\r\n                    button.addEventListener(\"click\", function(e) {\r\n                        if(columnBox.classList.contains(prefix + \"show\")) {\r\n                            columnBox.classList.remove(prefix + \"show\");\r\n                        } else {\r\n                            renderSettingsDropDown();\r\n                            columnBox.classList.add(prefix + \"show\");\r\n                            columnBox.addEventListener(\"click\", function(e) {\r\n                                var t = e.target;\r\n                                if (t.nodeName.toLowerCase() === \"button\") {\r\n                                    handleButtonEvent(t);\r\n                                    settingsCtnr.querySelector(\"button[aria-label='table settings columns']\").focus();\r\n                                } else if(t.nodeName.toLowerCase() === \"input\") {\r\n                                    var applyButton = columnBox.querySelector(\".\"+prefix+\"btn-primary\");\r\n                                    if (applyButton.disabled) {\r\n                                        applyButton.removeAttribute(\"disabled\");\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                        e.preventDefault();\r\n                    }, false);\r\n                }\r\n                \r\n                if (options.print) {\r\n                    button = settingsCtnr.querySelector(\"button[aria-label='table settings print']\");\r\n                    button.addEventListener(\"click\", function(e) {\r\n                        self.print();\r\n                        e.preventDefault();\r\n                    }, false);\r\n                }\r\n\r\n                if (options.import) {\r\n                    var fileImport = settingsCtnr.querySelector(\".\"+prefix+\"table-cmplx-file-import\");\r\n                    fileImport.addEventListener(\"change\", handleImportActionEvent, false);\r\n                    \r\n                    button = settingsCtnr.querySelector(\"button[aria-label='table settings import']\");\r\n                    button.addEventListener(\"click\", function(e) {\r\n                        fileImport.click();\r\n                        e.preventDefault();\r\n                    }, false);\r\n                }\r\n            }        \r\n    \r\n            // All listeners with in the table are should use wrapper.\r\n            // Pager(s) / sorting\r\n            wrapper.addEventListener(\"keydown\" ,function (e) {\r\n                var t = e.target;\r\n                // Checks for headers\r\n                if (t.nodeName.toLowerCase() === \"th\" && e.keyCode === 13) { \r\n                    handleTableHeaderEvent(e,t);\r\n                }\r\n                // Checks for buttons\r\n                if (t.nodeName.toLowerCase() === \"button\" && e.keyCode === 13 && t.classList.contains(prefix+\"table-cmplx-accordion-btn\")) {\r\n                    handleAccordionEvent(t);\r\n                    e.preventDefault();\r\n                }\r\n            }, false);\r\n\r\n            wrapper.addEventListener(\"click\" ,function (e) {\r\n                var t = e.target;\r\n                // Checks for headers\r\n                if (t.classList.contains(prefix+\"table-cmplx-sorter\")) { \r\n                    handleTableHeaderEvent(e,t.parentNode); \r\n                }\r\n                // Checks for buttons\r\n                if (t.nodeName.toLowerCase() === \"button\") {\r\n                    handleAccordionEvent(t);\r\n                    e.preventDefault();\r\n                }\r\n                // Checks for inputs\r\n                if (t.nodeName.toLowerCase() === \"input\") {\r\n                    if(t.type === \"checkbox\") {\r\n                        handleCheckBoxEvent(t);\r\n                    }\r\n                }\r\n            }, false);\r\n        },\r\n        setColumns = function () {\r\n            each(table.data, function (row) {\r\n                each(row.cells, function (cell) {\r\n                    cell.data = cell.innerHTML;\r\n                });\r\n            });\r\n           \r\n            // Check for the columns option\r\n            if (options.data.columns && table.headings.length) {\r\n    \r\n                each(options.data.columns, function (data) {\r\n                   \r\n                    // convert single column selection to array\r\n                    if (!isArray(data.select)) {\r\n                        data.select = [data.select];\r\n                    }\r\n    \r\n                    if (Object.prototype.hasOwnProperty.call(data, \"render\") && (typeof data.render === \"function\" || (typeof data.render === \"string\" && window[data.render]))) {\r\n                        var nCIdx = parseInt(data.select)+baseCellIdx();\r\n                        selectedColumns = selectedColumns.concat(nCIdx);\r\n    \r\n                        columnRenderers.push({\r\n                            columns: nCIdx,\r\n                            renderer: window[data.render]\r\n                        });\r\n                    }\r\n                   \r\n                    // Add the data attributes to the th elements\r\n                    each(data.select, function (column) {\r\n                        var th = table.headings[baseCellIdx()+column];\r\n                        if (data.type) {\r\n                            th.setAttribute(\"data-type\", data.type);\r\n                        }\r\n                        if (data.format) {\r\n                            th.setAttribute(\"data-format\", data.format);\r\n                        }\r\n                        if (options.sort) {\r\n                            if (Object.prototype.hasOwnProperty.call(data, \"sortable\") && data.sortable) {\r\n                                th.setAttribute(\"data-sortable\", \"\");\r\n                                th.setAttribute(\"aria-sort\",\"none\");\r\n                            }\r\n                            if (Object.prototype.hasOwnProperty.call(data, \"sort\")) {\r\n                                th.setAttribute(\"data-sortable\", \"\");\r\n                                th.setAttribute(\"aria-sort\",\"none\");\r\n                            }\r\n                        }\r\n                        if (Object.prototype.hasOwnProperty.call(data, \"fixed\")) {\r\n                            th.setAttribute(\"data-fixed\", data.fixed);\r\n                        }\r\n                        if (Object.prototype.hasOwnProperty.call(data, \"control\")) {\r\n                            th.setAttribute(\"data-control\", data.control);\r\n                        }\r\n                        if (Object.prototype.hasOwnProperty.call(data, \"hidden\")) {\r\n                            if (data.hidden) {\r\n                                columns().hide([baseCellIdx()+column]);\r\n                                self.update();\r\n                            }\r\n                        }\r\n                        if (Object.prototype.hasOwnProperty.call(data, \"sort\") && data.select.length ==1 ) {\r\n                            sortedColumnIdx = baseCellIdx()+data.select[0];\r\n                            columns().sort(sortedColumnIdx, data.sort);\r\n                            self.update();\r\n                            uicoreCustomEvent(\"Table\", \"SortEvent\", table, { \"column\" : sortedColumnIdx, \"direction\" : (data.sort === \"asc\" ? \"ascending\":\"descending\"), \"currentPage\": currentPage, \"perPage\": options.perPage });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n    \r\n            if (table.hasRows) {\r\n                each(table.data, function (row, idx) {\r\n                    row.dataIndex = idx;\r\n                    each(row.cells, function (cell) {\r\n                        cell.data = cell.innerHTML;\r\n                    });\r\n                });\r\n    \r\n                setRenderColumns();\r\n                columns().rebuild();\r\n                self.update();\r\n            }\r\n\r\n            renderHeader();\r\n            \r\n        },\r\n        renderSettingsDropDown = function() {\r\n\r\n            flush(columnBox, isIE);\r\n            var columnContainer = createElement(\"div\", {\r\n                class: prefix + \"table-cmplx-column-cntr\"\r\n            });\r\n\r\n            var unOderedList = createElement(\"ul\");\r\n        \r\n            each(table.headings, function(header, idx) {\r\n\r\n                if (idx >= baseCellIdx() && !header.dataset[\"fixed\"] && (options.rearrangeableColumns || header.dataset[\"control\"] !== \"false\")) {\r\n                    var listItem;\r\n                    var dragSvg;\r\n                    if (options.rearrangeableColumns) {\r\n                        listItem = createElement(\"li\", {\r\n                            class: prefix + \"table-cmplx-drag-li\",\r\n                            draggable: true\r\n                        });\r\n                        dragSvg = renderSvg([{name:\"handle\", show:true}]);\r\n                        setupDragEvents(listItem);\r\n                        moveableCols.push(listItem);\r\n                    } else {\r\n                        listItem = createElement(\"li\", {\r\n                            class: prefix + \"table-cmplx-li\"\r\n                        });\r\n                    }\r\n                    var columnLabel = createElement(\"label\",{ \r\n                        for: idx,\r\n                        class: prefix + \"text-truncate\"\r\n                    });\r\n                    var boxLabel = createElement(\"span\");\r\n                    if (header.dataset[\"control\"] !== \"false\") {\r\n                        var columnInput = createElement(\"input\",{   id: idx,\r\n                            type: \"checkbox\"\r\n                        });\r\n                        columnInput.checked = columns().visible(idx);\r\n                        columnLabel.appendChild(columnInput);\r\n                    } else {\r\n                        boxLabel.style.marginLeft = \"1.75rem\";\r\n                    }\r\n                    boxLabel.innerHTML = header.textContent;\r\n                    columnLabel.appendChild(boxLabel);\r\n                    if(dragSvg) {\r\n                        listItem.appendChild(dragSvg);\r\n                    }\r\n                    listItem.appendChild(columnLabel);\r\n                    unOderedList.appendChild(listItem);\r\n                    columnContainer.appendChild(unOderedList);\r\n                }\r\n            });\r\n            if (columnContainer.querySelectorAll(\"ul\").length === 0) {\r\n                var emptySpan = createElement(\"span\", {\r\n                    class: prefix + \"text-wrap\",\r\n                    html: \"Cannot rearrange or turn columns on/off.\"\r\n                });\r\n                columnContainer.appendChild(emptySpan);\r\n            }\r\n            var buttonContainer = createElement(\"div\", {\r\n                class: prefix + \"row \" + prefix + \"no-gutters\"\r\n            });\r\n            var cancelButton = createElement(\"button\", {\r\n                class: prefix + \"btn \" + prefix + \"btn-secondary\",\r\n                html: options.text.cancel\r\n            });\r\n            var applyButton = createElement(\"button\", {\r\n                class: prefix + \"btn \" + prefix + \"btn-primary\",\r\n                html: options.text.apply,\r\n                disabled: \"\"\r\n            });\r\n            buttonContainer.appendChild(cancelButton);\r\n            buttonContainer.appendChild(applyButton);\r\n            columnContainer.appendChild(buttonContainer);\r\n            columnBox.appendChild(columnContainer);\r\n        },\r\n        paginate = function() {\r\n\r\n            var perPage = options.perPage,\r\n                rows = table.activeRows;\r\n                \r\n            if (searching) {\r\n                rows = [];\r\n    \r\n                each(table.searchData, function (index) {\r\n                    rows.push(table.activeRows[index]);\r\n                }, this);\r\n            }\r\n    \r\n            // Check for hidden columns\r\n            pages = rows\r\n                .map(function (tr, i) {\r\n                    return i % perPage === 0 ? rows.slice(i, i + perPage) : null;\r\n                })\r\n                .filter(function (page) {\r\n                    return page;\r\n                });\r\n    \r\n            totalPages = pages.length;\r\n        },\r\n        fixColumns = function () {\r\n            rect = table.getBoundingClientRect();\r\n            if (   options.fixedColumns \r\n                && table.activeHeadings \r\n                && table.activeHeadings.length\r\n                && !columnsFixed) {\r\n                var cells,\r\n                    hd = false,\r\n                    reducePx = 0;\r\n    \r\n                // If we have headings we need only set the widths on them\r\n                // otherwise we need a temp header and the widths need applying to all cells\r\n                if (table.tHead) {\r\n                    each(table.activeHeadings, function (cell) {\r\n                        cell.style.maxWidth = \"\";\r\n                        cell.style.width = \"\";\r\n                    });\r\n                    var expandDone, selectDone = false;\r\n                    each(table.activeHeadings, function (cell, i) {\r\n                        if ((i==0) && options.expand && !expandDone){\r\n                            expandDone = true;\r\n                            cell.style.maxWidth = \"20px\";\r\n                            cell.style.width = \"20px\";\r\n                            reducePx += 20;\r\n                        }\r\n                        else if ((i==0||i==1) && options.select && !selectDone){\r\n                            selectDone = true;\r\n                            cell.style.maxWidth = \"20px\";\r\n                            cell.style.width = \"20px\";\r\n                            reducePx += 20;\r\n                        }\r\n                        else {\r\n                            var ow = cell.offsetWidth;\r\n                            var w = ow / (rect.width - reducePx) * 100;\r\n                            cell.style.width = w + \"%\";\r\n                        }\r\n                    });\r\n                } else {\r\n                    cells = [];\r\n    \r\n                    // Make temperary headings\r\n                    hd = createElement(\"thead\");\r\n                    var r = createElement(\"tr\");\r\n                    each(table.tBodies[0].rows[0].cells, function() {\r\n                        var th = createElement(\"th\");\r\n                        r.appendChild(th);\r\n                        cells.push(th);\r\n                    });\r\n    \r\n                    hd.appendChild(r);\r\n                    table.insertBefore(hd, body);\r\n    \r\n                    var widths = [];\r\n                    each(cells, function (cell, i) {\r\n                        if ((i==0) && options.expand){\r\n                            reducePx += 20;\r\n                        }\r\n                        else if((i==0||i==1) && options.select){\r\n                            reducePx += 20;\r\n                        } \r\n                        else {\r\n                            var ow = cell.offsetWidth;\r\n                            var w = ow / (rect.width - reducePx) * 100;\r\n                            widths.push(w);\r\n                        }\r\n                    }, this);\r\n    \r\n                    each(table.data, function (row) {\r\n                        each(row.cells, function (cell, i) {\r\n                            if((i==0) && options.expand){\r\n                                cell.style.width = \"20px\";\r\n                            }\r\n                            else if ((i==0||i==1) && options.select){\r\n                                cell.style.width = \"20px\";\r\n                            }\r\n                            else if (columns().visible(baseCellIdx()+cell.cellIndex))\r\n                                cell.style.width = widths[i] + \"%\";\r\n                        }, this);\r\n                    }, this);\r\n    \r\n                    // Discard the temp header\r\n                    table.removeChild(hd);\r\n                }\r\n                columnsFixed = true;\r\n            }\r\n        },\r\n        fixHeight = function () { \r\n            if (options.fixedHeight) {\r\n                container.style.height = null;\r\n                rect = container.getBoundingClientRect();\r\n                container.style.height = rect.height + \"px\";\r\n            }\r\n            metHeight = options.origPerPage <= table.activeRows.length && options.perPage == options.origPerPage;\r\n        },\r\n        resetCollapse = function() {\r\n            each(table.activeRows, function(row) {\r\n                var button = row.querySelector(\".\"+ prefix + \"table-cmplx-accordion-btn\");\r\n                if(button && !button.classList.contains(prefix + \"collapsed\")) {\r\n                    button.classList.add(prefix + \"collapsed\");\r\n                }\r\n            });\r\n        },\r\n        insert = function (data) {\r\n            var newrows = [];\r\n            if (isObject(data)) {\r\n                if (data.headings) {\r\n                    if (!table.hasHeadings && !table.hasRows) {\r\n                        var tr = createElement(\"tr\"),\r\n                            th;\r\n                        each(data.headings, function (heading) {\r\n                            th = createElement(\"th\", {\r\n                                html: heading\r\n                            });\r\n\r\n                            tr.appendChild(th);\r\n                        });\r\n                        head.appendChild(tr);\r\n\r\n                        header = tr;\r\n                        table.headings = [].slice.call(header.cells);\r\n                        table.hasHeadings = true;\r\n\r\n                        // Re-enable sorting if it was disabled due\r\n                        // to missing header\r\n                        // options.sort = initialSortable;\r\n                    }\r\n                }\r\n\r\n                if (data.rows && isArray(data.rows)) {\r\n                    each(data.rows, function (row, rowIdx) {\r\n                        var headerCount = [];\r\n                        for (var l = 0; l < labels.length; l++) {\r\n                            headerCount.push(l);\r\n                        }\r\n                        var padR = 0,\r\n                            r = [];\r\n                        if (options.expand) {\r\n                            r[0] = renderExpand().outerHTML;\r\n                            padR++;\r\n                            delete headerCount[0];\r\n                        }\r\n                        if (options.select) {\r\n                            var selectData = renderSelect().outerHTML;\r\n                            if (options.expand) {\r\n                                r[1] = selectData;\r\n                                padR++;\r\n                                delete headerCount[1];\r\n                            } else {\r\n                                r[0] = selectData;\r\n                                padR++;\r\n                            }\r\n                        }\r\n                        each(row, function (cell, idx) {\r\n                            var index;\r\n                            if(data.headings) {\r\n                                index = labels.indexOf(data.headings[idx]);\r\n                                delete headerCount[index];\r\n                            } else {\r\n                                index = idx;\r\n                            }\r\n                            \r\n                            if (index > -1) {\r\n                                r[index] = cell;\r\n                            }\r\n                        });\r\n                        for (var z = 0; z < headerCount.length; z++) {\r\n                            if (headerCount[z]) {\r\n                                r[headerCount[z]] = \"\";\r\n                            }\r\n                        }\r\n                        if (r.length == (data.headings ? labels.length : (padR + labels.length))) {\r\n                            newrows.push(r);\r\n                        } else {\r\n                            var msg = \"Row found at index, [ \"+rowIdx+\" ] that did not match the current headers.\";\r\n                            console.error(msg);\r\n                            uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (newrows.length) {\r\n                if(data.details) {\r\n                    rows().add(newrows, data.details);\r\n                } else {\r\n                    rows().add(newrows);\r\n                }\r\n                columns().rebuild();\r\n                if(searching) {\r\n                    var query = wrapper.querySelector(\"input[type='search']\").value;\r\n                    self.search(query);\r\n                }\r\n                table.hasRows = true;\r\n            }\r\n\r\n            fixColumns();\r\n            setRenderColumns();\r\n            columns().rebuild();\r\n            self.update();\r\n\r\n            if (!metHeight) {\r\n                fixHeight();\r\n            }\r\n        },\r\n        createSpecialCharModal = function(){\r\n            var modal = document.getElementById(prefix +\"csvSpecialChars\");\r\n            if (!modal) {\r\n                var modalEl = createElement(\"div\", {\r\n                    class: prefix + \"modal \" + prefix + \"fade\",\r\n                    role: \"dialog\",\r\n                    aria_labelledby: prefix + \"modal-title\",\r\n                    id: prefix+\"csvSpecialChars\",\r\n                    tabindex: \"-1\",\r\n                    html: \"<div class=\\\"dds__modal-dialog\\\" role=\\\"document\\\"><div class=\\\"dds__modal-content\\\"><div class=\\\"dds__modal-header\\\">\" +\r\n                        \"<h3 class=\\\"dds__modal-title\\\" id=\\\"dds__modal-title1\\\">CSV with Special Characters</h3></div><button class=\\\"dds__close\\\" data-dismiss=\\\"dds__modal\\\" aria-label=\\\"Close\\\"><span class=\\\"dds__icons dds__close-x\\\" aria-hidden=\\\"true\\\"></span></button>\" +\r\n                        \"<div class=\\\"dds__modal-body\\\"><p>If you are exporting table data that includes special characters, then you may need to use the following process to see these within Excel:</p><ol class=\\\"dds__list-group\\\">\" +\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\">Open <strong>Excel.</strong></li>\" +\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\">Open the <strong>Data menu.</strong></li>\" +\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\">Select the option <strong>From Text/CSV.</strong></li>\" +\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\">Select the <strong>CSV file.</strong> This should open an import dialog.</li>\"+\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\">Go to <strong>File Origin </strong> menu and choose the Unicode (UTF-8) options.</li>\" +\r\n                            \"<li class=\\\"dds__list-group-item-ordered\\\"><strong>Load</strong> the file to complete the process.</li>\" +\r\n                        \"</ol>\" +\r\n                        \"</div>\" +\r\n                        \"<div class=\\\"dds__modal-footer\\\">\" +\r\n                            \"<button class=\\\"dds__btn dds__btn-secondary\\\" data-dismiss=\\\"dds__modal\\\">Cancel</button>\" +\r\n                            \"<button class=\\\"dds__btn dds__btn-primary\\\">Continue Export</button>\" +\r\n                        \"</div>\" +\r\n                        \"</div>\" +\r\n                        \"</div>\"\r\n                });\r\n                wrapper.appendChild(modalEl);\r\n                var batchActions = wrapper.querySelector(\".\"+prefix+\"table-cmplx-action .\" + prefix + \"btn-dropdown\");\r\n                var csvBtn = batchActions.querySelector(\"[data-target='#\"+prefix+\"csvSpecialChars']\");\r\n                setTimeout(function() {\r\n                    var csvModal = new Modal(csvBtn, {\r\n                        static: false\r\n                    });\r\n                    csvModal.show();\r\n                    modal = document.getElementById(prefix +\"csvSpecialChars\");\r\n                    var continueBtn = modal.querySelector(\".\" +prefix +\"btn-primary\");\r\n                    continueBtn.addEventListener(\"click\", function() {\r\n                        handleExportActionEvent(csvBtn);\r\n                    });\r\n                }, 200);\r\n            }\r\n        },\r\n        isUrl = function (value) {\r\n            return value.match(/(?:(?:https?|ftp):\\/\\/|\\b(?:[a-z\\d]+\\.))(?:(?:[^\\s()<>]+|\\((?:[^\\s()<>]+|(?:\\([^\\s()<>]+\\)))?\\))+(?:\\((?:[^\\s()<>]+|(?:\\(?:[^\\s()<>]+\\)))?\\)|[^\\s`!()[\\]{};:'\".,<>?]))?/g);\r\n        },\r\n        isEmail = function(value) {\r\n            /* eslint-disable */ \r\n            return value.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\r\n            /* eslint-enable */ \r\n        },                                 \r\n        modifyText = function(text) {\r\n            text = text.trim();\r\n            text = text.replace(/\\s{2,}/g, \" \");\r\n            text = text.replace(/\\n/g, \"  \");\r\n            text = text.replace(/\"/g, \"\\\"\\\"\");\r\n            if (text.indexOf(\",\") > -1) text = \"\\\"\" + text + \"\\\"\";\r\n            return text;\r\n        };\r\n\r\n    if (!options.header) {\r\n        options.sort = false;\r\n    }\r\n\r\n    if (table.tHead === null) {\r\n        if (!options.data ||\r\n            (options.data && !options.data.headings)\r\n        ) {\r\n            options.sort = false;\r\n        }\r\n    }\r\n\r\n    if (table.tBodies.length && !table.tBodies[0].rows.length) {\r\n        if (options.data) {\r\n            if (!options.data.rows) {\r\n                throw new Error(\r\n                    \"You seem to be using the data option, but you've not defined any rows.\"\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Expand a row\r\n     * @param  {number} rowIdx\r\n     * @return {Void} \r\n     */\r\n    this.expandRow = function(rowIdx) {\r\n        var theRowIdx = validateNum(rowIdx, 0);\r\n\r\n        if (typeof theRowIdx === \"number\") {\r\n            var expandCell = table.activeRows[theRowIdx].querySelector(\".\" + prefix + \"table-cmplx-accordion-btn\");\r\n            handleAccordionEvent(expandCell);\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Update the instance\r\n     * @return {Void}\r\n     */\r\n    this.update = function() {\r\n        // Remove class that was set from setMessage if applicable\r\n        if (!(options.search && searching && table.searchData.length == 0)) {\r\n            wrapper.classList.remove(prefix + \"table-cmplx-empty\");\r\n        }\r\n\r\n        paginate();\r\n\r\n        renderPage();\r\n\r\n        table.sorting = false;\r\n\r\n        rows().update();\r\n\r\n        if (table.hasRows) {\r\n            table.setAttribute(\"aria-rowcount\", table.activeRows.length);\r\n        } else {\r\n            table.setAttribute(\"aria-rowcount\", 0);\r\n        }\r\n\r\n        table.setAttribute(\"aria-colcount\", table.activeHeadings.length);\r\n\r\n        uicoreCustomEvent(\"Table\", \"UpdateEvent\", table);\r\n    };\r\n\r\n    /**\r\n     * Perform a search of the data set\r\n     * @param  {string} query\r\n     * @return {void}\r\n     */\r\n    this.search = function(query) {\r\n        if (!table.hasRows) return false;\r\n        \r\n        resetCollapse();\r\n        \r\n        query = query.toLowerCase();\r\n\r\n        searching = true;\r\n        table.searchData = [];\r\n\r\n        if (!query.length) {\r\n            searching = false;\r\n            if (currentPage != 1) { //if not already on the first page \r\n                pagination.page(1);\r\n                currentPage = 1;\r\n            }\r\n            this.update();\r\n            pagination.setItems(table.activeRows.length);\r\n            uicoreCustomEvent(\"Table\", \"SearchEvent\", table, { \"query\": query, \"searchData\": table.searchData});\r\n            wrapper.classList.remove(\"search-results\");\r\n\r\n            return false;\r\n        }\r\n\r\n        this.clear();\r\n\r\n        each(table.data, function (row, idx) {\r\n            var inArray = table.searchData.indexOf(row) > -1;\r\n\r\n            var doesQueryMatch = query.split(\" \").reduce(function (bool, word) {\r\n                \r\n                var includes = false,\r\n                    cell = null,\r\n                    content = null;\r\n\r\n                for (var x = baseCellIdx(); x < row.cells.length; x++) {\r\n                    cell = row.cells[x];\r\n                    content = cell.hasAttribute(\"data-content\") ? cell.getAttribute(\"data-content\") : cell.textContent;\r\n                    if (\r\n                        content.toLowerCase().indexOf(word) > -1 &&\r\n                        columns().visible(cell.cellIndex)\r\n                    ) {\r\n                        includes = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                return bool && includes;\r\n            }, true);\r\n\r\n            if (doesQueryMatch && !inArray) {\r\n                row.searchIndex = idx;\r\n                table.searchData.push(idx);\r\n            } else {\r\n                row.searchIndex = null;\r\n            }\r\n        }, this);\r\n\r\n        wrapper.classList.add(\"search-results\");\r\n        if (!table.searchData.length) {\r\n            wrapper.classList.remove(\"search-results\");\r\n            this.setMessage(options.labels.noRows);\r\n        } else {\r\n            if (table.searchData.length > options.perPage && currentPage != 1) { //if not already on the first page \r\n                pagination.page(1);\r\n            }\r\n            currentPage = 1;\r\n            this.update();\r\n        }\r\n        pagination.setItems(table.searchData.length);\r\n        uicoreCustomEvent(\"Table\", \"SearchEvent\", table, {\"query\": query, \"searchData\": table.searchData});\r\n    };\r\n\r\n    /**\r\n     * Change page\r\n     * @param  {int} page\r\n     * @return {void}\r\n     */\r\n    this.page = function(page) {\r\n        \r\n        var newPage;\r\n\r\n        if (!isNaN(page)) {\r\n            newPage = parseInt(page, 10);    \r\n        } else {\r\n            newPage = page;\r\n        }\r\n\r\n        if (newPage == currentPage || newPage > pages.length || newPage < 0) {\r\n            return false;\r\n        }\r\n\r\n        currentPage = newPage;\r\n\r\n        renderPage();\r\n\r\n        if (options.items > 0) {\r\n            pagination.page(newPage);\r\n        }\r\n\r\n        uicoreCustomEvent(\"Table\", \"PageChangedEvent\", table, { \"currentPage\": currentPage});\r\n    };\r\n\r\n    this.perPage = function(detail) {\r\n        \r\n        var newPerPage, newPage, newPages;\r\n        if (!isNaN(detail.perPage)) {\r\n            newPerPage = parseInt(detail.perPage, 10);\r\n        } else {\r\n            newPerPage = detail.perPage;\r\n        }\r\n        if (!isNaN(detail.page)) {\r\n            newPage = parseInt(detail.page, 10);\r\n        } else {\r\n            newPage = detail.page;\r\n        }\r\n        if (!isNaN(detail.pages)) {\r\n            newPages = parseInt(detail.pages, 10);\r\n        } else {\r\n            newPages = detail.perPage;\r\n        }\r\n\r\n        if (options.perPage != newPerPage) {\r\n            options.perPage = newPerPage;\r\n            totalPages = newPages;\r\n            currentPage = newPage;\r\n\r\n            this.update();\r\n\r\n            if (options.items > 0) {\r\n                pagination.perPage(newPerPage);\r\n            }\r\n            \r\n            if(!metHeight) {\r\n                fixHeight();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Refresh the instance\r\n     * @return {void}\r\n     */\r\n    this.refresh = function () {\r\n\r\n        var that = this;\r\n        if (options.search) {\r\n            input.value = \"\";\r\n            searching = false;\r\n        }\r\n        currentPage = 1;\r\n        that.update();\r\n\r\n        uicoreCustomEvent(\"Table\", \"RefreshEvent\", table);\r\n    };\r\n\r\n    /**\r\n     * Truncate the table\r\n     * @param  {mixes} html - HTML string or HTMLElement\r\n     * @return {void}\r\n     */\r\n    this.clear = function (html) {\r\n        \r\n        if (body) {\r\n            flush(body, isIE);\r\n        }\r\n\r\n        var parent = body;\r\n        if (!body) {\r\n            parent = table;\r\n        }\r\n\r\n        if (html) {\r\n            if (typeof html === \"string\") {\r\n                var frag = DOC.createDocumentFragment();\r\n                frag.innerHTML = html;\r\n                parent.appendChild(frag);\r\n            } else {\r\n                parent.appendChild(html);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Export table to various formats (csv, txt or sql)\r\n     * @param  {Object} exportOptions User options\r\n     * @return {Boolean}\r\n     */\r\n    this.export = function (exportOptions) {\r\n        if (!table.hasHeadings && !table.hasRows) return false;\r\n\r\n        var headers = table.activeHeadings,\r\n            rows = [],\r\n            arr = [],\r\n            i,\r\n            x,\r\n            str,\r\n            link;\r\n\r\n        var defaults = {\r\n            download: true,\r\n            skipColumn: [],\r\n\r\n            filename: params.exportFileName,\r\n    \r\n            // csv\r\n            lineDelimiter: \"\\n\",\r\n            columnDelimiter: \",\",\r\n\r\n            // sql\r\n            tableName: \"myTable\",\r\n\r\n            // json\r\n            replacer: null,\r\n            space: 4\r\n        };\r\n\r\n        // Check for the options object\r\n        if (!isObject(exportOptions)) {\r\n            return false;\r\n        }\r\n\r\n        var o = extend(defaults, exportOptions);\r\n\r\n        if (o.type) {\r\n            if (options.select) {\r\n                each(table.selectedRows, function(rowIdx) {\r\n                    rows = rows.concat(table.activeRows[rowIdx]);\r\n                });\r\n            } else {\r\n                if (o.currentPage) {\r\n                    rows = rows.concat(pages[currentPage-1]);\r\n                } else {\r\n                    rows = rows.concat(table.activeRows);\r\n                }\r\n            }\r\n            // Only proceed if we have data\r\n            if (rows.length) {\r\n                var blob;\r\n                if (o.type === \"txt\" || o.type === \"csv\") {\r\n                    rows.unshift(header);\r\n                    str = \"\";\r\n\r\n                    each(rows, function(row) {\r\n                        for (x = 0; x < (options.exportDetails ? row.cells.length + 1: row.cells.length) ; x++) {\r\n                            var text;\r\n                            if (x === row.cells.length) {\r\n                                //add details column if exportDetails = true\r\n                                if (rows.indexOf(row) > 0) {\r\n                                    text = table.data[rows.indexOf(row)-1].details ? table.data[rows.indexOf(row)-1].details : null;\r\n                                } else {\r\n                                    text = \"Details\";\r\n                                }\r\n                                if (text) {\r\n                                    str += modifyText(text) + o.columnDelimiter;\r\n                                }\r\n                            } else if (\r\n                                x < row.cells.length &&\r\n                                o.skipColumn.indexOf(headers[x].originalCellIndex) < 0 &&\r\n                                columns(headers[x].originalCellIndex).visible()\r\n                                // Check for column skip and visibility\r\n                            ) {\r\n                                text = row.cells[x].getAttribute(\"data-content\") ? row.cells[x].getAttribute(\"data-content\") : row.cells[x].textContent;\r\n                                text = modifyText(text);\r\n                                \r\n                                var isLink = row.cells[x].querySelector(\"a\");\r\n                                if (isLink) {\r\n                                    text = isLink.getAttribute(\"href\");\r\n                                    if (text.substring(0,2) === \"//\") { //Excel won't interpret `//www.example.com` as a hyperlink, but will for links in format `www.example.com` or `http://www.example.com`)\r\n                                        text = text.substring(2, text.length);\r\n                                    } else if (text.substring(0,7) === \"mailto:\") {\r\n                                        text = text.substring(7,text.length);\r\n                                    }\r\n                                }\r\n                                str += text + o.columnDelimiter;\r\n                            }\r\n                        }\r\n                        // Remove trailing column delimiter\r\n                        str = str.trim().substring(0, str.length - 1);\r\n\r\n                        // Apply line delimiter\r\n                        str += o.lineDelimiter;\r\n                    });\r\n\r\n                    // Remove trailing line delimiter\r\n                    str = str.trim().substring(0, str.length - 1);\r\n\r\n                    if (isIE || isEdge) {\r\n                        str = encodeURI(str);\r\n                        blob = new Blob([decodeURIComponent(str)],{type:\"text/csv;charset=UTF-8\"});\r\n                    }\r\n                } else if (o.type === \"json\") {\r\n                    // Iterate rows\r\n                    each(rows, function(row, idx) {\r\n                        arr[idx] = arr[idx] || {};\r\n                        // Iterate columns\r\n                        for (i = 0; i < (options.exportDetails ? headers.length + 1 : headers.length) ; i++) {\r\n                            if (i === headers.length) {\r\n                                if (table.data[rows.indexOf(row)].details) {\r\n                                    arr[idx][\"Details\"] = table.data[rows.indexOf(row)].details;\r\n                                }\r\n                            } else if (\r\n                                // Check for column skip and column visibility\r\n                                i < row.cells.length &&\r\n                                o.skipColumn.indexOf(headers[i].originalCellIndex) < 0 &&\r\n                                columns(headers[i].originalCellIndex).visible()\r\n                            ) {\r\n                                if (row.cells[i].getAttribute(\"data-content\")) {\r\n                                    var isLink = row.cells[i].querySelector(\"a\");\r\n\r\n                                    if (isLink) { // Aligning with format for exporting to excel\r\n                                        var url = isLink.getAttribute(\"href\");\r\n                                        if (url.substring(0,2) === \"//\") {\r\n                                            arr[idx][headers[i].textContent] =  url.substring(2, url.length);\r\n                                        } else if (url.substring(0,7) === \"mailto:\") {\r\n                                            arr[idx][headers[i].textContent] = url.substring(7, url.length);\r\n                                        } else {\r\n                                            arr[idx][headers[i].textContent] = url;\r\n                                        }\r\n                                    } else {\r\n                                        arr[idx][headers[i].textContent] = row.cells[i].getAttribute(\"data-content\");\r\n                                    }\r\n                                } else {\r\n                                    arr[idx][headers[i].textContent] = row.cells[i].textContent;\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    // Convert the array of objects to JSON string\r\n                    str = JSON.stringify(arr, o.replacer, o.space);\r\n                    if (isIE || isEdge) {\r\n                        blob = new Blob([decodeURIComponent(str)],{type:\"text/json;charset=UTF-8\"});\r\n                    }\r\n                }\r\n\r\n                // Download\r\n                if (o.download) {\r\n                    // Filename\r\n                    o.filename = o.filename || \"datatable_export\";\r\n                    o.filename += \".\" + o.type;\r\n\r\n                   \r\n                    if (isIE || isEdge) {\r\n                        //Internet Explorer\r\n                        window.navigator.msSaveBlob(blob, o.filename);\r\n                    } else {\r\n                        // Create a link to trigger the download\r\n                        if (o.type === \"json\") {\r\n                            str = \"data:application/json;charset=utf-8,\" + str;\r\n                            str = encodeURI(str);\r\n                        } else if (o.type === \"csv\") {\r\n                            str = encodeURI(str);\r\n                            str = \"data:application/csv;charset=utf-8,\" + str;\r\n                        }\r\n                        link = createElement(\"a\", {\r\n                            href: str,\r\n                            download: o.filename\r\n                        });\r\n\r\n                        // Append the link\r\n                        body.appendChild(link);\r\n\r\n                        // Trigger the download\r\n                        link.click();\r\n\r\n                        // Remove the link\r\n                        body.removeChild(link);\r\n                    }\r\n                }\r\n\r\n                return str;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Import data to the table\r\n     * @param  {Object} newData User newData\r\n     * @return {Boolean}\r\n     */\r\n    this.import = function (newData) {\r\n        var obj = false;\r\n        var defaults = {\r\n            // csv\r\n            lineDelimiter: \"\\n\",\r\n            columnDelimiter: \",\"\r\n        };\r\n\r\n        // Check for the newData object\r\n        if (!isObject(newData)) {\r\n            return false;\r\n        }\r\n        newData = extend(defaults, newData);\r\n\r\n        if (newData.data.length || isObject(newData.data)) {\r\n            // Import CSV\r\n            if (newData.type === \"csv\") {\r\n                obj = {\r\n                    rows: [],\r\n                    details: [],\r\n                    headings: []\r\n                };\r\n\r\n                // Split the string into rows\r\n                var rows = newData.data.split(newData.lineDelimiter);\r\n\r\n                if (rows.length) {\r\n                    // var importHeaders = rows[0].replace(/\\r?\\n|\\r/g, \"\").split(newData.columnDelimiter);\r\n                    newData.skipColumn = [];\r\n                    newData.details = -1;\r\n                    // each(importHeaders, function(importHeader, idx) {\r\n                    each(rows[0].replace(/\\r?\\n|\\r/g, \"\").split(newData.columnDelimiter), function(importHeader, idx) {\r\n                        if (labels.indexOf(importHeader) < 0) {\r\n                            if (importHeader != \"Details\") {\r\n                                newData.skipColumn.push(idx);\r\n                            } else {\r\n                                newData.details = idx;\r\n                            }\r\n                        } else {\r\n                            obj.headings.push(importHeader);\r\n                        }\r\n                    });\r\n\r\n                    if(obj.headings) { //.length + baseCellIdx() >= labels.length) {\r\n                        rows.shift();\r\n                        if (rows[rows.length-1] == \"\") {\r\n                            rows = rows.splice(0, rows.length-1);\r\n                        }\r\n                        each(rows, function (row, i) {\r\n                            row = row.replace(/\\r?\\n|\\r/g, \"\");\r\n                            obj.rows[i] = [];\r\n\r\n                            // Split the rows into values\r\n                            each(row.split(newData.columnDelimiter), function(value, v) {\r\n                                if (newData.skipColumn.indexOf(v) == -1 && newData.details != v) {\r\n                                    if (isEmail(value)) {\r\n                                        value = \"<a href=mailto:\" + value + \">\" + value + \"</a>\";\r\n                                    } else if (isUrl(value)) {\r\n                                        value = value.substring(0,3) === \"www\" ? \r\n                                            \"<a href='//\" + value + \"'>\" + value + \"</a>\" :\r\n                                            \"<a href='\" + value + \"'>\" + value + \"</a>\";\r\n                                    }\r\n                                    obj.rows[i].push(value);\r\n                                } else if (newData.details == v) {\r\n                                    obj.details[i] = value;\r\n                                }\r\n                            });\r\n                        });\r\n                    } else {\r\n                        var msg = \"Supplied text/csv file does not contain the correct Header row!\";\r\n                        console.error(msg);\r\n                        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                    }\r\n                }\r\n            } else if (newData.type === \"json\") {\r\n                var json = isJson(newData.data);\r\n\r\n                // Valid JSON string\r\n                if (json) {\r\n                    obj = {\r\n                        rows: [],\r\n                        details: [],\r\n                        headings: []\r\n                    };\r\n\r\n                    if(isArray(json)) {\r\n                        var idx = 0;\r\n                        each(json, function (data) {\r\n                            obj.rows[idx] = [];\r\n                            obj.details[idx] = \"\";\r\n                            each(data, function(value, importHeader) {\r\n                                if (labels.indexOf(importHeader) < 0) {\r\n                                    if (importHeader === \"Details\") {\r\n                                        obj.details[idx] = value;\r\n                                    }\r\n                                } else {\r\n                                    if (obj.headings.indexOf(importHeader) < 0) {\r\n                                        obj.headings.push(importHeader);\r\n                                    }\r\n                                    if (isEmail(value)) {\r\n                                        value = \"<a href=mailto:\" + value + \">\" + value + \"</a>\";\r\n                                    } else if (isUrl(value)) {\r\n                                        value = value.substring(0,3) === \"www\" ?\r\n                                            \"<a href='//\" + value + \"'>\" + value + \"</a>\" :\r\n                                            \"<a href='\" + value + \"'>\" + value + \"</a>\";\r\n                                    }\r\n                                    obj.rows[idx].push(value);\r\n                                }\r\n                            });\r\n                            idx++;\r\n                        });\r\n                    } else {\r\n                        msg = \"That's not valid JSON array data!\";\r\n                        console.error(msg);\r\n                        uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                    }\r\n                } else {\r\n                    msg = \"That's not valid JSON!\";\r\n                    console.error(msg);\r\n                    uicoreCustomEvent(\"Table\", \"Error\", table, {\"msg\": msg});\r\n                }\r\n            } else if (isObject(newData.data)) {\r\n                obj = newData.data;\r\n                obj.details = [];\r\n                each(obj.rows, function(row, idx) {\r\n                    obj.rows[idx] = row.data;\r\n                    obj.details.push(row.details);\r\n                });\r\n            } else {\r\n                return new Error(\"\");\r\n            }\r\n            if (obj) {\r\n                // Add the rows\r\n                insert(obj);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Print the table\r\n     * @return {void}\r\n     */\r\n    this.print = function () {\r\n        var headings = table.activeHeadings;\r\n        var rows = table.activeRows;\r\n\r\n        // Open new window\r\n        var w = window.open();\r\n        var d = w.document;\r\n\r\n        var pTable = d.createElement(\"table\");\r\n        var thead = d.createElement(\"thead\");\r\n        var tbody = d.createElement(\"tbody\");\r\n\r\n        var tr = d.createElement(\"tr\");\r\n        each(headings, function (th) {\r\n            var newTh = d.createElement(\"th\");\r\n            newTh.appendChild(d.createTextNode(th.textContent));\r\n            tr.appendChild(newTh);\r\n        });\r\n\r\n        thead.appendChild(tr);\r\n\r\n        each(rows, function (row) {\r\n            var tr = d.createElement(\"tr\");\r\n            each(row.cells, function (cell) {\r\n                var newCell = d.createElement(\"td\");\r\n                newCell.appendChild(d.createTextNode(cell.textContent));\r\n                tr.appendChild(newCell);\r\n            });\r\n            tbody.appendChild(tr);\r\n        });\r\n\r\n        pTable.appendChild(thead);\r\n        pTable.appendChild(tbody);\r\n\r\n        d.body.appendChild(pTable);\r\n\r\n        // Print\r\n        w.print();\r\n    };\r\n\r\n    /**\r\n     * Show a message in the table\r\n     * @param {string} message\r\n     */\r\n    this.setMessage = function (message) {\r\n\r\n        var colspan = labels.length;\r\n        wrapper.classList.add(prefix + \"table-cmplx-empty\");\r\n\r\n        this.clear(\r\n            createElement(\"tr\", {\r\n                html: \"<td class=\\\"dataTables-empty\\\" colspan=\\\"\" +\r\n                    colspan +\r\n                    \"\\\">\" +\r\n                    message +\r\n                    \"</td>\"\r\n            })\r\n        );\r\n\r\n        if(!metHeight) {\r\n            fixHeight();\r\n        }\r\n    };\r\n\r\n    this.insertDetails = function(rowId, details) {\r\n        var row = table.activeRows[rowId];\r\n        if (row.event != \"ExpandCancelEvent\") {\r\n            var stripeColor = false;\r\n            if (table.classList.contains(prefix + \"table-striped\")) {\r\n                stripeColor = rowId % 2 > 0 ? prefix + \"table-cmplx-row-odd\" : prefix + \"table-cmplx-row-even\";\r\n            }\r\n            table.data[rowId].details = row.details = details;\r\n            renderDetails(row, table.headings.length, stripeColor);\r\n\r\n            var button = row.cells[0].querySelector(\".\" + prefix + \"table-cmplx-accordion-btn\");\r\n            each(row.cells[0].querySelectorAll(\"use\"), function(use) {\r\n                if (use.getAttribute(\"xlink:href\").indexOf(prefix + \"loading-sqrs\") != -1) {\r\n                    classRemove(use, prefix +\"show\");\r\n                } else {\r\n                    classAdd(use, prefix + \"show\");\r\n                    button.classList.remove(prefix + \"collapsed\");\r\n                    button.setAttribute(\"aria-expanded\", true);\r\n                }\r\n            });\r\n            this.update();\r\n            uicoreCustomEvent(\"Table\", \"ExpandEndEvent\", table, {\"rowId\": rowId});\r\n        } else {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    this.delete = function() {\r\n        var that = this;\r\n        if (table.selectedRows.length == 0) {\r\n            return false;\r\n        } else {\r\n            rows().remove(table.selectedRows);\r\n            columns().rebuild();\r\n            pagination.removeItems(table.selectedRows.length);\r\n            if (options.items > 0) {\r\n                options.items -= table.selectedRows.length;\r\n            }\r\n        }\r\n\r\n        if (table.activeRows.length == 0) {\r\n            table.hasRows = false;\r\n            var cell = header.cells[getHeaderCellIndex(prefix + \"table-cmplx-select-all\")];\r\n            var input = cell.querySelector(\"input[type='checkbox']\");\r\n            if (input.checked) {\r\n                input.checked = false;\r\n                input.state = \"unchecked\";\r\n            }\r\n            handleSelectAllChange(input.state);\r\n        }\r\n\r\n        if (searching) {\r\n            var query = wrapper.querySelector(\"input[type='search']\").value;\r\n            var searchResults = table.searchData.length;\r\n            table.searchData = [];\r\n            searching = false;\r\n            if (searchResults == table.selectedRows.length) {\r\n                wrapper.querySelector(\"input[type='search']\").value = \"\";\r\n                that.update();\r\n            } else {\r\n                that.search(query);\r\n            }\r\n        } else {\r\n            that.update();\r\n        }\r\n\r\n        table.selectedRows = [];\r\n        if (!table.hasRows) {\r\n            this.setMessage(options.labels.noRows);\r\n        }\r\n        uicoreCustomEvent(\"Table\",\"DeleteEvent\", table, { \"rowIds\": table.selectedRows});\r\n\r\n    };\r\n\r\n    this.deleteAll = function() {\r\n        var that = this;\r\n        if (table.data.length == 0) {\r\n            return false;\r\n        } else { \r\n            table.data = [];\r\n            pages = [];\r\n            currentPage = 1;\r\n            rows().update();\r\n            columns().rebuild();\r\n            options.items = 0;\r\n            options.perPage = options.origPerPage;\r\n            pagination.setItems(0);\r\n        }\r\n\r\n        table.hasRows = false;\r\n\r\n        if (options.select) {\r\n            var cell = header.cells[getHeaderCellIndex(prefix + \"table-cmplx-select-all\")];\r\n            var input = cell.querySelector(\"input[type='checkbox']\");\r\n            if (input && (input.checked || input.state === \"indeterminate\")) {\r\n                input.click();\r\n                input.checked = false;\r\n                input.state = \"unchecked\";\r\n            }\r\n            handleSelectAllChange(input.state);\r\n        }\r\n\r\n\r\n        if (searching) {\r\n            searching = false;\r\n            wrapper.querySelector(\"input[type='search']\").value = \"\";\r\n        } \r\n        that.update(); \r\n\r\n        this.setMessage(options.labels.noRows);\r\n\r\n        uicoreCustomEvent(\"Table\",\"DeleteAllEvent\", table);  \r\n    };\r\n\r\n    this.setItems = function(items) {\r\n        var newNum = validateNum(items);\r\n        if (!newNum || options.items != 0) {\r\n            return false;\r\n        } else {\r\n            options.items = newNum;\r\n            pagination.setItems(options.items);\r\n        }\r\n    };\r\n\r\n    //init\r\n    if (!(stringTable in element)) {\r\n        // Set the tables Id\r\n        var crypto = window.crypto || window.msCrypto;\r\n        batchId = crypto.getRandomValues(new Uint32Array(10))[0];\r\n        if (options.search && options.text.search.label) {\r\n            searchId = crypto.getRandomValues(new Uint32Array(10))[0];\r\n        }\r\n\r\n        table.data = null; // populated in dataToTable\r\n        table.hasRows = false; // set in render\r\n        table.headings = []; // duplicate commented out of code in render\r\n        table.hasHeadings = false;\r\n        \r\n        // IE detection\r\n        isIE = !!/(msie|trident)/i.test(navigator.userAgent);\r\n\r\n        currentPage = 1;\r\n\r\n        columnRenderers = [];\r\n        selectedColumns = [];\r\n\r\n        \r\n        table.activeHeadings = [];\r\n        \r\n        table.sorting = false;\r\n        \r\n        table.searchData = [];\r\n        table.hiddenColumns = [];\r\n        if (options.select)\r\n            table.selectedRows = [];\r\n\r\n        render();\r\n\r\n        // Options pagination\r\n        if (options.pagination) {\r\n            var itemCount = options.items > 0 ? options.items : table.activeRows.length;\r\n            pagination = new Pagination(paginationElement, {\r\n                perPageSelect: options.perPageSelect,\r\n                perPage: options.perPage,\r\n                items: itemCount,\r\n                pageText: params.text && params.text.pageText,\r\n                itemsPerPageText: params.text && params.text.itemsPerPageText,\r\n                hidePages: params.hidePages,\r\n                external: options.items == 0 ? false : true,\r\n                buttonLabelLeft: options.buttonLabelLeft,\r\n                buttonLabelRight: options.buttonLabelRight,\r\n                disablePaginationInput: options.disablePaginationInput,\r\n                showTotal: options.showTotal\r\n            });\r\n            // Option to override the item count was padded in\r\n            if (options.items == 0) {\r\n                paginationElement.parentNode.addEventListener(\"uicPaginationPageUpdateEvent\", function(e) {\r\n                    self.page(e.detail.page);\r\n                }, false);\r\n                paginationElement.parentNode.addEventListener(\"uicPaginationPerPageUpdateEvent\", function(e) {\r\n                    self.perPage(e.detail);\r\n                }, false);\r\n            } else {\r\n                paginationElement.parentNode.addEventListener(\"uicPaginationPageChangeEvent\", function(e) {\r\n                    if (table.activeRows.length < (e.detail.page * e.detail.perPage)) {\r\n                        var rowsNeeded = (e.detail.page * e.detail.perPage) - table.activeRows.length;\r\n                        if ((e.detail.page * e.detail.perPage) > options.items) {\r\n                            rowsNeeded = options.items - table.activeRows.length;\r\n                        }\r\n                        if (rowsNeeded > 0) {\r\n                            uicoreCustomEvent(\"Table\", \"NewPageEvent\", table, { \"page\": e.detail.page, \"rows\" : rowsNeeded });\r\n                        } else {\r\n                            self.page(e.detail.page);\r\n                        }\r\n                    } else {\r\n                        self.page(e.detail.page);\r\n                    }\r\n                }, false);\r\n                paginationElement.parentNode.addEventListener(\"uicPaginationPerPageChangeEvent\", function(e) {\r\n                    if ((e.detail.page * e.detail.perPage) > table.activeRows.length ) {\r\n                        var rowsNeeded = (e.detail.page * e.detail.perPage) - table.activeRows.length;\r\n                        if ((e.detail.page * e.detail.perPage) <= options.items) {\r\n                            uicoreCustomEvent(\"Table\", \"MoreRowsEvent\", table, { \"page\": e.detail.page, \"perPage\": e.detail.perPage, \"rows\" : rowsNeeded });\r\n                        } else {\r\n                            self.perPage(e.detail);\r\n                        }\r\n                    } else {\r\n                        self.perPage(e.detail);\r\n                    }\r\n                }, false);\r\n            }\r\n        }\r\n\r\n        // Options condensed\r\n        if (options.condensed) {\r\n            wrapper.querySelector(\".\" + prefix + \"table-cmplx\").classList.add(prefix + \"condensed\");\r\n        }\r\n\r\n        each(wrapper.querySelectorAll(\"[data-toggle=\\\"dds__dropdown\\\"]\"), function(drop) {\r\n            if (drop.classList.contains(prefix+\"table-cmplx-action-button\")) {\r\n                new Dropdown(drop);\r\n            }\r\n        });\r\n    }\r\n\r\n    element[stringTable] = self;\r\n}","import {getClosest,globalObject,DOC,prefix,styleTip,emulateTransitionEnd,uicoreCustomEvent, createElement, validateNum, jsonOptionsInit, isIOS} from \"./utilities.js\";\r\n\r\nexport default function Tooltip(element, options) {\r\n    // initialization element\r\n    element = element instanceof HTMLElement ? element : (function() {\r\n        return false;\r\n    })();\r\n\r\n    // set options\r\n    options = options || {};\r\n    options = jsonOptionsInit(element, options);\r\n    var textAlignments = [\"left\", \"center\", \"right\"];\r\n    // init options\r\n    options.title = element.dataset.title ? element.dataset.title : options.data_title ? options.data_title : null,\r\n    options.animation = options.animation && options.animation === \"boolean\" ? options.animation : options.animation && options.animation === prefix + \"fade\" ? prefix + \"fade\" : false;\r\n    options.placement = element.dataset.placement ? element.dataset.placement : options.data_placement ? options.data_placement : null;\r\n    options.textAlign = element.dataset.text_align && textAlignments.indexOf(element.dataset.text_align.toLowerCase()) > -1 \r\n        ? element.dataset.text_align.toLowerCase() : options.text_align && textAlignments.indexOf(options.text_align.toLowerCase()) > -1 \r\n            ? options.text_align.toLowerCase() : \"center\";\r\n    options.delay = element.dataset.delay ? validateNum(element.dataset.delay, 60) : validateNum(options.delay, 60);\r\n    options.container = element.dataset.container ? element.dataset.container : options.container ? options.container : DOC.body;\r\n\r\n    \r\n    // validate options\r\n    (function () {\r\n        if (options.title == null) {\r\n            throw new Error(\"There was a problem found with title value, please correct and try again\");\r\n        }\r\n        if (options.placement == null) {\r\n            throw new Error(\"There was a problem found with placement value, please correct and try again\");\r\n        }\r\n        var inOffCanvas = getClosest(element, \".\" + prefix + \"modal-offcanvas\");\r\n        if(inOffCanvas) {\r\n            options.container = inOffCanvas;\r\n        } else {\r\n            var inFixedTop = getClosest(element, \".fixed-top\");\r\n            if(inFixedTop) {\r\n                options.container = inFixedTop;\r\n            } else {\r\n                var inFixedBottom = getClosest(element, \".fixed-bottom\");\r\n                if(inFixedBottom) {\r\n                    options.container = inFixedBottom;\r\n                }\r\n            }\r\n        }\r\n\r\n    })();\r\n\r\n    // bind, event targets, title and constants\r\n    var self = this,\r\n        stringTooltip = \"Tooltip\",\r\n        mouseHover = \"onmouseleave\" in DOC ? [\"mouseenter\", \"mouseleave\"] : [\"mouseover\", \"mouseout\"],\r\n        tooltip,\r\n        tooltipArrow,\r\n        createToolTip = function() {\r\n\r\n            var tooltipIdText = options.title.replace(/[\\s\\W]/g, \"\").toLowerCase().substring(0, 15);\r\n            var tooltipId = tooltipIdText;\r\n            var counter = 1;\r\n            while (DOC.getElementById(tooltipId)) {\r\n                tooltipId = tooltipIdText + counter;\r\n                counter++;\r\n            }\r\n\r\n            tooltip = createElement(\"div\", {\r\n                role: \"tooltip\",\r\n                aria_describedby: tooltipId\r\n            });\r\n            tooltip.style[\"top\"] = \"0px\"; //move tooltip to top to prevent scrollbar during calculation\r\n\r\n            // tooltip arrow\r\n            tooltipArrow = createElement(\"div\", {\r\n                class: prefix + \"arrow \" + prefix + \"position-absolute \" + prefix + \"d-block\"\r\n            });\r\n\r\n            tooltip.appendChild(tooltipArrow);\r\n            // tooltip inner\r\n\r\n            var tooltipInner = createElement(\"div\", {\r\n                class: prefix+\"tooltip-inner \" + prefix + \"text-\" + options.textAlign,\r\n                html: options.title,\r\n                id: tooltipId\r\n            });\r\n            tooltip.appendChild(tooltipInner);\r\n\r\n            options.container.appendChild(tooltip);\r\n            tooltip.setAttribute(\"class\", prefix+\"tooltip \" + prefix+\"bs-tooltip\"+\"-\"+options.placement + \" \" + options.animation + \" \" + prefix + \"position-absolute \" + prefix + \"d-block \" + prefix + \"break-word\");\r\n        },\r\n        updateTooltip = function() {\r\n            tooltip.setAttribute(\"style\", \"\");\r\n            tooltipArrow.setAttribute(\"style\", \"\");\r\n            styleTip(element, tooltip, options.placement, options.container, true);\r\n        },\r\n        showTooltip = function() {\r\n            !(tooltip.classList.contains(prefix + \"show\")) && tooltip.classList.add(prefix + \"show\");\r\n        },\r\n        // triggers\r\n        showTrigger = function() {\r\n            globalObject.addEventListener(\"resize\", self.hide, false);\r\n            uicoreCustomEvent(\"Tooltip\", \"Shown\", element);\r\n        },\r\n        hideTrigger = function() {\r\n            globalObject.removeEventListener(\"resize\", self.hide);\r\n            uicoreCustomEvent(\"Tooltip\", \"Hidden\", element);\r\n        },\r\n        keyHandler = function(e) {\r\n            var key = e.which || e.keyCode;\r\n            if (key === 27) {\r\n                self.hide(e);\r\n            } else if (key === 13) {\r\n                self.show();\r\n            }\r\n        },\r\n        touchHandler = function(e) {\r\n            if (tooltip.classList.contains(prefix + \"show\")) {\r\n                if ((!e.target === tooltip || !tooltip.contains(e.target)) && element !== e.target) {\r\n                    self.hide();\r\n                }\r\n            }\r\n        };\r\n\r\n    // public methods\r\n    this.show = function() {\r\n        setTimeout(function() {\r\n            updateTooltip();\r\n            showTooltip();\r\n            uicoreCustomEvent(\"Tooltip\", \"ShowEvent\", element);\r\n            options.animation\r\n                ? emulateTransitionEnd(tooltip, showTrigger)\r\n                : showTrigger();\r\n        }, options.delay);\r\n    };\r\n    this.hide = function(e) {\r\n        var target = DOC.activeElement;\r\n        if (e && e.relatedTarget) {\r\n            target = e.relatedTarget;\r\n        }\r\n        if ((!target === tooltip || !tooltip.contains(target)) && target !== element) {\r\n            setTimeout(function() {\r\n                if (tooltip && tooltip.classList.contains(prefix + \"show\")) {\r\n                    uicoreCustomEvent(\"Tooltip\", \"HideEvent\", element);\r\n                    tooltip.classList.remove(prefix + \"show\");\r\n                    options.animation\r\n                        ? emulateTransitionEnd(tooltip, hideTrigger)\r\n                        : hideTrigger();\r\n                }\r\n            }, options.delay);\r\n        }\r\n    };\r\n    this.toggle = function() {\r\n        if (!tooltip) {\r\n            self.show();\r\n        } else {\r\n            self.hide();\r\n        }\r\n    };\r\n\r\n    // init\r\n    if (!(stringTooltip in element)) {\r\n        // prevent adding event handlers twice\r\n        element.setAttribute(\"data-original-title\", options.title);\r\n        element.removeAttribute(\"title\");\r\n        element.addEventListener(mouseHover[0], self.show, false);\r\n        element.addEventListener(\"focusin\", self.show, false);\r\n        element.addEventListener(mouseHover[1], self.hide, false);   \r\n        element.addEventListener(\"focusout\", self.hide, false);\r\n        element.addEventListener(\"keydown\", keyHandler, false);\r\n        if(isIOS){\r\n            element.addEventListener(\"click\", self.show, false);\r\n            window.addEventListener(\"touchstart\", touchHandler, false);\r\n        }\r\n        if (!tooltip) {\r\n            createToolTip();\r\n            tooltip.addEventListener(\"mouseleave\", self.hide, false);\r\n        }\r\n    }\r\n\r\n    element[stringTooltip] = self;\r\n}","import Alert from \"./alert.js\";\r\nimport {BarSelect} from \"./select.js\";\r\nimport {Button} from \"./button.js\";\r\nimport {ButtonFilter} from \"./button.js\";\r\nimport {Carousel} from \"./carousel.js\";\r\nimport {FilmstripCarousel} from \"./carousel.js\";\r\nimport Collapse from \"./collapse.js\";\r\nimport ContactDrawer from \"./contact-drawer.js\";\r\nimport {DatePicker} from \"./select.js\";\r\nimport Dropdown from \"./dropdown.js\";\r\nimport {FilterCollection} from \"./filter.js\";\r\nimport {FilterKeyword} from \"./filter.js\";\r\nimport Form from \"./form.js\";\r\nimport LinkPicker from \"./linkpicker.js\";\r\nimport Masthead from \"./masthead.js\";\r\nimport Modal from \"./modal.js\";\r\nimport {NavAnchored} from \"./nav.js\";\r\nimport {NavAnchoredVertical} from \"./nav.js\";\r\nimport {NavSkip} from \"./nav.js\";\r\nimport {NavLeft} from \"./nav.js\";\r\nimport Pagination from \"./pagination.js\";\r\nimport Popover from \"./popover.js\";\r\nimport ProductStack from \"./product-stack.js\";\r\nimport Progress from \"./progress.js\";\r\nimport {NavSkip as SkipNav} from \"./nav.js\";\r\nimport Slider from \"./slider.js\";\r\nimport {Spinbox} from \"./select.js\";\r\nimport Tab from \"./tab.js\";\r\nimport Table from \"./table.js\";\r\nimport Tooltip from \"./tooltip.js\";\r\nimport { DOC, prefix, handleFirstTab, loadURLSVGs, each } from \"./utilities.js\";\r\n\r\n// globals\r\nvar body = \"body\", // allow the library to be used in <head>\r\n    supports = [];\r\n\r\nvar initializeDataAPI = function (constructor, collection) {\r\n    each(collection, function(i) {\r\n        new constructor(i);\r\n    })\r\n    },\r\n    initCallback = function (lookUp) {\r\n        lookUp = lookUp || DOC;\r\n        each(supports, function(support) {\r\n            initializeDataAPI(\r\n                support[0],\r\n                lookUp[\"querySelectorAll\"](support[1])\r\n            );\r\n\r\n        })\r\n};\r\n\r\n// ALERT DATA API\r\nsupports[\"push\"]([Alert, \"[data-dismiss=\\\"\" + prefix + \"alert\\\"]\"]);\r\n\r\n// BUTTON DATA API\r\nsupports[\"push\"]([Button, \"[data-toggle=\\\"\" + prefix + \"button\\\"]\"]);\r\n\r\n// BUTTON DATA API\r\nsupports[\"push\"]([BarSelect, \"[data-toggle=\\\"\" + prefix + \"bar-select\\\"]\"]);\r\n\r\n// BUTTON FILTER DATA API\r\nsupports[\"push\"]([ButtonFilter, \"[data-toggle=\\\"\" + prefix + \"button-filter\\\"]\"]);\r\n\r\n// CAROUSEL DATA API\r\nsupports[\"push\"]([Carousel, \"[data-ride=\\\"\" + prefix + \"carousel\\\"]\"]);\r\n\r\n// CAROUSEL FILMSTRIP DATA API\r\nsupports[\"push\"]([FilmstripCarousel, \"[data-toggle=\\\"\" + prefix + \"filmstrip-carousel\\\"]\"]);\r\n\r\n// COLLAPSE DATA API\r\nsupports[\"push\"]([Collapse, \"[data-toggle=\\\"\" + prefix + \"collapse\\\"]\"]);\r\n\r\n// CONTACT DRAWER DATA API\r\nsupports[\"push\"]([ContactDrawer, \"[data-toggle=\\\"\" + prefix + \"contact-drawer\\\"]\"]);\r\n\r\n// DROPDOWN DATA API\r\nsupports[\"push\"]([Dropdown, \"[data-toggle=\\\"\" + prefix + \"dropdown\\\"]\"]);\r\n\r\n// DATEPICKER DATA API\r\nsupports[\"push\"]([DatePicker, \"[data-toggle=\\\"\" + prefix + \"datepicker\\\"]\"]);\r\n\r\n// FILTER COLLECTION DATA API\r\nsupports[\"push\"]([FilterCollection, \"[data-toggle=\\\"\" + prefix + \"filter-collection\\\"]\"]);\r\n\r\n// KEYWORD FILTER DATA API\r\nsupports[\"push\"]([FilterKeyword, \"[data-toggle=\\\"\" + prefix + \"filter-keyword\\\"]\"]);\r\n\r\n// FORM CAROUSEL DATA API\r\nsupports[\"push\"]([Form, \"[data-toggle=\\\"\" + prefix + \"form-validation\\\"]\"]);\r\n\r\n// LINKPICKER DATA API\r\nsupports[\"push\"]([LinkPicker, \"[data-toggle=\\\"\" + prefix + \"linkpicker\\\"]\"]);\r\n\r\n// MASTHEAD DATA API\r\nsupports[\"push\"]([Masthead, \"[data-toggle=\\\"\" + prefix + \"msthd\\\"]\"]);\r\n\r\n// MODAL DATA API\r\nsupports[\"push\"]([Modal, \"[data-toggle=\\\"\" + prefix + \"modal\\\"]\"]);\r\n\r\n// NAVIGATION ANCHORED DATA API\r\nsupports[\"push\"]([NavAnchored, \"[data-toggle=\\\"\" + prefix + \"nav-anchored\\\"]\"]);\r\n\r\n// NAVIGATION ANCHORED VERTICAL DATA API\r\nsupports[\"push\"]([NavAnchoredVertical, \"[data-toggle=\\\"\" + prefix + \"nav-anchored-vertical\\\"]\"]);\r\n\r\n// NAV LEFT DATA API\r\nsupports[\"push\"]([NavLeft, \"[data-toggle=\\\"\" + prefix +\"nav-left\\\"]\"]);\r\n\r\n// SKIPNAV DATA API\r\nsupports[\"push\"]([NavSkip, \"[data-toggle=\\\"\" + prefix +\"nav-skip\\\"]\"]);\r\n\r\n// PAGINATION DATA API\r\nsupports[\"push\"]([Pagination, \"[data-toggle=\\\"\" + prefix + \"pagination\\\"]\"]);\r\n\r\n// POPOVER DATA API\r\nsupports[\"push\"]([Popover, \"[data-toggle=\\\"\" + prefix + \"popover\\\"]\"]);\r\n\r\n// PRODUCTSTACK DATA API\r\nsupports[\"push\"]([ProductStack, \"[data-toggle=\\\"\" + prefix + \"product-stack\\\"]\"]);\r\n\r\n// PROGRESS DATA API\r\nsupports[\"push\"]([Progress, \"[data-toggle=\\\"\" + prefix + \"progress\\\"]\"]);\r\n\r\n// SKIPNAV DATA API\r\nsupports[\"push\"]([SkipNav, \"[data-toggle=\\\"\" + prefix +\"nav-skip\\\"]\"]);\r\n\r\n// Slider DATA API\r\nsupports[\"push\"]([Slider, \"[data-toggle=\\\"\" + prefix + \"slider\\\"]\"]);\r\n\r\n// Spinbox DATA API\r\nsupports[\"push\"]([Spinbox, \"[data-toggle=\\\"\" + prefix + \"spinbox\\\"]\"]);\r\n\r\n// TABLE DATA API\r\nsupports[\"push\"]([Table, \"[data-table=\\\"\" + prefix + \"table\\\"]\"]);\r\n\r\n// TAB DATA API\r\nsupports[\"push\"]([Tab, \"[data-toggle=\\\"\" + prefix + \"tab\\\"]\"]);\r\n\r\n// TOOLTIP DATA API\r\nsupports[\"push\"]([Tooltip, \"[data-toggle=\\\"\" + prefix + \"tooltip\\\"]\"]);\r\n\r\n// bulk initialize all components\r\nDOC[body] ? initCallback() : DOC.addEventListener(\"DOMContentLoaded\", function () {\r\n    initCallback();\r\n});\r\n\r\nwindow.addEventListener(\"keydown\", handleFirstTab);\r\n\r\nexport {\r\n    Alert, BarSelect, Button, ButtonFilter, Carousel, Collapse, ContactDrawer, DatePicker, Dropdown, FilmstripCarousel, FilterCollection, FilterKeyword, Form, LinkPicker, Masthead, Modal, NavAnchored, NavAnchoredVertical, NavLeft, NavSkip,  Pagination, Popover, ProductStack, Progress, SkipNav, Slider, Spinbox, Tab, Table, Tooltip,\r\n    handleFirstTab, loadURLSVGs\r\n};\r\n"],"file":"dds-all.min.js"}